(self.webpackChunkacmsWebpackJsonp=self.webpackChunkacmsWebpackJsonp||[]).push([[4303],{67213:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a(23169)),r=s(a(1779)),l=s(a(81919)),i=s(a(54365));function s(e){return e&&e.__esModule?e:{default:e}}var c='<table class="{tableClass}">\n\t\x3c!-- BEGIN row:loop --\x3e\n\t<tr>\n\t\t\x3c!-- \\BEGIN row.{i}.col:loop --\x3e\n\t\t\x3c!-- \\BEGIN type:touch#th --\x3e\n\t\t<th\x3c!-- \\BEGIN colspan:touchnot#1 --\x3e colspan="\\{colspan\\}"\x3c!-- \\END colspan:touchnot#1 --\x3e\x3c!-- \\BEGIN rowspan:touchnot#1 --\x3e rowspan="\\{rowspan\\}"\x3c!-- \\END rowspan:touchnot#1 --\x3e class="\x3c!-- \\BEGIN align:exist --\x3e\\{align\\}[getStyleByAlign]\x3c!-- \\END align:exist --\x3e\x3c!-- \\BEGIN cellClass:exist --\x3e \\{cellClass\\}\x3c!-- \\END cellClass:exist --\x3e">\\{value\\}</th>\n\t\t\x3c!-- \\END type:touch#th --\x3e\n\t\t\x3c!-- \\BEGIN type:touch#td --\x3e\n\t\t<td\x3c!-- \\BEGIN colspan:touchnot#1 --\x3e colspan="\\{colspan\\}"\x3c!-- \\END colspan:touchnot#1 --\x3e\x3c!-- \\BEGIN rowspan:touchnot#1 --\x3e rowspan="\\{rowspan\\}"\x3c!-- \\END rowspan:touchnot#1 --\x3e class="\x3c!-- \\BEGIN align:exist --\x3e\\{align\\}[getStyleByAlign] \x3c!-- \\END align:exist --\x3e\x3c!-- \\BEGIN cellClass:exist --\x3e\\{cellClass\\}\x3c!-- \\END cellClass:exist --\x3e">\\{value\\}</td>\n\t\t\x3c!-- \\END type:touch#td --\x3e\n\t\t\x3c!-- \\END row.{i}.col:loop --\x3e\n\t</tr>\n\t\x3c!-- END row:loop --\x3e\n</table>\n',u={showBtnList:!0,lang:"en",mark:{align:{default:"left",left:"left",center:"center",right:"right"},btn:{group:"a-table-btn-list",item:"a-table-btn",itemActive:"a-table-btn-active"},icon:{alignLeft:"a-table-icon a-table-icon-left",alignCenter:"a-table-icon a-table-icon-center",alignRight:"a-table-icon a-table-icon-right",undo:"a-table-icon a-table-icon-undo",merge:"a-table-icon a-table-icon-merge02",split:"a-table-icon a-table-icon-split02",table:"a-table-icon a-table-icon-th02",source:"a-table-icon a-table-icon-source01",td:"a-table-icon a-table-icon-td03",th:"a-table-icon a-table-icon-th02"},label:"a-table-label",actionGroup:"a-table-action-group",selector:{self:"a-table-selector"}},message:{mergeCells:"merge cell",splitCell:"split cell",changeToTh:"change to th",changeToTd:"change to td",alignLeft:"align left",alignCenter:"align center",alignRight:"align right",addColumnLeft:"insert column on the left",addColumnRight:"insert column on the right",removeColumn:"remove column",addRowTop:"insert row above",addRowBottom:"insert row below",removeRow:"remove row",source:"Source",mergeCellError1:"All possible cells should be selected so to merge cells into one",mergeCellConfirm1:"The top left cell's value of the selected range will only be saved. Are you sure you want to continue?",pasteError1:"You can't paste here",splitError1:"Cell is not selected",splitError2:"Only one cell should be selected",splitError3:"You can't split the cell anymore"}},d=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id=t.getUniqId(),n.menu_id=t.getUniqId(),n.addTemplate(n.id,'\x3c!-- BEGIN showMenu:exist --\x3e\n<ul class="a-table-menu" style="top:{menuY}px;left:{menuX}px;">\n\t\x3c!-- BEGIN mode:touch#cell --\x3e\n\t<li data-action-click="mergeCells">\\{message.mergeCells\\}</li>\n\t<li data-action-click="splitCell">\\{message.splitCell\\}</li>\n\t<li data-action-click="changeCellTypeTo(th)">\\{message.changeToTh\\}</li>\n\t<li data-action-click="changeCellTypeTo(td)">\\{message.changeToTd\\}</li>\n\t<li data-action-click="align(left)">\\{message.alignLeft\\}</li>\n\t<li data-action-click="align(center)">\\{message.alignCenter\\}</li>\n\t<li data-action-click="align(right)">\\{message.alignRight\\}</li>\n\t\x3c!-- END mode:touch#cell --\x3e\n\t\x3c!-- BEGIN mode:touch#col --\x3e\n\t<li data-action-click="insertColLeft({selectedRowNo})">\\{message.addColumnLeft\\}</li>\n\t<li data-action-click="insertColRight({selectedRowNo})">\\{message.addColumnRight\\}</li>\n\t<li data-action-click="removeCol({selectedRowNo})">\\{message.removeColumn\\}</li>\n\t\x3c!-- END mode:touch#col --\x3e\n\t\x3c!-- BEGIN mode:touch#row --\x3e\n\t<li data-action-click="insertRowAbove({selectedColNo})">\\{message.addRowTop\\}</li>\n\t<li data-action-click="insertRowBelow({selectedColNo})">\\{message.addRowBottom\\}</li>\n\t<li data-action-click="removeRow({selectedColNo})">\\{message.removeRow\\}</li>\n\t\x3c!-- END mode:touch#row --\x3e\n</ul>\n\x3c!-- END showMenu:exist --\x3e\n<div class="a-table-wrapper">\n\t\x3c!-- BEGIN inputMode:touch#table --\x3e\n\t<table class="a-table">\n\t\t<tr class="a-table-header js-table-header">\n\t\t\t<th class="a-table-first"></th>\n\t\t\t\x3c!-- BEGIN highestRow:loop --\x3e\n\t\t\t\x3c!-- \\BEGIN selectedRowNo:touch#{i} --\x3e\n\t\t\t<th data-action-click="unselect()" class="selected"><span class="a-table-toggle-btn"></span></th>\n\t\t\t\x3c!-- \\END selectedRowNo:touch#{i} --\x3e\n\t\t\t\x3c!-- \\BEGIN selectedRowNo:touchnot#{i} --\x3e\n\t\t\t<th data-action-click="selectRow({i})"><span class="a-table-toggle-btn"></span></th>\n\t\t\t\x3c!-- \\END selectedRowNo:touchnot#{i} --\x3e\n\t\t\t\n\t\t\t\x3c!-- END highestRow:loop --\x3e\n\t\t</tr>\n\t\t\x3c!-- BEGIN row:loop --\x3e\n\t\t<tr>\n\t\t\t\x3c!-- \\BEGIN selectedColNo:touchnot#{i} --\x3e\n\t\t\t<th class="a-table-side js-table-side" data-action-click="selectCol({i})"><span class="a-table-toggle-btn"></span></th>\n\t\t\t\x3c!-- \\END selectedColNo:touchnot#{i} --\x3e\n\t\t\t\x3c!-- \\BEGIN selectedColNo:touch#{i} --\x3e\n\t\t\t<th class="a-table-side js-table-side selected" data-action-click="unselect()"><span class="a-table-toggle-btn"></span></th>\n\t\t\t\x3c!-- \\END selectedColNo:touch#{i} --\x3e\n\t\t\t\x3c!-- \\BEGIN row.{i}.col:loop --\x3e\n\t\t\t<td colspan="\\{colspan\\}" rowspan="\\{rowspan\\}" data-action="updateTable(\\{i\\},{i})" data-cell-id="\\{i\\}-{i}" class="\x3c!-- \\BEGIN selected:exist --\x3ea-table-selected\x3c!-- \\END selected:exist --\x3e\x3c!-- \\BEGIN type:touch#th --\x3e a-table-th\x3c!-- END \\type:touch#th --\x3e\x3c!-- \\BEGIN mark.top:exist --\x3e a-table-border-top\x3c!-- \\END mark.top:exist --\x3e\x3c!-- \\BEGIN mark.right:exist --\x3e a-table-border-right\x3c!-- \\END mark.right:exist --\x3e\x3c!-- \\BEGIN mark.bottom:exist --\x3e a-table-border-bottom\x3c!-- \\END mark.bottom:exist --\x3e\x3c!-- \\BEGIN mark.left:exist --\x3e a-table-border-left\x3c!-- \\END mark.left:exist --\x3e\x3c!-- \\BEGIN cellClass:exist --\x3e \\{cellClass\\}\x3c!-- \\END cellClass:exist --\x3e"><div class="a-table-editable \\{align\\}" contenteditable>\\{value\\}</div></td>\n\t\t\t\x3c!-- \\END row.{i}.col:loop --\x3e\n\t\t</tr>\n\t\t\x3c!-- END row:loop --\x3e\n\t</table>\n\t\x3c!-- END inputMode:touch#table --\x3e\n\t\x3c!-- BEGIN inputMode:touch#source --\x3e\n\t<textarea data-bind="tableResult" class="a-table-textarea" data-action-input="updateResult"></textarea>\n\t\x3c!-- END inputMode:touch#source --\x3e\n</div>\n'),n.addTemplate(n.menu_id,i.default.removeIndentNewline('\x3c!-- BEGIN showBtnList:exist --\x3e\n<div class="a-table-btn-group-list">\n\t<div class="\\{mark.btn.group\\}">\n\t\t\x3c!-- BEGIN inputMode:touch#table --\x3e\n\t\t<button type="button" class="\\{mark.btn.item\\}" data-action-click="changeInputMode(source)"><i class="\\{mark.icon.source\\}"></i></button>\n\t\t\x3c!-- END inputMode:touch#table --\x3e\n\t\t\x3c!-- BEGIN inputMode:touch#source --\x3e\n\t\t<button type="button" class="\\{mark.btn.itemActive\\}" data-action-click="changeInputMode(table)"><i class="\\{mark.icon.source\\}"></i></button>\n\t\t\x3c!-- END inputMode:touch#source --\x3e\n\t</div>\n\t<div class="\\{mark.btn.group\\}">\n\t\t<button type="button" class="\\{mark.btn.item\\}" data-action-click="mergeCells"><i class="\\{mark.icon.merge\\}"></i></button><button type="button" class="\\{mark.btn.item\\}" data-action-click="splitCell()"><i class="\\{mark.icon.split\\}"></i></button><button type="button" class="\\{mark.btn.item\\}" data-action-click="undo()"><i class="\\{mark.icon.undo\\}"></i></button>\n\t</div>\n\t<div class="\\{mark.btn.group\\}">\n\t\t<button type="button" class="\\{mark.btn.item\\}" data-action-click="changeCellTypeTo(td)">\x3c!-- BEGIN mark.icon.td:empty --\x3etd\x3c!-- END mark.icon.td:empty --\x3e\x3c!-- BEGIN mark.icon.td:exist --\x3e<i class="\\{mark.icon.td\\}"></i>\x3c!-- END mark.icon.td:exist --\x3e</button><button type="button" class="\\{mark.btn.item\\}" data-action-click="changeCellTypeTo(th)">\x3c!-- BEGIN mark.icon.th:empty --\x3eth\x3c!-- END mark.icon.th:empty --\x3e\x3c!-- BEGIN mark.icon.th:exist --\x3e<i class="\\{mark.icon.th\\}"></i>\x3c!-- END mark.icon.th:exist --\x3e</button>\n\t</div>\n\t<div class="\\{mark.btn.group\\}">\n\t\t<button type="button" class="\\{mark.btn.item\\}" data-action-click="align(left)"><i class="\\{mark.icon.alignLeft\\}"></i></button><button type="button" class="\\{mark.btn.item\\}" data-action-click="align(center)"><i class="\\{mark.icon.alignCenter\\}"></i></button><button type="button" class="\\{mark.btn.item\\}" data-action-click="align(right)"><i class="\\{mark.icon.alignRight\\}"></i></button>\n\t</div>\n\t<div class="\\{mark.btn.group\\}">\n\t\t<div class="\\{mark.actionGroup\\}">\n\t\t\t<label class="\\{mark.label\\}">セル</label>\n\t\t\t<select class="\\{mark.selector.self\\}" data-bind="cellClass" data-action-change="changeCellClass()">\n\t\t\t\t<option value="">---</option>\n\t\t\t\t\x3c!-- BEGIN selector.option:loop --\x3e\n\t\t\t\t<option value="{value}">{label}</option>\n\t\t\t\t\x3c!-- END selector.option:loop --\x3e\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t\x3c!-- BEGIN tableOption:exist --\x3e\n\t<div class="\\{mark.btn.group\\}">\n\t\t<div class="\\{mark.actionGroup\\}">\n\t\t\t<label class="\\{mark.label\\}">テーブル</label>\n\t\t\t<select class="\\{mark.selector.self\\}" data-bind="tableClass" data-action-change="update">\n\t\t\t\t<option value="">---</option>\n\t\t\t\t\x3c!-- BEGIN tableOption:loop --\x3e\n\t\t\t\t<option value="{value}">{label}</option>\n\t\t\t\t\x3c!-- END tableOption:loop --\x3e\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t\x3c!-- END tableOption:exist --\x3e\n</div>\n\x3c!-- END showBtnList:exist --\x3e\n')),n.data=(0,l.default)({},u,a);var o=n.data,s="string"==typeof e?document.querySelector(e):e;o.point={x:-1,y:-1},o.selectedRowNo=-1,o.selectedColNo=-1,o.showBtnList=!0,o.row=n.parse("<table>"+s.innerHTML+"</table>"),o.tableResult=n.getTable(),o.tableClass=s.getAttribute("class")||"",o.highestRow=n.highestRow,o.history=[],o.inputMode="table",o.cellClass="",o.history.push((0,r.default)(o.row)),n.convert={},n.convert.getStyleByAlign=n.getStyleByAlign,n.convert.setClass=n.setClass;var c="\n    <div class='a-table-container'>\n        <div data-id='"+n.menu_id+"'></div>\n        <div class='a-table-outer'>\n          <div class='a-table-inner'>\n            <div data-id='"+n.id+"'></div>\n          </div>\n        </div>\n    </div>";return i.default.before(s,c),i.default.removeElement(s),n.update(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"highestRow",value:function(){var e=[],t=this.data.row[0],a=0;return t?(t.col.forEach(function(t){for(var n=parseInt(t.colspan),o=0;o<n;o++)e.push(a),a++}),e):e}},{key:"_getTableLength",value:function(e){return{x:this._getRowLength(e[0].col),y:this._getColLength(e)}}},{key:"_getRowLength",value:function(e){var t=0;return e.forEach(function(e){t+=parseInt(e.colspan)}),t}},{key:"_getColLength",value:function(e){var t=0,a=0;return e.forEach(function(e){0===a&&(a=parseInt(e.col[0].rowspan),t+=a),a--}),t}},{key:"_getElementByQuery",value:function(e){return document.querySelector("[data-id='"+this.id+"'] "+e)}},{key:"_getElementsByQuery",value:function(e){return document.querySelectorAll("[data-id='"+this.id+"'] "+e)}},{key:"_getSelf",value:function(){return document.querySelector("[data-id='"+this.id+"']")}},{key:"getCellByIndex",value:function(e,t){return this._getElementByQuery("[data-cell-id='"+e+"-"+t+"']")}},{key:"getCellInfoByIndex",value:function(e,t){this.id;var a=this.getCellByIndex(e,t);if(!a)return!1;var n=i.default.offset(a),o=n.left,r=n.top,l=-1,s=-1,c=parseInt(a.getAttribute("colspan")),u=parseInt(a.getAttribute("rowspan")),d=this._getElementsByQuery(".js-table-header th"),h=this._getElementsByQuery(".js-table-side");return[].forEach.call(d,function(e,t){i.default.offset(e).left===o&&(l=t)}),[].forEach.call(h,function(e,t){i.default.offset(e).top===r&&(s=t)}),{x:l-1,y:s,width:c,height:u}}},{key:"getLargePoint",value:function(){for(var e=[],t=[],a=[],n=[],o=0,r=arguments.length;o<r;o++)e.push(arguments[o].x),t.push(arguments[o].y),a.push(arguments[o].x+arguments[o].width),n.push(arguments[o].y+arguments[o].height);var l=Math.min.apply(Math,e),i=Math.min.apply(Math,t);return{x:l,y:i,width:Math.max.apply(Math,a)-l,height:Math.max.apply(Math,n)-i}}},{key:"getSelectedPoints",value:function(){var e=[],t=this;return this.data.row.forEach(function(a,n){if(!a.col)return!1;a.col.forEach(function(a,o){if(a.selected){var r=t.getCellInfoByIndex(o,n);r&&e.push(r)}})}),e}},{key:"getSelectedPoint",value:function(){var e=this.getSelectedPoints();if(e&&e[0])return e[0]}},{key:"getAllPoints",value:function(){var e=[],t=this;return this.data.row.forEach(function(a,n){a&&a.col&&a.col.forEach(function(a,o){var r=t.getCellInfoByIndex(o,n);r&&e.push(r)})}),e}},{key:"getCellIndexByPos",value:function(e,t){var a=void 0,n=void 0,o=this;return this.data.row.forEach(function(r,l){r&&r.col&&r.col.forEach(function(r,i){var s=o.getCellInfoByIndex(i,l);s.x===e&&s.y===t&&(a=i,n=l)})}),{row:n,col:a}}},{key:"getCellByPos",value:function(e,t){var a=this.getCellIndexByPos(e,t);if(this.data.row[a.row])return this.data.row[a.row].col[a.col]}},{key:"hitTest",value:function(e,t){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height}},{key:"markup",value:function(){var e=this.data;if(e.splited)e.splited=!1;else{var t=this.getSelectedPoints(),a=this.getLargePoint.apply(null,t),n=this;e.row.forEach(function(e,t){if(!e||!e.col)return!1;e.col.forEach(function(e,o){var r=n.getCellInfoByIndex(o,t),l={};e.selected&&(r.x===a.x&&(l.left=!0),r.x+r.width===a.x+a.width&&(l.right=!0),r.y===a.y&&(l.top=!0),r.y+r.height===a.y+a.height&&(l.bottom=!0)),e.mark=l})})}}},{key:"selectRange",value:function(e,t){var a=this.data;if(a.point){var n=this;a.row[e].col[t].selected=!0;var o=this.getSelectedPoints(),r=this.getLargePoint.apply(null,o);a.row.forEach(function(e,t){if(!e||!e.col)return!1;e.col.forEach(function(e,a){var o=n.getCellInfoByIndex(a,t);o&&n.hitTest(r,o)&&(e.selected=!0)})}),o.length>1&&this.update()}}},{key:"select",value:function(e,t){var a=this.data;a.point={x:t,y:e},a.row.forEach(function(a,n){if(!a||!a.col)return!1;a.col.forEach(function(a,o){n===e&&o===t||(a.selected=!1)})}),a.row[e].col[t].selected||(a.row[e].col[t].selected=!0)}},{key:"unselectCells",value:function(){this.data.row.forEach(function(e,t){if(!e||!e.col)return!1;e.col.forEach(function(e,t){e.selected=!1})})}},{key:"removeCell",value:function(e){for(var t=this.data.row,a=0,n=t.length;a<n;a++)for(var o=t[a].col,r=0,l=o.length;r<l;r++)o[r]===e&&(o.splice(r,1),r--,l--)}},{key:"removeSelectedCellExcept",value:function(e){for(var t=this.data.row,a=0,n=t.length;a<n;a++)for(var o=t[a].col,r=0,l=o.length;r<l;r++){var i=o[r];i!==e&&i.selected&&(o.splice(r,1),r--,l--)}}},{key:"contextmenu",value:function(){var e=this.data;this.e.preventDefault(),e.showMenu=!0,e.menuX=this.e.clientX,e.menuY=this.e.clientY,this.update()}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",a=this,n=[],o=i.default.parseHTML(e).querySelectorAll("tr");return[].forEach.call(o,function(e){var o={},r=[],l=e.querySelectorAll("th,td");o.col=r,[].forEach.call(l,function(e){var n={},o="html"===t?e.innerHTML:e.innerText;"TH"===e.tagName?n.type="th":n.type="td",n.colspan=e.getAttribute("colspan")||1,n.rowspan=e.getAttribute("rowspan")||1,n.value="",o&&(n.value=o.replace(/{(.*?)/g,"&lcub;$1"),n.value=o.replace(/(.*?)}/g,"$1&rcub;"),n.value=n.value.replace(/\\/g,"&#92;"));var l=e.getAttribute("class"),i="";l&&l.split(/\s+/).forEach(function(e){var t=a.getAlignByStyle(e);t?n.align=t:i+=" "+e}),n.cellClass=i.substr(1),r.push(n)}),n.push(o)}),n}},{key:"parseText",value:function(e){var t=[];return(e=e.replace(/"(([\n\r\t]|.)*?)"/g,function(e,t){return t.replace(/[\n\r]/g,"<br>")})).split(String.fromCharCode(13)).forEach(function(e){var a={},n=[];a.col=n,e.split(String.fromCharCode(9)).forEach(function(e){var t={type:"td",colspan:1,rowspan:1,value:""};e&&(t.value=e.replace(/{(.*?)/g,"&lcub;$1"),t.value=e.replace(/(.*?)}/g,"$1&rcub;")),n.push(t)}),t.push(a)}),t}},{key:"getTableClass",value:function(e){return i.default.parseHTML(e).getAttribute("class")}},{key:"toMarkdown",value:function(e){var t=i.default.parseHTML(e),a="",n=t.querySelectorAll("tr");return[].forEach.call(n,function(e,t){a+="| ";var n=e.querySelectorAll("td,th");[].forEach.call(n,function(e){a+=e.innerHTML,a+=" | "}),0===t&&(a+="\n| ",[].forEach.call(n,function(e){a+="--- | "})),a+="\n"}),a}},{key:"getTable",value:function(){return this.getHtml(c,!0).replace(/ class=""/g,"").replace(/class="(.*)? "/g,'class="$1"')}},{key:"getMarkdown",value:function(){return this.toMarkdown(this.getHtml(c,!0))}},{key:"putCaret",value:function(e){if(e)if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}}},{key:"onUpdated",value:function(){var e=this,t=this.getAllPoints(),a=(this.getLargePoint.apply(null,t).width,this._getElementByQuery("table")),n=this._getSelf().parentNode,o=this._getElementByQuery(".a-table-selected .a-table-editable"),r=this.getSelectedPoints();if(o&&!this.data.showMenu&&1===r.length&&setTimeout(function(){e.putCaret(o)},1),a){n.style.width="9999px";var l=a.offsetWidth;n.style.width=l+"px"}else n.style.width="auto";this.afterRendered&&this.afterRendered()}},{key:"undo",value:function(){var e=this.data,t=e.row,a=e.history;if(0!==e.history.length){for(;JSON.stringify(t)===JSON.stringify(e.row);)t=a.pop();t&&(0===a.length&&a.push((0,r.default)(t)),e.row=t,this.update())}}},{key:"insertRow",value:function(e,t){var a=this.data.row;a[e]?a.splice(e,0,{col:t}):a.length===e&&a.push({col:t})}},{key:"insertCellAt",value:function(e,t,a){var n=this.data.row;n[e]&&n[e].col&&n[e].col.splice(t,0,a)}},{key:"unselect",value:function(){var e=this.data;this.unselectCells(),e.selectedColNo=-1,e.selectedRowNo=-1,e.showMenu=!1,this.update()}},{key:"selectRow",value:function(e){var t=this.data;this.unselectCells(),t.showMenu=!1;var a=this.getAllPoints(),n=this.getLargePoint.apply(null,a),o={x:parseInt(e),y:0,width:1,height:n.height},r=[],l=this;a.forEach(function(e){l.hitTest(o,e)&&r.push(e)}),r.forEach(function(e){l.getCellByPos(e.x,e.y).selected=!0}),t.mode="col",t.selectedColNo=-1,t.selectedRowNo=e,this.contextmenu(),this.update()}},{key:"selectCol",value:function(e){var t=this.getAllPoints(),a=this.getLargePoint.apply(null,t),n={x:0,y:parseInt(e),width:a.width,height:1},o=[],r=this,l=this.data;this.unselectCells(),l.showMenu=!1,t.forEach(function(e){r.hitTest(n,e)&&o.push(e)}),o.forEach(function(e){r.getCellByPos(e.x,e.y).selected=!0}),l.mode="row",l.selectedRowNo=-1,l.selectedColNo=e,this.contextmenu(),this.update()}},{key:"removeCol",value:function(e){var t=this.data;t.showMenu=!1;var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:parseInt(e),y:0,width:1,height:o.height},i=[];n.forEach(function(e){a.hitTest(l,e)&&i.push(e)}),i.forEach(function(e){var t=a.getCellByPos(e.x,e.y);1===t.colspan?a.removeCell(t):t.colspan=parseInt(t.colspan)-1}),t.history.push((0,r.default)(t.row)),this.update()}},{key:"removeRow",value:function(e){var t=this.data;t.showMenu=!1;var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:0,y:e=parseInt(e),width:o.width,height:1},i={x:0,y:e+1,width:o.width,height:1},s=[],c=[],u=[];n.forEach(function(e){a.hitTest(l,e)&&s.push(e)}),n.forEach(function(e){if(a.hitTest(i,e)){var t=a.getCellByPos(e.x,e.y);t.x=e.x,e.y===i.y&&u.push(t)}}),s.forEach(function(t){var n=a.getCellByPos(t.x,t.y);1===n.rowspan?c.push(n):(n.rowspan=parseInt(n.rowspan)-1,e===t.y&&(n.x=t.x,u.push(n)))}),u.sort(function(e,t){return e.x>t.x?1:-1}),c.forEach(function(e){a.removeCell(e)}),t.row.splice(e,1),u.length>0&&(t.row[e]={col:u}),t.history.push((0,r.default)(t.row)),this.update()}},{key:"updateTable",value:function(e,a){var n=this.data,o=this.e,l=o.type,s=this.getSelectedPoints(),c=t.isSmartPhone();if("mouseup"!==l||!this.data.showMenu){var u=[parseInt(a),parseInt(e)];if(a=u[0],e=u[1],n.mode="cell",n.selectedRowNo=-1,n.selectedColNo=-1,n.showMenu=!1,"compositionstart"===l)n.beingInput=!0;else if("compositionend"===l)n.beingInput=!1;else if("click"!==l||c)if("keydown"===l&&67==o.keyCode&&(o.ctrlKey||o.metaKey)){var d=this._getElementByQuery(".a-table-selected .a-table-editable");i.default.triggerEvent(d,"copy")}else if("copy"===l)this.copyTable(o);else if("paste"===l)this.pasteTable(o);else if("mousedown"!==l||c)if("mousemove"!==l||c)if("mouseup"!==l||c){if("contextmenu"===l)this.mousedown=!1,this.contextmenu();else if("touchstart"===l)1===s.length&&this.data.row[a].col[e].selected||this.data.beingInput||(this.select(a,e),this.update());else if("input"===l)i.default.hasClass(this.e.target,"a-table-editable")&&this.e.target.parentNode.getAttribute("data-cell-id")===e+"-"+a&&(n.history.push((0,r.default)(n.row)),n.row[a].col[e].value=this.e.target.innerHTML.replace(/{(.*?)/g,"&lcub;$1"),n.row[a].col[e].value=this.e.target.innerHTML.replace(/(.*?)}/g,"$1&rcub;"),n.row[a].col[e].value=n.row[a].col[e].value.replace(/\\/g,"&#92;")),this.afterEntered&&this.afterEntered();else if("keyup"===l){var h=t.getBrowser();-1===h.indexOf("ie")&&"edge"!==h||(i.default.hasClass(this.e.target,"a-table-editable")&&this.e.target.parentNode.getAttribute("data-cell-id")===e+"-"+a&&(n.history.push((0,r.default)(n.row)),n.row[a].col[e].value=this.e.target.innerHTML.replace(/{(.*?)/g,"&lcub;$1"),n.row[a].col[e].value=this.e.target.innerHTML.replace(/(.*?)}/g,"$1&rcub;"),n.row[a].col[e].value=n.row[a].col[e].value.replace(/\\/g,"&#92;")),this.afterEntered&&this.afterEntered())}}else{this.mousedown=!1;var f=this._getElementByQuery(".a-table-selected .a-table-editable");s.length>1&&this.putCaret(f)}else this.mousedown&&this.selectRange(a,e);else 2===this.e.button||this.e.ctrlKey||(this.mousedown=!0,this.data.beingInput||1===s.length&&this.data.row[a].col[e].selected||(this.select(a,e),this.update()));else this.e.shiftKey&&this.selectRange(a,e)}}},{key:"copyTable",value:function(e){if(!(this.getSelectedPoints().length<=1)){e.preventDefault();var t='<meta name="generator" content="Sheets"><table>';this.data.row.forEach(function(e,a){if(!e.col)return!1;t+="<tr>",e.col.forEach(function(e,a){e.selected&&(t+="<"+e.type+' colspan="'+e.colspan+'" rowspan="'+e.rowspan+'">'+e.value+"</"+e.type+">")}),t+="</tr>"}),t=(t=(t+="</table>").replace(/<table>(<tr><\/tr>)*/g,"<table>")).replace(/(<tr><\/tr>)*<\/table>/g,"</table>"),e.clipboardData?e.clipboardData.setData("text/html",t):window.clipboardData&&window.clipboardData.setData("Text",t)}}},{key:"pasteTable",value:function(e){if(e.clipboardData){var t=e.clipboardData.getData("text/html");t||(t=e.clipboardData.getData("text/plain")),this.processPaste(t)}else window.clipboardData&&this.getClipBoardData()}},{key:"getClipBoardData",value:function(){for(var e=document.createDocumentFragment(),t=this.getSelectedPoint(),a=this.getCellIndexByPos(t.x,t.y),n=this.getCellByIndex(a.col,a.row).querySelector(".a-table-editable");n.childNodes.length>0;)e.appendChild(n.childNodes[0]);return this.waitForPastedData(n,e),!0}},{key:"waitForPastedData",value:function(e,t){var a=this;if(e.childNodes&&e.childNodes.length>0){var n=e.innerHTML;e.innerHTML="",e.appendChild(t),this.processPaste(n)}else setTimeout(function(){a.waitForPastedData(e,t)},20)}},{key:"processPaste",value:function(e){var t=this.e;t.preventDefault();var a=this.getSelectedPoint(),n=e.match(/<table(([\n\r\t]|.)*?)>(([\n\r\t]|.)*?)<\/table>/i),o=this.data;if(n&&n[0]){var l=this.parse(n[0],"text");if(l&&l.length)return this.insertTable(l,{x:a.x,y:a.y}),void o.history.push((0,r.default)(o.row))}var s=this.parseText(e);if(s&&s[0]&&s[0].col&&s[0].col.length>1){var c=this.getSelectedPoint();this.insertTable(s,{x:c.x,y:c.y}),this.update(),o.history.push((0,r.default)(o.row))}else if(t.clipboardData){var u=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,u)}else if(window.clipboardData){var d=window.clipboardData.getData("Text");i.default.replaceSelectionWithHtml(d)}}},{key:"insertTable",value:function(e,t){for(var a=this,n=this._getTableLength(this.data.row),o=this._getTableLength(e),l=t.x+o.x-n.x,i=t.y+o.y-n.y,s=n.x,c=(this.data.row,[]),u=[],d=this.data,h=(0,r.default)(d.row);i>0;){for(var f=[],p=0;p<s;p++)f.push({type:"td",colspan:1,rowspan:1,value:""});this.insertRow(n.y,f),i--}l>0&&this.data.row.forEach(function(e){for(var t=0;t<l;t++)e.col.push({type:"td",colspan:1,rowspan:1,value:""})}),this.update();var g={},v={x:t.x,y:t.y};if(v.y+=o.y-1,v.x+=o.x-1,this.data.row.forEach(function(e,t){if(!e.col)return!1;e.col.forEach(function(e,n){var o=a.getCellInfoByIndex(n,t);o.x+o.width-1===v.x&&o.y+o.height-1===v.y&&(g.x=n,g.y=t)})}),void 0===g.x)return alert(this.data.message.pasteError1),this.data.row=h,void this.update();this.selectRange(g.y,g.x);var y=this.getSelectedPoints(),b=this.getLargePoint.apply(null,y);if(b.width!==o.x||b.height!==o.y)return alert(this.data.message.pasteError1),this.data.row=h,void this.update();var x={x:0,y:b.y,width:b.x,height:b.height};this.getAllPoints().forEach(function(e){if(a.hitTest(x,e)){var t=a.getCellIndexByPos(e.x,e.y);a.getCellByPos(e.x,e.y),c.push(t)}}),c.forEach(function(e){var t=e.row;e.row<b.y||(u[t]||(u[t]=[]),u[t].push(e))});for(var m=1,w=u.length;m<w;m++)u[m]&&u[m].sort(function(e,t){return e.col>t.col?1:-1});for(var E=b.y,C=E+b.height;E<C;E++)u[E]||(u[E]=[],u[E].push({row:E,col:-1}));this.removeSelectedCellExcept();var k=0;u.forEach(function(t){var n=t[t.length-1];e[k]&&e[k].col.reverse().forEach(function(e){a.insertCellAt(n.row,n.col+1,{type:"td",colspan:parseInt(e.colspan),rowspan:parseInt(e.rowspan),value:e.value,selected:!0})}),k++}),this.update()}},{key:"updateResult",value:function(){var e=this.data;e.row=this.parse(e.tableResult),e.tableClass=this.getTableClass(e.tableResult),e.history.push((0,r.default)(e.row)),"table"===e.inputMode&&this.update(),this.afterEntered&&this.afterEntered()}},{key:"insertColRight",value:function(e){var t=this.data;t.selectedRowNo=parseInt(e),t.showMenu=!1;var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:parseInt(e),y:0,width:1,height:o.height},i=[];n.forEach(function(e){a.hitTest(l,e)&&i.push(e)}),i.forEach(function(e){var t=a.getCellIndexByPos(e.x,e.y),n=a.getCellByPos(e.x,e.y),o={type:"td",colspan:1,rowspan:n.rowspan,value:""};void 0!==t.row&&void 0!==t.col&&(e.width+e.x-l.x>1?(n.colspan=parseInt(n.colspan)+1,n.colspan+=""):a.insertCellAt(t.row,t.col+1,o))}),t.history.push((0,r.default)(t.row)),this.update()}},{key:"insertColLeft",value:function(e){var t=this.data;e=parseInt(e),t.selectedRowNo=e+1,t.showMenu=!1;var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:parseInt(e)-1,y:0,width:1,height:o.height},i=[];if(n.forEach(function(e){a.hitTest(l,e)&&i.push(e)}),0===e){for(var s=o.height,c=0;c<s;c++)a.insertCellAt(c,0,{type:"td",colspan:1,rowspan:1,value:""});return t.history.push((0,r.default)(t.row)),void a.update()}i.forEach(function(e){var t=a.getCellIndexByPos(e.x,e.y),n=a.getCellByPos(e.x,e.y),o={type:"td",colspan:1,rowspan:n.rowspan,value:""};void 0!==t.row&&void 0!==t.col&&(e.width+e.x-l.x>1?(n.colspan=parseInt(n.colspan)+1,n.colspan+=""):a.insertCellAt(t.row,t.col+1,o))}),t.history.push((0,r.default)(t.row)),this.update()}},{key:"beforeUpdated",value:function(){this.changeSelectOption(),this.markup()}},{key:"insertRowBelow",value:function(e){var t=this.data;t.showMenu=!1,t.selectedColNo=parseInt(e);var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:0,y:(e=parseInt(e))+1,width:o.width,height:1},i=[],s=[];if(n.forEach(function(e){a.hitTest(l,e)&&i.push(e)}),0===i.length){for(var c=o.width,u=0;u<c;u++)s.push({type:"td",colspan:1,rowspan:1,value:""});return a.insertRow(e+1,s),void a.update()}i.forEach(function(t){var n=a.getCellIndexByPos(t.x,t.y),o=a.getCellByPos(t.x,t.y);if(o&&void 0!==n.row&&void 0!==n.col)if(t.height>1&&t.y<=e)o.rowspan=parseInt(o.rowspan)+1,o.rowspan+="";else if(n.row===e+1)for(var r=parseInt(o.colspan),l=0;l<r;l++)s.push({type:"td",colspan:1,rowspan:1,value:""});else a.insertCellAt(n.row+1,n.col,{type:"td",colspan:1,rowspan:1,value:""})}),this.insertRow(e+1,s),t.history.push((0,r.default)(t.row)),this.update()}},{key:"insertRowAbove",value:function(e){var t=this.data;t.showMenu=!1,t.selectedColNo=parseInt(e)+1;var a=this,n=this.getAllPoints(),o=this.getLargePoint.apply(null,n),l={x:0,y:(e=parseInt(e))-1,width:o.width,height:1},i=[],s=[];if(n.forEach(function(e){a.hitTest(l,e)&&i.push(e)}),0===e){for(var c=o.width,u=0;u<c;u++)s.push({type:"td",colspan:1,rowspan:1,value:""});return a.insertRow(0,s),void a.update()}i.forEach(function(t){var n=a.getCellIndexByPos(t.x,t.y),o=a.getCellByPos(t.x,t.y);if(o&&void 0!==n.row&&void 0!==n.col)if(t.height>1)o.rowspan=parseInt(o.rowspan)+1,o.rowspan+="";else if(n.row===e-1)for(var r=parseInt(o.colspan),l=0;l<r;l++)s.push({type:"td",colspan:1,rowspan:1,value:""});else a.insertCellAt(n.row,n.col,{type:"td",colspan:1,rowspan:1,value:""})}),this.insertRow(e,s),t.history.push((0,r.default)(this.data.row)),this.update()}},{key:"mergeCells",value:function(){var e=this.data,t=this.getSelectedPoints();if(this.isSelectedCellsRectangle()){if(0!==t.length&&confirm(this.data.message.mergeCellConfirm1)){var a=this.getLargePoint.apply(null,t),n=this.getCellByPos(a.x,a.y);this.removeSelectedCellExcept(n),n.colspan=a.width,n.rowspan=a.height,e.showMenu=!1,e.history.push((0,r.default)(e.row)),this.update()}}else alert(this.data.message.mergeCellError1)}},{key:"splitCell",value:function(){var e=this.data,t=this.getSelectedPoints().length;if(0!==t)if(t>1)alert(this.data.message.splitError2);else{var a=this.getSelectedPoint(),n={x:0,y:a.y,width:a.x,height:a.height},o=this.getAllPoints(),l=this.getCellIndexByPos(a.x,a.y),i=this.getCellByPos(a.x,a.y),s=parseInt(i.colspan),c=parseInt(i.rowspan),u=i.value,d=this,h=[],f=[];if(1!==s||1!==c){o.forEach(function(e){if(d.hitTest(n,e)){var t=d.getCellIndexByPos(e.x,e.y);d.getCellByPos(e.x,e.y),h.push(t)}}),h.forEach(function(e){var t=e.row;e.row<l.row||(f[t]||(f[t]=[]),f[t].push(e))});for(var p=1,g=f.length;p<g;p++)f[p]&&f[p].sort(function(e,t){return e.col>t.col?1:-1});for(var v=a.y,y=v+c;v<y;v++)f[v]||(f[v]=[],f[v].push({row:v,col:-1}));var b=!0;f.forEach(function(e){for(var t=e[e.length-1],a=0;a<s;a++){var n="";!0===b&&a===s-1&&(n=u,b=!1),d.insertCellAt(t.row,t.col+1,{type:"td",colspan:1,rowspan:1,value:n,selected:!0})}}),this.removeCell(i),e.showMenu=!1,e.history.push((0,r.default)(e.row)),e.splited=!0,this.update()}else alert(this.data.message.splitError3)}else alert(this.data.message.splitError1)}},{key:"changeCellTypeTo",value:function(e){var t=this.data;t.row.forEach(function(t,a){t.col.forEach(function(t,a){t.selected&&(t.type=e)})}),t.showMenu=!1,t.history.push((0,r.default)(t.row)),this.update()}},{key:"align",value:function(e){var t=this.data;t.row.forEach(function(t,a){t.col.forEach(function(t,a){t.selected&&(t.align=e)})}),t.showMenu=!1,t.history.push((0,r.default)(t.row)),this.update()}},{key:"getStyleByAlign",value:function(e){var t=this.data.mark.align;return t.default===e?"":t[e]}},{key:"getAlignByStyle",value:function(e){var t=this.data.mark.align;return t.right===e?"right":t.center===e?"center":t.left===e?"left":void 0}},{key:"isSelectedCellsRectangle",value:function(){var e=this.getSelectedPoints(),t=this.getLargePoint.apply(null,e),a=this.getAllPoints(),n=!0,o=this;return a.forEach(function(e){o.hitTest(t,e)&&(o.getCellByPos(e.x,e.y).selected||(n=!1))}),n}},{key:"changeInputMode",value:function(e){var t=this.data;t.inputMode=e,"source"===e?t.tableResult=this.getTable():(t.row=this.parse(t.tableResult),t.tableClass=this.getTableClass(t.tableResult)),this.update()}},{key:"changeCellClass",value:function(){var e=this.data,t=e.cellClass;e.row.forEach(function(e,a){e.col.forEach(function(e,a){e.selected&&(e.cellClass=t)})}),e.history.push((0,r.default)(e.row)),this.update()}},{key:"changeSelectOption",value:function(){var e=void 0,t=!0,a=this.data;a.row.forEach(function(a){a.col.forEach(function(a){a.selected&&(e?e&&e!==a.cellClass&&(t=!1):e=a.cellClass)})}),a.cellClass=t&&e?e:""}}],[{key:"isSmartPhone",value:function(){var e=navigator.userAgent;return e.indexOf("iPhone")>0||e.indexOf("iPad")>0||e.indexOf("ipod")>0||e.indexOf("Android")>0}},{key:"getBrowser",value:function(){var e=window.navigator.userAgent.toLowerCase(),t=window.navigator.appVersion.toLowerCase(),a="unknown";return-1!=e.indexOf("msie")?a=-1!=t.indexOf("msie 6.")?"ie6":-1!=t.indexOf("msie 7.")?"ie7":-1!=t.indexOf("msie 8.")?"ie8":-1!=t.indexOf("msie 9.")?"ie9":-1!=t.indexOf("msie 10.")?"ie10":"ie":-1!=e.indexOf("trident/7")?a="ie11":-1!=e.indexOf("edge")?a="edge":-1!=e.indexOf("chrome")?a="chrome":-1!=e.indexOf("safari")?a="safari":-1!=e.indexOf("opera")?a="opera":-1!=e.indexOf("firefox")&&(a="firefox"),a}},{key:"getUniqId",value:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}}]),t}(o.default);t.default=d,e.exports=t.default},54365:function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a(1351),e.exports.before=function(e,t){e.insertAdjacentHTML("beforebegin",t)},e.exports.removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},e.exports.offset=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},e.exports.parseHTML=function(e){var t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body.children[0]},e.exports.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},e.exports.replaceSelectionWithHtml=function(e){var t=void 0;if(window.getSelection&&window.getSelection().getRangeAt){(t=window.getSelection().getRangeAt(0)).deleteContents();var a=document.createElement("div");a.innerHTML=e;for(var n=document.createDocumentFragment(),o=void 0;o=a.firstChild;)n.appendChild(o);t.insertNode(n)}else document.selection&&document.selection.createRange&&(t=document.selection.createRange()).pasteHTML(e)},e.exports.extend=function e(t){t=t||{};for(var a=1;a<arguments.length;a++){var o=arguments[a];if(o)for(var r in o)o.hasOwnProperty(r)&&("object"===n(o[r])?t[r]=e(t[r],o[r]):t[r]=o[r])}return t},e.exports.triggerEvent=function(e,t,a){var n=void 0;window.CustomEvent?n=new CustomEvent(t,{cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,a),e.dispatchEvent(n)},e.exports.removeIndentNewline=function(e){return e.replace(/(\n|\t)/g,"")}},23169:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(48063);var o,r=(o=a(48268))&&o.__esModule?o:{default:o},l=a(26441);function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var s="input paste copy click change keydown keyup keypress contextmenu mouseup mousedown mousemove touchstart touchend touchmove compositionstart compositionend focus",c=s.replace(/([a-z]+)/g,"[data-action-$1],")+"[data-action]",u=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.atemplate=[],t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),this.data||(this.data={}),this.templates||(this.templates=[]);for(var n=0,o=this.templates.length;n<o;n+=1){var r=this.templates[n],i=(0,l.selector)("#"+r).innerHTML;this.atemplate.push({id:r,html:i,binded:!1})}}return n(e,[{key:"addDataBind",value:function(e){var t=this;(0,l.on)(e,"[data-bind]","input change click",function(e){var a,n,o=e.delegateTarget,r=o.getAttribute("data-bind"),l=o.getAttribute("href"),i=o.value;l&&(i=i.replace("#","")),"checkbox"===o.getAttribute("type")?(a=[],n=document.querySelectorAll('[data-bind="'+r+'"]'),[].forEach.call(n,function(e){e.checked&&a.push(e.value)})):"radio"!==o.getAttribute("type")&&t.updateDataByString(r,i)})}},{key:"addActionBind",value:function(e){var t=this;(0,l.on)(e,c,s,function(e){var a=e.delegateTarget,n=s.split(" "),o="action";n.forEach(function(t){a.getAttribute("data-action-"+t)&&e.type===t&&(o+="-"+t)});var r=a.getAttribute("data-"+o);if(r){var l,c=r.replace(/\(.*?\);?/,""),u=r.replace(/(.*?)\((.*?)\);?/,"$2").split(",");t.e=e,t.method&&t.method[c]?(l=t.method)[c].apply(l,i(u)):t[c]&&t[c].apply(t,i(u))}})}},{key:"addTemplate",value:function(e,t){this.atemplate.push({id:e,html:t,binded:!1}),this.templates.push(e)}},{key:"getData",value:function(){return JSON.parse(JSON.stringify(this.data))}},{key:"saveData",value:function(e){var t=JSON.stringify(this.data);localStorage.setItem(e,t)}},{key:"setData",value:function(e){var t=this;Object.keys(e).forEach(function(a){"function"!=typeof e[a]&&(t.data[a]=e[a])})}},{key:"loadData",value:function(e){var t=JSON.parse(localStorage.getItem(e));t&&this.setData(t)}},{key:"getRand",value:function(e,t){return~~(Math.random()*(t-e+1))+e}},{key:"getRandText",value:function(e){for(var t="",a=0;a<e;a+=1)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(this.getRand(0,62)));return t}},{key:"getDataFromObj",value:function(e,t){for(var a=(e=(e=e.replace(/\[([\w\-\.ぁ-んァ-ヶ亜-熙]+)\]/g,".$1")).replace(/^\./,"")).split(".");a.length;){var n=a.shift();if(!(n in t))return null;t=t[n]}return t}},{key:"getDataByString",value:function(e){var t=this.data;return this.getDataFromObj(e,t)}},{key:"updateDataByString",value:function(e,t){for(var a=this.data,n=e.split(".");n.length>1;)a=a[n.shift()];a[n.shift()]=t}},{key:"removeDataByString",value:function(e){for(var t=this.data,a=e.split(".");a.length>1;)t=t[a.shift()];var n=a.shift();n.match(/^\d+$/)?t.splice(Number(n),1):delete t[n]}},{key:"resolveBlock",value:function(e,t,a){var n=this,o=e.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):touch#([\w\-\.ぁ-んァ-ヶ亜-熙]+) -->/g),r=e.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):touchnot#([\w\-\.ぁ-んァ-ヶ亜-熙]+) -->/g),l=e.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):exist -->/g),i=e.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):empty -->/g);if(o)for(var s=0,c=o.length;s<c;s+=1){var u=o[s],d=(u=u.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):touch#([\w\-\.ぁ-んァ-ヶ亜-熙]+)/,"($1):touch#($2)")).replace(/BEGIN/,"END"),h=new RegExp(u+"(([\\n\\r\\t]|.)*?)"+d,"g");e=e.replace(h,function(e,a,o,r){return""+("function"==typeof t[a]?t[a].apply(n):n.getDataFromObj(a,t))===o?r:""})}if(r)for(var f=0,p=r.length;f<p;f+=1){var g=r[f],v=(g=g.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):touchnot#([\w\-\.ぁ-んァ-ヶ亜-熙]+)/,"($1):touchnot#($2)")).replace(/BEGIN/,"END"),y=new RegExp(g+"(([\\n\\r\\t]|.)*?)"+v,"g");e=e.replace(y,function(e,a,o,r){return""+("function"==typeof t[a]?t[a].apply(n):n.getDataFromObj(a,t))!==o?r:""})}if(l)for(var b=0,x=l.length;b<x;b+=1){var m=l[b],w=(m=m.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):exist/,"($1):exist")).replace(/BEGIN/,"END"),E=new RegExp(m+"(([\\n\\r\\t]|.)*?)"+w,"g");e=e.replace(E,function(e,a,o){var r="function"==typeof t[a]?t[a].apply(n):n.getDataFromObj(a,t);return r||0===r?o:""})}if(i)for(var C=0,k=i.length;C<k;C+=1){var N=i[C],B=(N=N.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):empty/,"($1):empty")).replace(/BEGIN/,"END"),I=new RegExp(N+"(([\\n\\r\\t]|.)*?)"+B,"g");e=e.replace(I,function(e,a,o){var r="function"==typeof t[a]?t[a].apply(n):n.getDataFromObj(a,t);return r||0===r?"":o})}return e.replace(/{([\w\-\.ぁ-んァ-ヶ亜-熙]+)}(\[([\w\-\.ぁ-んァ-ヶ亜-熙]+)\])*/g,function(e,o,r,l){var i=void 0;if(""+o=="i")i=a;else{if(!t[o]&&0!==t[o])return l&&n.convert&&n.convert[l]?n.convert[l].call(n,""):"";i="function"==typeof t[o]?t[o].apply(n):t[o]}return l&&n.convert&&n.convert[l]?n.convert[l].call(n,i):i})}},{key:"resolveAbsBlock",value:function(e){var t=this;return e.replace(/{(.*?)}/g,function(e,a){var n=t.getDataByString(a);return void 0!==n?"function"==typeof n?n.apply(t):n:e})}},{key:"resolveInclude",value:function(e){return e.replace(/<!-- #include id="(.*?)" -->/g,function(e,t){return(0,l.selector)("#"+t).innerHTML})}},{key:"resolveWith",value:function(e){return e.replace(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):with -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+):with -->/g,function(e,t){return e.replace(/data\-bind=['"](.*?)['"]/g,"data-bind='"+t+".$1'")})}},{key:"resolveLoop",value:function(e){var t=this;return e.replace(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->/g,function(e,a,n){var o,r=t.getDataByString(a),l="";if((o="function"==typeof r?r.apply(t):r)instanceof Array)for(var i=0,s=o.length;i<s;i+=1)l+=t.resolveBlock(n,o[i],i);return l.replace(/\\([^\\])/g,"$1")})}},{key:"removeData",value:function(e){var t=this.data;return Object.keys(t).forEach(function(a){for(var n=0,o=e.length;n<o;n+=1)a===e[n]&&delete t[a]}),this}},{key:"hasLoop",value:function(e){return!!e.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->/g)}},{key:"getHtml",value:function(e,t){var a=this.atemplate.find(function(t){return t.id===e}),n="";if(a&&a.html&&(n=a.html),t&&(n=e),!n)return"";var o=this.data;for(n=this.resolveInclude(n),n=this.resolveWith(n);this.hasLoop(n);)n=this.resolveLoop(n);return n=(n=this.resolveBlock(n,o)).replace(/\\([^\\])/g,"$1"),(n=this.resolveAbsBlock(n)).replace(/^([\t ])*\n/gm,"")}},{key:"update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",a=arguments[1],n=this.templates;this.beforeUpdated&&this.beforeUpdated();for(var o=function(o,i){var s=n[o],c="#"+s,u=e.getHtml(s),d=(0,l.selector)("[data-id='"+s+"']");if(d)if("text"===t)d.innerText=u;else if(a){var h=document.createElement("div");h.innerHTML=u;var f=h.querySelector(a).outerHTML;(0,r.default)(d.querySelector(a),f)}else(0,r.default)(d,"<div data-id='"+s+"'>"+u+"</div>");else(0,l.selector)(c).insertAdjacentHTML("afterend",'<div data-id="'+s+'"></div>'),"text"===t?(0,l.selector)("[data-id='"+s+"']").innerText=u:(0,l.selector)("[data-id='"+s+"']").innerHTML=u;var p=e.atemplate.find(function(e){return e.id===s});p.binded||(p.binded=!0,e.addDataBind((0,l.selector)("[data-id='"+s+"']")),e.addActionBind((0,l.selector)("[data-id='"+s+"']")))},i=0,s=n.length;i<s;i+=1)o(i);return this.updateBindingData(a),this.onUpdated&&this.onUpdated(a),this}},{key:"updateBindingData",value:function(e){for(var t=this,a=this.templates,n=0,o=a.length;n<o;n+=1){var r=a[n],i=(0,l.selector)("[data-id='"+r+"']");e&&(i=i.querySelector(e));var s=i.querySelectorAll("[data-bind]");[].forEach.call(s,function(e){var a=t.getDataByString(e.getAttribute("data-bind"));"checkbox"===e.getAttribute("type")||"radio"===e.getAttribute("type")?a===e.value&&(e.checked=!0):e.value=a});var c=i.querySelectorAll("[data-bind-oneway]");[].forEach.call(c,function(e){var a=t.getDataByString(e.getAttribute("data-bind-oneway"));"checkbox"===e.getAttribute("type")||"radio"===e.getAttribute("type")?a===e.value&&(e.checked=!0):e.value=a})}return this}},{key:"applyMethod",value:function(e){for(var t,a=arguments.length,n=Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return(t=this.method)[e].apply(t,n)}},{key:"getComputedProp",value:function(e){return this.data[e].apply(this)}},{key:"remove",value:function(e){for(var t=this.data,a=e.split(".");a.length>1;)t=t[a.shift()];var n=a.shift();return n.match(/^\d+$/)?t.splice(Number(n),1):delete t[n],this}}]),e}();t.default=u,e.exports=t.default},26441:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.matches=function(e,t){for(var a=(e.document||e.ownerDocument).querySelectorAll(t),n=a.length;--n>=0&&a.item(n)!==e;);return n>-1},n=(t.selector=function(e){return document.querySelector(e)},t.findAncestor=function(e,t){if("function"==typeof e.closest)return e.closest(t)||null;for(;e&&e!==document;){if(a(e,t))return e;e=e.parentElement}return null});t.on=function(e,t,a,o){a.split(" ").forEach(function(a){e.addEventListener(a,function(e){e.target;var a=n(e.target,t);a&&(e.delegateTarget=a,o(e))})})}},92815:function(e,t,a){var n=a(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{onChange:a,...n}=t,r=e.querySelector(ACMS.Config.aTableMark);if(null===r)throw new Error("a-table root element not found");if(r.aTable instanceof o.default)return r.aTable;const l=r.querySelector(ACMS.Config.aTableDestMark),i=r.querySelector("table");if(null===i)throw new Error("a-table table element not found");const s=new o.default(i,{mark:ACMS.Config.aTableConf,selector:{option:ACMS.Config.aTableSelector},tableOption:ACMS.Config.aTableOption,message:ACMS.Config.aTableMessage,...n});return s.afterRendered=()=>{const e=s.getTable();null!==l&&(l.value=e),a?.(e)},s.afterEntered=()=>{const e=s.getTable();null!==l&&(l.value=e),a?.(e)},s.afterRendered(),r.aTable=s,s};var o=n(a(67213));a(13980)},1779:function(e,t,a){var n=a(48287).hp,o=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,a,o;try{t=Map}catch(e){t=function(){}}try{a=Set}catch(e){a=function(){}}try{o=Promise}catch(e){o=function(){}}function r(l,s,c,u,d){"object"==typeof s&&(c=s.depth,u=s.prototype,d=s.includeNonEnumerable,s=s.circular);var h=[],f=[],p=void 0!==n;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function l(c,g){if(null===c)return null;if(0===g)return c;var v,y;if("object"!=typeof c)return c;if(e(c,t))v=new t;else if(e(c,a))v=new a;else if(e(c,o))v=new o(function(e,t){c.then(function(t){e(l(t,g-1))},function(e){t(l(e,g-1))})});else if(r.__isArray(c))v=[];else if(r.__isRegExp(c))v=new RegExp(c.source,i(c)),c.lastIndex&&(v.lastIndex=c.lastIndex);else if(r.__isDate(c))v=new Date(c.getTime());else{if(p&&n.isBuffer(c))return v=n.allocUnsafe?n.allocUnsafe(c.length):new n(c.length),c.copy(v),v;e(c,Error)?v=Object.create(c):void 0===u?(y=Object.getPrototypeOf(c),v=Object.create(y)):(v=Object.create(u),y=u)}if(s){var b=h.indexOf(c);if(-1!=b)return f[b];h.push(c),f.push(v)}for(var x in e(c,t)&&c.forEach(function(e,t){var a=l(t,g-1),n=l(e,g-1);v.set(a,n)}),e(c,a)&&c.forEach(function(e){var t=l(e,g-1);v.add(t)}),c){var m;y&&(m=Object.getOwnPropertyDescriptor(y,x)),m&&null==m.set||(v[x]=l(c[x],g-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(c);for(x=0;x<w.length;x++){var E=w[x];(!(k=Object.getOwnPropertyDescriptor(c,E))||k.enumerable||d)&&(v[E]=l(c[E],g-1),k.enumerable||Object.defineProperty(v,E,{enumerable:!1}))}}if(d){var C=Object.getOwnPropertyNames(c);for(x=0;x<C.length;x++){var k,N=C[x];(k=Object.getOwnPropertyDescriptor(c,N))&&k.enumerable||(v[N]=l(c[N],g-1),Object.defineProperty(v,N,{enumerable:!1}))}}return v}(l,c)}function l(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return r.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},r.__objToStr=l,r.__isDate=function(e){return"object"==typeof e&&"[object Date]"===l(e)},r.__isArray=function(e){return"object"==typeof e&&"[object Array]"===l(e)},r.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===l(e)},r.__getRegExpFlags=i,r}();e.exports&&(e.exports=o)},1351:function(){try{var e=new window.CustomEvent("test");if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var a,n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(a=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n=a.preventDefault,a.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},a};t.prototype=window.Event.prototype,window.CustomEvent=t}},81919:function(e,t,a){"use strict";var n=a(48287).hp;function o(e){return e instanceof n||e instanceof Date||e instanceof RegExp}function r(e){if(e instanceof n){var t=n.alloc?n.alloc(e.length):new n(e.length);return e.copy(t),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function l(e){var t=[];return e.forEach(function(e,a){"object"==typeof e&&null!==e?Array.isArray(e)?t[a]=l(e):o(e)?t[a]=r(e):t[a]=s({},e):t[a]=e}),t}function i(e,t){return"__proto__"===t?void 0:e[t]}var s=e.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,t,a=arguments[0];return Array.prototype.slice.call(arguments,1).forEach(function(n){"object"!=typeof n||null===n||Array.isArray(n)||Object.keys(n).forEach(function(c){return t=i(a,c),(e=i(n,c))===a?void 0:"object"!=typeof e||null===e?void(a[c]=e):Array.isArray(e)?void(a[c]=l(e)):o(e)?void(a[c]=r(e)):"object"!=typeof t||null===t||Array.isArray(t)?void(a[c]=s({},e)):void(a[c]=s(t,e))})}),a}},48063:function(){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<a;){var r=t[o];if(e.call(n,r,o,t))return r;o++}}})},13980:function(e,t,a){"use strict";a.r(t)},48268:function(e){"use strict";var t,a="undefined"==typeof document?void 0:document,n=a?a.body||a.createElement("div"):{},o=n.hasAttributeNS?function(e,t,a){return e.hasAttributeNS(t,a)}:n.hasAttribute?function(e,t,a){return e.hasAttribute(a)}:function(e,t,a){return null!=e.getAttributeNode(t,a)};function r(e,t){var a=e.nodeName,n=t.nodeName;return a===n||!!(t.actualize&&a.charCodeAt(0)<91&&n.charCodeAt(0)>90)&&a===n.toUpperCase()}function l(e,t,a){e[a]!==t[a]&&(e[a]=t[a],e[a]?e.setAttribute(a,""):e.removeAttribute(a,""))}var i={OPTION:function(e,t){l(e,t,"selected")},INPUT:function(e,t){l(e,t,"checked"),l(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),o(t,null,"value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var a=t.value;e.value!==a&&(e.value=a);var n=e.firstChild;if(n){var o=n.nodeValue;if(o==a||!a&&o==e.placeholder)return;n.nodeValue=a}},SELECT:function(e,t){if(!o(t,null,"multiple")){for(var a=0,n=t.firstChild;n;){var r=n.nodeName;if(r&&"OPTION"===r.toUpperCase()){if(o(n,null,"selected"))break;a++}n=n.nextSibling}e.selectedIndex=a}}};function s(){}function c(e){return e.id}var u=function(e,n,l){if(l||(l={}),"string"==typeof n)if("#document"===e.nodeName||"HTML"===e.nodeName){var u=n;(n=a.createElement("html")).innerHTML=u}else d=n,!t&&a.createRange&&(t=a.createRange()).selectNode(a.body),t&&t.createContextualFragment?h=t.createContextualFragment(d):(h=a.createElement("body")).innerHTML=d,n=h.childNodes[0];var d,h,f,p=l.getNodeKey||c,g=l.onBeforeNodeAdded||s,v=l.onNodeAdded||s,y=l.onBeforeElUpdated||s,b=l.onElUpdated||s,x=l.onBeforeNodeDiscarded||s,m=l.onNodeDiscarded||s,w=l.onBeforeElChildrenUpdated||s,E=!0===l.childrenOnly,C={};function k(e){f?f.push(e):f=[e]}function N(e,t){if(1===e.nodeType)for(var a=e.firstChild;a;){var n=void 0;t&&(n=p(a))?k(n):(m(a),a.firstChild&&N(a,t)),a=a.nextSibling}}function B(e,t,a){!1!==x(e)&&(t&&t.removeChild(e),m(e),N(e,a))}function I(e){v(e);for(var t=e.firstChild;t;){var a=t.nextSibling,n=p(t);if(n){var o=C[n];o&&r(t,o)&&(t.parentNode.replaceChild(o,t),T(o,t))}I(t),t=a}}function T(t,l,s){var c,u=p(l);if(u&&delete C[u],!n.isSameNode||!n.isSameNode(e)){if(!s){if(!1===y(t,l))return;if(function(e,t){var a,n,r,l,i,s=t.attributes;for(a=s.length-1;a>=0;--a)r=(n=s[a]).name,l=n.namespaceURI,i=n.value,l?(r=n.localName||r,e.getAttributeNS(l,r)!==i&&e.setAttributeNS(l,r,i)):e.getAttribute(r)!==i&&e.setAttribute(r,i);for(a=(s=e.attributes).length-1;a>=0;--a)!1!==(n=s[a]).specified&&(r=n.name,(l=n.namespaceURI)?(r=n.localName||r,o(t,l,r)||e.removeAttributeNS(l,r)):o(t,null,r)||e.removeAttribute(r))}(t,l),b(t),!1===w(t,l))return}if("TEXTAREA"!==t.nodeName){var d,h,f,v,x=l.firstChild,m=t.firstChild;e:for(;x;){for(f=x.nextSibling,d=p(x);m;){if(h=m.nextSibling,x.isSameNode&&x.isSameNode(m)){x=f,m=h;continue e}c=p(m);var E=m.nodeType,N=void 0;if(E===x.nodeType&&(1===E?(d?d!==c&&((v=C[d])?m.nextSibling===v?N=!1:(t.insertBefore(v,m),h=m.nextSibling,c?k(c):B(m,t,!0),m=v):N=!1):c&&(N=!1),(N=!1!==N&&r(m,x))&&T(m,x)):3!==E&&8!=E||(N=!0,m.nodeValue!==x.nodeValue&&(m.nodeValue=x.nodeValue))),N){x=f,m=h;continue e}c?k(c):B(m,t,!0),m=h}if(d&&(v=C[d])&&r(v,x))t.appendChild(v),T(v,x);else{var A=g(x);!1!==A&&(A&&(x=A),x.actualize&&(x=x.actualize(t.ownerDocument||a)),t.appendChild(x),I(x))}x=f,m=h}for(;m;)h=m.nextSibling,(c=p(m))?k(c):B(m,t,!0),m=h}var D=i[t.nodeName];D&&D(t,l)}}!function e(t){if(1===t.nodeType)for(var a=t.firstChild;a;){var n=p(a);n&&(C[n]=a),e(a),a=a.nextSibling}}(e);var A,D,S=e,P=S.nodeType,R=n.nodeType;if(!E)if(1===P)1===R?r(e,n)||(m(e),S=function(e,t){for(var a=e.firstChild;a;){var n=a.nextSibling;t.appendChild(a),a=n}return t}(e,(A=n.nodeName,(D=n.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==D?a.createElementNS(D,A):a.createElement(A)))):S=n;else if(3===P||8===P){if(R===P)return S.nodeValue!==n.nodeValue&&(S.nodeValue=n.nodeValue),S;S=n}if(S===n)m(e);else if(T(S,n,E),f)for(var M=0,O=f.length;M<O;M++){var L=C[f[M]];L&&B(L,L.parentNode,!1)}return!E&&S!==e&&e.parentNode&&(S.actualize&&(S=S.actualize(e.ownerDocument||a)),e.parentNode.replaceChild(S,e)),S};e.exports=u}}]);