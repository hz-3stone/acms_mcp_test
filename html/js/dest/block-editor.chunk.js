(self.webpackChunkacmsWebpackJsonp=self.webpackChunkacmsWebpackJsonp||[]).push([[640,4364,2136],{43375:function(e,t,n){"use strict";n.r(t),n.d(t,{AutoScrollActivator:function(){return we},DndContext:function(){return Ye},DragOverlay:function(){return ht},KeyboardCode:function(){return oe},KeyboardSensor:function(){return ce},MeasuringFrequency:function(){return Ce},MeasuringStrategy:function(){return Se},MouseSensor:function(){return ve},PointerSensor:function(){return he},TouchSensor:function(){return be},TraversalOrder:function(){return ke},applyModifiers:function(){return qe},closestCenter:function(){return O},closestCorners:function(){return A},defaultAnnouncements:function(){return f},defaultCoordinates:function(){return y},defaultDropAnimation:function(){return dt},defaultDropAnimationSideEffects:function(){return ut},defaultScreenReaderInstructions:function(){return d},getClientRect:function(){return L},getFirstCollision:function(){return C},getScrollableAncestors:function(){return B},pointerWithin:function(){return N},rectIntersection:function(){return T},useDndContext:function(){return et},useDndMonitor:function(){return u},useDraggable:function(){return Ze},useDroppable:function(){return rt},useSensor:function(){return g},useSensors:function(){return v}});var r=n(96540),o=n(40961),i=n(74979);const a={display:"none"};function s(e){let{id:t,value:n}=e;return r.createElement("div",{id:t,style:a},n)}function l(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;return r.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}const c=(0,r.createContext)(null);function u(e){const t=(0,r.useContext)(c);(0,r.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}const d={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},f={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function p(e){let{announcements:t=f,container:n,hiddenTextDescribedById:a,screenReaderInstructions:c=d}=e;const{announce:p,announcement:h}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),m=(0,i.useUniqueId)("DndLiveRegion"),[g,v]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{v(!0)},[]),u((0,r.useMemo)(()=>({onDragStart(e){let{active:n}=e;p(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&p(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;p(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;p(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;p(t.onDragCancel({active:n,over:r}))}}),[p,t])),!g)return null;const y=r.createElement(r.Fragment,null,r.createElement(s,{id:a,value:c.draggable}),r.createElement(l,{id:m,announcement:h}));return n?(0,o.createPortal)(y,n):y}var h;function m(){}function g(e,t){return(0,r.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(h||(h={}));const y=Object.freeze({x:0,y:0});function b(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function w(e,t){const n=(0,i.getEventCoordinates)(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function k(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function x(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function S(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function C(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function M(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const O=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=M(t,t.left,t.top),i=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=b(M(r),o);i.push({id:t,data:{droppableContainer:e,value:n}})}}return i.sort(k)},A=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=S(t),i=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=S(r),a=o.reduce((e,t,r)=>e+b(n[r],t),0),s=Number((a/4).toFixed(4));i.push({id:t,data:{droppableContainer:e,value:s}})}}return i.sort(k)};function E(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,s=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*s;return Number((o/(n+r-o)).toFixed(4))}return 0}const T=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=E(i,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(x)};function _(e,t){const{top:n,left:r,bottom:o,right:i}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=i}const N=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const e of t){const{id:t}=e,i=n.get(t);if(i&&_(r,i)){const n=S(i).reduce((e,t)=>e+b(r,t),0),a=Number((n/4).toFixed(4));o.push({id:t,data:{droppableContainer:e,value:a}})}}return o.sort(k)};function j(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:y}function P(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}const I=P(1);function D(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const R={ignoreTransform:!1};function L(e,t){void 0===t&&(t=R);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=(0,i.getWindow)(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=D(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:s}=r,l=e.left-a-(1-o)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:o,width:a,height:s,bottom:l,right:c}=n;return{top:r,left:o,width:a,height:s,bottom:l,right:c}}function F(e){return L(e,{ignoreTransform:!0})}function B(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if((0,i.isDocument)(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!(0,i.isHTMLElement)(o)||(0,i.isSVGElement)(o))return n;if(n.includes(o))return n;const a=(0,i.getWindow)(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=(0,i.getWindow)(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"==typeof r&&n.test(r)})}(o,a)&&n.push(o),function(e,t){return void 0===t&&(t=(0,i.getWindow)(e).getComputedStyle(e)),"fixed"===t.position}(o,a)?n:r(o.parentNode)}(e):n}function H(e){const[t]=B(e,1);return null!=t?t:null}function z(e){return i.canUseDOM&&e?(0,i.isWindow)(e)?e:(0,i.isNode)(e)?(0,i.isDocument)(e)||e===(0,i.getOwnerDocument)(e).scrollingElement?window:(0,i.isHTMLElement)(e)?e:null:null:null}function $(e){return(0,i.isWindow)(e)?e.scrollX:e.scrollLeft}function V(e){return(0,i.isWindow)(e)?e.scrollY:e.scrollTop}function U(e){return{x:$(e),y:V(e)}}var W;function q(e){return!(!i.canUseDOM||!e)&&e===document.scrollingElement}function K(e){const t={x:0,y:0},n=q(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(W||(W={}));const G={x:.2,y:.2};function Y(e,t,n,r,o){let{top:i,left:a,right:s,bottom:l}=n;void 0===r&&(r=10),void 0===o&&(o=G);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=K(e),p={x:0,y:0},h={x:0,y:0},m=t.height*o.y,g=t.width*o.x;return!c&&i<=t.top+m?(p.y=W.Backward,h.y=r*Math.abs((t.top+m-i)/m)):!u&&l>=t.bottom-m&&(p.y=W.Forward,h.y=r*Math.abs((t.bottom-m-l)/m)),!f&&s>=t.right-g?(p.x=W.Forward,h.x=r*Math.abs((t.right-g-s)/g)):!d&&a<=t.left+g&&(p.x=W.Backward,h.x=r*Math.abs((t.left+g-a)/g)),{direction:p,speed:h}}function J(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function X(e){return e.reduce((e,t)=>(0,i.add)(e,U(t)),y)}function Q(e,t){if(void 0===t&&(t=L),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);H(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Z=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+$(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+V(t),0)}]];class ee{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=B(t),r=X(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of Z)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=o(n),a=r[e]-t;return this.rect[i]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class te{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function ne(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var re,oe;function ie(e){e.preventDefault()}function ae(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(re||(re={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(oe||(oe={}));const se={start:[oe.Space,oe.Enter],cancel:[oe.Esc],end:[oe.Space,oe.Enter]},le=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case oe.Right:return{...n,x:n.x+25};case oe.Left:return{...n,x:n.x-25};case oe.Down:return{...n,y:n.y+25};case oe.Up:return{...n,y:n.y-25}}};class ce{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new te((0,i.getOwnerDocument)(t)),this.windowListeners=new te((0,i.getWindow)(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleEnd=this.handleEnd.bind(this),this.attach()}attach(){this.handleStart(),this.props.activeNode.activatorNode.current?.addEventListener("blur",this.handleEnd),this.windowListeners.add(re.Resize,this.handleCancel),this.windowListeners.add(re.VisibilityChange,this.handleCancel),this.props.event.target.addEventListener(re.Keydown,this.handleKeyDown),setTimeout(()=>this.listeners.add(re.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Q(n),t(y)}handleKeyDown(e){if((0,i.isKeyboardEvent)(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=se,coordinateGetter:a=le,scrollBehavior:s="smooth"}=r,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:c}=n.current,u=c?{x:c.left,y:c.top}:y;this.referenceCoordinates||(this.referenceCoordinates=u);const d=a(e,{active:t,context:n.current,currentCoordinates:u});if(d){const t=(0,i.subtract)(d,u),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:a,isLeft:l,isBottom:c,maxScroll:u,minScroll:f}=K(n),p=J(n),h={x:Math.min(o===oe.Right?p.right-p.width/2:p.right,Math.max(o===oe.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(o===oe.Down?p.bottom-p.height/2:p.bottom,Math.max(o===oe.Down?p.top:p.top+p.height/2,d.y))},m=o===oe.Right&&!a||o===oe.Left&&!l,g=o===oe.Down&&!c||o===oe.Up&&!i;if(m&&h.x!==d.x){const e=n.scrollLeft+t.x,i=o===oe.Right&&e<=u.x||o===oe.Left&&e>=f.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:s});r.x=i?n.scrollLeft-e:o===oe.Right?n.scrollLeft-u.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(g&&h.y!==d.y){const e=n.scrollTop+t.y,i=o===oe.Down&&e<=u.y||o===oe.Up&&e>=f.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:s});r.y=i?n.scrollTop-e:o===oe.Down?n.scrollTop-u.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,(0,i.add)((0,i.subtract)(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.stopPropagation(),e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),this.props.activeNode.activatorNode.current?.removeEventListener("blur",this.handleEnd),this.props.event.target.removeEventListener(re.Keydown,this.handleKeyDown)}}function ue(e){return Boolean(e&&"distance"in e)}function de(e){return Boolean(e&&"delay"in e)}ce.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=se,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==o||o({event:e.nativeEvent}),0))}return!1}}];class fe{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=(0,i.getWindow)(e);return e instanceof t?e:(0,i.getOwnerDocument)(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:a}=o;this.props=e,this.events=t,this.document=(0,i.getOwnerDocument)(a),this.documentListeners=new te(this.document),this.listeners=new te(n),this.windowListeners=new te((0,i.getWindow)(a)),this.initialCoordinates=null!=(r=(0,i.getEventCoordinates)(o))?r:y,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(re.Resize,this.handleCancel),this.windowListeners.add(re.DragStart,ie),this.windowListeners.add(re.VisibilityChange,this.handleCancel),this.windowListeners.add(re.ContextMenu,ie),this.documentListeners.add(re.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(de(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(ue(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(re.Click,ae,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(re.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:a,options:{activationConstraint:s}}=o;if(!r)return;const l=null!=(t=(0,i.getEventCoordinates)(e))?t:y,c=(0,i.subtract)(r,l);if(!n&&s){if(ue(s)){if(null!=s.tolerance&&ne(c,s.tolerance))return this.handleCancel();if(ne(c,s.distance))return this.handleStart()}return de(s)&&ne(c,s.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===oe.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const pe={move:{name:"pointermove"},end:{name:"pointerup"}};class he extends fe{constructor(e){const{event:t}=e,n=(0,i.getOwnerDocument)(t.target);super(e,pe,n)}}he.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const me={move:{name:"mousemove"},end:{name:"mouseup"}};var ge;!function(e){e[e.RightClick=2]="RightClick"}(ge||(ge={}));class ve extends fe{constructor(e){super(e,me,(0,i.getOwnerDocument)(e.event.target))}}ve.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==ge.RightClick&&(null==r||r({event:n}),!0)}}];const ye={move:{name:"touchmove"},end:{name:"touchend"}};class be extends fe{constructor(e){super(e,ye)}static setup(){return window.addEventListener(ye.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ye.move.name,e)};function e(){}}}var we,ke;be.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(we||(we={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(ke||(ke={}));const xe={x:{[W.Backward]:!1,[W.Forward]:!1},y:{[W.Backward]:!1,[W.Forward]:!1}};var Se,Ce;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Se||(Se={})),function(e){e.Optimized="optimized"}(Ce||(Ce={}));const Me=new Map;function Oe(e,t){return(0,i.useLazyMemo)(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function Ae(e){let{callback:t,disabled:n}=e;const o=(0,i.useEvent)(t),a=(0,r.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(o)},[n]);return(0,r.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function Ee(e){return new ee(L(e),e)}function Te(e,t,n){void 0===t&&(t=Ee);const[o,a]=(0,r.useReducer)(function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i},null),s=function(e){let{callback:t,disabled:n}=e;const o=(0,i.useEvent)(t),a=(0,r.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(o)},[o,n]);return(0,r.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),l=Ae({callback:a});return(0,i.useIsomorphicLayoutEffect)(()=>{a(),e?(null==l||l.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==s||s.disconnect())},[e]),o}const _e=[];function Ne(e,t){void 0===t&&(t=[]);const n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current=null},t),(0,r.useEffect)(()=>{const t=e!==y;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?(0,i.subtract)(e,n.current):y}function je(e){return(0,r.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const Pe=[];function Ie(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return(0,i.isHTMLElement)(t)?t:e}const De=[{sensor:he,options:{}},{sensor:ce,options:{}}],Re={current:{}},Le={draggable:{measure:F},droppable:{measure:F,strategy:Se.WhileDragging,frequency:Ce.Optimized},dragOverlay:{measure:L}};class Fe extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Be={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:m},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Le,measureDroppableContainers:m,windowRect:null,measuringScheduled:!1},He={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:m,draggableNodes:new Map,over:null,measureDroppableContainers:m},ze=(0,r.createContext)(He),$e=(0,r.createContext)(Be);function Ve(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fe}}}function Ue(e,t){switch(t.type){case h.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case h.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case h.DragEnd:case h.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case h.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Fe(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case h.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Fe(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case h.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Fe(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function We(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:a}=(0,r.useContext)(ze),s=(0,i.usePrevious)(o),l=(0,i.usePrevious)(null==n?void 0:n.id);return(0,r.useEffect)(()=>{if(!t&&!o&&s&&null!=l){if(!(0,i.isKeyboardEvent)(s))return;if(document.activeElement===s.target)return;const e=a.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=(0,i.findFirstFocusableNode)(e);if(t){t.focus();break}}})}},[o,t,a,l,s]),null}function qe(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}const Ke=(0,r.createContext)({...y,scaleX:1,scaleY:1});var Ge;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Ge||(Ge={}));const Ye=(0,r.memo)(function(e){var t,n,a,s;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:m=De,collisionDetection:g=T,measuring:v,modifiers:b,...w}=e;const k=(0,r.useReducer)(Ue,void 0,Ve),[x,S]=k,[M,O]=function(){const[e]=(0,r.useState)(()=>new Set),t=(0,r.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,r.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[A,E]=(0,r.useState)(Ge.Uninitialized),_=A===Ge.Initialized,{draggable:{active:N,nodes:P,translate:D},droppable:{containers:R}}=x,F=N?P.get(N):null,$=(0,r.useRef)({initial:null,translated:null}),V=(0,r.useMemo)(()=>{var e;return null!=N?{id:N,data:null!=(e=null==F?void 0:F.data)?e:Re,rect:$}:null},[N,F]),K=(0,r.useRef)(null),[G,J]=(0,r.useState)(null),[Q,Z]=(0,r.useState)(null),te=(0,i.useLatestValue)(w,Object.values(w)),ne=(0,i.useUniqueId)("DndDescribedBy",l),re=(0,r.useMemo)(()=>R.getEnabled(),[R]),oe=(ie=v,(0,r.useMemo)(()=>({draggable:{...Le.draggable,...null==ie?void 0:ie.draggable},droppable:{...Le.droppable,...null==ie?void 0:ie.droppable},dragOverlay:{...Le.dragOverlay,...null==ie?void 0:ie.dragOverlay}}),[null==ie?void 0:ie.draggable,null==ie?void 0:ie.droppable,null==ie?void 0:ie.dragOverlay]));var ie;const{droppableRects:ae,measureDroppableContainers:se,measuringScheduled:le}=function(e,t){let{dragging:n,dependencies:o,config:a}=t;const[s,l]=(0,r.useState)(null),{frequency:c,measure:u,strategy:d}=a,f=(0,r.useRef)(e),p=function(){switch(d){case Se.Always:return!1;case Se.BeforeDragging:return n;default:return!n}}(),h=(0,i.useLatestValue)(p),m=(0,r.useCallback)(function(e){void 0===e&&(e=[]),h.current||l(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),g=(0,r.useRef)(null),v=(0,i.useLazyMemo)(t=>{if(p&&!n)return Me;if(!t||t===Me||f.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new ee(u(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,s,n,p,u]);return(0,r.useEffect)(()=>{f.current=e},[e]),(0,r.useEffect)(()=>{p||m()},[n,p]),(0,r.useEffect)(()=>{s&&s.length>0&&l(null)},[JSON.stringify(s)]),(0,r.useEffect)(()=>{p||"number"!=typeof c||null!==g.current||(g.current=setTimeout(()=>{m(),g.current=null},c))},[c,p,m,...o]),{droppableRects:v,measureDroppableContainers:m,measuringScheduled:null!=s}}(re,{dragging:_,dependencies:[D.x,D.y],config:oe.droppable}),ce=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return(0,i.useLazyMemo)(e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(P,N),ue=(0,r.useMemo)(()=>Q?(0,i.getEventCoordinates)(Q):null,[Q]),de=function(){const e=!1===(null==G?void 0:G.autoScrollEnabled),t="object"==typeof d?!1===d.enabled:!1===d,n=_&&!e&&!t;return"object"==typeof d?{...d,enabled:n}:{enabled:n}}(),fe=function(e,t){return Oe(e,t)}(ce,oe.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:o,config:a=!0}=e;const s=(0,r.useRef)(!1),{x:l,y:c}="boolean"==typeof a?{x:a,y:a}:a;(0,i.useIsomorphicLayoutEffect)(()=>{if(!l&&!c||!t)return void(s.current=!1);if(s.current||!o)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=j(n(e),o);if(l||(r.x=0),c||(r.y=0),s.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=H(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,l,c,o,n])}({activeNode:N?P.get(N):null,config:de.layoutShiftCompensation,initialRect:fe,measure:oe.draggable.measure});const pe=Te(ce,oe.draggable.measure,fe),he=Te(ce?ce.parentElement:null),me=(0,r.useRef)({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=R.getNodeFor(null==(t=me.current.over)?void 0:t.id),ve=function(e){let{measure:t}=e;const[n,o]=(0,r.useState)(null),a=Ae({callback:(0,r.useCallback)(e=>{for(const{target:n}of e)if((0,i.isHTMLElement)(n)){o(e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),s=(0,r.useCallback)(e=>{const n=Ie(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),o(n?t(n):null)},[t,a]),[l,c]=(0,i.useNodeRef)(s);return(0,r.useMemo)(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}({measure:oe.dragOverlay.measure}),ye=null!=(n=ve.nodeRef.current)?n:ce,be=_?null!=(a=ve.rect)?a:pe:null,Ce=Boolean(ve.nodeRef.current&&ve.rect),Ee=j(Fe=Ce?null:pe,Oe(Fe));var Fe;const Be=je(ye?(0,i.getWindow)(ye):null),He=function(e){const t=(0,r.useRef)(e),n=(0,i.useLazyMemo)(n=>e?n&&n!==_e&&e&&t.current&&e.parentNode===t.current.parentNode?n:B(e):_e,[e]);return(0,r.useEffect)(()=>{t.current=e},[e]),n}(_?null!=ge?ge:ce:null),Ye=function(e,t){void 0===t&&(t=L);const[n]=e,o=je(n?(0,i.getWindow)(n):null),[a,s]=(0,r.useReducer)(function(){return e.length?e.map(e=>q(e)?o:new ee(t(e),e)):Pe},Pe),l=Ae({callback:s});return e.length>0&&a===Pe&&s(),(0,i.useIsomorphicLayoutEffect)(()=>{e.length?e.forEach(e=>null==l?void 0:l.observe(e)):(null==l||l.disconnect(),s())},[e]),a}(He),Je=qe(b,{transform:{x:D.x-Ee.x,y:D.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:Q,active:V,activeNodeRect:pe,containerNodeRect:he,draggingNodeRect:be,over:me.current.over,overlayNodeRect:ve.rect,scrollableAncestors:He,scrollableAncestorRects:Ye,windowRect:Be}),Xe=ue?(0,i.add)(ue,D):null,Qe=function(e){const[t,n]=(0,r.useState)(null),o=(0,r.useRef)(e),a=(0,r.useCallback)(e=>{const t=z(e.target);t&&n(e=>e?(e.set(t,U(t)),new Map(e)):null)},[]);return(0,r.useEffect)(()=>{const t=o.current;if(e!==t){r(t);const i=e.map(e=>{const t=z(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,U(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),o.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=z(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,r.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>(0,i.add)(e,t),y):X(e):y,[e,t])}(He),Ze=Ne(Qe),et=Ne(Qe,[pe]),tt=(0,i.add)(Je,Ze),nt=be?I(be,Je):null,rt=V&&nt?g({active:V,collisionRect:nt,droppableRects:ae,droppableContainers:re,pointerCoordinates:Xe}):null,ot=C(rt,"id"),[it,at]=(0,r.useState)(null),st=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Ce?Je:(0,i.add)(Je,et),null!=(s=null==it?void 0:it.rect)?s:null,pe),lt=(0,r.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==K.current)return;const i=P.get(K.current);if(!i)return;const a=e.nativeEvent,s=new n({active:K.current,activeNode:i,event:a,options:r,context:me,onStart(e){const t=K.current;if(null==t)return;const n=P.get(t);if(!n)return;const{onDragStart:r}=te.current,i={active:{id:t,data:n.data,rect:$}};(0,o.unstable_batchedUpdates)(()=>{null==r||r(i),E(Ge.Initializing),S({type:h.DragStart,initialCoordinates:e,active:t}),M({type:"onDragStart",event:i})})},onMove(e){S({type:h.DragMove,coordinates:e})},onEnd:l(h.DragEnd),onCancel:l(h.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=me.current;let s=null;if(t&&i){const{cancelDrop:o}=te.current;s={activatorEvent:a,active:t,collisions:n,delta:i,over:r},e===h.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=h.DragCancel)}K.current=null,(0,o.unstable_batchedUpdates)(()=>{S({type:e}),E(Ge.Uninitialized),at(null),J(null),Z(null);const t=e===h.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=te.current[t];null==e||e(s),M({type:t,event:s})}})}}(0,o.unstable_batchedUpdates)(()=>{J(s),Z(e.nativeEvent)})},[P]),ct=(0,r.useCallback)((e,t)=>(n,r)=>{const o=n.nativeEvent,i=P.get(r);if(null!==K.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},K.current=r,lt(n,t))},[P,lt]),ut=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(m,ct);!function(e){(0,r.useEffect)(()=>{if(!i.canUseDOM)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(m),(0,i.useIsomorphicLayoutEffect)(()=>{pe&&A===Ge.Initializing&&E(Ge.Initialized)},[pe,A]),(0,r.useEffect)(()=>{const{onDragMove:e}=te.current,{active:t,activatorEvent:n,collisions:r,over:i}=me.current;if(!t||!n)return;const a={active:t,activatorEvent:n,collisions:r,delta:{x:tt.x,y:tt.y},over:i};(0,o.unstable_batchedUpdates)(()=>{null==e||e(a),M({type:"onDragMove",event:a})})},[tt.x,tt.y]),(0,r.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=me.current;if(!e||null==K.current||!t||!i)return;const{onDragOver:a}=te.current,s=r.get(ot),l=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:l};(0,o.unstable_batchedUpdates)(()=>{at(l),null==a||a(c),M({type:"onDragOver",event:c})})},[ot]),(0,i.useIsomorphicLayoutEffect)(()=>{me.current={activatorEvent:Q,active:V,activeNode:ce,collisionRect:nt,collisions:rt,droppableRects:ae,draggableNodes:P,draggingNode:ye,draggingNodeRect:be,droppableContainers:R,over:it,scrollableAncestors:He,scrollAdjustedTranslate:tt},$.current={initial:be,translated:nt}},[V,ce,rt,nt,P,ye,be,ae,R,it,He,tt]),function(e){let{acceleration:t,activator:n=we.Pointer,canScroll:o,draggingRect:a,enabled:s,interval:l=5,order:c=ke.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:h}=e;const m=function(e){let{delta:t,disabled:n}=e;const r=(0,i.usePrevious)(t);return(0,i.useLazyMemo)(e=>{if(n||!r||!e)return xe;const o=Math.sign(t.x-r.x),i=Math.sign(t.y-r.y);return{x:{[W.Backward]:e.x[W.Backward]||-1===o,[W.Forward]:e.x[W.Forward]||1===o},y:{[W.Backward]:e.y[W.Backward]||-1===i,[W.Forward]:e.y[W.Forward]||1===i}}},[n,t,r])}({delta:p,disabled:!s}),[g,v]=(0,i.useInterval)(),y=(0,r.useRef)({x:0,y:0}),b=(0,r.useRef)({x:0,y:0}),w=(0,r.useMemo)(()=>{switch(n){case we.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case we.DraggableRect:return a}},[n,a,u]),k=(0,r.useRef)(null),x=(0,r.useCallback)(()=>{const e=k.current;if(!e)return;const t=y.current.x*b.current.x,n=y.current.y*b.current.y;e.scrollBy(t,n)},[]),S=(0,r.useMemo)(()=>c===ke.TreeOrder?[...d].reverse():d,[c,d]);(0,r.useEffect)(()=>{if(s&&d.length&&w){for(const e of S){if(!1===(null==o?void 0:o(e)))continue;const n=d.indexOf(e),r=f[n];if(!r)continue;const{direction:i,speed:a}=Y(e,r,w,t,h);for(const e of["x","y"])m[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0)return v(),k.current=e,g(x,l),y.current=a,void(b.current=i)}y.current={x:0,y:0},b.current={x:0,y:0},v()}else v()},[t,x,o,v,s,l,JSON.stringify(w),JSON.stringify(m),g,d,S,f,JSON.stringify(h)])}({...de,delta:D,draggingRect:nt,pointerCoordinates:Xe,scrollableAncestors:He,scrollableAncestorRects:Ye});const dt=(0,r.useMemo)(()=>({active:V,activeNode:ce,activeNodeRect:pe,activatorEvent:Q,collisions:rt,containerNodeRect:he,dragOverlay:ve,draggableNodes:P,droppableContainers:R,droppableRects:ae,over:it,measureDroppableContainers:se,scrollableAncestors:He,scrollableAncestorRects:Ye,measuringConfiguration:oe,measuringScheduled:le,windowRect:Be}),[V,ce,pe,Q,rt,he,ve,P,R,ae,it,se,He,Ye,oe,le,Be]),ft=(0,r.useMemo)(()=>({activatorEvent:Q,activators:ut,active:V,activeNodeRect:pe,ariaDescribedById:{draggable:ne},dispatch:S,draggableNodes:P,over:it,measureDroppableContainers:se}),[Q,ut,V,pe,S,ne,P,it,se]);return r.createElement(c.Provider,{value:O},r.createElement(ze.Provider,{value:ft},r.createElement($e.Provider,{value:dt},r.createElement(Ke.Provider,{value:st},f)),r.createElement(We,{disabled:!1===(null==u?void 0:u.restoreFocus)})),r.createElement(p,{...u,hiddenTextDescribedById:ne}))}),Je=(0,r.createContext)(null),Xe="button",Qe="Droppable";function Ze(e){let{id:t,data:n,disabled:o=!1,attributes:a}=e;const s=(0,i.useUniqueId)(Qe),{activators:l,activatorEvent:c,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:h}=(0,r.useContext)(ze),{role:m=Xe,roleDescription:g="draggable",tabIndex:v=0}=null!=a?a:{},y=(null==u?void 0:u.id)===t,b=(0,r.useContext)(y?Ke:Je),[w,k]=(0,i.useNodeRef)(),[x,S]=(0,i.useNodeRef)(),C=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e},{}),[e,t])}(l,t),M=(0,i.useLatestValue)(n);return(0,i.useIsomorphicLayoutEffect)(()=>(p.set(t,{id:t,key:s,node:w,activatorNode:x,data:M}),()=>{const e=p.get(t);e&&e.key===s&&p.delete(t)}),[p,t]),{active:u,activatorEvent:c,activeNodeRect:d,attributes:(0,r.useMemo)(()=>({role:m,tabIndex:v,"aria-disabled":o,"aria-pressed":!(!y||m!==Xe)||void 0,"aria-roledescription":g,"aria-describedby":f.draggable}),[o,m,v,y,g,f.draggable]),isDragging:y,listeners:o?void 0:C,node:w,over:h,setNodeRef:k,setActivatorNodeRef:S,transform:b}}function et(){return(0,r.useContext)($e)}const tt="Droppable",nt={timeout:25};function rt(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:a}=e;const s=(0,i.useUniqueId)(tt),{active:l,dispatch:c,over:u,measureDroppableContainers:d}=(0,r.useContext)(ze),f=(0,r.useRef)({disabled:n}),p=(0,r.useRef)(!1),m=(0,r.useRef)(null),g=(0,r.useRef)(null),{disabled:v,updateMeasurementsFor:y,timeout:b}={...nt,...a},w=(0,i.useLatestValue)(null!=y?y:o),k=Ae({callback:(0,r.useCallback)(()=>{p.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(w.current)?w.current:[w.current]),g.current=null},b)):p.current=!0},[b]),disabled:v||!l}),x=(0,r.useCallback)((e,t)=>{k&&(t&&(k.unobserve(t),p.current=!1),e&&k.observe(e))},[k]),[S,C]=(0,i.useNodeRef)(x),M=(0,i.useLatestValue)(t);return(0,r.useEffect)(()=>{k&&S.current&&(k.disconnect(),p.current=!1,k.observe(S.current))},[S,k]),(0,i.useIsomorphicLayoutEffect)(()=>(c({type:h.RegisterDroppable,element:{id:o,key:s,disabled:n,node:S,rect:m,data:M}}),()=>c({type:h.UnregisterDroppable,key:s,id:o})),[o]),(0,r.useEffect)(()=>{n!==f.current.disabled&&(c({type:h.SetDroppableDisabled,id:o,key:s,disabled:n}),f.current.disabled=n)},[o,s,n,c]),{active:l,rect:m,isOver:(null==u?void 0:u.id)===o,node:S,over:u,setNodeRef:C}}function ot(e){let{animation:t,children:n}=e;const[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),c=(0,i.usePrevious)(n);return n||o||!c||a(c),(0,i.useIsomorphicLayoutEffect)(()=>{if(!s)return;const e=null==o?void 0:o.key,n=null==o?void 0:o.props.id;null!=e&&null!=n?Promise.resolve(t(n,s)).then(()=>{a(null)}):a(null)},[t,o,s]),r.createElement(r.Fragment,null,n,o?(0,r.cloneElement)(o,{ref:l}):null)}const it={x:0,y:0,scaleX:1,scaleY:1};function at(e){let{children:t}=e;return r.createElement(ze.Provider,{value:He},r.createElement(Ke.Provider,{value:it},t))}const st={position:"fixed",touchAction:"none"},lt=e=>(0,i.isKeyboardEvent)(e)?"transform 250ms ease":void 0,ct=(0,r.forwardRef)((e,t)=>{let{as:n,activatorEvent:o,adjustScale:a,children:s,className:l,rect:c,style:u,transform:d,transition:f=lt}=e;if(!c)return null;const p=a?d:{...d,scaleX:1,scaleY:1},h={...st,width:c.width,height:c.height,top:c.top,left:c.left,transform:i.CSS.Transform.toString(p),transformOrigin:a&&o?w(o,c):void 0,transition:"function"==typeof f?f(o):f,...u};return r.createElement(n,{className:l,style:h,ref:t},s)}),ut=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:i,className:a}=e;if(null!=i&&i.active)for(const[e,t]of Object.entries(i.active))void 0!==t&&(o[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=i&&i.dragOverlay)for(const[e,t]of Object.entries(i.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[e,t]of Object.entries(o))n.node.style.setProperty(e,t);null!=a&&a.active&&n.node.classList.remove(a.active)}},dt={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:i.CSS.Transform.toString(t)},{transform:i.CSS.Transform.toString(n)}]},sideEffects:ut({styles:{active:{opacity:"0"}}})};let ft=0;function pt(e){return(0,r.useMemo)(()=>{if(null!=e)return ft++,ft},[e])}const ht=r.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:o,style:a,transition:s,modifiers:l,wrapperElement:c="div",className:u,zIndex:d=999}=e;const{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:m,draggableNodes:g,droppableContainers:v,dragOverlay:y,over:b,measuringConfiguration:w,scrollableAncestors:k,scrollableAncestorRects:x,windowRect:S}=et(),C=(0,r.useContext)(Ke),M=pt(null==p?void 0:p.id),O=qe(l,{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:k,scrollableAncestorRects:x,transform:C,windowRect:S}),A=Oe(h),E=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return(0,i.useEvent)((e,a)=>{if(null===t)return;const s=n.get(e);if(!s)return;const l=s.node.current;if(!l)return;const c=Ie(a);if(!c)return;const{transform:u}=(0,i.getWindow)(a).getComputedStyle(a),d=D(u);if(!d)return;const f="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...dt,...e};return e=>{let{active:i,dragOverlay:a,transform:s,...l}=e;if(!t)return;const c=a.rect.left-i.rect.left,u=a.rect.top-i.rect.top,d={scaleX:1!==s.scaleX?i.rect.width*s.scaleX/a.rect.width:1,scaleY:1!==s.scaleY?i.rect.height*s.scaleY/a.rect.height:1},f={x:s.x-c,y:s.y-u,...d},p=o({...l,active:i,dragOverlay:a,transform:{initial:s,final:f}}),[h]=p,m=p[p.length-1];if(JSON.stringify(h)===JSON.stringify(m))return;const g=null==r?void 0:r({active:i,dragOverlay:a,...l}),v=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{v.onfinish=()=>{null==g||g(),e()}})}}(t);return Q(l,o.draggable.measure),f({active:{id:e,data:s.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:a,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:d})})}({config:o,draggableNodes:g,droppableContainers:v,measuringConfiguration:w}),T=A?y.setRef:void 0;return r.createElement(at,null,r.createElement(ot,{animation:E},p&&M?r.createElement(ct,{key:M,id:p.id,ref:T,as:c,activatorEvent:f,adjustScale:t,className:u,transition:s,rect:A,style:{zIndex:d,...a},transform:O},n):null))})},74979:function(e,t,n){"use strict";n.r(t),n.d(t,{CSS:function(){return T},add:function(){return S},canUseDOM:function(){return i},findFirstFocusableNode:function(){return N},getEventCoordinates:function(){return E},getOwnerDocument:function(){return f},getWindow:function(){return l},hasViewportRelativeCoordinates:function(){return M},isDocument:function(){return c},isHTMLElement:function(){return u},isKeyboardEvent:function(){return O},isNode:function(){return s},isSVGElement:function(){return d},isTouchEvent:function(){return A},isWindow:function(){return a},subtract:function(){return C},useCombinedRefs:function(){return o},useEvent:function(){return h},useInterval:function(){return m},useIsomorphicLayoutEffect:function(){return p},useLatestValue:function(){return g},useLazyMemo:function(){return v},useNodeRef:function(){return y},usePrevious:function(){return b},useUniqueId:function(){return k}});var r=n(96540);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}const i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function a(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function s(e){return"nodeType"in e}function l(e){var t,n;return e?a(e)?e:s(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function c(e){const{Document:t}=l(e);return e instanceof t}function u(e){return!a(e)&&e instanceof l(e).HTMLElement}function d(e){return e instanceof l(e).SVGElement}function f(e){return e?a(e)?e.document:s(e)?c(e)?e:u(e)||d(e)?e.ownerDocument:document:document:document}const p=i?r.useLayoutEffect:r.useEffect;function h(e){const t=(0,r.useRef)(e);return p(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function m(){const e=(0,r.useRef)(null);return[(0,r.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function g(e,t){void 0===t&&(t=[e]);const n=(0,r.useRef)(e);return p(()=>{n.current!==e&&(n.current=e)},t),n}function v(e,t){const n=(0,r.useRef)();return(0,r.useMemo)(()=>{const t=e(n.current);return n.current=t,t},[...t])}function y(e){const t=h(e),n=(0,r.useRef)(null),o=(0,r.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,o]}function b(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let w={};function k(e,t){return(0,r.useMemo)(()=>{if(t)return t;const n=null==w[e]?0:w[e]+1;return w[e]=n,e+"-"+n},[e,t])}function x(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t},{...t})}}const S=x(1),C=x(-1);function M(e){return"clientX"in e&&"clientY"in e}function O(e){if(!e)return!1;const{KeyboardEvent:t}=l(e.target);return t&&e instanceof t}function A(e){if(!e)return!1;const{TouchEvent:t}=l(e.target);return t&&e instanceof t}function E(e){if(A(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return M(e)?{x:e.clientX,y:e.clientY}:null}const T=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[T.Translate.toString(e),T.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function N(e){return e.matches(_)?e:e.querySelector(_)}},55655:function(e,t,n){"use strict";n.d(t,{A:function(){return re}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),o=Math.abs,i=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function f(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function k(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:m,column:g,length:a,return:""}}function x(e,t){return a(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function C(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function M(){return u(w,y)}function O(){return y}function A(e,t){return d(w,e,t)}function E(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return m=g=1,v=f(w=e),y=0,[]}function _(e){return w="",e}function N(e){return s(A(y-1,I(91===e?e+2:40===e?e+1:e)))}function j(e){for(;(b=M())&&b<33;)C();return E(e)>2||E(b)>3?"":" "}function P(e,t){for(;--t&&C()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return A(e,O()+(t<6&&32==M()&&32==C()))}function I(e){for(;C();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&I(b);break;case 40:41===e&&I(e);break;case 92:C()}return y}function D(e,t){for(;C()&&e+b!==57&&(e+b!==84||47!==M()););return"/*"+A(t,y-1)+"*"+i(47===e?e:C())}function R(e){for(;!E(M());)C();return A(e,y)}var L="-ms-",F="-moz-",B="-webkit-",H="comm",z="rule",$="decl",V="@keyframes";function U(e,t){for(var n="",r=p(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case $:return e.return=e.return||e.value;case H:return"";case V:return e.return=e.value+"{"+U(e.children,r)+"}";case z:e.value=e.props.join(",")}return f(n=U(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return _(K("",null,null,null,[""],e=T(e),0,[0],e))}function K(e,t,n,r,o,a,s,d,p){for(var m=0,g=0,v=s,y=0,b=0,w=0,k=1,x=1,A=1,E=0,T="",_=o,I=a,L=r,F=T;x;)switch(w=E,E=C()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(N(E),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:F+=N(E);break;case 9:case 10:case 13:case 32:F+=j(w);break;case 92:F+=P(O()-1,7);continue;case 47:switch(M()){case 42:case 47:h(Y(D(C(),O()),t,n),p);break;default:F+="/"}break;case 123*k:d[m++]=f(F)*A;case 125*k:case 59:case 0:switch(E){case 0:case 125:x=0;case 59+g:-1==A&&(F=l(F,/\f/g,"")),b>0&&f(F)-v&&h(b>32?J(F+";",r,n,v-1):J(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(h(L=G(F,t,n,m,g,o,d,T,_=[],I=[],v),a),123===E)if(0===g)K(F,t,L,L,_,a,v,d,I);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:K(e,L,L,r&&h(G(e,L,L,0,0,o,d,T,o,_=[],v),I),o,I,v,d,r?_:I);break;default:K(F,L,L,L,[""],I,0,d,I)}}m=g=b=0,k=A=1,T=F="",v=s;break;case 58:v=1+f(F),b=w;default:if(k<1)if(123==E)--k;else if(125==E&&0==k++&&125==S())continue;switch(F+=i(E),E*k){case 38:A=g>0?1:(F+="\f",-1);break;case 44:d[m++]=(f(F)-1)*A,A=1;break;case 64:45===M()&&(F+=N(C())),y=M(),g=v=f(T=F+=R(O())),E++;break;case 45:45===w&&2==f(F)&&(k=0)}}return a}function G(e,t,n,r,i,a,c,u,f,h,m){for(var g=i-1,v=0===i?a:[""],y=p(v),b=0,w=0,x=0;b<r;++b)for(var S=0,C=d(e,g+1,g=o(w=c[b])),M=e;S<y;++S)(M=s(w>0?v[S]+" "+C:l(C,/&\f/g,v[S])))&&(f[x++]=M);return k(e,t,n,0===i?z:u,f,h,m)}function Y(e,t,n){return k(e,t,n,H,i(b),d(e,2,-2),0)}function J(e,t,n,r){return k(e,t,n,$,d(e,0,r),d(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,o=0;r=o,o=M(),38===r&&12===o&&(t[n]=1),!E(o);)C();return A(e,y)},Q=new WeakMap,Z=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Q.get(n))&&!r){Q.set(e,!0);for(var o=[],a=function(e,t){return _(function(e,t){var n=-1,r=44;do{switch(E(r)){case 0:38===r&&12===M()&&(t[n]=1),e[n]+=X(y-1,t,n);break;case 2:e[n]+=N(r);break;case 4:if(44===r){e[++n]=58===M()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=C());return e}(T(e),t))}(t,o),s=n.props,l=0,c=0;l<a.length;l++)for(var u=0;u<s.length;u++,c++)e.props[c]=o[l]?a[l].replace(/&\f/g,s[u]):s[u]+" "+a[l]}}},ee=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function te(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return B+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return B+e+F+e+L+e+e;case 6828:case 4268:return B+e+L+e+e;case 6165:return B+e+L+"flex-"+e+e;case 5187:return B+e+l(e,/(\w+).+(:[^]+)/,B+"box-$1$2"+L+"flex-$1$2")+e;case 5443:return B+e+L+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return B+e+L+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return B+e+L+l(e,"shrink","negative")+e;case 5292:return B+e+L+l(e,"basis","preferred-size")+e;case 6060:return B+"box-"+l(e,"-grow","")+B+e+L+l(e,"grow","positive")+e;case 4554:return B+l(e,/([^-])(transform)/g,"$1"+B+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,B+"box-pack:$3"+L+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,B+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+B+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?te(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,f(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+B)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===u(e,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+L+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return B+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return B+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return B+e+L+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return B+e+L+e+e}return e}var ne=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case $:e.return=te(e.value,e.length);break;case V:return U([x(e,{value:l(e.value,"@","@"+B)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return U([x(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return U([x(e,{props:[l(t,/:(plac\w+)/,":"+B+"input-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,L+"input-$1")]})],r)}return""})}}],re=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var o,i,a=e.stylisPlugins||ne,s={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)});var c,u,d,f,h=[W,(f=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&f(e)})],m=(u=[Z,ee].concat(a,h),d=p(u),function(e,t,n,r){for(var o="",i=0;i<d;i++)o+=u[i](e,t,n,r)||"";return o});i=function(e,t,n,r){c=n,U(q(e?e+"{"+t.styles+"}":t.styles),m),r&&(g.inserted[t.name]=!0)};var g={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return g.sheet.hydrate(l),g}},37448:function(e,t,n){"use strict";n.d(t,{J:function(){return g}});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function o(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var i=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!=typeof e},u=o(function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()}),d=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(s,function(e,t,n){return h={name:t,styles:n,next:h},t})}return 1===r[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"},f="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return h={name:o.name,styles:o.styles,next:h},o.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)h={name:s.name,styles:s.styles,next:h},s=s.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=p(e,t,n[o])+";";else for(var a in n){var s=n[a];if("object"!=typeof s){var l=s;null!=t&&void 0!==t[l]?r+=a+"{"+t[l]+"}":c(l)&&(r+=u(a)+":"+d(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&i)throw new Error(f);if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var h=p(e,t,s);switch(a){case"animation":case"animationName":r+=u(a)+":"+h+";";break;default:r+=a+"{"+h+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(r+=u(a)+":"+d(a,s[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=h,m=n(e);return h=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var h,m=/label:\s*([^\s;\n{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";h=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=p(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=p(n,t,e[a]),r&&(o+=i[a]);m.lastIndex=0;for(var s,l="";null!==(s=m.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:h}}},71287:function(e,t,n){"use strict";var r;n.d(t,{s:function(){return a}});var o=n(96540),i=!!(r||(r=n.t(o,2))).useInsertionEffect&&(r||(r=n.t(o,2))).useInsertionEffect,a=i||function(e){return e()};i||o.useLayoutEffect},30041:function(e,t,n){"use strict";function r(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "}),r}n.d(t,{Rk:function(){return r},SF:function(){return o},sk:function(){return i}});var o=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},i=function(e,t,n){o(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}},25534:function(e,t,n){"use strict";n.r(t),n.d(t,{arrow:function(){return E},autoPlacement:function(){return S},autoUpdate:function(){return w},computePosition:function(){return N},detectOverflow:function(){return k},flip:function(){return M},getOverflowAncestors:function(){return i.v9},hide:function(){return A},inline:function(){return T},limitShift:function(){return _},offset:function(){return x},platform:function(){return b},shift:function(){return C},size:function(){return O}});var r=n(97193),o=n(95361),i=n(86635);function a(e){const t=(0,i.L9)(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const a=(0,i.sb)(e),s=a?e.offsetWidth:n,l=a?e.offsetHeight:o,c=(0,r.LI)(n)!==s||(0,r.LI)(o)!==l;return c&&(n=s,o=l),{width:n,height:o,$:c}}function s(e){return(0,i.vq)(e)?e:e.contextElement}function l(e){const t=s(e);if(!(0,i.sb)(t))return(0,r.Jx)(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:c}=a(t);let u=(c?(0,r.LI)(n.width):n.width)/o,d=(c?(0,r.LI)(n.height):n.height)/l;return u&&Number.isFinite(u)||(u=1),d&&Number.isFinite(d)||(d=1),{x:u,y:d}}const c=(0,r.Jx)(0);function u(e){const t=(0,i.zk)(e);return(0,i.Tc)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:c}function d(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),c=s(e);let d=(0,r.Jx)(1);t&&(o?(0,i.vq)(o)&&(d=l(o)):d=l(e));const f=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==(0,i.zk)(e))&&t}(c,n,o)?u(c):(0,r.Jx)(0);let p=(a.left+f.x)/d.x,h=(a.top+f.y)/d.y,m=a.width/d.x,g=a.height/d.y;if(c){const e=(0,i.zk)(c),t=o&&(0,i.vq)(o)?(0,i.zk)(o):o;let n=e,r=(0,i._m)(n);for(;r&&o&&t!==n;){const e=l(r),t=r.getBoundingClientRect(),o=(0,i.L9)(r),a=t.left+(r.clientLeft+parseFloat(o.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(o.paddingTop))*e.y;p*=e.x,h*=e.y,m*=e.x,g*=e.y,p+=a,h+=s,n=(0,i.zk)(r),r=(0,i._m)(n)}}return(0,r.B1)({width:m,height:g,x:p,y:h})}function f(e,t){const n=(0,i.CP)(e).scrollLeft;return t?t.left+n:d((0,i.ep)(e)).left+n}function p(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=(0,i.zk)(e),r=(0,i.ep)(e),o=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,l=0,c=0;if(o){a=o.width,s=o.height;const e=(0,i.Tc)();(!e||e&&"fixed"===t)&&(l=o.offsetLeft,c=o.offsetTop)}return{width:a,height:s,x:l,y:c}}(e,n);else if("document"===t)o=function(e){const t=(0,i.ep)(e),n=(0,i.CP)(e),o=e.ownerDocument.body,a=(0,r.T9)(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=(0,r.T9)(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let l=-n.scrollLeft+f(e);const c=-n.scrollTop;return"rtl"===(0,i.L9)(o).direction&&(l+=(0,r.T9)(t.clientWidth,o.clientWidth)-a),{width:a,height:s,x:l,y:c}}((0,i.ep)(e));else if((0,i.vq)(t))o=function(e,t){const n=d(e,!0,"fixed"===t),o=n.top+e.clientTop,a=n.left+e.clientLeft,s=(0,i.sb)(e)?l(e):(0,r.Jx)(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:o*s.y}}(t,n);else{const n=u(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return(0,r.B1)(o)}function h(e,t){const n=(0,i.$4)(e);return!(n===t||!(0,i.vq)(n)||(0,i.eu)(n))&&("fixed"===(0,i.L9)(n).position||h(n,t))}function m(e,t,n){const o=(0,i.sb)(t),a=(0,i.ep)(t),s="fixed"===n,l=d(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const u=(0,r.Jx)(0);if(o||!o&&!s)if(("body"!==(0,i.mq)(t)||(0,i.ZU)(a))&&(c=(0,i.CP)(t)),o){const e=d(t,!0,s,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else a&&(u.x=f(a));let p=0,h=0;if(a&&!o&&!s){const e=a.getBoundingClientRect();h=e.top+c.scrollTop,p=e.left+c.scrollLeft-f(a,e)}return{x:l.left+c.scrollLeft-u.x-p,y:l.top+c.scrollTop-u.y-h,width:l.width,height:l.height}}function g(e){return"static"===(0,i.L9)(e).position}function v(e,t){if(!(0,i.sb)(e)||"fixed"===(0,i.L9)(e).position)return null;if(t)return t(e);let n=e.offsetParent;return(0,i.ep)(e)===n&&(n=n.ownerDocument.body),n}function y(e,t){const n=(0,i.zk)(e);if((0,i.Tf)(e))return n;if(!(0,i.sb)(e)){let t=(0,i.$4)(e);for(;t&&!(0,i.eu)(t);){if((0,i.vq)(t)&&!g(t))return t;t=(0,i.$4)(t)}return n}let r=v(e,t);for(;r&&(0,i.Lv)(r)&&g(r);)r=v(r,t);return r&&(0,i.eu)(r)&&g(r)&&!(0,i.sQ)(r)?n:r||(0,i.gJ)(e)||n}const b={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:a}=e;const s="fixed"===a,c=(0,i.ep)(o),u=!!t&&(0,i.Tf)(t.floating);if(o===c||u&&s)return n;let f={scrollLeft:0,scrollTop:0},p=(0,r.Jx)(1);const h=(0,r.Jx)(0),m=(0,i.sb)(o);if((m||!m&&!s)&&(("body"!==(0,i.mq)(o)||(0,i.ZU)(c))&&(f=(0,i.CP)(o)),(0,i.sb)(o))){const e=d(o);p=l(o),h.x=e.x+o.clientLeft,h.y=e.y+o.clientTop}return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+h.x,y:n.y*p.y-f.scrollTop*p.y+h.y}},getDocumentElement:i.ep,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:a}=e;const s=[..."clippingAncestors"===n?(0,i.Tf)(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=(0,i.v9)(e,[],!1).filter(e=>(0,i.vq)(e)&&"body"!==(0,i.mq)(e)),o=null;const a="fixed"===(0,i.L9)(e).position;let s=a?(0,i.$4)(e):e;for(;(0,i.vq)(s)&&!(0,i.eu)(s);){const t=(0,i.L9)(s),n=(0,i.sQ)(s);n||"fixed"!==t.position||(o=null),(a?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||(0,i.ZU)(s)&&!n&&h(e,s))?r=r.filter(e=>e!==s):o=t,s=(0,i.$4)(s)}return t.set(e,r),r}(t,this._c):[].concat(n),o],l=s[0],c=s.reduce((e,n)=>{const o=p(t,n,a);return e.top=(0,r.T9)(o.top,e.top),e.right=(0,r.jk)(o.right,e.right),e.bottom=(0,r.jk)(o.bottom,e.bottom),e.left=(0,r.T9)(o.left,e.left),e},p(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:y,getElementRects:async function(e){const t=this.getOffsetParent||y,n=this.getDimensions,r=await n(e.floating);return{reference:m(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=a(e);return{width:t,height:n}},getScale:l,isElement:i.vq,isRTL:function(e){return"rtl"===(0,i.L9)(e).direction}};function w(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:f=!1}=o,p=s(e),h=a||l?[...p?(0,i.v9)(p):[],...(0,i.v9)(t)]:[];h.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)});const m=p&&u?function(e,t){let n,o=null;const a=(0,i.ep)(e);function s(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function i(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),s();const{left:u,top:d,width:f,height:p}=e.getBoundingClientRect();if(l||t(),!f||!p)return;const h={rootMargin:-(0,r.RI)(d)+"px "+-(0,r.RI)(a.clientWidth-(u+f))+"px "+-(0,r.RI)(a.clientHeight-(d+p))+"px "+-(0,r.RI)(u)+"px",threshold:(0,r.T9)(0,(0,r.jk)(1,c))||1};let m=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!m)return i();t?i(!1,t):n=setTimeout(()=>{i(!1,1e-7)},1e3)}m=!1}try{o=new IntersectionObserver(g,{...h,root:a.ownerDocument})}catch(e){o=new IntersectionObserver(g,h)}o.observe(e)}(!0),s}(p,n):null;let g,v=-1,y=null;c&&(y=new ResizeObserver(e=>{let[r]=e;r&&r.target===p&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var e;null==(e=y)||e.observe(t)})),n()}),p&&!f&&y.observe(p),y.observe(t));let b=f?d(e):null;return f&&function t(){const r=d(e);!b||r.x===b.x&&r.y===b.y&&r.width===b.width&&r.height===b.height||n(),b=r,g=requestAnimationFrame(t)}(),n(),()=>{var e;h.forEach(e=>{a&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)}),null==m||m(),null==(e=y)||e.disconnect(),y=null,f&&cancelAnimationFrame(g)}}const k=o.__,x=o.cY,S=o.RK,C=o.BN,M=o.UU,O=o.Ej,A=o.jD,E=o.UE,T=o.mG,_=o.ER,N=(e,t,n)=>{const r=new Map,i={platform:b,...n},a={...i.platform,_c:r};return(0,o.rD)(e,t,{...i,platform:a})}},16873:function(e,t,n){"use strict";n.d(t,{$:function(){return ne},A:function(){return R},B:function(){return A},C:function(){return F},D:function(){return v},E:function(){return w},F:function(){return H},G:function(){return K},H:function(){return c},I:function(){return P},J:function(){return z},K:function(){return X},L:function(){return Q},M:function(){return le},N:function(){return de},O:function(){return ie},P:function(){return D},Q:function(){return ye},R:function(){return L},S:function(){return V},T:function(){return I},U:function(){return pe},V:function(){return N},W:function(){return re},X:function(){return Y},Y:function(){return Z},Z:function(){return ee},_:function(){return te},a:function(){return B},a0:function(){return ae},a1:function(){return se},a2:function(){return ce},a3:function(){return ue},a4:function(){return fe},a5:function(){return he},a6:function(){return me},a7:function(){return ge},a8:function(){return ve},b:function(){return $},d:function(){return U},e:function(){return j},f:function(){return W},g:function(){return q},h:function(){return G},i:function(){return y},j:function(){return M},k:function(){return s},l:function(){return C},m:function(){return b},n:function(){return _},o:function(){return p},p:function(){return u},q:function(){return g},r:function(){return f},s:function(){return S},t:function(){return l},u:function(){return d},v:function(){return O},y:function(){return x},z:function(){return k}});var r=n(63821),o=n(58168),i=n(21225),a=function(e,t){var n;void 0===t&&(t=!0);var o=new Promise(function(r){n=setTimeout(r,Math.min(2147483647,e),t)});return o[r.bO]=function(){clearTimeout(n)},o},s=function(){return function(){return true}}(),l=function(){},c=function(e){return e};"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var u=function(e,t){(0,o.A)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(n){e[n]=t[n]})},d=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function f(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function p(e){var t=!1;return function(){t||(t=!0,e())}}var h=function(e){throw e},m=function(e){return{value:e,done:!0}};function g(e,t,n){void 0===t&&(t=h),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:m,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function v(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var y=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},b=function(e){return Array.apply(null,new Array(e))},w=function(e){return function(t){return e(Object.defineProperty(t,r.q8,{value:!0}))}},k=function(e){return e===r.a6},x=function(e){return e===r.nm},S=function(e){return k(e)||x(e)};function C(e,t){var n,r=Object.keys(e),o=r.length,a=0,s=(0,i.YO)(e)?b(o):{},c={};return r.forEach(function(e){var r=function(r,i){n||(i||S(r)?(t.cancel(),t(r,i)):(s[e]=r,++a===o&&(n=!0,t(s))))};r.cancel=l,c[e]=r}),t.cancel=function(){n||(n=!0,r.forEach(function(e){return c[e].cancel()}))},c}function M(e){return{name:e.name||"anonymous",location:O(e)}}function O(e){return e[r.x2]}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var E={isEmpty:s,put:l,take:l};function T(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,o=0,i=0,a=function(t){n[o]=t,o=(o+1)%e,r++},s=function(){if(0!=r){var t=n[i];return n[i]=null,r--,i=(i+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[o]=s,i=o=(o+1)%e;break;case 4:c=2*e,n=l(),r=n.length,o=n.length,i=0,n.length=c,e=c,a(s)}},take:s,flush:l}}var _=function(){return E},N=function(e){return T(e,3)},j=function(e){return T(e,4)},P=Object.freeze({__proto__:null,none:_,fixed:function(e){return T(e,1)},dropping:function(e){return T(e,2)},sliding:N,expanding:j}),I="TAKE",D="PUT",R="ALL",L="RACE",F="CALL",B="CPS",H="FORK",z="JOIN",$="CANCEL",V="SELECT",U="ACTION_CHANNEL",W="CANCELLED",q="FLUSH",K="GET_CONTEXT",G="SET_CONTEXT",Y=Object.freeze({__proto__:null,TAKE:I,PUT:D,ALL:R,RACE:L,CALL:F,CPS:B,FORK:H,JOIN:z,CANCEL:$,SELECT:V,ACTION_CHANNEL:U,CANCELLED:W,FLUSH:q,GET_CONTEXT:K,SET_CONTEXT:G}),J=function(e,t){var n;return(n={})[r.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},X=function(e){return J(H,(0,o.A)({},e.payload,{detached:!0}))};function Q(e,t){return void 0===e&&(e="*"),(0,i.T1)(e)?((0,i.uQ)(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),J(I,{pattern:e})):(0,i.fD)(e)&&(0,i.uQ)(t)&&(0,i.T1)(t)?J(I,{channel:e,pattern:t}):(0,i.Ix)(e)?((0,i.uQ)(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),J(I,{channel:e})):void 0}var Z=function(){var e=Q.apply(void 0,arguments);return e.payload.maybe=!0,e};function ee(e,t){return(0,i.vD)(t)&&(t=e,e=void 0),J(D,{channel:e,action:t})}var te=function(){var e=ee.apply(void 0,arguments);return e.payload.resolve=!0,e};function ne(e){var t=J(R,e);return t.combinator=!0,t}function re(e){var t=J(L,e);return t.combinator=!0,t}function oe(e,t){var n,r=null;return(0,i.Pc)(e)?n=e:((0,i.YO)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&(0,i.Yj)(n)&&(0,i.Pc)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(F,oe(e,n))}function ae(e,t,n){return void 0===n&&(n=[]),J(F,oe([e,t],n))}function se(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(B,oe(e,n))}function le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(H,oe(e,n))}function ce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return X(le.apply(void 0,[e].concat(n)))}function ue(e){return J(z,e)}function de(e){return void 0===e&&(e=r.Pe),J($,e)}function fe(e){void 0===e&&(e=c);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(V,{selector:e,args:n})}function pe(e,t){return J(U,{pattern:e,buffer:t})}function he(){return J(W,{})}function me(e){return J(q,e)}function ge(e){return J(K,e)}function ve(e){return J(G,e)}var ye=ie.bind(null,a)},21225:function(e,t,n){"use strict";n.d(t,{HR:function(){return h},Ix:function(){return f},Pc:function(){return a},T1:function(){return d},YO:function(){return l},Yj:function(){return s},fD:function(){return m},iv:function(){return c},lJ:function(){return u},mr:function(){return p},uQ:function(){return i},vD:function(){return o}});var r=n(63821),o=function(e){return null==e},i=function(e){return null!=e},a=function(e){return"function"==typeof e},s=function(e){return"string"==typeof e},l=Array.isArray,c=function(e){return e&&a(e.then)},u=function(e){return e&&a(e.next)&&a(e.throw)},d=function e(t){return t&&(s(t)||h(t)||a(t)||l(t)&&t.every(e))},f=function(e){return e&&a(e.take)&&a(e.close)},p=function(e){return a(e)&&e.hasOwnProperty("toString")},h=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},m=function(e){return f(e)&&e[r.Xl]}},63821:function(e,t,n){"use strict";n.d(t,{E_:function(){return s},IO:function(){return a},Pe:function(){return u},Xl:function(){return l},a6:function(){return p},bO:function(){return o},nm:function(){return f},q8:function(){return c},wn:function(){return d},x2:function(){return h},x7:function(){return i}});var r=function(e){return"@@redux-saga/"+e},o=r("CANCEL_PROMISE"),i=r("CHANNEL_END"),a=r("IO"),s=r("MATCH"),l=r("MULTICAST"),c=r("SAGA_ACTION"),u=r("SELF_CANCELLATION"),d=r("TASK"),f=r("TASK_CANCEL"),p=r("TERMINATE"),h=r("LOCATION")},52846:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(90552),s=r(n(53222)),l=n(74848);const c="acms-admin-btn-v2",u=(0,o.forwardRef)((e,t)=>{let{children:n,variant:r="default",size:o="default",asChild:u,className:d,elevated:f=!1,...p}=e;const h=u?a.Slot:"button",m=(0,i.default)(c,{[`${c}-${r}`]:"default"!==r,[`${c}-${o}`]:"default"!==o,[`${c}-elevated`]:f},d);return(0,l.jsx)(h,{ref:(0,s.default)(t),className:m,...p,children:n})});u.displayName="ButtonV2",t.default=u},53151:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ButtonV2",{enumerable:!0,get:function(){return o.default}});var o=r(n(52846))},2560:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=e=>{let{condition:t,wrap:n,children:r}=e;return t?n(r):r}},9930:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(24033));t.default=e=>{let{children:t,text:n,...r}=e;const{copy:a}=(0,i.default)(r),s=(0,o.useCallback)(e=>{const r=o.Children.only(t);a(n),(0,o.isValidElement)(r)&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e)},[a,t,n]),l=o.Children.only(t);return(0,o.isValidElement)(l)?(0,o.cloneElement)(l,{...l.props,onClick:s}):null}},86792:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DropZoneText=t.DropZoneFileSelector=void 0;var o=n(96540),i=r(n(46942)),a=r(n(94986)),s=n(74848);const l=e=>{let{className:t,children:n,"aria-label":r,...a}=e;const l=(0,o.useRef)(null),c=(0,o.useCallback)(()=>{l.current?.click()},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:(0,i.default)("acms-admin-drop-zone-file-selector-btn",t),"aria-label":r,onClick:c,children:n||ACMS.i18n("media.upload")}),(0,s.jsx)("input",{ref:l,type:"file",multiple:!0,name:"files[]",style:{display:"none"},...a})]})};t.DropZoneFileSelector=l;const c=e=>{let{className:t,children:n,...r}=e;return(0,s.jsx)("p",{className:(0,i.default)("acms-admin-drop-zone-text",t),...r,children:n})};t.DropZoneText=c;class u extends o.Component{constructor(e){super(e),this.state={files:[],modifier:"drag-n-drop-hover",dragging:0,reading:!1}}componentDidMount(){setTimeout(()=>{this.setState({modifier:"drag-n-drop-hover drag-n-drop-fadeout"})},800),setTimeout(()=>{this.setState({modifier:""})},1100)}onChange(e){e.target.files instanceof FileList&&(this.setState({reading:!0}),(0,a.default)(e.target.files).then(e=>{const{onComplete:t}=this.props;t(e),this.setState({reading:!1})}))}onDrop(e){return e.preventDefault(),e.stopPropagation(),this.setState({modifier:"",dragging:0,reading:!0}),(0,a.default)(e.dataTransfer.files).then(e=>{const{onComplete:t}=this.props;t(e),this.setState({reading:!1})}),!1}onDragOver(e){return e.preventDefault(),e.stopPropagation(),this.setState({modifier:"drag-n-drop-hover"}),!1}onDragEnter(e){e.preventDefault(),e.stopPropagation();const{dragging:t}=this.state;return this.setState({modifier:"drag-n-drop-hover",dragging:t+1}),!1}onDragLeave(e){e.preventDefault(),e.stopPropagation();let{dragging:t}=this.state;return t--,0===t&&this.setState({modifier:""}),this.setState({dragging:t}),!1}render(){const{children:e}=this.props,{modifier:t,reading:n}=this.state;return(0,s.jsx)("div",{className:(0,i.default)("acms-admin-drop-zone",t),onDragOver:this.onDragOver.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDrop.bind(this),children:e||(0,s.jsx)("div",{className:(0,i.default)("acms-admin-drop-box",t),children:(0,s.jsxs)("div",{className:"acms-admin-drop-zone-inside",children:[(0,s.jsx)(c,{children:ACMS.i18n("media.add_new_media")}),(0,s.jsx)(l,{onChange:this.onChange.bind(this),disabled:!0===n,children:ACMS.i18n("media.upload")}),(0,s.jsx)(c,{children:ACMS.i18n("media.drop_file")})]})})})}}t.default=u},91544:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useParentMenuContext=t.useMenuRadioGroupContext=t.useMenuContext=t.MenuRadioGroupContext=t.MenuContext=void 0;var r=n(96540);const o=t.MenuContext=(0,r.createContext)(void 0),i=()=>{const e=(0,r.useContext)(o);if(!e)throw new Error("useMenuContext must be used within a MenuProvider");return e};t.useMenuContext=i,t.useParentMenuContext=()=>{try{return i()}catch{return}};const a=t.MenuRadioGroupContext=(0,r.createContext)(void 0);t.useMenuRadioGroupContext=()=>{const e=(0,r.useContext)(a);if(!e)throw new Error("useMenuRadioGroupContext must be used within a MenuRadioGroupProvider");return e}},98578:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MENU_ITEM_VALUE_CHANGE_EVENT=t.MENU_ITEM_SELECT_EVENT=t.MENU_ITEM_CHECKED_CHANGE_EVENT=void 0,t.createMenuItemCheckedChangeEvent=function(e){let{checked:t,value:n}=e;return new CustomEvent(r,{detail:{checked:t,value:n}})},t.createMenuItemSelectEvent=function(e){let{value:t}=e;return new CustomEvent(n,{detail:{value:t}})},t.createMenuItemValueChangeEvent=function(e){let{value:t}=e;return new CustomEvent(o,{detail:{value:t}})};const n=t.MENU_ITEM_SELECT_EVENT="acms.dropdown-menu.select",r=t.MENU_ITEM_CHECKED_CHANGE_EVENT="acms.dropdown-menu.checked.change",o=t.MENU_ITEM_VALUE_CHANGE_EVENT="acms.dropdown-menu.value.change"},45035:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0});var o={Menu:!0,MenuTrigger:!0,MenuPopover:!0,MenuList:!0,MenuItem:!0,MenuItemCheckbox:!0,MenuItemRadio:!0,MenuItemRadioGroup:!0,MenuDivider:!0,MenuGroup:!0,SubmenuTriggerItem:!0};Object.defineProperty(t,"Menu",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"MenuDivider",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"MenuGroup",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"MenuItem",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"MenuItemCheckbox",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"MenuItemRadio",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"MenuItemRadioGroup",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"MenuList",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"MenuPopover",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"MenuTrigger",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"SubmenuTriggerItem",{enumerable:!0,get:function(){return m.default}});var i=r(n(49264)),a=r(n(94019)),s=r(n(62472)),l=r(n(90079)),c=r(n(10686)),u=r(n(91002)),d=r(n(3776)),f=r(n(34290)),p=r(n(95332)),h=r(n(93954)),m=r(n(24325)),g=n(98578);Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))})},95332:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(74848);const s=(0,o.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("hr",{ref:t,className:(0,i.default)("acms-admin-divider",n),...r})});s.displayName="MenuDivider",t.default=s},93954:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(74848);const s=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,title:s,...l}=e;const c=(0,o.useId)();return(0,a.jsxs)("div",{ref:t,role:"group",className:(0,i.default)("acms-admin-dropdown-menu-group",r),"aria-labelledby":s?c:void 0,...l,children:[s&&(0,a.jsx)("span",{id:c,className:"acms-admin-dropdown-menu-group-title",children:s}),n]})});s.displayName="MenuGroup",t.default=s},91002:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(8568),a=n(55445),s=n(91544),l=r(n(53222)),c=n(90552),u=n(98578),d=r(n(42786)),f=n(74848);const p=(0,o.forwardRef)((e,t)=>{let{children:n,asChild:r,value:p="",checked:h,defaultChecked:m=!1,onCheckedChange:g,icon:v,isDisabled:y,closeOnSelect:b,onKeyDown:w,onFocus:k,...x}=e;const{menuItemRefs:S,activeIndex:C,getItemProps:M,setHasFocusInside:O}=(0,s.useMenuContext)(),A=(0,o.useRef)(null),E=(0,i.useListItem)({label:y?null:A.current?.textContent}),T=(0,i.useFloatingTree)(),_=E.index===C,N=(0,l.default)(E.ref,t,A,e=>{e&&(S.current=[...S.current,e])}),[j,P]=(0,o.useState)(h||m),I=(0,o.useCallback)(()=>{y||P(e=>!e)},[P,y]),D=(0,o.useCallback)(e=>{y||(w&&w(e)," "!==e.key&&"Enter"!==e.key||P(e=>!e))},[P,w,y]),R=(0,o.useCallback)(e=>{k?.(e),O(!0)},[k,O]);(0,d.default)(()=>{if(g){const e=(0,u.createMenuItemCheckedChangeEvent)({checked:j,value:p});g?.(e)}T?.events.emit("select",{closeOnSelect:b})},[j]);const L=r?c.Slot:"div";return(0,f.jsxs)(L,{...x,ref:N,role:"menuitemcheckbox",tabIndex:_?0:-1,"aria-checked":j,"aria-disabled":y,"data-value":p,...M({onClick:I,onKeyDown:D,onFocus:R}),children:[(0,o.isValidElement)(v)&&(0,o.cloneElement)(v,{...v.props,"aria-hidden":!0}),(0,f.jsx)(c.Slottable,{children:n}),j&&(0,f.jsx)("span",{className:"acms-admin-dropdown-menu-checked",children:(0,f.jsx)(a.Icon,{name:"check"})})]})});p.displayName="MenuItemCheckbox",t.default=p},34290:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(8568),a=n(98578),s=r(n(42786)),l=n(91544),c=n(74848);t.default=e=>{let{children:t,value:n,defaultValue:r="",onValueChange:u,closeOnSelect:d}=e;const[f,p]=(0,o.useState)(n||r),h=(0,i.useFloatingTree)();(0,s.default)(()=>{if(u){const e=(0,a.createMenuItemValueChangeEvent)({value:f});u(e)}h?.events.emit("select",{closeOnSelect:d})},[f]);const m=(0,o.useMemo)(()=>({value:f,setValue:p,onValueChange:u}),[f,p,u]);return(0,c.jsx)(l.MenuRadioGroupContext.Provider,{value:m,children:t})}},3776:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(8568),a=n(55445),s=n(91544),l=r(n(53222)),c=n(90552),u=n(74848);const d=(0,o.forwardRef)((e,t)=>{let{children:n,asChild:r,value:d="",icon:f,isDisabled:p,onKeyDown:h,onFocus:m,...g}=e;const{menuItemRefs:v,activeIndex:y,getItemProps:b,setHasFocusInside:w}=(0,s.useMenuContext)(),k=(0,o.useRef)(null),x=(0,i.useListItem)({label:p?null:k.current?.textContent}),S=x.index===y,C=(0,l.default)(x.ref,t,k,e=>{e&&(v.current=[...v.current,e])}),{value:M,setValue:O}=(0,s.useMenuRadioGroupContext)(),A=(0,o.useCallback)(()=>{p||O(d)},[O,d,p]),E=(0,o.useCallback)(e=>{m?.(e),w(!0)},[m,w]),T=(0,o.useCallback)(e=>{p||(h&&h(e)," "!==e.key&&"Enter"!==e.key||O(d))},[O,d,h,p]),_=(0,o.useMemo)(()=>""!==M&&""!==d&&M===d,[M,d]),N=r?c.Slot:"div";return(0,u.jsxs)(N,{...g,ref:C,role:"menuitemradio",tabIndex:S?0:-1,"aria-checked":_,"aria-disabled":p,"data-value":d,...b({onClick:A,onFocus:E,onKeyDown:T}),children:[(0,o.isValidElement)(f)&&(0,o.cloneElement)(f,{...f.props,"aria-hidden":!0}),(0,u.jsx)(c.Slottable,{children:n}),_&&(0,u.jsx)("span",{className:"acms-admin-dropdown-menu-checked",children:(0,u.jsx)(a.Icon,{name:"check"})})]})});d.displayName="MenuItemRadio",t.default=d},10686:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(8568),s=n(91544),l=r(n(53222)),c=n(90552),u=n(98578),d=n(87312),f=n(74848);const p=(0,o.forwardRef)((e,t)=>{let{commands:n,className:r,...o}=e;return(0,f.jsx)("span",{className:(0,i.default)("acms-admin-dropdown-menu-item-command",r),ref:t,...o,children:n.map(e=>(0,f.jsx)("kbd",{children:d.commandList.find(t=>t.id===e)?.command||e},e))})});p.displayName="MenuItemCommand";const h=(0,o.forwardRef)((e,t)=>{let{children:n,onSelect:r,value:d="",asChild:h,variant:m="default",className:g,icon:v,shortcut:y,onKeyDown:b,onFocus:w,isDisabled:k,isActive:x,closeOnSelect:S,...C}=e;const{menuItemRefs:M,activeIndex:O,getItemProps:A,setHasFocusInside:E}=(0,s.useMenuContext)(),T=(0,o.useRef)(null),_=(0,a.useListItem)({label:k?null:T.current?.textContent}),N=(0,a.useFloatingTree)(),j=_.index===O||x,P=(0,l.default)(_.ref,t,T,e=>{e&&(M.current=[...M.current,e])}),I=(0,o.useCallback)(e=>{if(r){const t=(0,u.createMenuItemSelectEvent)({value:e});r(t)}setTimeout(()=>{N?.events.emit("select",{closeOnSelect:S})},0)},[r,N?.events,S]),D=(0,o.useCallback)(()=>{k||I(d)},[I,d,k]),R=(0,o.useCallback)(e=>{w?.(e),E(!0)},[w,E]),L=(0,o.useCallback)(e=>{k||(b&&b(e)," "!==e.key&&"Enter"!==e.key||I(d))},[I,d,b,k]),F=h?c.Slot:"div";return(0,f.jsxs)(F,{...C,ref:P,role:"menuitem",tabIndex:j?0:-1,className:(0,i.default)(g,{"acms-admin-dropdown-menu-danger":"danger"===m,"acms-admin-dropdown-menu-active":j}),"aria-disabled":k,"data-value":d,...A({onClick:D,onFocus:R,onKeyDown:L}),children:[(0,o.isValidElement)(v)&&(0,o.cloneElement)(v,{...v.props,"aria-hidden":!0}),(0,f.jsx)(c.Slottable,{children:n}),y&&(0,f.jsx)(p,{commands:y??[]})]})});h.displayName="MenuItem",t.default=h},90079:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(91544),s=r(n(53222)),l=n(74848);const c=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...c}=e;const u=(0,o.useId)(),{menuListRef:d}=(0,a.useMenuContext)(),f=(0,s.default)(t,d);return(0,l.jsx)("div",{ref:f,id:u,role:"menu",className:(0,i.default)("acms-admin-dropdown-menu",r),...c,children:n})});c.displayName="MenuList",t.default=c},62472:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(8568),s=n(91544),l=r(n(53222)),c=n(74848);const u=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,style:o,scrollable:u=!1,size:d,...f}=e;const{isOpen:p,menuPopoverRef:h,elementsRef:m,labelsRef:g,context:v,isNested:y,refs:b,floatingStyles:w,getFloatingProps:k,elevation:x,focusManagerOptions:S}=(0,s.useMenuContext)(),C=(0,l.default)(t,h,b.setFloating);return(0,c.jsx)(a.FloatingList,{elementsRef:m,labelsRef:g,children:p&&(0,c.jsx)(a.FloatingPortal,{children:(0,c.jsx)(a.FloatingFocusManager,{context:v,modal:!1,initialFocus:y?-1:0,returnFocus:!y,...S,children:(0,c.jsx)("div",{ref:C,tabIndex:-1,"data-elevation":x,className:(0,i.default)("acms-admin-dropdown-menu-popover",r,{"acms-admin-dropdown-menu-scrollable":u,"acms-admin-dropdown-menu-sm":"small"===d,"acms-admin-dropdown-menu-lg":"large"===d}),style:{...w,...o},...k(f),children:n})})})})});u.displayName="MenuPopover",t.default=u},94019:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(91544),a=r(n(53222)),s=n(90552),l=n(74848);const c=(0,o.forwardRef)((e,t)=>{let{children:n,asChild:r,...o}=e;const{isOpen:c,triggerRef:u,menuPopoverRef:d,refs:f,listItem:p,getReferenceProps:h,hasFocusInside:m}=(0,i.useMenuContext)(),g=r?s.Slot:"button";return(0,l.jsx)(g,{ref:(0,a.default)(t,u,f.setReference,p.ref),type:"button","aria-controls":d?.current?.id,"data-open":c?"":void 0,"data-focus-inside":m?"":void 0,"aria-label":ACMS.i18n("dropdown_menu.trigger_label"),...h(o),children:n})});c.displayName="MenuTrigger",t.default=c},49264:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(8568),a=n(91544),s=r(n(45690)),l=n(74848);const c=e=>{let{children:t,elevationStartLevel:n=2,...r}=e;const c=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(null),f=(0,o.useRef)([]),p=(0,o.useId)(),h=(0,a.useParentMenuContext)(),m=h?h.elevation+1:n,g=(0,s.default)({...r}),v=(0,o.useMemo)(()=>({id:p,...g,triggerRef:c,menuPopoverRef:u,menuListRef:d,menuItemRefs:f,parentMenu:h,elevation:m}),[p,g,c,u,d,f,h,m]);return(0,l.jsx)(i.FloatingNode,{id:g.nodeId,children:(0,l.jsx)(a.MenuContext.Provider,{value:v,children:t})})},u=e=>null===(0,i.useFloatingParentNodeId)()?(0,l.jsx)(i.FloatingTree,{children:(0,l.jsx)(c,{...e})}):(0,l.jsx)(c,{...e});u.displayName="Menu",t.default=u},24325:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(55445),s=n(90552),l=n(91544),c=r(n(53222)),u=n(74848);const d=(0,o.forwardRef)((e,t)=>{let{children:n,asChild:r,className:d,variant:f="default",icon:p,onFocus:h,...m}=e;const{isOpen:g,triggerRef:v,refs:y,listItem:b,getReferenceProps:w,hasFocusInside:k,setHasFocusInside:x,parentMenu:S}=(0,l.useMenuContext)();if(!S)throw new Error("SubmenuTriggerItem must be used within a nested Menu component");const{menuItemRefs:C}=S,M=(0,c.default)(v,t,y.setReference,b.ref,e=>{e&&(C.current=[...C.current,e])}),O=(0,o.useCallback)(e=>{h?.(e),x(!1),S.setHasFocusInside(!0)},[h,x,S]),A=r?s.Slot:"div";return(0,u.jsxs)(A,{...m,ref:M,role:"menuitem",tabIndex:S.activeIndex===b.index?0:-1,className:(0,i.default)(d,{"acms-admin-dropdown-menu-danger":"danger"===f}),"data-open":g?"":void 0,"data-focus-inside":k?"":void 0,"aria-label":ACMS.i18n("dropdown_menu.submenu_trigger_label"),...w(S.getItemProps({...m,onFocus:O})),children:[(0,o.isValidElement)(p)&&(0,o.cloneElement)(p,{...p.props,"aria-hidden":!0}),(0,u.jsx)(s.Slottable,{children:n}),(0,u.jsx)("span",{className:"acms-admin-dropdown-menu-chevron",children:(0,u.jsx)(a.Icon,{name:"chevron_right"})})]})});d.displayName="SubmenuTriggerItem",t.default=d},45690:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let{defaultIsOpen:e=!1,placement:t=e=>e?"right-start":"bottom-start",isOpen:n,closeOnSelect:a=!0,offsetOptions:s=i,flipOptions:l,shiftOptions:c,openDelay:u=75,closeDelay:d,onOpenChange:f,floatingOptions:p={},hoverOptions:h={},clickOptions:m={},roleOptions:g={},dismissOptions:v={},listNavigationOptions:y={},typeaheadOptions:b={},focusManagerOptions:w={},getAnchorRect:k,getReferenceElement:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[S,C]=r.useState(e),[M,O]=r.useState(!1),[A,E]=r.useState(null),T=r.useRef([]),_=r.useRef([]),N=n??S,j=f??C,P=r.useCallback(()=>{j(!0)},[j]),I=r.useCallback(()=>{j(!1)},[j]),D=r.useCallback(()=>{N?I():P()},[N,P,I]),R=(0,o.useFloatingTree)(),L=(0,o.useFloatingNodeId)(),F=(0,o.useFloatingParentNodeId)(),B=(0,o.useListItem)(),H=null!=F,z="function"==typeof s?s(H):s,$="function"==typeof t?t(H):t,V=(0,o.useFloating)({nodeId:L,open:N,placement:$,middleware:[(0,o.offset)(z),(0,o.flip)(l),(0,o.shift)(c)],...p,onOpenChange:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p.onOpenChange?.(e,...n),j(e)},whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.whileElementsMounted?.(...t),(0,o.autoUpdate)(...t)}}),{context:U}=V,W=(0,o.useHover)(U,{enabled:H,delay:{open:u,close:d},...h,handleClose:(0,o.safePolygon)({blockPointerEvents:!0})}),q=(0,o.useClick)(U,{event:"mousedown",toggle:!H,ignoreMouse:H,...m}),K=(0,o.useRole)(U,{role:"menu",...g}),G=(0,o.useDismiss)(U,{bubbles:!0,...v}),Y=(0,o.useListNavigation)(U,{listRef:T,activeIndex:A,nested:H,loop:!0,focusItemOnHover:!1,...y,onNavigate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y.onNavigate?.(...t),E(t[0])}}),J=(0,o.useTypeahead)(U,{listRef:_,activeIndex:A,...b,onMatch:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];b.onMatch?.(...t),N&&E(t[0])}}),X=(0,o.useInteractions)([W,q,K,G,Y,J]);r.useEffect(()=>{if(R)return R.events.on("select",e),R.events.on("menuopen",t),()=>{R.events.off("select",e),R.events.off("menuopen",t)};function e(e){!1!==e.closeOnSelect&&!1!==a&&I()}function t(e){e.nodeId!==L&&e.parentId===F&&I()}},[R,L,F,I,a]),r.useEffect(()=>{N&&R&&R.events.emit("menuopen",{parentId:F,nodeId:L})},[R,N,L,F]);const Q=r.useMemo(()=>k?{getBoundingClientRect:()=>k()||new DOMRect}:null,[k]);return r.useEffect(()=>{if(x){const e=x();if(e&&V.refs.setReference)return void V.refs.setReference(e)}Q&&V.refs.setPositionReference&&V.refs.setPositionReference(Q)},[Q,V.refs,x]),r.useMemo(()=>({isOpen:N,openMenu:P,closeMenu:I,toggleMenu:D,...X,...V,listItem:B,hasFocusInside:M,setHasFocusInside:O,activeIndex:A,setActiveIndex:E,elementsRef:T,labelsRef:_,nodeId:L,parentId:F,isNested:H,closeOnSelect:a,focusManagerOptions:w}),[N,P,I,D,X,V,M,O,A,E,B,L,F,H,a,w])};var r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),o=n(8568);const i=e=>e?e=>{let{elements:t}=e;const n=window.getComputedStyle(t.floating),r=parseFloat(n.paddingRight);return{mainAxis:r,alignmentAxis:-r}}:{mainAxis:4,alignmentAxis:0}},58918:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterToggleButton=t.FilterItemLabel=t.FilterItem=t.FilterInner=t.FilterGroupV2=t.FilterGroupTitle=t.FilterGroup=t.FilterFormControl=t.FilterFooter=t.FilterDetailButton=t.FilterContent=t.FilterBody=t.FilterActionGroup=t.Filter=void 0;var o=n(96540),i=r(n(46942)),a=n(74848);(t.Filter=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter",r),...o,children:n})})).displayName="Filter",(t.FilterBody=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-body",r),...o,children:n})})).displayName="FilterBody",(t.FilterFooter=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-footer",r),...o,children:n})})).displayName="FilterFooter",(t.FilterInner=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-inner",r),...o,children:n})})).displayName="FilterInner",(t.FilterGroup=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-group",r),...o,children:n})})).displayName="FilterGroup",(t.FilterGroupV2=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-group-v2",r),...o,children:n})})).displayName="FilterGroupV2",(t.FilterGroupTitle=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.default)("acms-admin-filter-label",r),...o,children:n})})).displayName="FilterGroupTitle",(t.FilterContent=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,fit:o=!1,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-content",r,{"acms-admin-filter-content-fit":o}),...s,children:n})})).displayName="FilterContent",(t.FilterItem=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,full:o=!1,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-item",r,{"acms-admin-filter-item-full":o}),...s,children:n})})).displayName="FilterItem",(t.FilterItemLabel=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("label",{ref:t,className:(0,i.default)("acms-admin-filter-item-name",r),...o,children:n})})).displayName="FilterItemLabel",(t.FilterActionGroup=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-action-group",r),...o,children:n})})).displayName="FilterActionGroup",(t.FilterFormControl=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.default)("acms-admin-filter-form-control",r),...o,children:n})})).displayName="FilterFormControl",(t.FilterDetailButton=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,...o}=e;return(0,a.jsxs)("button",{type:"button",ref:t,className:(0,i.default)("acms-admin-filter-detail-btn",r),...o,children:[(0,a.jsx)("span",{className:"acms-admin-icon-arrow-right acms-admin-margin-right-mini"}),n]})})).displayName="FilterDetailButton",(t.FilterToggleButton=(0,o.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("button",{type:"button",ref:t,className:(0,i.default)("acms-admin-filter-toggle-btn",n),...r,children:(0,a.jsx)("span",{className:"material-symbols-outlined","aria-hidden":"true"})})})).displayName="FilterToggleButton"},23870:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(58918);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},70750:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),i=r(n(46942)),a=n(90552),s=n(58609),l=n(74848);const c=(0,o.forwardRef)((e,t)=>{let{columns:n,gap:r,rows:o,className:c,style:u,children:d,asChild:f,...p}=e;const h=f?a.Slot:"div",m={...u,..."number"==typeof n?{"--acms-admin-columns":n}:{},..."string"==typeof r?{"--acms-admin-gap":r}:{},..."number"==typeof o?{"--acms-admin-rows":o}:{}},g=(0,i.default)("acms-admin-cssgrid",(0,s.getResponsiveClasses)("acms-admin-g-cols",n),c);return(0,l.jsx)(h,{ref:t,className:g,style:m,...p,children:d})});c.displayName="Grid",t.default=c},33263:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),i=r(n(46942)),a=n(90552),s=n(58609),l=n(74848);const c=(0,o.forwardRef)((e,t)=>{let{col:n,className:r,style:o,children:c,asChild:u,...d}=e;const f=u?a.Slot:"div",p=(0,i.default)((0,s.getResponsiveClasses)("acms-admin-g-col",n),r);return(0,l.jsx)(f,{ref:t,className:p,style:o,...d,children:c})});c.displayName="GridItem",t.default=c},59860:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0});var o={Grid:!0,GridItem:!0};Object.defineProperty(t,"Grid",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"GridItem",{enumerable:!0,get:function(){return a.default}});var i=r(n(70750)),a=r(n(33263)),s=n(14597);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))})},14597:function(){},9272:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(74848);const s=(0,o.forwardRef)((e,t)=>{let{name:n,className:r,...o}=e;return(0,a.jsx)("span",{className:(0,i.default)("material-symbols-outlined",r),"aria-hidden":"true",...o,ref:t,children:n})});s.displayName="Icon",t.default=s},55445:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Icon",{enumerable:!0,get:function(){return o.default}});var o=r(n(9272))},70526:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationSummary=t.PaginationRoot=t.Pagination=void 0;var o=n(96540),i=r(n(46942)),a=n(55445),s=n(20872),l=n(68231),c=n(54659),u=n(74848);t.PaginationRoot=e=>{let{page:t,total:n,totalItems:r,deltaSize:i=3,pageSize:a=20,onChange:c,withNumbers:d=!0,children:f}=e;const p=(0,o.useCallback)((e,t)=>{c(e,t)},[c]),h=(0,o.useMemo)(()=>[...(0,s.range)(t-i,t).filter(e=>e>=1),...(0,s.range)(t,t+i+1).filter(e=>e<=n)],[t,n,i]),m=(0,o.useMemo)(()=>({page:t,total:n,onChange:p,pages:h,pageSize:a,totalItems:r,withNumbers:d}),[t,n,p,h,a,r,d]);return r<=0?null:(0,u.jsx)(l.PaginationContext.Provider,{value:m,children:f})},t.Pagination=e=>{let{className:t,...n}=e;const{page:r,pages:o,total:s,withNumbers:c,onChange:d}=(0,l.usePaginationContext)();return s<=1?null:(0,u.jsx)("nav",{className:(0,i.default)("acms-admin-pager-container",t),"aria-label":ACMS.i18n("pagination.label"),...n,children:(0,u.jsxs)("ul",{className:"acms-admin-pager",children:[(r>1||!c)&&(0,u.jsx)("li",{children:(0,u.jsx)("button",{type:"button",onClick:e=>d(r-1,e),disabled:1===r,"aria-label":ACMS.i18n("pagination.prev"),children:(0,u.jsx)(a.Icon,{name:"arrow_back_ios_new"})})}),c&&o[0]>1&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("li",{children:(0,u.jsx)("button",{type:"button",onClick:e=>d(1,e),children:"1"})}),(0,u.jsx)("li",{children:"..."})]}),c&&o.map(e=>(0,u.jsx)("li",{className:e===r?"cur":void 0,children:(0,u.jsx)("button",{type:"button",onClick:t=>d(e,t),children:e})},`pagination-${e}`)),c&&o[o.length-1]<s&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("li",{children:"..."}),(0,u.jsx)("li",{children:(0,u.jsx)("button",{type:"button",onClick:e=>d(s,e),children:s})})]}),(r<s||!c)&&(0,u.jsx)("li",{children:(0,u.jsx)("button",{type:"button",onClick:e=>d(r+1,e),disabled:r===s,"aria-label":ACMS.i18n("pagination.next"),children:(0,u.jsx)(a.Icon,{name:"arrow_forward_ios"})})})]})})},t.PaginationSummary=()=>{const{page:e,pageSize:t,totalItems:n}=(0,l.usePaginationContext)();return(0,u.jsx)("div",{className:"acms-admin-itemsAmount-container",children:(0,u.jsxs)("p",{children:[(0,c.formatNumber)((e-1)*t+1),ACMS.i18n("pagination.items")," - ",(0,c.formatNumber)(e*t>n?n:e*t),ACMS.i18n("pagination.items")," / ",ACMS.i18n("pagination.all"),(0,c.formatNumber)(n),ACMS.i18n("pagination.items")]})})}},68231:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.usePaginationContext=t.PaginationContext=void 0;var r=n(96540);const o=t.PaginationContext=(0,r.createContext)(void 0);t.usePaginationContext=()=>{const e=(0,r.useContext)(o);if(!e)throw new Error("usePaginationContext must be used within PaginationRoot");return e}},78010:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverContext=void 0,t.usePopoverContext=function(){const e=(0,r.useContext)(o);if(!e)throw new Error("Popover components must be used within a <Popover />");return e};var r=n(96540);const o=t.PopoverContext=(0,r.createContext)(null)},84505:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0});var o={Popover:!0,PopoverTrigger:!0,PopoverContent:!0,PopoverClose:!0,usePopover:!0};Object.defineProperty(t,"Popover",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"PopoverClose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PopoverContent",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"PopoverTrigger",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"usePopover",{enumerable:!0,get:function(){return c.default}});var i=r(n(24704)),a=r(n(30163)),s=r(n(28624)),l=r(n(64355)),c=r(n(66446)),u=n(2828);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))})},64355:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(96540),o=n(78010),i=n(90552),a=n(74848);const s=(0,r.forwardRef)((e,t)=>{let{children:n,asChild:r,...s}=e;const{closePopover:l}=(0,o.usePopoverContext)(),c=r?i.Slot:"button";return(0,a.jsx)(c,{type:"button",ref:t,...s,onClick:e=>{s.onClick?.(e),l()},children:n})});s.displayName="PopoverClose",t.default=s},28624:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(8568),s=n(78010),l=r(n(53222)),c=n(74848);const u=(0,o.forwardRef)((e,t)=>{let{children:n,className:r,style:o,size:u="default",...d}=e;const{context:f,focusManagerOptions:p,...h}=(0,s.usePopoverContext)(),m=(0,l.default)(h.refs.setFloating,t);return f.open?(0,c.jsx)(a.FloatingPortal,{children:(0,c.jsx)(a.FloatingFocusManager,{context:f,modal:h.modal,...p,children:(0,c.jsx)("div",{ref:m,className:(0,i.default)("acms-admin-popover",r,{small:"small"===u}),style:{...h.floatingStyles,...o},...h.getFloatingProps(d),children:n})})}):null});u.displayName="PopoverContent",t.default=u},30163:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(78010),a=n(90552),s=r(n(53222)),l=n(74848);const c=(0,o.forwardRef)((e,t)=>{let{children:n,asChild:r=!1,...o}=e;const c=(0,i.usePopoverContext)(),u=n.ref,d=(0,s.default)(c.refs.setReference,t,u),f=r?a.Slot:"button";return(0,l.jsx)(f,{ref:d,type:"button","data-state":c.isOpen?"open":"closed",...c.getReferenceProps(o),children:n})});c.displayName="PopoverTrigger",t.default=c},24704:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(78010),a=r(n(66446)),s=n(74848);const l=(0,o.forwardRef)((e,t)=>{let{children:n,modal:r=!1,...l}=e;const c=(0,a.default)({modal:r,...l});return(0,o.useImperativeHandle)(t,()=>({openPopover:c.openPopover,closePopover:c.closePopover,togglePopover:c.togglePopover})),(0,s.jsx)(i.PopoverContext.Provider,{value:c,children:n})});l.displayName="Popover",t.default=l},2828:function(){},66446:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let{defaultIsOpen:e=!1,placement:t="bottom",modal:n,isOpen:i,offsetOptions:a=5,flipOptions:s={crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5},shiftOptions:l={padding:5},onOpenChange:c,getReferenceElement:u,getAnchorRect:d,floatingOptions:f={},clickOptions:p={},roleOptions:h={},dismissOptions:m={},focusManagerOptions:g={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[v,y]=r.useState(e),b=i??v,w=c??y,k=r.useCallback(()=>{w(!0)},[w]),x=r.useCallback(()=>{w(!1)},[w]),S=r.useCallback(()=>{b?x():k()},[b,k,x]),C=(0,o.useFloating)({placement:t,open:b,middleware:[(0,o.offset)(a),(0,o.flip)(s),(0,o.shift)(l)],...f,onOpenChange:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];f.onOpenChange?.(e,...n),w(e)},whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.whileElementsMounted?.(...t),(0,o.autoUpdate)(...t)}}),{context:M}=C,O=(0,o.useClick)(M,{enabled:null==i,...p}),A=(0,o.useDismiss)(M,{...m}),E=(0,o.useRole)(M,{...h}),T=(0,o.useInteractions)([O,A,E]),_=r.useMemo(()=>d?{getBoundingClientRect:()=>d()||new DOMRect}:null,[d]);return r.useEffect(()=>{if(u){const e=u();if(e&&C.refs.setReference)return void C.refs.setReference(e)}_&&C.refs.setPositionReference&&C.refs.setPositionReference(_)},[_,C.refs,u]),r.useMemo(()=>({isOpen:b,openPopover:k,closePopover:x,togglePopover:S,...T,...C,modal:n,focusManagerOptions:g}),[b,k,x,S,T,C,n,g])};var r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),o=n(8568)},9512:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(46942)),i=n(74848);t.default=e=>{let{progress:t,alert:n}=e;return(0,i.jsx)("div",{className:"acms-admin-loading-bar acms-admin-active",children:(0,i.jsx)("div",{className:(0,o.default)("acms-admin-loading-bar-inner",{"-alert":n}),style:{width:`${t}%`}})})}},1403:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(46005),i=r(n(21250)),a=n(74848);const s=i.default.span`
  display: inline-block;
  width: 20px;
  height: 20px;

  /* system/images/marker/arrow_block04.png base64URL */
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTMuMTEuMTnMGoPBAAAAWklEQVQImW3MsQnCAABE0Zds4Aqu4C7BWoQbQHCXm0Cyi43YSyZwBLFJIZiD3/wPN7SdMdnebcQJz434wHmAtnvcsVvjG4ckywhJXjjiszIlWf4+217bXn7dF6cNFzP8s1OrAAAAAElFTkSuQmCC');
  background-repeat: no-repeat;
  background-position: center;
  ${e=>{let{$isMenuOpen:t}=e;return t?"transform: rotate(180deg);":""}}
`;t.default=e=>(0,a.jsx)(o.components.DropdownIndicator,{...e,children:(0,a.jsx)(s,{"aria-hidden":!0,$isMenuOpen:e.selectProps.menuIsOpen})})},61623:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(12689)),a=r(n(46942)),s=r(n(1403)),l=r(n(772)),c=n(74848);const u=(e,t)=>{let{styles:n,components:r,className:o,...u}=e;return(0,c.jsx)(i.default,{ref:t,components:{IndicatorSeparator:()=>null,DropdownIndicator:s.default,...r},className:(0,a.default)("acms-admin-rich-select",o),classNames:{menuPortal:()=>"acms-admin-rich-select-menu-portal"},styles:{...l.default,...n},...u})};u.displayName="CreatableSelect",t.default=(0,o.forwardRef)(u)},43096:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46005)),a=r(n(46942)),s=r(n(772)),l=r(n(1403)),c=n(74848);const u=(e,t)=>{let{styles:n,components:r,className:o,...u}=e;return(0,c.jsx)(i.default,{ref:t,components:{IndicatorSeparator:()=>null,DropdownIndicator:l.default,...r},className:(0,a.default)("acms-admin-rich-select",o),classNames:{menuPortal:()=>"acms-admin-rich-select-menu-portal"},styles:{...s.default,...n},...u})};u.displayName="RichSelect",t.default=(0,o.forwardRef)(u)},772:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={container:e=>({...e,fontSize:"var(--acms-admin-rich-select-font-size)",textAlign:"left",lineHeight:1}),control:(e,t)=>({...e,color:"var(--acms-admin-rich-select-color)",minHeight:"var(--acms-admin-rich-select-height)",backgroundColor:"var(--acms-admin-rich-select-bg-color)",border:"var(--acms-admin-rich-select-border)",borderRadius:"var(--acms-admin-rich-select-border-radius)",boxSizing:"border-box",padding:"0 5px",lineHeight:"var(--acms-admin-rich-select-line-height)",boxShadow:t.isFocused&&!t.menuIsOpen?"var(--acms-admin-rich-select-focused-box-shadow)":"var(--acms-admin-rich-select-box-shadow)",...t.menuIsOpen&&{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderColor:"var(--acms-admin-rich-select-open-border-color) !important",backgroundColor:"var(--acms-admin-rich-select-open-bg-color)"},...t.isFocused&&!t.menuIsOpen&&{borderColor:"var(--acms-admin-rich-select-focused-border-color) !important"},...t.isDisabled&&{color:"var(--acms-admin-rich-select-disabled-color)",backgroundColor:"var(--acms-admin-rich-select-disabled-bg-color)",borderColor:"var(--acms-admin-rich-select-disabled-border-color) !important",cursor:"not-allowed"},"&:hover":{backgroundColor:"var(--acms-admin-rich-select-hover-bg-color)",borderColor:"var(--acms-admin-rich-select-hover-border-color)"},borderBottomLeftRadius:void 0,borderBottomRightRadius:void 0}),valueContainer:e=>({...e,padding:"0"}),input:e=>({...e,margin:"0px",padding:"0px","> input":{boxShadow:"none !important",minHeight:"auto !important"}}),clearIndicator:(e,t)=>({...e,...t.isFocused&&{color:"hsl(0, 0%, 80%)"},padding:0}),dropdownIndicator:e=>({...e,padding:0}),multiValue:e=>({...e,backgroundColor:"var(--acms-admin-rich-select-multi-value-bg-color)",color:"var(--acms-admin-rich-select-multi-value-color)",borderColor:"var(--acms-admin-rich-select-multi-value-border-color)",borderStyle:"solid",borderWidth:"1px",fontSize:"var(--acms-admin-rich-select-multi-value-font-size)"}),multiValueLabel:e=>({...e,padding:"2px 5px",fontSize:"0.9em",order:2}),multiValueRemove:e=>({...e,paddingRight:"2px",paddingLeft:"2px",borderRightColor:"var(--acms-admin-rich-select-multi-value-border-color)",borderRightStyle:"solid",borderRightWidth:"1px",borderRadius:"none",order:1,":hover":{backgroundColor:"inherit",color:"inherit",cursor:"pointer"}}),placeholder:e=>({...e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1,color:"var(--acms-admin-rich-select-placeholder-color)"}),menu:(e,t)=>({...e,margin:"4px 0 0",backgroundColor:"var(--acms-admin-rich-select-menu-bg-color)",boxShadow:"none",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--acms-admin-rich-select-menu-border-color)",borderRadius:"0 0 4px 4px",overflow:"hidden",zIndex:"var(--acms-admin-rich-select-menu-z-index)",lineHeight:1.2,width:"max-content",minWidth:e.width,maxWidth:`calc(100vw - ${t.innerRef.current?.getBoundingClientRect().left}px)`}),menuList:e=>({...e,padding:0}),option:(e,t)=>({...e,padding:"8px 10px",backgroundColor:t.isSelected?"var(--acms-admin-rich-select-option-selected-bg-color)":t.isFocused?"var(--acms-admin-rich-select-option-focused-bg-color)":"var(--acms-admin-rich-select-option-bg-color)",color:t.isSelected?"var(--acms-admin-rich-select-option-selected-color)":t.isFocused?"var(--acms-admin-rich-select-option-focused-color)":"var(--acms-admin-rich-select-option-color)",cursor:"pointer"}),noOptionsMessage:e=>({...e,padding:"8px 10px",textAlign:"left",color:"var(--acms-admin-rich-select-no-options-color)"}),loadingMessage:e=>({...e,padding:"8px 10px",textAlign:"left",color:"var(--acms-admin-rich-select-loading-color)"}),menuPortal:e=>({...e,zIndex:"var(--acms-admin-rich-select-menu-z-index)"})}},1982:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.Tabs=t.TabPanel=void 0;var o=r(n(46942)),i=n(96540),a=r(n(42786)),s=n(74848);t.TabPanel=e=>{let{children:t}=e;return t},t.Tabs=e=>{let{children:t,onChange:n,defaultIndex:r=0,index:l}=e;const[c,u]=(0,i.useState)(l||r),d=(0,i.useRef)([]),f=(0,i.useCallback)(e=>{if("ArrowRight"===e.key||"ArrowLeft"===e.key){const n=i.Children.toArray(t);if(n.length>0&&c>=0){let t;t="ArrowRight"===e.key?c+1<n.length?c+1:0:c-1>=0?c-1:n.length-1,u(t)}}},[t,c]);return(0,a.default)(()=>{d.current[c]&&d.current[c].focus()},[c]),(0,a.default)(()=>{n&&n(c)},[c]),(0,s.jsxs)("div",{className:"acms-admin-tabs",children:[(0,s.jsx)("ul",{className:"acms-admin-tabs-inner",role:"tablist",onKeyDown:f,children:i.Children.map(t,(e,t)=>(0,i.isValidElement)(e)?(0,s.jsx)("li",{role:"presentation",children:(0,s.jsx)("button",{ref:e=>{d.current[t]=e},id:`${e.props.id}-tab`,role:"tab","aria-controls":e.props.id,"aria-selected":t===c,tabIndex:t===c?0:-1,type:"button",onClick:()=>u(t),className:(0,o.default)({"acms-admin-tab-active":t===c}),children:e.props.label})},e.props.id):null)}),i.Children.map(t,(e,t)=>{if((0,i.isValidElement)(e)){const{label:n,...r}=e.props;return(0,s.jsx)("div",{role:"tabpanel","aria-hidden":c!==t,className:"acms-admin-tabs-panel",style:{display:c===t?"block":"none"},tabIndex:0,"aria-labelledby":`${e.props.id}-tab`,...r,children:e},e.props.id)}return null})]})}},73905:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(96540),o=n(74848);const i=(0,r.forwardRef)((e,t)=>{let{value:n,onChange:i,className:a="",defaultRows:s=2,maxRows:l=6,...c}=e;const[u,d]=(0,r.useState)(n||""),f=(0,r.useRef)(null),[p,h]=(0,r.useState)(24),m=void 0!==n?n:u;(0,r.useEffect)(()=>{const e=f.current;if(e){const t=function(e){const t=window.getComputedStyle(e);let n=t.lineHeight,r=parseFloat(n);if(n===`${r}`){const t=e.style.lineHeight;e.style.lineHeight=`${n}em`,n=window.getComputedStyle(e).lineHeight,r=parseFloat(n),e.style.lineHeight=t||""}if(-1!==n.indexOf("pt")?r*=4/3:-1!==n.indexOf("mm")?r*=96/25.4:-1!==n.indexOf("cm")?r*=96/2.54:-1!==n.indexOf("in")?r*=96:-1!==n.indexOf("pc")&&(r*=16),r=Math.round(r),"normal"===n){const e=t.fontSize,n=parseFloat(e);r=Math.round(1.2*n)}return r}(e);h(t)}},[]);const g=(0,r.useCallback)(()=>{const e=f.current;if(!e)return;e.style.height="auto";const t=window.getComputedStyle(e),n=(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0),r=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0),{scrollHeight:o}=e,i=Math.min(Math.max(o+n,s*p+n+r),l*p+n+r);e.style.height=`${i}px`},[p,s,l]);return(0,r.useImperativeHandle)(t,()=>({focus:()=>f.current?.focus(),blur:()=>f.current?.blur(),getHeight:()=>f.current?.offsetHeight||0,recalculateHeight:g,value:m,setValue:e=>{void 0===n&&d(e),f.current&&(f.current.value=e)}})),(0,r.useEffect)(()=>{g()},[m,p,s,l,g]),(0,o.jsx)("textarea",{ref:f,defaultValue:m,onChange:e=>{const t=e.target.value;void 0===n&&d(t),i&&i(e)},className:a,style:{resize:"none",...c.style},rows:s,...c})});i.displayName="AutoResizeTextarea",t.default=i},58045:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TooltipCommand",{enumerable:!0,get:function(){return i.default}});var o=r(n(2e4)),i=r(n(13252))},13252:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(87312),s=n(74848);const l=(0,o.forwardRef)((e,t)=>{let{commands:n,className:r,...o}=e;return(0,s.jsx)("span",{className:(0,i.default)("acms-admin-tooltip-command",r),ref:t,...o,children:n.map(e=>(0,s.jsx)("kbd",{children:a.commandList.find(t=>t.id===e)?.command||e},e))})});l.displayName="TooltipCommand",t.default=l},2e4:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=n(57580),a=r(n(46942)),s=n(74848);const l=(0,o.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.Tooltip,{ref:t,className:(0,a.default)("acms-admin-tooltip",n),clickable:!0,...r})});l.displayName="Tooltip",t.default=l},45482:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(46942)),a=n(90552),s=n(74848);const l=(0,o.forwardRef)((e,t)=>{let{asChild:n,children:r,className:o,...l}=e;const c=n?a.Slot:"span";return(0,s.jsx)(c,{ref:t,className:(0,i.default)("acms-admin-hide-visually",o),...l,children:r})});t.default=l},36931:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchSettings=void 0;var o=r(n(1506));t.fetchSettings=async()=>{const e=ACMS.Library.acmsLink({tpl:"ajax/edit/block-editor/settings.json",bid:ACMS.Config.bid,cid:ACMS.Config.cid},!1),{data:t={features:{textItalic:!1,textUnderline:!1,textStrike:!1,textCode:!1,textMarker:!1,textColor:!1,fontSize:!1,fontFamily:!1,textSubscript:!1,textSuperscript:!1,customClass:!1,tableBgColor:!1},blockMenus:[],fontSize:[],fontFamily:[],customClass:[],imageSizes:[],colorPalette:[]}}=await o.default.get(e,{responseType:"json"});return t}},22014:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEditor=void 0;var o=n(83574),i=n(96540),a=n(92706),s=n(99990),l=n(22970),c=n(12385),u=n(89405),d=n(7160),f=r(n(6554)),p=r(n(99232)),h=r(n(29362)),m=n(58045),g=n(5305),v=n(74848);const y=e=>{const t=(0,i.useRef)(null),n=(0,g.useSettings)(),{editor:r,getFilteredBlockMenus:y}=(0,l.useBlockEditor)({...e,blockMenus:n.blockMenus});return r?(0,v.jsxs)(s.SettingsProvider,{settings:n,children:[(0,v.jsx)("div",{className:"acms-admin-block-editor-container",children:(0,v.jsxs)("div",{className:"acms-admin-block-editor",ref:t,children:[(0,v.jsx)(o.EditorContent,{editor:r,className:"acms-admin-block-editor-content"}),(0,v.jsx)(d.ContentItemMenu,{editor:r,getFilteredBlockMenus:y}),(0,v.jsx)(a.LinkMenu,{editor:r,appendTo:t}),(0,v.jsx)(u.TextMenu,{editor:r,appendTo:t}),(0,v.jsx)(c.TableMenu,{editor:r,appendTo:t}),(0,v.jsx)(c.TableRowMenu,{editor:r,appendTo:t}),(0,v.jsx)(c.TableColumnMenu,{editor:r,appendTo:t}),(0,v.jsx)(f.default,{editor:r,appendTo:t}),(0,v.jsx)(p.default,{editor:r,appendTo:t}),(0,v.jsx)(h.default,{editor:r,appendTo:t})]})}),(0,v.jsx)(m.Tooltip,{id:"block-editor-shared-tooltip",delayShow:150})]}):null};t.BlockEditor=y,t.default=y},42879:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.ContentItemMenu=void 0;var o=n(96540),i=r(n(6856)),a=n(56614),s=n(17273),l=n(30473),c=n(45035),u=r(n(19223)),d=n(7043),f=n(90962),p=n(6928),h=n(74848);t.ContentItemMenu=e=>{let{editor:t,getFilteredBlockMenus:n}=e;const r=(0,o.useRef)(null),[m,g]=(0,o.useState)(!1),{currentNode:v,currentNodePos:y,handleNodeChange:b}=(0,p.useData)(),w=(0,u.default)(t,v,y),k=(0,o.memo)(d.IdEditor),x=(0,o.memo)(f.BlockMenus);(0,o.useEffect)(()=>{m?t.commands.setMeta("lockDragHandle",!0):t.commands.setMeta("lockDragHandle",!1)},[t,m]),(0,o.useEffect)(()=>{const{dom:e}=t.view,n=e=>{const t=e.metaKey||e.ctrlKey;t&&e.altKey&&"ArrowUp"===e.key&&(e.preventDefault(),e.stopPropagation(),w.moveBlockUp()),t&&e.altKey&&"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation(),w.moveBlockDown()),t&&e.shiftKey&&"d"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),w.duplicateNode()),t&&e.shiftKey&&"x"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),w.resetTextFormatting()),t&&e.shiftKey&&"backspace"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),w.deleteNode())};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,w]);const S=(0,o.useCallback)(e=>{w.setHeadingId(e)},[w]);return(0,h.jsx)(i.default,{pluginKey:"ContentItemMenu",editor:t,onNodeChange:b,children:(0,h.jsxs)("div",{className:"acms-admin-block-editor-content-item-menu",children:[(0,h.jsx)(s.Toolbar.Button,{type:"button",size:"small",variant:"secondary",onClick:w.handleAdd,"aria-label":"",children:(0,h.jsx)(l.Icon,{name:"add"})}),(0,h.jsxs)(c.Menu,{isOpen:m,onOpenChange:g,getAnchorRect:()=>r.current.getBoundingClientRect(),children:[(0,h.jsx)(s.Toolbar.Button,{type:"button",size:"small",variant:"secondary",ref:r,"aria-label":"",onClick:()=>{const{state:e}=t,{tr:n}=e,r=t.state.doc.nodeAt(y);if(r){if(r.isTextblock){const r=a.TextSelection.create(e.doc,y+1);t.view.dispatch(n.setSelection(r).scrollIntoView())}else{const r=a.NodeSelection.create(e.doc,y);t.view.dispatch(n.setSelection(r).scrollIntoView())}g(e=>!e)}},children:(0,h.jsx)(l.Icon,{name:"drag_indicator"})}),(0,h.jsx)(c.MenuPopover,{size:"large","data-elevation":"3",children:(0,h.jsxs)(c.MenuList,{children:[(0,h.jsx)(x,{menus:n({query:"",editor:t}),editor:t,currentPos:y}),(0,h.jsx)(c.MenuItem,{icon:(0,h.jsx)(l.Icon,{name:"keyboard_arrow_up"}),shortcut:["Mod","Alt","ArrowUp"],onSelect:()=>w.moveBlockUp(v,y),children:""}),(0,h.jsx)(c.MenuItem,{icon:(0,h.jsx)(l.Icon,{name:"keyboard_arrow_down"}),shortcut:["Mod","Alt","ArrowDown"],onSelect:()=>w.moveBlockDown(v,y),children:""}),(0,h.jsx)(c.MenuItem,{icon:(0,h.jsx)(l.Icon,{name:"library_add"}),shortcut:["Mod","Shift","D"],onSelect:()=>w.duplicateNode(v,y),children:""}),(0,h.jsx)(c.MenuItem,{icon:(0,h.jsx)(l.Icon,{name:"content_copy"}),onSelect:w.copyNodeToClipboard,children:""}),(0,h.jsx)(c.MenuItem,{icon:(0,h.jsx)(l.Icon,{name:"format_clear"}),shortcut:["Mod","Shift","X"],onSelect:()=>w.resetTextFormatting(v,y),children:""}),(0,h.jsx)(c.MenuItem,{variant:"danger",icon:(0,h.jsx)(l.Icon,{name:"delete"}),shortcut:["Mod","Shift","Backspace"],onSelect:()=>w.deleteNode(v,y),children:""}),(0,h.jsx)(c.MenuDivider,{}),(0,h.jsx)(k,{onChange:S,value:v?.attrs.id})]})})]})]})})}},90962:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMenus=void 0;var r=n(45035),o=n(30473),i=n(28459),a=n(74848);t.BlockMenus=e=>{let{menus:t,editor:n,currentPos:s}=e;const l=(0,i.useFilteredCommands)(t,n,s);return l.length>0?(0,a.jsxs)(r.Menu,{children:[(0,a.jsx)(r.SubmenuTriggerItem,{icon:(0,a.jsx)(o.Icon,{name:"sync"}),children:""}),(0,a.jsx)(r.MenuPopover,{"data-elevation":"3",children:(0,a.jsx)(r.MenuList,{children:l.map(e=>(0,a.jsx)(r.MenuGroup,{title:e.title,children:e.commands.map(e=>(0,a.jsx)(r.MenuItem,{icon:(0,a.jsx)(o.Icon,{name:e.iconName}),onSelect:e.convert?()=>e.convert(n,s):()=>{},children:e.label},`${e.name}_${e.label}`))},e.title))})})]}):null}},7043:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.IdEditor=void 0;var o=n(96540),i=n(30473),a=n(53151),s=n(84505),l=n(45035),c=r(n(67017)),u=n(74848);t.IdEditor=e=>{let{onChange:t,value:n}=e;const[r,d]=(0,o.useState)(!1);return(0,u.jsxs)(s.Popover,{isOpen:r,onOpenChange:d,modal:!0,placement:"right",children:[(0,u.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,u.jsxs)(l.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"grid_3x3"}),onSelect:()=>d(e=>!e),closeOnSelect:!1,children:[n||"ID",n&&(0,u.jsx)("span",{style:{marginLeft:"auto"},children:(0,u.jsx)(i.Icon,{name:"edit"})})]})}),(0,u.jsx)(s.PopoverContent,{"data-elevation":"3",className:"acms-admin-block-editor-id-editor",children:(0,u.jsx)("div",{children:(0,u.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const n=new FormData(e.target).get("id");d(!1),t(n)},className:"acms-admin-form",children:(0,u.jsxs)(c.default,{spacing:"0.5rem",align:"start",children:[(0,u.jsxs)(c.default,{align:"start",className:"acms-admin-width-max",children:[(0,u.jsx)("label",{htmlFor:"input-text-id-editor",children:"ID"}),(0,u.jsx)("input",{id:"input-text-id-editor",name:"id",pattern:"^[a-zA-Z0-9_\\-]+$",type:"text",className:"acms-admin-form-width-full",defaultValue:n,onKeyDown:e=>e.stopPropagation()})]}),(0,u.jsx)(a.ButtonV2,{variant:"filled",size:"small",type:"submit",children:""})]})})})})]})}},19223:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(56614),o=n(96540);t.default=(e,t,n)=>{const i=(0,o.useCallback)((t,n)=>{const{state:o}=e,{selection:i}=o,{$from:a}=i;let s=t??null,l=n??null;if(!s||!l)if(i instanceof r.NodeSelection)s=i.node,l=i.from;else{const e=a.depth>=1?1:a.depth;if(s=a.node(e),!(e>0))return{curNode:null,curPos:-1};l=a.before(e)}return{curNode:s,curPos:l}},[e]);return{resetTextFormatting:(0,o.useCallback)((t,n)=>{const{curNode:r,curPos:o}=i(t,n);if(!r||-1===o)return;const a=e.chain();a.setBlockAttrs(o,{id:null,class:null}),a.setNodeSelection(o).unsetAllMarks(),"paragraph"!==r?.type.name&&a.focus().setParagraph(),a.run()},[e,i]),duplicateNode:(0,o.useCallback)((t,n)=>{const{curNode:r,curPos:o}=i(t,n);if(!r||-1===o)return;const a=r.toJSON();e.chain().setMeta("hideDragHandle",!0).insertContentAt(o+(r?.nodeSize||0),{type:a.type,attrs:{...a.attrs,id:null},content:a.content||[]}).run()},[e,i]),copyNodeToClipboard:(0,o.useCallback)(()=>{const e=t?.textContent||"";navigator.clipboard.writeText(e).catch(e=>{console.error("Clipboard copy failed:",e)})},[t]),deleteNode:(0,o.useCallback)((t,n)=>{const{curNode:r,curPos:o}=i(t,n);r&&-1!==o&&e.chain().setMeta("hideDragHandle",!0).setNodeSelection(o).deleteSelection().run()},[e,i]),handleAdd:(0,o.useCallback)(()=>{if(-1!==n){const r=n+(t?.nodeSize||0),o="paragraph"===t?.type.name&&0===t?.content?.size,i=o?n+2:r+2;e.chain().command(e=>{let{dispatch:t,tr:i,state:a}=e;return!t||(o?i.insertText("/",n,n+1):i.insert(r,a.schema.nodes.paragraph.create(null,[a.schema.text("/")])),t(i))}).focus(i).run()}},[t,n,e]),setHeadingId:(0,o.useCallback)(t=>{e.chain().setBlockAttrs(n,{id:t}).run()},[n,e]),setBlockAttrs:(0,o.useCallback)(t=>{e.chain().setBlockAttrs(n,t).run()},[n,e]),moveBlockUp:(0,o.useCallback)((t,n)=>{const{state:r}=e,{$from:o}=r.selection,{curNode:a,curPos:s}=i(t,n);if(!a||-1===s)return;const{nodeSize:l}=a,c=o.index(0);if(0===c)return;const u=r.doc.child(c-1);if(!u)return;const d=a.toJSON();e.chain().deleteRange({from:s,to:s+l}).insertContentAt(s-u.nodeSize,d).run()},[e,i]),moveBlockDown:(0,o.useCallback)((t,n)=>{const{state:r}=e,{curNode:o,curPos:a}=i(t,n);if(!o||-1===a)return;const{nodeSize:s}=o,l=r.doc.resolve(a+s).nodeAfter;if(!l)return;const c=l.nodeSize,u=o.toJSON();e.chain().deleteRange({from:a,to:a+s}).insertContentAt(a+c,u).run()},[e,i])}}},6928:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useData=void 0;var r=n(96540);t.useData=()=>{const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(-1),i=(0,r.useCallback)(e=>{e.node&&t(e.node),o(e.pos)},[o,t]);return{currentNode:e,currentNodePos:n,setCurrentNode:t,setCurrentNodePos:o,handleNodeChange:i}}},7160:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(42879);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},94339:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkMenu=void 0;var r=n(83574),o=n(96540),i=n(84505),a=n(51542),s=n(32328),l=n(4923),c=n(74848);const u=e=>{let{editor:t,appendTo:n}=e;const[u,d]=(0,o.useState)(!1),[f,p]=(0,o.useState)(!1),h=(0,o.useCallback)(e=>{let{editor:t}=e;const n=t.isActive("link")&&!(0,a.isTextSelected)({editor:t});return p(n),n},[]),{href:m,target:g}=t.getAttributes("link"),v=(0,o.useCallback)(()=>{d(!0)},[]),y=(0,o.useCallback)((e,n)=>{t.chain().focus().extendMarkRange("link").setLink({href:e,target:n?"_blank":null,rel:n?"noopener noreferrer":null}).run(),d(!1)},[t]),b=(0,o.useCallback)(()=>(t.chain().focus().extendMarkRange("link").unsetLink().run(),d(!1),null),[t]),w=(0,o.useCallback)(()=>{const{view:e}=t,{state:n}=t,{$from:r}=n.selection,o=r.before(r.depth),i=e.nodeDOM(o);return i instanceof HTMLElement?i.getBoundingClientRect():null},[t]);return(0,c.jsx)(r.BubbleMenu,{editor:t,pluginKey:"linkMenu",shouldShow:h,updateDelay:0,tippyOptions:{placement:"bottom-start",appendTo:()=>n?.current,onHidden:()=>{d(!1)}},children:(0,c.jsx)(i.Popover,{modal:!0,isOpen:f,getAnchorRect:w,children:(0,c.jsx)(i.PopoverContent,{"data-elevation":"2",size:u?"default":"small",children:u?(0,c.jsx)(l.LinkEditorPanel,{initialUrl:m,initialOpenInNewTab:"_blank"===g,onSetLink:y,onClear:b}):(0,c.jsx)(s.LinkPreviewPanel,{url:m,onClear:b,onEdit:v})})})})};t.LinkMenu=u,t.default=u},5128:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LinkMenu",{enumerable:!0,get:function(){return r.LinkMenu}});var r=n(94339)},25349:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextMenu=void 0;var r=n(83574),o=n(96540),i=n(84505),a=n(99990),s=n(4923),l=n(30473),c=n(17273),u=n(28459),d=n(8369),f=n(75309),p=n(43829),h=n(58279),m=n(23504),g=n(26849),v=n(10479),y=n(74848);const b=(0,o.memo)(c.Toolbar.Button),w=(0,o.memo)(p.ContentTypePicker),k=(0,o.memo)(s.ColorPicker),x=(0,o.memo)(h.FontFamilyPicker),S=(0,o.memo)(m.FontSizePicker),C=(0,o.memo)(g.CustomClassPicker);t.TextMenu=e=>{let{editor:t,appendTo:n}=e;const p=(0,d.useTextmenuCommands)(t),h=(0,f.useTextmenuStates)(t),{features:m,blockMenus:g}=(0,a.useSettingsContext)(),{getFilteredBlockMenus:M}=(0,u.useBlockMenus)({blockMenus:g}),O=(0,o.useRef)(null),[A,E]=(0,o.useState)(!1),[T,_]=(0,o.useState)(!1),N=()=>{const e=O.current;e&&(E(e.scrollLeft>0),_(e.scrollLeft+e.clientWidth<e.scrollWidth-1))},j=(0,o.useMemo)(()=>h.isAlignLeft?"left":h.isAlignCenter?"center":h.isAlignRight?"right":"left",[h.isAlignLeft,h.isAlignCenter,h.isAlignRight]);return(0,o.useEffect)(()=>{const e=O.current;if(e)return e.addEventListener("scroll",N),document.addEventListener("resize",N),()=>{e.removeEventListener("scroll",N),document.removeEventListener("resize",N)}},[t]),(0,o.useEffect)(()=>{const e=e=>{if("Tab"===e.key){const e=O.current;e&&e.focus()}};return t.view.dom.addEventListener("keydown",e,{capture:!0}),()=>{t.view.dom.removeEventListener("keydown",e,{capture:!0})}},[t.view.dom]),(0,y.jsx)(r.BubbleMenu,{tippyOptions:{theme:"text-menu",maxWidth:"100%",appendTo:()=>n?.current??document.body,onShow(){requestAnimationFrame(()=>{N()})},popperOptions:{placement:"top-start",modifiers:[{name:"preventOverflow",options:{boundary:n?.current??"clippingParents",padding:8}},{name:"flip",options:{fallbackPlacements:["bottom-start","top"]}}]},zIndex:100018},editor:t,pluginKey:"textMenu",shouldShow:h.shouldShow,updateDelay:100,children:(0,y.jsxs)(c.Toolbar,{ref:O,className:"acms-admin-block-editor-toolbar-scrollable",onKeyDownCapture:e=>{"Tab"===e.key&&t.commands.focus()},children:[(0,y.jsx)(w,{menus:M({query:"",editor:t}),editor:t,currentPos:t.state.selection.$from.before(1)}),(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","B"],onClick:p.onBold,active:h.isBold,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_bold"})}),m?.textItalic&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","I"],onClick:p.onItalic,active:h.isItalic,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_italic"})}),m?.textUnderline&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","U"],onClick:p.onUnderline,active:h.isUnderline,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_underlined"})}),m?.textStrike&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","Shift","S"],onClick:p.onStrike,active:h.isStrike,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_strikethrough"})}),m?.textCode&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","E"],onClick:p.onCode,active:h.isCode,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"code"})}),(0,y.jsx)(v.EditLinkPopover,{editor:t,onSetLink:p.onLink,onClearLink:p.onUnsetLink,isActive:h.isLink}),(0,y.jsx)(s.AlignPicker,{align:j,onChange:e=>{"left"===e?p.onAlignLeft():"center"===e?p.onAlignCenter():"right"===e&&p.onAlignRight()}}),m?.textMarker&&(0,y.jsxs)(i.Popover,{modal:!0,placement:"top-start",children:[(0,y.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,y.jsx)(b,{type:"button",tooltip:"",active:!!h.currentHighlight,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_ink_highlighter"})})}),(0,y.jsx)(i.PopoverContent,{"data-elevation":"3",children:(0,y.jsx)(k,{color:h.currentHighlight,onChange:p.onChangeHighlight,onClear:p.onClearHighlight})})]}),m?.textColor&&(0,y.jsxs)(i.Popover,{modal:!0,placement:"top-start",children:[(0,y.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,y.jsx)(b,{type:"button",active:!!h.currentColor,tooltip:"","aria-label":"",children:(0,y.jsx)(l.Icon,{name:"format_color_text"})})}),(0,y.jsx)(i.PopoverContent,{"data-elevation":"3",children:(0,y.jsx)(k,{color:h.currentColor,onChange:p.onChangeColor,onClear:p.onClearColor})})]}),m?.textSubscript&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod",","],onClick:p.onSubscript,active:h.isSubscript,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"subscript"})}),m?.textSuperscript&&(0,y.jsx)(b,{type:"button",tooltip:"",tooltipShortcut:["Mod","."],onClick:p.onSuperscript,active:h.isSuperscript,"aria-label":"",children:(0,y.jsx)(l.Icon,{name:"superscript"})}),m?.fontSize&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.Toolbar.Divider,{}),(0,y.jsx)(S,{onChange:p.onSetFontSize,value:h.currentSize||""})]}),m?.fontFamily&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.Toolbar.Divider,{}),(0,y.jsx)(x,{onChange:p.onSetFont,value:h.currentFont||""})]}),m?.customClass&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.Toolbar.Divider,{}),(0,y.jsx)(C,{onChange:p.onCustomClass,onRemove:p.removeCustomClass,value:h.currentCustomClass||""})]}),A&&(0,y.jsx)("button",{type:"button",onClick:()=>{O.current?.scrollBy({left:-150,behavior:"smooth"})},"aria-label":"",className:"acms-admin-block-editor-toolbar-arrow acms-admin-block-editor-toolbar-arrow-left",children:(0,y.jsx)(l.Icon,{name:"chevron_left"})}),T&&(0,y.jsx)("button",{type:"button",onClick:()=>{O.current?.scrollBy({left:150,behavior:"smooth"})},"aria-label":"",className:"acms-admin-block-editor-toolbar-arrow acms-admin-block-editor-toolbar-arrow-right",children:(0,y.jsx)(l.Icon,{name:"chevron_right"})})]})})}},43829:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTypePicker=void 0;var r=n(96540),o=n(17273),i=n(30473),a=n(45035),s=n(28459),l=n(74848);t.ContentTypePicker=e=>{let{menus:t,editor:n,currentPos:c}=e;const u=(0,r.useMemo)(()=>t.flatMap(e=>e.commands).find(e=>(e.isActive?.(n)??!1)&&!0===e.isTextMenu),[t,n]),d=(0,s.useFilteredCommands)(t,n,c);return(0,l.jsxs)(a.Menu,{children:[u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.MenuTrigger,{asChild:!0,children:(0,l.jsxs)(o.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",children:[(0,l.jsx)(i.Icon,{name:u.iconName}),u.label,(0,l.jsx)(i.Icon,{name:"keyboard_arrow_down"})]})}),(0,l.jsx)(o.Toolbar.Divider,{})]}),(0,l.jsx)(a.MenuPopover,{scrollable:!0,"data-elevation":"3",children:(0,l.jsx)(a.MenuList,{children:d.map(e=>(0,l.jsx)(a.MenuGroup,{title:e.title,children:e.commands.map(e=>(0,l.jsx)(a.MenuItem,{icon:(0,l.jsx)(i.Icon,{name:e.iconName}),onSelect:e.convert?()=>e.convert(n,c):()=>{},children:e.label},`${e.name}_${e.label}`))},e.title))})})]})}},26849:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomClassPicker=void 0;var r=n(96540),o=n(99990),i=n(45035),a=n(30473),s=n(17273),l=n(74848);t.CustomClassPicker=e=>{let{onChange:t,onRemove:n,value:c}=e;const{customClass:u}=(0,o.useSettingsContext)(),[d,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=u.find(e=>e.value===c.replace("custom-mark ",""));f(e||null)},[u,c]);const p=(0,r.useCallback)(e=>{t(`custom-mark ${e}`)},[t]);return(0,l.jsxs)(i.Menu,{closeOnSelect:!0,children:[(0,l.jsx)(i.MenuTrigger,{asChild:!0,children:(0,l.jsxs)(s.Toolbar.Button,{type:"button",tooltip:"",active:!!d?.value,"aria-label":"",children:[(0,l.jsx)(a.Icon,{name:"build"}),d?.label||"",(0,l.jsx)(a.Icon,{name:"keyboard_arrow_down"})]})}),(0,l.jsx)(i.MenuPopover,{"data-elevation":"3",children:(0,l.jsx)(i.MenuList,{children:(0,l.jsx)(i.MenuGroup,{title:"",children:(0,l.jsxs)(i.MenuItemRadioGroup,{defaultValue:d?.value,onValueChange:e=>{p(e.detail.value)},children:[u?.map(e=>(0,l.jsx)(i.MenuItemRadio,{value:e.value,icon:(0,l.jsx)(a.Icon,{name:"build"}),children:e.label},`${e.label}_${e.value}`)),(0,l.jsx)(i.MenuItem,{variant:"danger",icon:(0,l.jsx)(a.Icon,{name:"delete"}),onSelect:n,children:""})]})})})})]})}},10479:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EditLinkPopover=void 0;var r=n(84505),o=n(4923),i=n(17273),a=n(30473),s=n(96540),l=n(74848);t.EditLinkPopover=e=>{let{editor:t,onSetLink:n,onClearLink:c,isActive:u}=e;const d=(0,s.useRef)(null),{href:f,target:p}=t.getAttributes("link"),h=(0,s.useCallback)((e,t)=>{n(e,t),d.current?.closePopover()},[n]),m=(0,s.useCallback)(()=>{c(),d.current?.closePopover()},[c]);return(0,l.jsxs)(r.Popover,{modal:!0,ref:d,children:[(0,l.jsx)(r.PopoverTrigger,{asChild:!0,children:(0,l.jsx)(i.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",active:u,children:(0,l.jsx)(a.Icon,{name:"link"})})}),(0,l.jsx)(r.PopoverContent,{"data-elevation":"2",children:(0,l.jsx)(o.LinkEditorPanel,{initialUrl:f,initialOpenInNewTab:"_blank"===p,onSetLink:h,onClear:m})})]})}},58279:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FontFamilyPicker=void 0;var r=n(96540),o=n(99990),i=n(30473),a=n(17273),s=n(45035),l=n(74848);t.FontFamilyPicker=e=>{let{onChange:t,value:n}=e;const{fontFamily:c}=(0,o.useSettingsContext)(),u=(0,r.useMemo)(()=>c?.find(e=>e.value===n),[c,n]),d=(0,r.useMemo)(()=>u?.label||"",[u]),f=(0,r.useCallback)(e=>t(e),[t]);return(0,l.jsxs)(s.Menu,{closeOnSelect:!0,children:[(0,l.jsx)(s.MenuTrigger,{asChild:!0,children:(0,l.jsxs)(a.Toolbar.Button,{type:"button",tooltip:"",active:!!u?.value,"aria-label":"",children:[(0,l.jsx)(i.Icon,{name:"slab_serif"}),d,(0,l.jsx)(i.Icon,{name:"keyboard_arrow_down"})]})}),(0,l.jsx)(s.MenuPopover,{"data-elevation":"3",children:(0,l.jsx)(s.MenuList,{children:c?.length>0&&(0,l.jsx)(s.MenuGroup,{title:"",children:(0,l.jsx)(s.MenuItemRadioGroup,{defaultValue:u?.value,onValueChange:e=>{f(e.detail.value)},children:c.map(e=>(0,l.jsx)(s.MenuItemRadio,{value:e.value,children:(0,l.jsx)("span",{style:{fontFamily:e.value},children:e.label})},`${e.label}_${e.value}`))})})})})]})}},23504:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FontSizePicker=void 0;var r=n(96540),o=n(99990),i=n(30473),a=n(17273),s=n(45035),l=n(74848);t.FontSizePicker=e=>{let{onChange:t,value:n}=e;const{fontSize:c}=(0,o.useSettingsContext)(),u=(0,r.useMemo)(()=>c?.find(e=>e.value===n),[c,n]),d=(0,r.useMemo)(()=>u?.label.split(" ")[0]||"",[u]),f=(0,r.useCallback)(e=>t(e),[t]);return(0,l.jsxs)(s.Menu,{closeOnSelect:!0,children:[(0,l.jsx)(s.MenuTrigger,{asChild:!0,children:(0,l.jsxs)(a.Toolbar.Button,{type:"button",tooltip:"",active:!!u?.value,"aria-label":"",children:[(0,l.jsx)(i.Icon,{name:"format_size"}),d,(0,l.jsx)(i.Icon,{name:"keyboard_arrow_down"})]})}),(0,l.jsx)(s.MenuPopover,{"data-elevation":"3",children:(0,l.jsx)(s.MenuList,{children:c?.length>0&&(0,l.jsx)(s.MenuGroup,{title:"",children:(0,l.jsx)(s.MenuItemRadioGroup,{defaultValue:u?.value,onValueChange:e=>{f(e.detail.value)},children:c.map(e=>(0,l.jsx)(s.MenuItemRadio,{value:e.value,children:(0,l.jsx)("span",{style:{fontSize:e.value},children:e.label})},`${e.label}_${e.value}`))})})})})]})}},8369:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTextmenuCommands=void 0;var r=n(96540);t.useTextmenuCommands=e=>{const t=(0,r.useCallback)(()=>e.chain().focus().toggleBold().run(),[e]),n=(0,r.useCallback)(()=>e.chain().focus().toggleItalic().run(),[e]),o=(0,r.useCallback)(()=>e.chain().focus().toggleStrike().run(),[e]),i=(0,r.useCallback)(()=>e.chain().focus().toggleUnderline().run(),[e]),a=(0,r.useCallback)(()=>e.chain().focus().toggleCode().run(),[e]),s=(0,r.useCallback)(()=>e.chain().focus().toggleCodeBlock().run(),[e]),l=(0,r.useCallback)(()=>e.chain().focus().toggleSubscript().run(),[e]),c=(0,r.useCallback)(()=>e.chain().focus().toggleSuperscript().run(),[e]),u=(0,r.useCallback)(()=>e.chain().focus().setTextAlign("left").run(),[e]),d=(0,r.useCallback)(()=>e.chain().focus().setTextAlign("center").run(),[e]),f=(0,r.useCallback)(()=>e.chain().focus().setTextAlign("right").run(),[e]),p=(0,r.useCallback)(()=>e.chain().focus().setTextAlign("justify").run(),[e]),h=(0,r.useCallback)(t=>e.chain().setFontColor(t).run(),[e]),m=(0,r.useCallback)(()=>e.chain().focus().unsetFontColor().run(),[e]),g=(0,r.useCallback)(t=>e.chain().setHighlight({color:t}).run(),[e]),v=(0,r.useCallback)(()=>e.chain().focus().unsetHighlight().run(),[e]),y=(0,r.useCallback)((t,n)=>e.chain().focus().setLink({href:t,target:n?"_blank":""}).run(),[e]),b=(0,r.useCallback)(()=>{e.chain().focus().unsetLink().run()},[e]);return{onBold:t,onItalic:n,onStrike:o,onUnderline:i,onCode:a,onCodeBlock:s,onSubscript:l,onSuperscript:c,onAlignLeft:u,onAlignCenter:d,onAlignRight:f,onAlignJustify:p,onChangeColor:h,onClearColor:m,onChangeHighlight:g,onClearHighlight:v,onSetFont:(0,r.useCallback)(t=>t&&0!==t.length?e.chain().focus().setFontFamily(t).run():e.chain().focus().unsetFontFamily().run(),[e]),onSetFontSize:(0,r.useCallback)(t=>t&&0!==t.length?e.chain().focus().setFontSize(t).run():e.chain().focus().unsetFontSize().run(),[e]),onLink:y,onUnsetLink:b,onCustomClass:(0,r.useCallback)(t=>{e.commands.setMark("customMark",{class:t})},[e]),removeCustomClass:(0,r.useCallback)(()=>{e.commands.unsetMark("customMark")},[e])}}},75309:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTextmenuStates=void 0;var r=n(96540),o=n(51542);t.useTextmenuStates=e=>{const t=(0,r.useCallback)(t=>{let{view:n,from:r}=t;if(!n)return!1;const i=n.domAtPos(r||0).node,a=n.nodeDOM(r||0);return!(0,o.isCustomNodeSelected)(e,a||i)&&(0,o.isTextSelected)({editor:e})},[e]);return{isLink:e.isActive("link"),isBold:e.isActive("bold"),isItalic:e.isActive("italic"),isStrike:e.isActive("strike"),isUnderline:e.isActive("underline"),isCode:e.isActive("code"),isSubscript:e.isActive("subscript"),isSuperscript:e.isActive("superscript"),isAlignLeft:e.isActive({textAlign:"left"}),isAlignCenter:e.isActive({textAlign:"center"}),isAlignRight:e.isActive({textAlign:"right"}),isAlignJustify:e.isActive({textAlign:"justify"}),currentColor:e.getAttributes("textStyle")?.color||void 0,currentHighlight:e.getAttributes("highlight")?.color||void 0,currentFont:e.getAttributes("textStyle")?.fontFamily||void 0,currentSize:e.getAttributes("textStyle")?.fontSize||void 0,currentCustomClass:e.getAttributes("customMark")?.class||void 0,shouldShow:t}}},89405:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(25349);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},92706:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5128);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var o=n(89405);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=n(7160);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},82982:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignPicker=void 0;var r=n(17273),o=n(30473),i=n(45035),a=n(74848);t.AlignPicker=e=>{let{align:t,onChange:n}=e;return(0,a.jsxs)(i.Menu,{closeOnSelect:!0,children:[(0,a.jsx)(i.MenuTrigger,{asChild:!0,children:(0,a.jsxs)(r.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",children:["left"===t&&(0,a.jsx)(o.Icon,{name:"format_align_left"}),"center"===t&&(0,a.jsx)(o.Icon,{name:"format_align_center"}),"right"===t&&(0,a.jsx)(o.Icon,{name:"format_align_right"}),(0,a.jsx)(o.Icon,{name:"keyboard_arrow_down"})]})}),(0,a.jsx)(i.MenuPopover,{size:"medium","data-elevation":"3",children:(0,a.jsx)(i.MenuList,{children:(0,a.jsx)(i.MenuGroup,{title:"",children:(0,a.jsxs)(i.MenuItemRadioGroup,{defaultValue:t,onValueChange:e=>{n(e.detail.value)},children:[(0,a.jsxs)(i.MenuItemRadio,{value:"left",children:[(0,a.jsx)(o.Icon,{name:"format_align_left"}),""]},"align-left"),(0,a.jsxs)(i.MenuItemRadio,{value:"center",children:[(0,a.jsx)(o.Icon,{name:"format_align_center"}),""]},"align-center"),(0,a.jsxs)(i.MenuItemRadio,{value:"right",children:[(0,a.jsx)(o.Icon,{name:"format_align_right"}),""]},"align-right")]})})})})]})}},71963:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(82982);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},15632:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorButton=void 0;var r=n(96540),o=n(51542),i=n(74848);(t.ColorButton=(0,r.memo)(e=>{let{color:t,active:n,onColorChange:a}=e;const s=(0,o.cn)("acms-admin-block-editor-text-menu-color-picker-palette-item",n&&"active"),l=(0,o.cn)("acms-admin-block-editor-text-menu-color-picker-palette-bubble",n&&"active"),c=(0,r.useCallback)(()=>{a&&a(t||"")},[a,t]);return(0,i.jsx)("button",{type:"button",onClick:c,className:s,"aria-label":`select ${t}`,children:(0,i.jsx)("div",{style:{backgroundColor:t,color:t},className:l})})})).displayName="ColorButton"},65722:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;var r=n(96540),o=n(34798),i=n(99990),a=n(15632),s=n(17273),l=n(30473),c=n(74848);const u=e=>/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e);t.ColorPicker=e=>{let{color:t,onChange:n,onClear:d}=e;const{colorPalette:f}=(0,i.useSettingsContext)(),[p,h]=(0,r.useState)(t??""),m=(0,r.useRef)(u(t??"")?t:"#000000");(0,r.useEffect)(()=>{"string"==typeof t&&(h(t),u(t)&&(m.current=t))},[t]);const g=(0,r.useCallback)(e=>{const t=e.target.value.trim();h(t),u(t)&&(m.current=t,n?.(t))},[n]),v=(0,r.useCallback)(()=>{u(p)?n?.(p):h(m.current)},[p,n]),y=(0,r.useCallback)(e=>{m.current=e,h(e),n?.(e)},[n]),b=(0,r.useCallback)(e=>{m.current=e,h(e),n?.(e)},[n]),w=(0,r.useCallback)(()=>{h(""),d?.()},[d]),k=(0,r.useMemo)(()=>u(p)?p:m.current,[p]);return(0,c.jsxs)("div",{className:"acms-admin-block-editor-text-menu-color-picker-container",children:[(0,c.jsx)(o.HexColorPicker,{className:"acms-admin-block-editor-text-menu-color-picker-input",color:k,onChange:y}),(0,c.jsx)("input",{type:"text",className:"acms-admin-block-editor-text-menu-color-picker-text-input",placeholder:"#000000",value:p,onChange:g,onBlur:v,"aria-label":"#RRGGBB  #RGB"}),(0,c.jsxs)("div",{className:"acms-admin-block-editor-text-menu-color-picker-palette",children:[f?.map(e=>(0,c.jsx)(a.ColorButton,{active:e===t,color:e,onColorChange:b},e)),(0,c.jsx)(s.Toolbar.Button,{type:"button",tooltip:"Reset color to default",onClick:w,"aria-label":"",children:(0,c.jsx)(l.Icon,{name:"undo"})})]})]})}},96069:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(65722);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},63218:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useLinkEditorState=t.LinkEditorPanel=void 0;var r=n(96540),o=n(53151),i=n(30473),a=n(20872),s=n(74848);const l=e=>{let{initialUrl:t,initialOpenInNewTab:n,onSetLink:o}=e;const[i,s]=(0,r.useState)(t||""),[l,c]=(0,r.useState)(n||!1),u=(0,r.useCallback)(e=>{s(e.target.value)},[]),d=(0,r.useCallback)(e=>{e.preventDefault(),(0,a.isValidUrl)(i)?o(i,l):alert("URL")},[i,l,o]);return{url:i,setUrl:s,openInNewTab:l,setOpenInNewTab:c,onChange:u,handleSubmit:d,isValidUrl:a.isValidUrl}};t.useLinkEditorState=l,t.LinkEditorPanel=e=>{let{onSetLink:t,onClear:n,initialOpenInNewTab:a,initialUrl:c}=e;const u=l({onSetLink:t,initialOpenInNewTab:a,initialUrl:c}),d=(0,r.useCallback)(()=>{n?.(),u.setUrl(""),u.setOpenInNewTab(!1)},[n,u]);return(0,s.jsx)("div",{className:"acms-admin-form acms-admin-block-editor-link-editor acms-admin-block-editor-popover-form",children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit,children:[(0,s.jsx)("div",{className:"acms-admin-block-editor-popover-form-item",children:(0,s.jsxs)("label",{className:"acms-admin-form-block",children:[(0,s.jsx)("span",{className:"acms-admin-block-editor-popover-form-item-label",children:"URL"}),(0,s.jsx)("input",{type:"text",className:"acms-admin-form-width-full",placeholder:"URL",value:u.url,onChange:u.onChange})]})}),(0,s.jsx)("div",{className:"acms-admin-block-editor-popover-form-item",children:(0,s.jsxs)("div",{className:"acms-admin-form-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",id:"openInNewTab",value:"true",checked:u.openInNewTab,onChange:e=>{u.setOpenInNewTab(e.target.checked)}}),(0,s.jsxs)("label",{htmlFor:"openInNewTab",children:[(0,s.jsx)("i",{className:"acms-admin-ico-checkbox"}),""]})]})}),(0,s.jsx)("div",{className:"acms-admin-block-editor-popover-form-button-group",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.ButtonV2,{variant:"outlined",size:"small",type:"submit",children:[(0,s.jsx)(i.Icon,{name:"sync"}),""]}),(0,s.jsxs)(o.ButtonV2,{variant:"filled",size:"small",type:"button",onClick:d,children:[(0,s.jsx)(i.Icon,{name:"delete"}),""]})]}):(0,s.jsx)(o.ButtonV2,{variant:"filled",size:"small",type:"submit",children:""})})]})})}},47425:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(63218);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},76992:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkPreviewPanel=void 0;var r=n(30473),o=n(17273),i=n(74848);t.LinkPreviewPanel=e=>{let{onClear:t,onEdit:n,url:a}=e;return(0,i.jsxs)("div",{className:"acms-admin-block-editor-link-preview",children:[(0,i.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"acms-admin-block-editor-link-preview-url",children:a}),(0,i.jsx)(o.Toolbar.Divider,{}),(0,i.jsx)(o.Toolbar.Button,{type:"button",onClick:n,"aria-label":"",children:(0,i.jsx)(r.Icon,{name:"edit"})}),(0,i.jsx)(o.Toolbar.Button,{type:"button",onClick:t,"aria-label":"",children:(0,i.jsx)(r.Icon,{name:"delete"})})]})}},32328:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(76992);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},4923:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(96069);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var o=n(71963);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=n(47425);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var a=n(32328);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))})},30473:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var o=n(96540),i=r(n(46942)),a=n(55445),s=n(74848);(t.Icon=(0,o.memo)(e=>{let{size:t="md",...n}=e;return(0,s.jsx)(a.Icon,{className:(0,i.default)("acms-admin-block-editor-icon",{[`acms-admin-block-editor-icon-${t}`]:"md"!==t}),"aria-hidden":"true",...n})})).displayName="Icon"},90989:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Surface=void 0;var r=n(96540),o=n(51542),i=n(74848);(t.Surface=(0,r.forwardRef)((e,t)=>{let{children:n,className:r,...a}=e;const s=(0,o.cn)("acms-admin-block-editor-surface",r);return(0,i.jsx)("div",{className:s,...a,ref:t,children:n})})).displayName="Surface"},17273:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var o=n(96540),i=n(65848),a=r(n(46942)),s=n(58045),l=n(90989),c=r(n(53222)),u=r(n(86860)),d=n(74848);const f=(0,o.forwardRef)((e,t)=>{let{shouldShowContent:n=!0,children:r,orientation:i,direction:s,className:f,...p}=e;const h=(0,o.useRef)(null),m=(0,c.default)(t,h),{toolbarProps:g}=(0,u.default)({orientation:i,direction:s}),v=(0,a.default)("acms-admin-block-editor-toolbar",f);return n&&(0,d.jsx)(l.Surface,{className:v,...g({ref:m,...p}),children:r})});f.displayName="Toolbar";const p=(0,o.forwardRef)((e,t)=>{let{horizontal:n,className:r,...o}=e;const i=(0,a.default)("acms-admin-block-editor-toolbar-divider",n?"acms-admin-block-editor-toolbar-divider-horizontal":"",r);return(0,d.jsx)("div",{className:i,ref:t,...o})});p.displayName="Toolbar.Divider";const h=(0,o.forwardRef)((e,t)=>{let{active:n,children:r,size:o="medium",variant:l="primary",className:c,tooltip:u,tooltipShortcut:f,activeClassname:p,...h}=e;const m=(0,a.default)("acms-admin-block-editor-button","primary"===l&&(0,a.default)("acms-admin-block-editor-button-primary",n&&(0,a.default)("acms-admin-block-editor-button-active",p)),"secondary"===l&&(0,a.default)("acms-admin-block-editor-button-secondary",n&&(0,a.default)("acms-admin-block-editor-button-active",p)),"medium"===o&&"acms-admin-block-editor-button-icon","small"===o&&"acms-admin-block-editor-button-icon-small",c);return(0,d.jsx)("button",{type:"button",className:m,ref:t,...h,"aria-pressed":n,"data-tooltip-id":"block-editor-shared-tooltip","data-tooltip-html":u&&(0,i.renderToStaticMarkup)((0,d.jsxs)(d.Fragment,{children:[u,(0,d.jsx)(s.TooltipCommand,{commands:f??[]})]})),children:r})});h.displayName="ToolbarButton",t.Toolbar=Object.assign(f,{Divider:p,Button:h})},99990:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useSettingsContext=t.SettingsProvider=void 0;var r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),o=n(74848);const i=(0,r.createContext)({features:{textItalic:!1,textUnderline:!1,textStrike:!1,textCode:!1,textMarker:!1,textColor:!1,fontSize:!1,fontFamily:!1,textSubscript:!1,textSuperscript:!1,customClass:!1,tableBgColor:!1},blockMenus:[],fontSize:[],fontFamily:[],customClass:[],imageSizes:[],colorPalette:[]});t.SettingsProvider=e=>{let{children:t,settings:n}=e;return(0,o.jsx)(i.Provider,{value:n,children:t})},t.useSettingsContext=()=>(0,r.useContext)(i)},28136:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BlockAttributes=void 0;var r=n(99248),o=n(56614);t.BlockAttributes=r.Extension.create({name:"blockAttributes",addGlobalAttributes(){return[{types:["heading","paragraph","bulletList","orderedList","MediaUpload","imageBlock","fileBlock","linkButton","table","blockquote","codeBlock","bulletList","orderedList","horizontalRule","columns"],attributes:{id:{default:null,parseHTML:e=>e.getAttribute("id"),renderHTML:e=>e.id?{id:e.id}:{},keepOnSplit:!1},class:{default:null,parseHTML:e=>e.getAttribute("class"),renderHTML:e=>e.class?{class:e.class}:{}}}}]},addCommands(){return{setBlockAttrs:(e,t)=>n=>{let{state:r,dispatch:o}=n;const{tr:i,selection:a}=r,{$from:s}=a;let l;if(l="number"==typeof e?e:s.depth>0?s.before(1):null,null===l)return!1;const c=r.doc.nodeAt(l);return!(!c||!o||!c||!o||(o(i.setNodeMarkup(l,void 0,{...c.attrs,...t})),0))}}},addProseMirrorPlugins(){const e="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);return[new o.Plugin({props:{handlePaste(e,t){const{state:n,dispatch:r}=e,{selection:o}=n,{parent:i}=o.$from;if("codeBlock"===i.type.name){const e=t.clipboardData?.getData("text/plain");if(e)return r(n.tr.insertText(e,o.from,o.to)),!0}return!1},handleKeyDown(t,n){const{state:r,dispatch:i}=t,{selection:a}=r,{$from:s}=a;if("codeBlock"!==s.parent.type.name)return!1;if(n.metaKey&&"a"===n.key||!e&&n.ctrlKey&&"a"===n.key){n.preventDefault();const e=s.start(),t=s.end();return i(r.tr.setSelection(o.TextSelection.create(r.doc,e,t))),!0}if(e&&n.ctrlKey&&"a"===n.key){n.preventDefault();const e=a.from,t=s.parent.textContent.slice(0,s.parentOffset).lastIndexOf("\n")+1,l=e-(s.parentOffset-t);return i(r.tr.setSelection(o.TextSelection.create(r.doc,l))),!0}if(e&&n.ctrlKey&&"e"===n.key){n.preventDefault();const e=a.from,t=s.parent.textContent,l=t.indexOf("\n",s.parentOffset),c=e+((-1===l?t.length:l)-s.parentOffset);return i(r.tr.setSelection(o.TextSelection.create(r.doc,c))),!0}return!1}}})]}})},66474:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(28136);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},2040:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockquoteFigure=void 0;var r=n(99248),o=n(38432),i=n(38820),a=n(98102);const s=t.BlockquoteFigure=o.Figure.extend({name:"blockquoteFigure",group:"block",content:"quote quoteCaption",isolating:!0,addExtensions(){return[i.Quote,a.QuoteCaption]},renderHTML(e){let{HTMLAttributes:t}=e;return["figure",(0,r.mergeAttributes)(t,{"data-type":this.name}),["div",{},0]]},addKeyboardShortcuts(){return{Enter:()=>!1}},addAttributes(){return{...this.parent?.()}},addCommands(){return{setBlockquote:()=>e=>{let{state:t,chain:n}=e;const r=t.selection.$from.start(),o=t.selection.content();return n().focus().insertContent({type:this.name,content:[{type:"quote",content:o.content.toJSON()||[{type:"paragraph",attrs:{textAlign:"left"}}]},{type:"quoteCaption"}]}).focus(r+1).run()}}}});t.default=s},5448:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Quote=void 0;var r=n(99248);const o=t.Quote=r.Node.create({name:"quote",content:"paragraph+",defining:!0,marks:"",parseHTML(){return[{tag:"blockquote"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",t,0]},addKeyboardShortcuts(){return{Backspace:()=>!1}}});t.default=o},38820:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5448);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},46746:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QuoteCaption=void 0;var r=n(99248);const o=t.QuoteCaption=r.Node.create({name:"quoteCaption",group:"block",content:"text*",defining:!0,isolating:!0,parseHTML(){return[{tag:"figcaption"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["figcaption",t,0]},addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e;const{state:{selection:{$from:n,empty:r}}}=t;if(!r||n.parent.type!==this.type)return!1;if(n.parentOffset!==n.parent.nodeSize-2)return!1;const o=t.state.selection.$from.end();return t.chain().focus(o).insertContentAt(o,{type:"paragraph"}).run()}}}});t.default=o},98102:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(46746);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},88459:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2040);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},48736:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomConvertBlock=void 0;var r=n(99248),o=n(56614);const i=(e,t)=>{const n=[];return e.type===t&&n.push(e.textContent),e.forEach(e=>{n.push(...i(e,t))}),n};t.CustomConvertBlock=r.Extension.create({name:"CustomConvertBlock",addCommands(){return{removeList:e=>t=>{let{state:n,dispatch:r}=t;const{doc:o,schema:a}=n,{bulletList:s,orderedList:l,paragraph:c,hardBreak:u}=a.nodes,d=[],f=o.nodeAt(e);if(!f||f.type!==s&&f.type!==l)return!1;f.forEach(e=>{d.push(...i(e,c))});const p=d.flatMap((e,t,n)=>{const r=[a.text(e)];return t<n.length-1&&r.push(u.create()),r}),h=c.create({},p),m=n.tr.replaceWith(e,e+f.nodeSize,h);return!(!r||!m.docChanged||(r(m),0))},removeListAsParagraphs:e=>t=>{let{state:n,dispatch:r}=t;const{doc:o,schema:i}=n,{bulletList:a,orderedList:s,paragraph:l}=i.nodes,c=o.nodeAt(e);if(!c||c.type!==a&&c.type!==s)return!1;const u=[];if(c.forEach(e=>{e.forEach(e=>{e.type===l?e.textContent.split(/\r?\n/).forEach(e=>{u.push(l.create({},i.text(e)))}):u.push(e)})}),0===u.length)return!1;const d=n.tr.replaceWith(e,e+c.nodeSize,u);return!(!r||!d.docChanged||(r(d),0))},unwrapList:()=>e=>{let{state:t,dispatch:n}=e;const{selection:r,tr:o}=t,{$from:i}=r;let a=!1;for(let{depth:e}=i;e>0;e--)if("listItem"===i.node(e).type.name){const n=i.before(e);o.setNodeMarkup(n,t.schema.nodes.paragraph),a=!0;break}return!(!a||!n||(n(o),0))},removeBlockquote:e=>t=>{let{state:n,dispatch:r}=t;const{doc:o,schema:i}=n,{blockquote:a}=i.nodes,s=o.nodeAt(e);if(!s||s.type!==a)return!1;const{content:l}=s,c=n.tr.replaceWith(e,e+s.nodeSize,l);return!(!r||!c.docChanged||(r(c),0))},splitBulletList:e=>t=>{let{state:n,dispatch:r}=t;const{doc:i,schema:a}=n,{bulletList:s,listItem:l,paragraph:c,hardBreak:u}=a.nodes,d=i.nodeAt(e);if(!d||d.type!==c)return!1;const f=[[]];d.content.forEach(e=>{e.type===u?f.push([]):f[f.length-1].push(e)});const p=f.filter(e=>e.length>0).map(e=>l.create({},c.create({},e)));if(0===p.length)return!1;const h=s.create({},p),m=n.tr.replaceWith(e,e+d.nodeSize,h),g=o.TextSelection.near(m.doc.resolve(e+1));return!(!r||!m.docChanged||(r(m.setSelection(g)),0))},splitOrderedList:e=>t=>{let{state:n,dispatch:r}=t;const{doc:i,schema:a}=n,{orderedList:s,listItem:l,paragraph:c,hardBreak:u}=a.nodes,d=i.nodeAt(e);if(!d||d.type!==c)return!1;const f=[[]];d.content.forEach(e=>{e.type===u?f.push([]):f[f.length-1].push(e)});const p=f.filter(e=>e.length>0).map(e=>l.create({},c.create({},e)));if(0===p.length)return!1;const h=s.create({},p),m=n.tr.replaceWith(e,e+d.nodeSize,h),g=o.TextSelection.near(m.doc.resolve(e+1));return!(!r||!m.docChanged||(r(m.setSelection(g)),0))}}}})},52475:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(48736);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},19970:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CustomMark=void 0;var r=n(99248);const o=t.CustomMark=r.Mark.create({name:"customMark",addAttributes(){return{class:{default:null,parseHTML:e=>e.getAttribute("class"),renderHTML:e=>e.class?{class:e.class}:{}}}},parseHTML(){return[{tag:"span.custom-mark"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["span",t,0]}});t.default=o},32502:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(19970);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},48384:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Document=void 0;var r=n(62430);const o=t.Document=r.Document.extend({content:"(block|columns)+"});t.default=o},34861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(48384);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},44938:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Figcaption=void 0;var r=n(99248),o=n(61765);const i=t.Figcaption=r.Node.create({name:"figcaption",addOptions(){return{HTMLAttributes:{}}},content:"inline*",selectable:!1,draggable:!1,marks:"link",parseHTML(){return[{tag:"figcaption"}]},addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e;const{state:{selection:{$from:n,empty:r}}}=t;if(!r||n.parent.type!==this.type)return!1;if(n.parentOffset!==n.parent.nodeSize-2)return!1;const o=t.state.selection.$from.end();return t.chain().focus(o).insertContentAt(o,{type:"paragraph"}).run()},Backspace:e=>{let{editor:t}=e;const{state:{selection:{$from:n,empty:r}}}=t;if(!r||n.parent.type!==this.type)return!1;if(0!==n.parentOffset)return!1;const i=t.state.doc.nodeAt(n.pos-2);return i?.type.name===o.Image.name}}},renderHTML(e){let{HTMLAttributes:t}=e;return["figcaption",(0,r.mergeAttributes)(t),0]}});t.default=i},28108:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(44938);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},19562:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Figure=void 0;var r=n(99248),o=n(56614);const i=t.Figure=r.Node.create({name:"figure",addOptions(){return{HTMLAttributes:{}}},group:"block",content:"block figcaption",draggable:!0,defining:!0,selectable:!0,parseHTML(){return[{tag:`figure[data-type="${this.name}"]`}]},renderHTML(e){let{HTMLAttributes:t}=e;return["figure",(0,r.mergeAttributes)(t,{"data-type":this.name}),0]},addProseMirrorPlugins(){return[new o.Plugin({props:{handleDOMEvents:{dragstart:(e,t)=>{if(!t.target)return!1;const n=e.posAtDOM(t.target,0);return e.state.doc.resolve(n).parent.type.name===this.type.name&&t.preventDefault(),!1}}}})]}});t.default=i},38432:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(19562);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},96664:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FileBlock=void 0;var r=n(83574),o=n(62586),i=n(35522);const a=t.FileBlock=i.ImageBlock.extend({name:"fileBlock",group:"block",atom:!0,defining:!0,isolating:!0,editable:!1,addAttributes(){return{displayType:{default:"icon",renderHTML:e=>({"data-display-type":e.displayType||"icon"})},href:{default:"",renderHTML:e=>({"data-href":e.href||""})},icon:{default:"",renderHTML:e=>({"data-icon":e.icon||""})},iconWidth:{default:"",renderHTML:e=>({"data-icon-width":e.iconWidth||""})},iconHeight:{default:"",renderHTML:e=>({"data-icon-height":e.iconHeight||""})},extension:{default:null,renderHTML:e=>({"data-extension":e.extension??null})},fileSize:{default:null,renderHTML:e=>({"data-file-size":e.fileSize??null})},align:{default:"left",renderHTML:e=>({"data-align":e.align??"left"})},target:{default:null,renderHTML:e=>({"data-target":e.target??null})},caption:{default:null,renderHTML:e=>({"data-caption":e.caption??""})},alt:{default:null,renderHTML:e=>({"data-alt":e.alt??""})},mediaId:{default:null,renderHTML:e=>({"data-mid":e.mediaId??null})}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`,getAttrs:e=>{const t=e.querySelector("a");return{displayType:e?.getAttribute("data-display-type")||"icon",href:t?.getAttribute("href"),icon:e?.getAttribute("data-icon")||"",iconWidth:e?.getAttribute("data-icon-width")||"100",iconHeight:e?.getAttribute("data-icon-height")||"100",extension:e?.getAttribute("data-extension")??null,fileSize:e?.getAttribute("data-file-size")??null,align:e?.getAttribute("data-align")||"center",target:t?.target||null,caption:e?.getAttribute("data-caption")||null,alt:e?.getAttribute("data-alt"),mediaId:e?.getAttribute("data-mid")}}}]},renderHTML(e){let{HTMLAttributes:t}=e;const n=t.id||null,r=t.class||"",o=t["data-display-type"]||"icon",i=t["data-href"]||"",a=t["data-icon"]||"",s=t["data-icon-width"]||"100",l=t["data-icon-height"]||"100",c=t["data-extension"]||null,u=t["data-file-size"]||null,d=t["data-align"]||"left",f=t["data-target"]||null,p=t["data-caption"]||null,h=t["data-alt"]||null,m=t["data-mid"]||null,g=[["a",{href:i,...f?{target:f,rel:"noopener noreferrer"}:{}},["img",{src:a,width:s,height:l,alt:h||"",loading:"lazy",decoding:"async"}]]];p&&g.push(["p",{class:"caption"},p]);const v=[["a",{href:i,...f?{target:f,rel:"noopener noreferrer"}:{}},["img",{src:a,width:s,height:l,alt:h||"",loading:"lazy",decoding:"async"}],["p",{class:"caption"},p||""]]],y=r.split(/\s+/).filter(e=>!["align-left","align-center","align-right"].includes(e)),b=new Set(["media-file-block",`align-${d}`,...y]),w="button"===o?v:g;return["div",{id:n,class:Array.from(b).join(" "),"data-type":this.name,"data-display-type":o,"data-icon":a,"data-icon-width":s,"data-icon-height":l,"data-alt":h,"data-caption":p,"data-align":d,"data-mid":m,"data-extension":c,"data-file-size":u},["div",{},...w]]},addCommands(){const e=(e,t)=>({href:e.media_permalink,icon:e.media_icon,iconWidth:e.media_icon_width||"100",iconHeight:e.media_icon_height||"100",class:t||null,mediaId:e.media_id,caption:e.media_caption||e.media_title||null,alt:e.media_alt||null,extension:e.media_ext||null,fileSize:e.media_filesize||null});return{setFileBlock:e=>t=>{let{commands:n}=t;return n.insertContent({type:"fileBlock",attrs:{src:e.src}})},setFileBlockAt:e=>t=>{let{commands:n}=t;return n.insertContentAt(e.pos,{type:"fileBlock",attrs:{src:e.src}})},setFileBlockDisplayType:e=>t=>{let{commands:n}=t;return n.updateAttributes("fileBlock",{displayType:e})},setFileBlockAlign:e=>t=>{let{commands:n}=t;return n.updateAttributes("fileBlock",{align:e})},setFileBlockCaption:e=>t=>{let{commands:n}=t;return n.updateAttributes("fileBlock",{caption:e})},setFileBlockAlt:e=>t=>{let{commands:n}=t;return n.updateAttributes("fileBlock",{alt:e})},setMediaFileBlock:(t,n)=>r=>{let{commands:o}=r;return o.insertContent({type:"fileBlock",attrs:e(t,n)})},updateMediaFileBlock:t=>n=>{let{commands:r}=n;return r.updateAttributes("fileBlock",e(t))},toggleFileBlockTarget:()=>e=>{let{commands:t}=e;const{target:n}=this.editor.getAttributes("fileBlock"),r="_blank"===n?null:"_blank";return t.updateAttributes("fileBlock",{target:r})}}},addNodeView(){return(0,r.ReactNodeViewRenderer)(o.FileBlockView)}});t.default=a},55123:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FileBlockCaption=void 0;var r=n(96540),o=n(84505),i=n(53151),a=n(17273),s=n(30473),l=n(74848);(t.FileBlockCaption=(0,r.memo)(e=>{let{caption:t,alt:n,onChange:c}=e;const[u,d]=(0,r.useState)(t||""),[f,p]=(0,r.useState)(n||"");return(0,r.useEffect)(()=>{d(t)},[t]),(0,r.useEffect)(()=>{p(n)},[n]),(0,l.jsxs)(o.Popover,{modal:!0,children:[(0,l.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,l.jsx)(a.Toolbar.Button,{tooltip:"",type:"button",active:!!u||!!f,"aria-label":"",children:(0,l.jsx)(s.Icon,{name:"closed_caption"})})}),(0,l.jsx)(o.PopoverContent,{"data-elevation":"3",children:(0,l.jsxs)("form",{className:"acms-admin-form acms-admin-block-editor-popover-form",onSubmit:()=>c(u,f),children:[(0,l.jsxs)("div",{className:"acms-admin-block-editor-popover-form-item",children:[(0,l.jsx)("label",{htmlFor:"captionText",className:"acms-admin-block-editor-popover-form-item-label",children:""}),(0,l.jsx)("input",{type:"text",id:"captionText",className:"acms-admin-form-width-full",value:u,onChange:e=>d(e.target.value),placeholder:""})]}),(0,l.jsxs)("div",{className:"acms-admin-block-editor-popover-form-item",children:[(0,l.jsx)("label",{htmlFor:"altText",className:"acms-admin-block-editor-popover-form-item-label",children:"Alt"}),(0,l.jsx)("textarea",{id:"altText",value:f,className:"acms-admin-form-width-full",onChange:e=>p(e.target.value),placeholder:""})]}),(0,l.jsx)("div",{className:"acms-admin-block-editor-popover-form-button-group",children:(0,l.jsx)(o.PopoverClose,{asChild:!0,children:(0,l.jsx)(i.ButtonV2,{variant:"filled",size:"small",type:"submit","aria-label":"",onClick:()=>{c(u,f)},children:""})})})]})})]})})).displayName="FileBlockCaption"},99232:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FileBlockMenu=void 0;var o=n(83574),i=n(56614),a=n(96540),s=n(22831),l=n(17273),c=n(30473),u=r(n(46183)),d=r(n(86311)),f=n(55123),p=n(27139),h=n(29027),m=n(4923),g=n(74848);const v=e=>{let{editor:t,appendTo:n}=e;const r=(0,a.useRef)(null),v=(0,a.useRef)(null),y=(0,a.useCallback)(()=>{const{selection:e}=t.state;if(e instanceof i.NodeSelection){const t=e.node;if("fileBlock"===t.type.name)return t}},[t]),{isInsertModalOpen:b,tab:w,files:k,handleModalClose:x,handleSelectClick:S}=(0,p.useMediaSelect)(),{targetMediaId:C,isUpdateModalOpen:M,handleUpdateModalClose:O,handleUpdateClick:A}=(0,h.useMediaUpdate)({inspectMedia:y}),E=(0,a.useCallback)(e=>{const[n]=e;n.media_permalink&&t.chain().focus(void 0,{scrollIntoView:!1}).updateMediaFileBlock(n).run(),x()},[t,x]),T=(0,a.useCallback)(e=>{e.media_permalink&&t.chain().focus(void 0,{scrollIntoView:!1}).updateMediaFileBlock(e).run(),O()},[t,O]),_=(0,a.useCallback)(()=>t.isActive("fileBlock"),[t]);return(0,g.jsxs)(o.BubbleMenu,{editor:t,pluginKey:`fileBlockMenu-${(0,s.v4)()}`,shouldShow:_,updateDelay:0,tippyOptions:{offset:[0,8],onCreate:e=>{v.current=e},appendTo:()=>n?.current??document.body},children:[(0,g.jsxs)(l.Toolbar,{shouldShowContent:_(),ref:r,children:[(0,g.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:S,"aria-label":"",children:(0,g.jsx)(c.Icon,{name:"perm_media"})}),C&&(0,g.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:A,"aria-label":"",children:(0,g.jsx)(c.Icon,{name:"edit"})}),(0,g.jsx)(l.Toolbar.Divider,{}),(0,g.jsx)(f.FileBlockCaption,{caption:t.getAttributes("fileBlock").caption??"",alt:t.getAttributes("fileBlock").alt??"",onChange:(e,n)=>{t.chain().focus(void 0,{scrollIntoView:!1}).setFileBlockCaption(e).setFileBlockAlt(n).run()}}),(0,g.jsx)(m.AlignPicker,{align:t.getAttributes("fileBlock").align,onChange:e=>{t.chain().focus(void 0,{scrollIntoView:!1}).setFileBlockAlign(e).run()}}),(0,g.jsx)(l.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",onClick:()=>{const e="button"===t.getAttributes("fileBlock").displayType?"icon":"button";t.chain().focus(void 0,{scrollIntoView:!1}).setFileBlockDisplayType(e).run()},disabled:!t.getAttributes("fileBlock").caption,active:"button"===t.getAttributes("fileBlock").displayType,children:(0,g.jsx)(c.Icon,{name:"variable_insert"})}),(0,g.jsx)(l.Toolbar.Button,{tooltip:"",onClick:()=>{window.open(t.getAttributes("fileBlock").href,"_blank","noopener,noreferrer")},"aria-label":"",disabled:!t.getAttributes("fileBlock").href,children:(0,g.jsx)(c.Icon,{name:"visibility"})}),(0,g.jsx)(l.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",onClick:()=>{t.chain().focus(void 0,{scrollIntoView:!1}).toggleFileBlockTarget().run()},active:"_blank"===t.getAttributes("fileBlock").target,children:(0,g.jsx)(c.Icon,{name:"open_in_new"})})]}),(0,g.jsx)(u.default,{isOpen:b,onInsert:E,onClose:x,tab:w,files:k,filetype:"file",radioMode:!0}),(0,g.jsx)(d.default,{isOpen:M,mid:C||"",onClose:O,onUpdate:T})]})};t.FileBlockMenu=v,t.default=v},62586:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FileBlockView=void 0;var r=n(96540),o=n(83574),i=n(51542),a=n(74848);const s=e=>{const{editor:t,getPos:n,node:s}=e,l=(0,r.useRef)(null),{displayType:c,icon:u,mediaId:d,alt:f,caption:p,iconWidth:h,iconHeight:m}=s.attrs,g=(0,i.cn)("left"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-left","right"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-right","center"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-center",s.attrs.class),v=(0,r.useCallback)(e=>{e.preventDefault(),t.commands.setNodeSelection(n())},[n,t.commands]);return(0,a.jsx)(o.NodeViewWrapper,{contentEditable:!1,children:(0,a.jsx)("div",{className:g,children:(0,a.jsx)("div",{className:"acms-admin-block-editor-file",contentEditable:!1,ref:l,children:"icon"===c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"block",src:u,alt:f,width:h,height:m,onClick:v,"data-mid":d,draggable:!1}),p&&(0,a.jsx)("p",{className:"caption",children:p})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{role:"button",tabIndex:0,className:"acms-admin-block-editor-file-link",onClick:v,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(e)},children:[(0,a.jsx)("img",{className:"block",src:u,alt:f,width:h,height:m,"data-mid":d,draggable:!1}),p&&(0,a.jsx)("p",{className:"caption",children:p})]})})})})})};t.FileBlockView=s,t.default=s},80835:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(96664);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},92552:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FontStyle=void 0;var r=n(99248);n(43420);const o=t.FontStyle=r.Extension.create({name:"fontStyle",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:["paragraph"],attributes:{class:{}}},{types:this.options.types,attributes:{fontSize:{parseHTML:e=>e.getAttribute("data-font-size")||null,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`,"data-font-size":e.fontSize}:{}},fontFamily:{parseHTML:e=>e.getAttribute("data-font-family")||null,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily.replace(/"/g,"'")}`,"data-font-family":e.fontFamily.replace(/"/g,"'")}:{}},fontColor:{parseHTML:e=>e.getAttribute("data-font-color")||null,renderHTML:e=>e.fontColor?{style:`color: ${e.fontColor}`,"data-font-color":e.fontColor}:{}}}}]},addCommands(){return{setFontSize:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{fontSize:e}).run()},unsetFontSize:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()},setFontFamily:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{fontFamily:e}).run()},unsetFontFamily:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()},setFontColor:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{fontColor:e}).run()},unsetFontColor:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontColor:null}).removeEmptyTextStyle().run()}}}});t.default=o},26542:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(92552);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},87640:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Heading=void 0;var o=r(n(74951));const i=t.Heading=o.default.extend({addAttributes(){return{...this.parent?.()}}});t.default=i},70086:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(87640);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},77622:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HorizontalRule=void 0;var o=n(99248),i=r(n(33332));const a=t.HorizontalRule=i.default.extend({renderHTML(e){let{HTMLAttributes:t}=e;const n=(0,o.mergeAttributes)(this.options.HTMLAttributes,t);return["div",{"data-type":this.name},["hr",n]]}});t.default=a},78274:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(77622);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},1612:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Image=void 0;var r=n(6268);const o=t.Image=r.Image.extend({group:"block"});t.default=o},61765:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1612);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},74598:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ImageBlock=void 0;var r=n(83574),o=n(56614),i=n(61106),a=n(28504),s=n(61765);const l=t.ImageBlock=s.Image.extend({name:"imageBlock",group:"block",atom:!0,defining:!0,isolating:!0,editable:!1,addAttributes(){return{src:{default:"",renderHTML:e=>({src:e.src})},align:{default:"center",renderHTML:e=>({"data-align":e.align})},link:{default:null,renderHTML:e=>({"data-link":e.link})},target:{default:null,renderHTML:e=>({"data-target":e.target})},caption:{default:void 0,renderHTML:e=>({"data-caption":e.caption})},alt:{default:void 0,renderHTML:e=>({alt:e.alt})},width:{default:null,renderHTML:e=>({width:e.width})},height:{default:null,renderHTML:e=>({height:e.height})},displayWidth:{default:"100%",renderHTML:e=>({"data-width":e.displayWidth})},mediaId:{default:null,renderHTML:e=>({"data-mid":e.mediaId||null})},entryId:{default:null,renderHTML:e=>({"data-eid":e.entryId||ACMS.Config.eid})},noLightbox:{default:"false",renderHTML:e=>({"data-no-lightbox":"true"===e.noLightbox?"true":"false"})}}},parseHTML(){return[{tag:"figure",getAttrs:e=>{const t=e.querySelector("img"),n=e.querySelector("figcaption"),r=e.closest(`[data-type="${this.name}"]`),o=r?.querySelector("a");return{src:t?.getAttribute("src"),align:r?.getAttribute("data-align")||"center",link:r?.getAttribute("data-link"),target:o?.target||null,caption:n?.textContent?.trim()||"",alt:t?.getAttribute("alt"),width:t?.getAttribute("width"),height:t?.getAttribute("height"),displayWidth:r?.getAttribute("data-width"),mediaId:t?.getAttribute("data-mid"),entryId:r?.getAttribute("data-eid"),noLightbox:"true"===r?.getAttribute("data-no-lightbox")?"true":"false"}}},{tag:"img",getAttrs:e=>!e.closest('[data-type="fileBlock"]')&&{src:e.getAttribute("src"),align:"center",link:"",target:null,caption:"",alt:e.getAttribute("alt"),width:e.getAttribute("width"),height:e.getAttribute("height"),displayWidth:"",mediaId:null,entryId:null,noLightbox:"false"}}]},renderHTML(e){let{HTMLAttributes:t}=e;const n=t.id||null,r=t.class||"",o=t.src||"",i=t["data-align"]||"left",a=t["data-link"]||null,s=t["data-target"]||null,l=t["data-caption"]||null,c=t.alt||null,u=t.width||null,d=t.height||null,f=t["data-width"]||"100%",p=t["data-mid"]||null,h=t["data-eid"]||ACMS.Config.eid,m="true"!==t["data-no-lightbox"],g=["img",{src:o,class:`unit-id-${h}`,width:u,height:d,alt:c,loading:"lazy",decoding:"async","data-mid":p||null}];let v=g;a?v=["a",{href:a,...s?{target:s,rel:"noopener noreferrer"}:{}},g]:m&&(v=["a",{href:o},g]);const y=[v];return l&&y.push(["figcaption",{class:"caption"},l]),["div",{class:`media-image-block align-${i}`,"data-type":this.name,"data-align":i,"data-link":a||null,"data-width":f,"data-eid":h,"data-no-lightbox":m?"false":"true"},["figure",{id:n,class:r,style:`max-width: ${f};`},...y]]},addCommands(){const e=(e,t)=>{let n=null,r=null;if(e.media_size.includes("x")){const[t,o]=e.media_size.split("x");n=parseInt(t.trim(),10),r=parseInt(o.trim(),10)}return{src:e.media_root_path,class:t||null,mediaId:e.media_id,entryId:ACMS.Config.eid,width:n,height:r,link:e.media_link??null,caption:e.media_caption??null,alt:e.media_alt??null}};return{setImageBlock:e=>t=>{let{commands:n}=t;return n.insertContent({type:"imageBlock",attrs:{src:e.src}})},setImageBlockAt:e=>t=>{let{commands:n}=t;return n.insertContentAt(e.pos,{type:"imageBlock",attrs:{src:e.src}})},setImageBlockAlign:e=>t=>{let{commands:n}=t;return n.updateAttributes("imageBlock",{align:e})},setImageBlockWidth:e=>t=>{let{commands:n}=t;return n.updateAttributes("imageBlock",{displayWidth:e})},setImageBlockLink:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{commands:r}=n;return r.updateAttributes("imageBlock",{link:e,target:t?"_blank":null})}},setImageBlockCaption:e=>t=>{let{commands:n}=t;return n.updateAttributes("imageBlock",{caption:e})},setImageBlockAlt:e=>t=>{let{commands:n}=t;return n.updateAttributes("imageBlock",{alt:e})},setMediaImageBlock:(t,n)=>r=>{let{commands:o}=r;return o.insertContent({type:"imageBlock",attrs:e(t,n)})},updateMediaImageBlock:t=>n=>{let{commands:r}=n;return r.updateAttributes("imageBlock",e(t))},toggleImageBlockLightbox:()=>e=>{let{editor:t,commands:n}=e;const{noLightbox:r}=t.getAttributes("imageBlock");return n.updateAttributes("imageBlock",{noLightbox:"true"===r?"false":"true"})}}},addNodeView(){return(0,r.ReactNodeViewRenderer)(a.ImageBlockView)},addProseMirrorPlugins(){return[(e=this.editor,new o.Plugin({props:{handlePaste(t,n){const r=n.clipboardData?.getData("text/html");if(r){const n=(new DOMParser).parseFromString(r,"text/html"),o=n.querySelectorAll("img"),a=Array.from(o).map(async e=>{const t=e.getAttribute("src");if(t)try{const n=ACMS.Config.root.replace(/\/$/,""),r=new URL(t),o=r.pathname+r.search,i=`${location.origin}${n}${o}`;(await fetch(i,{method:"HEAD"})).ok&&e.setAttribute("src",`${n}${o}`)}catch(e){console.warn("URL:",e)}});return Promise.all(a).then(()=>{const r=i.DOMParser.fromSchema(e.schema).parseSlice(n.body),o=t.state.tr.replaceSelection(r);t.dispatch(o)}),!0}return!1}}}))];var e}});t.default=l},4017:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBlockCaption=void 0;var r=n(96540),o=n(84505),i=n(53151),a=n(17273),s=n(30473),l=n(74848);(t.ImageBlockCaption=(0,r.memo)(e=>{let{caption:t,alt:n,onChange:c}=e;const[u,d]=(0,r.useState)(t||""),[f,p]=(0,r.useState)(n||"");return(0,r.useEffect)(()=>{d(t)},[t]),(0,r.useEffect)(()=>{p(n)},[n]),(0,l.jsxs)(o.Popover,{modal:!0,children:[(0,l.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,l.jsx)(a.Toolbar.Button,{tooltip:"",type:"button",active:!!u||!!f,"aria-label":"",children:(0,l.jsx)(s.Icon,{name:"closed_caption"})})}),(0,l.jsx)(o.PopoverContent,{"data-elevation":"3",children:(0,l.jsxs)("form",{className:"acms-admin-form acms-admin-block-editor-popover-form",onSubmit:()=>c(u,f),children:[(0,l.jsxs)("div",{className:"acms-admin-block-editor-popover-form-item",children:[(0,l.jsx)("label",{htmlFor:"captionText",className:"acms-admin-block-editor-popover-form-item-label",children:""}),(0,l.jsx)("input",{type:"text",id:"captionText",className:"acms-admin-form-width-full",value:u,onChange:e=>d(e.target.value),placeholder:""})]}),(0,l.jsxs)("div",{className:"acms-admin-block-editor-popover-form-item",children:[(0,l.jsx)("label",{htmlFor:"altText",className:"acms-admin-block-editor-popover-form-item-label",children:"Alt"}),(0,l.jsx)("textarea",{id:"altText",value:f,className:"acms-admin-form-width-full",onChange:e=>p(e.target.value),placeholder:""})]}),(0,l.jsx)("div",{className:"acms-admin-block-editor-popover-form-button-group",children:(0,l.jsx)(o.PopoverClose,{asChild:!0,children:(0,l.jsx)(i.ButtonV2,{variant:"filled",size:"small",type:"submit","aria-label":"",onClick:()=>{c(u,f)},children:""})})})]})})]})})).displayName="ImageBlockCaption"},53603:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBlockLink=void 0;var r=n(96540),o=n(84505),i=n(4923),a=n(17273),s=n(30473),l=n(74848);(t.ImageBlockLink=(0,r.memo)(e=>{let{initialUrl:t,initialOpenInNewTab:n,onChange:c}=e;const[u,d]=(0,r.useState)(!1);return(0,l.jsxs)(o.Popover,{modal:!0,isOpen:u,onOpenChange:d,children:[(0,l.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,l.jsx)(a.Toolbar.Button,{tooltip:"",type:"button",active:!!t,onClick:()=>d(e=>!e),"alia-label":"",children:(0,l.jsx)(s.Icon,{name:"link"})})}),(0,l.jsx)(o.PopoverContent,{"data-elevation":"3",children:(0,l.jsx)(i.LinkEditorPanel,{initialUrl:t,initialOpenInNewTab:n,onSetLink:(e,t)=>{c(e,t),d(!1)},onClear:()=>{c("",!1),d(!1)}})})]})})).displayName="ImageBlockLink"},6554:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ImageBlockMenu=void 0;var o=n(83574),i=n(56614),a=n(96540),s=n(22831),l=n(17273),c=n(30473),u=r(n(46183)),d=r(n(86311)),f=n(81591),p=n(4017),h=n(53603),m=n(88031),g=n(29027),v=n(4923),y=n(74848);const b=e=>{let{editor:t,appendTo:n}=e;const r=(0,a.useRef)(null),b=(0,a.useRef)(null),[w,k]=(0,a.useState)(!1),[x,S]=(0,a.useState)(!1),C=(0,a.useCallback)(()=>{const{selection:e}=t.state;if(e instanceof i.NodeSelection){const t=e.node;if("imageBlock"===t.type.name)return t}},[t]),{isInsertModalOpen:M,tab:O,files:A,handleModalClose:E,handleSelectClick:T,uploadFile:_}=(0,m.useMediaSelect)(),{targetMediaId:N,selfImgSrc:j,isUpdateModalOpen:P,handleUpdateModalClose:I,handleUpdateClick:D}=(0,g.useMediaUpdate)({inspectMedia:C}),R=(0,a.useCallback)(e=>{const[n]=e;n.media_thumbnail&&t.chain().focus(void 0,{scrollIntoView:!1}).updateMediaImageBlock(n).run(),E()},[t,E]),L=(0,a.useCallback)(e=>{e.media_thumbnail&&t.chain().focus(void 0,{scrollIntoView:!1}).updateMediaImageBlock(e).run(),I()},[t,I]),F=(0,a.useCallback)(()=>t.isActive("imageBlock"),[t]),B=(0,a.useCallback)(e=>{t.chain().focus(void 0,{scrollIntoView:!1}).setImageBlockWidth(e).run()},[t]),H=(0,a.useCallback)(async()=>{const e=await fetch(j),t=await e.blob(),n=j.split("/").pop()||"",r=t.type.split("/")[1]||"jpg",o=n.includes(".")?n:`${n}.${r}`,i=new File([t],o,{type:t.type});_([i])},[_,j]),z=(0,a.useCallback)(()=>{const e=document.querySelectorAll(ACMS.Config.blockEditorConfig.setMainImageMark||".js-block-editor-set-main-image");e&&e.length>0&&[].forEach.call(e,e=>{S(!0),e.dispatchEvent(new Event("change",{bubbles:!0})),e?.dispatchEvent(new CustomEvent("acms.set-main-image",{detail:{media_id:t.getAttributes("imageBlock").mediaId,media_thumbnail:t.getAttributes("imageBlock").src,media_type:"image"}}))})},[t]);return(0,a.useEffect)(()=>{const e=document.querySelectorAll(ACMS.Config.blockEditorConfig.setMainImageMark||".js-block-editor-set-main-image");if(e&&e.length>0){const n=Array.from(e).map(e=>e.value);k(!0),S(n.includes(String(t.getAttributes("imageBlock").mediaId)))}},[t,t.state]),(0,y.jsxs)(o.BubbleMenu,{editor:t,pluginKey:`imageBlockMenu-${(0,s.v4)()}`,shouldShow:F,updateDelay:0,tippyOptions:{offset:[0,8],onCreate:e=>{b.current=e},appendTo:()=>n?.current??document.body},children:[(0,y.jsxs)(l.Toolbar,{shouldShowContent:F(),ref:r,children:[(0,y.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:T,"aria-label":"",children:(0,y.jsx)(c.Icon,{name:"perm_media"})}),N&&(0,y.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:D,"aria-label":"",children:(0,y.jsx)(c.Icon,{name:"edit"})}),!N&&j&&(0,y.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:H,"aria-label":"",children:(0,y.jsx)(c.Icon,{name:"upload"})}),(0,y.jsx)(l.Toolbar.Divider,{}),(0,y.jsx)(h.ImageBlockLink,{initialUrl:t.getAttributes("imageBlock").link,initialOpenInNewTab:"_blank"===t.getAttributes("imageBlock").target,onChange:(e,n)=>{t.chain().focus(void 0,{scrollIntoView:!1}).setImageBlockLink(e,n).run()}}),(0,y.jsx)(p.ImageBlockCaption,{caption:t.getAttributes("imageBlock").caption,alt:t.getAttributes("imageBlock").alt,onChange:(e,n)=>{t.chain().focus(void 0,{scrollIntoView:!1}).setImageBlockCaption(e).setImageBlockAlt(n).run()}}),(0,y.jsx)(v.AlignPicker,{align:t.getAttributes("imageBlock").align,onChange:e=>{t.chain().focus(void 0,{scrollIntoView:!1}).setImageBlockAlign(e).run()}}),(0,y.jsx)(l.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",onClick:()=>{t.chain().focus(void 0,{scrollIntoView:!1}).toggleImageBlockLightbox().run()},active:"true"===t.getAttributes("imageBlock").noLightbox,children:(0,y.jsx)(c.Icon,{name:"search_off"})}),w&&N&&(0,y.jsx)(l.Toolbar.Button,{type:"button",tooltip:"",onClick:z,active:x,"aria-label":"",children:(0,y.jsx)(c.Icon,{name:"imagesmode"})}),(0,y.jsx)(l.Toolbar.Divider,{}),(0,y.jsx)(f.ImageBlockWidth,{onChange:B,value:t.getAttributes("imageBlock").displayWidth})]}),(0,y.jsx)(u.default,{isOpen:M,onInsert:R,onClose:E,tab:O,files:A,filetype:"image"}),(0,y.jsx)(d.default,{isOpen:P,mid:N||"",onClose:I,onUpdate:L})]})};t.ImageBlockMenu=b,t.default=b},28504:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ImageBlockView=void 0;var r=n(96540),o=n(83574),i=n(51542),a=n(74848);const s=e=>{const{editor:t,getPos:n,node:s}=e,l=(0,r.useRef)(null),{src:c,alt:u,caption:d}=s.attrs,f=(0,i.cn)("left"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-left","right"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-right","center"===s.attrs.align&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-center"),p=(0,i.cn)("acms-admin-block-editor-image",s.attrs.class),h=(0,r.useCallback)(()=>{t.commands.setNodeSelection(n())},[n,t.commands]);return(0,a.jsx)(o.NodeViewWrapper,{contentEditable:!1,children:(0,a.jsx)("div",{className:f,children:(0,a.jsxs)("figure",{className:p,contentEditable:!1,ref:l,style:{maxWidth:s.attrs.displayWidth},children:[(0,a.jsx)("img",{className:"block",src:c,alt:u,onClick:h,"data-mid":s.attrs.mediaId,draggable:!1}),d&&(0,a.jsx)("figcaption",{className:"acms-admin-block-editor-image-caption",children:d})]})})})};t.ImageBlockView=s,t.default=s},81591:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBlockWidth=void 0;var r=n(96540),o=n(17273),i=n(30473),a=n(99990),s=n(45035),l=n(74848);(t.ImageBlockWidth=(0,r.memo)(e=>{let{onChange:t,value:n}=e;const{imageSizes:c}=(0,a.useSettingsContext)(),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=c.find(e=>e.value===n)||c[0];d(e)},[c,n]);const f=(0,r.useCallback)(e=>{t(e)},[t]);return(0,l.jsxs)(s.Menu,{closeOnSelect:!0,children:[(0,l.jsx)(s.MenuTrigger,{asChild:!0,children:(0,l.jsxs)(o.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",children:[(0,l.jsx)(i.Icon,{name:"crop_free"}),u?.label||"1/1 (100%)",(0,l.jsx)(i.Icon,{name:"keyboard_arrow_down"})]})}),(0,l.jsx)(s.MenuPopover,{size:"medium","data-elevation":"3",children:(0,l.jsx)(s.MenuList,{children:(0,l.jsx)(s.MenuGroup,{title:"",children:(0,l.jsx)(s.MenuItemRadioGroup,{defaultValue:n,onValueChange:e=>{f(e.detail.value)},children:c?.map(e=>(0,l.jsx)(s.MenuItemRadio,{value:e.value,children:e.label},`${e.label}_${e.value}`))})})})})]})})).displayName="ImageBlockWidth"},35522:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(74598);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},29027:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaUpdate=void 0;var r=n(96540);t.useMediaUpdate=e=>{let{inspectMedia:t}=e;const[n,o]=(0,r.useState)(!1),i=t()?.attrs?.mediaId||null,a=t()?.attrs?.src||null;let s=null;return a&&!/^(?:[a-z]+:)?\/\//i.test(a)&&(s=a),{targetMediaId:i,selfImgSrc:s,isUpdateModalOpen:n,handleUpdateModalClose:(0,r.useCallback)(()=>{o(!1)},[]),handleUpdateClick:(0,r.useCallback)(()=>{o(!0)},[])}}},6202:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Link=void 0;var o=n(99248),i=r(n(81531)),a=n(56614);const s=t.Link=i.default.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},renderHTML(e){let{HTMLAttributes:t}=e;const n=(0,o.mergeAttributes)(this.options.HTMLAttributes,t,{class:"link"});return n.target||(delete n.target,delete n.rel),["a",n,0]},addProseMirrorPlugins(){const{editor:e}=this;return[...this.parent?.()||[],new a.Plugin({props:{handleKeyDown:(t,n)=>{const{selection:r}=e.state;return"Escape"===n.key&&!0!==r.empty&&e.commands.focus(r.to,{scrollIntoView:!1}),!1}}})]}});t.default=s},10396:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6202);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},49642:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkButton=void 0;var r=n(83574),o=n(56614),i=n(86816),a=n(35522);const s=t.LinkButton=a.ImageBlock.extend({name:"linkButton",group:"block",content:"inline*",atom:!1,selectable:!0,defining:!0,isolating:!0,addAttributes(){return{href:{default:"",renderHTML:e=>({"data-href":e.href||""})},align:{default:"center",renderHTML:e=>({"data-align":e.align??"center"})},target:{default:null,renderHTML:e=>({"data-target":e.target??null})}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`,getAttrs:e=>{const t=e.querySelector("a");return{href:t?.getAttribute("href"),align:e?.getAttribute("data-align")||"center",target:t?.target||null}}}]},renderHTML(e){let{HTMLAttributes:t}=e;const n=t.id||null,r=t.class||"",o=t["data-href"]||"",i=t["data-align"]||"center",a=t["data-target"]||null,s=["a",{href:o,class:"link-button-block-link","data-type":"button",...a?{target:a,rel:"noopener noreferrer"}:{}},0],l=r.split(/\s+/).filter(e=>!["align-left","align-center","align-right"].includes(e)),c=new Set(["link-button-block",`align-${i}`,...l]);return["div",{id:n,class:Array.from(c).join(" "),"data-type":this.name,"data-align":i},s]},addCommands(){return{setLinkButtonBlock:()=>e=>{let{commands:t}=e;return t.insertContent({type:"linkButton"})},setLinkButtonBlockAt:e=>t=>{let{commands:n}=t;return n.insertContentAt(e.pos,{type:"linkButton"})},setLinkButtonBlockAlign:e=>t=>{let{commands:n}=t;return n.updateAttributes("linkButton",{align:e})},setLinkButtonBlockLink:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{commands:r}=n;return r.updateAttributes("linkButton",{href:e,target:t?"_blank":null})}}}},addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e;const{state:n,dispatch:r}=t.view,{tr:i,selection:a}=n,{$from:s}=a;for(let{depth:e}=s;e>=0;e--)if("linkButton"===s.node(e).type.name){const n=s.after(e),a=t.schema.nodes.paragraph.create();i.insert(n,a);const l=i.doc.resolve(n),c=o.Selection.near(l);return i.setSelection(c).scrollIntoView(),r(i),!0}return!1},Backspace:e=>{let{editor:t}=e;const{state:n,dispatch:r}=t.view,{selection:o}=n,{$from:i}=o;for(let{depth:e}=i;e>=0;e--){const t=i.node(e);if("linkButton"===t.type.name){const o=i.before(e),a=0===t.content.size,s=i.pos===o+1;if(a&&s)return r(n.tr.delete(o,o+t.nodeSize).scrollIntoView()),!0}}return!1}}},addNodeView(){return(0,r.ReactNodeViewRenderer)(i.LinkButtonView)}});t.default=s},29362:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkButtonMenu=void 0;var r=n(83574),o=n(96540),i=n(22831),a=n(17273),s=n(4923),l=n(53603),c=n(30473),u=n(74848);const d=e=>{let{editor:t,appendTo:n}=e;const d=(0,o.useRef)(null),f=(0,o.useRef)(null),p=(0,o.useCallback)(()=>{const{selection:e}=t.state,{$from:n}=e;for(let{depth:e}=n;e>=0;e--){const t=n.node(e);if("linkButton"===t.type.name)return{node:t,pos:n.before(e)}}return null},[t]),h=(0,o.useCallback)(()=>t.isActive("linkButton"),[t]);return(0,u.jsx)(r.BubbleMenu,{editor:t,pluginKey:`linkButtonMenu-${(0,i.v4)()}`,shouldShow:h,updateDelay:0,tippyOptions:{offset:[0,18],onCreate:e=>{f.current=e},appendTo:()=>n?.current??document.body,getReferenceClientRect:()=>{const e=p();if(!e)return new DOMRect;const{pos:n}=e,r=t.view.nodeDOM(n);return r&&r.getBoundingClientRect?r.getBoundingClientRect():new DOMRect}},children:(0,u.jsxs)(a.Toolbar,{shouldShowContent:h(),ref:d,children:[(0,u.jsx)(l.ImageBlockLink,{initialUrl:t.getAttributes("linkButton").href,initialOpenInNewTab:"_blank"===t.getAttributes("linkButton").target,onChange:(e,n)=>{t.chain().focus(void 0,{scrollIntoView:!1}).setLinkButtonBlockLink(e,n).run()}}),(0,u.jsx)(a.Toolbar.Button,{tooltip:"",onClick:()=>{window.open(t.getAttributes("linkButton").href,"_blank","noopener,noreferrer")},"aria-label":"",disabled:!t.getAttributes("linkButton").href,children:(0,u.jsx)(c.Icon,{name:"visibility"})}),(0,u.jsx)(s.AlignPicker,{align:t.getAttributes("linkButton").align,onChange:e=>{t.chain().focus(void 0,{scrollIntoView:!1}).setLinkButtonBlockAlign(e).run()}})]})})};t.LinkButtonMenu=d,t.default=d},86816:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkButtonView=void 0;var r=n(96540),o=n(83574),i=n(51542),a=n(74848);const s=e=>{const{node:t}=e,n=(0,r.useRef)(null),{align:s,target:l}=t.attrs,c=(0,i.cn)("left"===s&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-left","right"===s&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-right","center"===s&&"acms-admin-block-editor-wrapper acms-admin-block-editor-wrapper-center",t.attrs.class),u=0===t.content.size;return(0,a.jsx)(o.NodeViewWrapper,{children:(0,a.jsx)("div",{className:c,children:(0,a.jsx)("div",{className:"acms-admin-block-editor-link-button",ref:n,children:(0,a.jsxs)("div",{className:"acms-admin-block-editor-link-button-link","data-target":l,children:[u&&(0,a.jsx)("span",{className:"is-empty"}),(0,a.jsx)(o.NodeViewContent,{as:"span",style:u?{minWidth:"1px"}:null})]})})})})};t.LinkButtonView=s,t.default=s},23700:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(49642);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},56372:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaUpload=void 0;var r=n(83574),o=n(56614),i=n(64060);const a=t.MediaUpload=r.Node.create({name:"MediaUpload",isolating:!0,defining:!0,group:"block",draggable:!1,selectable:!0,inline:!1,addAttributes(){return{__pastedFiles:{default:[],parseHTML:()=>[],renderHTML:()=>null},__mediaType:{default:"image",parseHTML:e=>e.getAttribute("data-media-type")||"image",renderHTML:e=>({"data-media-type":e.__mediaType})}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`,getAttrs:()=>({})}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",{"data-type":this.name,...t}]},addCommands(){return{uploadMediaImage:e=>t=>{let{commands:n}=t;return n.insertContent({type:this.name,attrs:{__pastedFiles:e??[],__mediaType:"image"}})},uploadMediaFile:e=>t=>{let{commands:n}=t;return n.insertContent({type:this.name,attrs:{__pastedFiles:e??[],__mediaType:"file"}})}}},addNodeView(){return(0,r.ReactNodeViewRenderer)(i.Dropzone)},addProseMirrorPlugins(){return[(e=this.editor,new o.Plugin({props:{handlePaste(t,n){const r=n.clipboardData?.files;if(r&&r.length>0){const t=Array.from(r).filter(e=>e.type.startsWith("image/"));return 0!==t.length&&(n.preventDefault(),e.commands.uploadMediaImage(t),!0)}return!1}}}))];var e}});t.default=a},49493:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(56372);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},64060:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Dropzone=void 0;var o=n(96540),i=n(83574),a=r(n(46183)),s=n(53151),l=n(30473),c=n(27139),u=r(n(86792)),d=n(74848);const f=e=>{let{getPos:t,editor:n,node:r}=e;const f=r?.attrs?.class||"",{isInsertModalOpen:p,files:h,tab:m,uploadFile:g,handleModalClose:v,handleSelectClick:y}=(0,c.useMediaSelect)(),{fileInputRef:b,handleUploadClick:w,handleUploadFile:k}=(0,c.useFileUpload)({uploader:g}),{onDrop:x}=(0,c.useDropZone)({uploader:g}),S=(0,o.useMemo)(()=>r.attrs.__pastedFiles||[],[r.attrs.__pastedFiles]),C=(0,o.useMemo)(()=>r.attrs.__mediaType||"image",[r.attrs.__mediaType]);(0,o.useEffect)(()=>{S.length>0&&g([S[0]])},[S,g]);const M=(0,o.useCallback)(e=>{const[r]=e;"image"===C?r.media_thumbnail&&n.chain().setMediaImageBlock(r,f).deleteRange({from:t(),to:t()}).focus().run():n.chain().setMediaFileBlock(r,f).deleteRange({from:t(),to:t()}).focus().run(),v()},[n,C,t,v,f]);return(0,d.jsxs)(i.NodeViewWrapper,{children:[(0,d.jsx)(u.default,{onComplete:x,children:(0,d.jsxs)("div",{className:"acms-admin-block-editor-image-drop",style:{width:"100%"},children:[(0,d.jsxs)("p",{className:"acms-admin-block-editor-image-drop-text",children:["image"===C&&(0,d.jsx)("span",{className:"acms-admin-block-editor-image-drop-text-main",children:""}),"file"===C&&(0,d.jsx)("span",{className:"acms-admin-block-editor-image-drop-text-main",children:""}),(0,d.jsx)("span",{className:"acms-admin-block-editor-image-drop-text-sub",children:""})]}),(0,d.jsxs)("div",{className:"acms-admin-block-editor-button-group",children:[(0,d.jsxs)(s.ButtonV2,{onClick:y,variant:"outlined",size:"default",type:"button",children:[(0,d.jsx)(l.Icon,{name:"perm_media"}),""]}),(0,d.jsxs)(s.ButtonV2,{onClick:w,variant:"filled",size:"default",type:"button",children:[(0,d.jsx)(l.Icon,{name:"upload"}),""]})]}),(0,d.jsx)("input",{id:"media-upload-input",ref:b,type:"file",onChange:k,style:{display:"none"}})]})}),(0,d.jsx)(a.default,{isOpen:p,onInsert:M,files:h,onClose:v,tab:m,filetype:C,radioMode:!0})]})};t.Dropzone=f,t.default=f},27139:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaSelect=t.useFileUpload=t.useDropZone=void 0;var r=n(96540);t.useMediaSelect=()=>{const[e,t]=(0,r.useState)({isInsertModalOpen:!1,files:[],tab:"upload"}),n=(0,r.useCallback)(e=>{t(t=>({...t,isInsertModalOpen:!0,files:e,tab:"upload"}))},[]),o=(0,r.useCallback)(()=>{t(e=>({...e,isInsertModalOpen:!0,files:[],tab:"select"}))},[]);return{isInsertModalOpen:e.isInsertModalOpen,files:e.files,tab:e.tab,uploadFile:n,handleModalClose:()=>{t(e=>({...e,isInsertModalOpen:!1}))},handleSelectClick:o}},t.useFileUpload=e=>{let{uploader:t}=e;const n=(0,r.useRef)(null),o=(0,r.useCallback)(()=>{n.current?.click()},[]);return{fileInputRef:n,handleUploadClick:o,handleUploadFile:e=>{const{files:n}=e.target;n&&n instanceof FileList&&t(Array.from(n))}}},t.useDropZone=e=>{let{uploader:t}=e;return{onDrop:e=>{t(e.map(e=>e.file))}}}},33041:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Column=void 0;var r=n(99248);const o=t.Column=r.Node.create({name:"column",content:"block+",isolating:!0,addAttributes(){return{position:{default:"",parseHTML:e=>e.getAttribute("data-position"),renderHTML:e=>({"data-position":e.position})}}},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,r.mergeAttributes)(t,{"data-type":"column"}),0]},parseHTML(){return[{tag:'div[data-type="column"]'}]}});t.default=o},82704:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Columns=t.ColumnLayout=void 0;var r=n(99248);let o=t.ColumnLayout=function(e){return e.TwoColumn="two-column",e.ThreeColumn="three-column",e}({});const i=t.Columns=r.Node.create({name:"columns",group:"columns",content:"column column column?",defining:!0,isolating:!0,addAttributes(){return{layout:{default:o.TwoColumn,parseHTML:e=>e.getAttribute("data-layout"),renderHTML:e=>({"data-layout":e.layout})}}},addCommands(){return{setColumns:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.TwoColumn;return t=>{let{commands:n}=t;const r=e===o.ThreeColumn?['<div data-type="column"><p></p></div>','<div data-type="column"><p></p></div>','<div data-type="column"><p></p></div>']:['<div data-type="column"><p></p></div>','<div data-type="column"><p></p></div>'];return n.insertContent(`<div data-type="columns" data-layout="${e}">${r.join("")}</div>`)}},setLayout:e=>t=>{let{commands:n}=t;return n.updateAttributes("columns",{layout:e})}}},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,r.mergeAttributes)(this.options.HTMLAttributes,t,{id:t.id,class:`layout-${t["data-layout"]||o.TwoColumn}`,"data-type":"columns","data-layout":t["data-layout"]||o.TwoColumn}),0]},parseHTML(){return[{tag:'div[data-type="columns"]'}]}});t.default=i},72751:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(82704);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var o=n(33041);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},42784:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Selection=void 0;var r=n(99248),o=n(56614),i=n(37392);const a=t.Selection=r.Extension.create({name:"selection",addProseMirrorPlugins(){const{editor:e}=this;return[new o.Plugin({key:new o.PluginKey("selection"),props:{decorations(t){return t.selection.empty||!0===e.isFocused?null:i.DecorationSet.create(t.doc,[i.Decoration.inline(t.selection.from,t.selection.to,{class:"selection"})])}}})]}});t.default=a},16670:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(42784);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},72856:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),o=n(30473),i=n(45035),a=n(74848);const s=r.default.forwardRef((e,t)=>{let{items:n,command:s,...l}=e;const c=(0,r.useRef)(null),u=(0,r.useRef)([]),[d,f]=(0,r.useState)(0),[p,h]=(0,r.useState)(0);(0,r.useEffect)(()=>{u.current=n.map(e=>new Array(e.commands.length).fill(null)),f(0),h(0)},[n]);const m=(0,r.useCallback)((e,t)=>{const r=n[e].commands[t];s(r)},[n,s]);r.default.useImperativeHandle(t,()=>({onKeyDown:e=>{let{event:t}=e;if("ArrowDown"===t.key){if(!n.length)return!1;const{commands:e}=n[d];let t=p+1,r=d;return e.length-1<t&&(t=0,r=d+1),n.length-1<r&&(r=0),h(t),f(r),!0}if("ArrowUp"===t.key){if(!n.length)return!1;let e=p-1,t=d;if(e<0){t=d-1;const r=n[t]?.commands?.length||0;e=r>0?r-1:0}return t<0&&(t=n.length-1,e=n[t].commands.length-1),h(e),f(t),!0}return!("Enter"!==t.key||!n.length||-1===d||-1===p||(m(d,p),0))}})),(0,r.useEffect)(()=>{const e=u.current[d]?.[p];e&&e.scrollIntoView({block:"nearest",behavior:"auto"})},[p,d]);const g=(0,r.useCallback)((e,t)=>()=>{m(e,t)},[m]);return n.length?(0,a.jsx)(i.Menu,{...l,focusManagerOptions:{initialFocus:-1},listNavigationOptions:{enabled:!1},children:(0,a.jsx)(i.MenuPopover,{ref:c,scrollable:!0,"data-elevation":"3",children:(0,a.jsx)(i.MenuList,{children:n.map((e,t)=>(0,a.jsx)(i.MenuGroup,{title:e.title,children:e.commands.map((e,n)=>(0,a.jsx)(i.MenuItem,{ref:e=>{u.current[t]||(u.current[t]=[]),u.current[t][n]=e},isActive:d===t&&p===n,onSelect:g(t,n),icon:(0,a.jsx)(o.Icon,{name:e.iconName}),children:e.label},`${e.label}`))},`${e.title}-group`))})})}):null});s.displayName="BlockMenu",t.default=s},25342:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(99248),i=n(83574),a=r(n(58991)),s=n(56614),l=r(n(72856));const c={isOpen:!0,strategy:"fixed",placement:"bottom-start",focusManagerOptions:{initialFocus:-1}},u="slashCommand",d=o.Extension.create({name:u,priority:200,addOptions(){return{getItems:()=>[]}},addProseMirrorPlugins(){return[(0,a.default)({editor:this.editor,char:"/",allowSpaces:!0,startOfLine:!0,pluginKey:new s.PluginKey(u),allow:e=>{let{state:t,range:n}=e;const r=t.doc.resolve(n.from),o=1===r.depth,i="paragraph"===r.parent.type.name,a="/"===r.parent.textContent?.charAt(0),s=this.editor.isActive("column"),l=r.parent.textContent?.substring(r.parent.textContent?.indexOf("/")),c=!l?.endsWith("  ");return(o&&i&&a||s&&i&&a)&&c},command:e=>{let{editor:t,props:n}=e;const{view:r,state:o}=t,{$head:i,$from:a}=r.state.selection,s=a.pos,l=i?.nodeBefore?s-(i.nodeBefore.text?.substring(i.nodeBefore.text?.indexOf("/")).length??0):a.start(),c=o.tr.deleteRange(l,s);r.dispatch(c),n.action(t),r.focus()},items:e=>{let{query:t,editor:n}=e;return this.options.getItems({query:t,editor:n})},render:()=>{let e=null,t=null;return{onStart:n=>{e=new i.ReactRenderer(l.default,{props:n,editor:n.editor});const{view:r}=n.editor,o=()=>{if(!n.clientRect)return n.editor.storage[u].rect;const t=n.clientRect();if(!t)return n.editor.storage[u].rect;if(null===e)return n.editor.storage[u].rect;const{element:r}=e;if(!(r instanceof HTMLElement))return n.editor.storage[u].rect;let o=t.y;if(t.top+r.offsetHeight+40>window.innerHeight){const e=t.top+r.offsetHeight-window.innerHeight+40;o=t.y-e}return new DOMRect(t.x,o,t.width,t.height)};t=()=>{if(null===e)return;const t={...n,...c,getAnchorRect:o};e.updateProps(t)},r.dom.parentElement?.addEventListener("scroll",t),e.updateProps({...n,...c,getAnchorRect:o})},onUpdate(t){if(null===e)return;e.updateProps(t);const{view:n}=t.editor,r=()=>{if(!t.clientRect)return t.editor.storage[u].rect;const e=t.clientRect();return e?new DOMRect(e.x,e.y,e.width,e.height):t.editor.storage[u].rect};n.dom.parentElement?.addEventListener("scroll",()=>{null!==e&&e.updateProps({...t,isOpen:!0,getAnchorRect:r})}),t.editor.storage[u].rect=t.clientRect?r():{width:0,height:0,left:0,top:0,right:0,bottom:0};const o={...t,...c,getAnchorRect:r};e.updateProps(o)},onKeyDown(t){if("Escape"===t.event.key){const t={isOpen:!1};return e?.updateProps(t),!0}return e?.ref?.onKeyDown(t)||!1},onExit(n){if(t){const{view:e}=n.editor;e.dom.parentElement?.removeEventListener("scroll",t)}e&&e.destroy()}}}})]},addStorage(){return{rect:{width:0,height:0,left:0,top:0,right:0,bottom:0}}}});t.default=d},98766:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SlashCommand",{enumerable:!0,get:function(){return o.default}});var o=r(n(25342))},26302:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableCell=void 0;var r=n(99248),o=n(56614),i=n(37392),a=n(90229);t.TableCell=r.Node.create({name:"tableCell",content:"block+",tableRole:"cell",isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"td"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,r.mergeAttributes)(this.options.HTMLAttributes,t),0]},addAttributes(){return{colspan:{default:1,parseHTML:e=>{const t=e.getAttribute("colspan");return t?parseInt(t,10):1}},rowspan:{default:1,parseHTML:e=>{const t=e.getAttribute("rowspan");return t?parseInt(t,10):1}},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}},backgroundColor:{default:null,parseHTML:e=>{const t=e.getAttribute("style");if(!t)return null;const n=t.match(/background-color:\s*([^;]+)/i);return n?n[1]:null},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}},addCommands(){return{setCellBackgroundColor:e=>t=>{let{commands:n}=t;return n.updateAttributes("tableCell",{backgroundColor:e})}}},addProseMirrorPlugins(){const{isEditable:e}=this.editor;return[new o.Plugin({props:{decorations:t=>{if(!e)return i.DecorationSet.empty;const{doc:n,selection:r}=t,o=[],s=(0,a.getCellsInColumn)(0)(r);return s&&s.forEach((e,t)=>{let{pos:n}=e;o.push(i.Decoration.widget(n+1,()=>{let e="grip-row";(0,a.isRowSelected)(t)(r)&&(e+=" selected"),0===t&&(e+=" first"),t===s.length-1&&(e+=" last");const n=document.createElement("a"),o=document.createElement("span");return o.className="material-symbols-outlined acms-admin-block-editor-icon grip-icon",o.textContent="more_vert",o.setAttribute("aria-hidden","true"),n.appendChild(o),n.className=e,n.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,a.selectRow)(t)(this.editor.state.tr))}),n}))}),i.DecorationSet.create(n,o)}}})]}})},68803:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableHeader=void 0;var o=r(n(17729)),i=n(56614),a=n(37392),s=n(90229);const l=t.TableHeader=o.default.extend({addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}},backgroundColor:{default:null,parseHTML:e=>{const t=e.getAttribute("style");if(!t)return null;const n=t.match(/background-color:\s*([^;]+)/i);return n?n[1]:null},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}},addCommands(){return{setHeaderBackgroundColor:e=>t=>{let{commands:n}=t;return n.updateAttributes("tableHeader",{backgroundColor:e})}}},addProseMirrorPlugins(){const{isEditable:e}=this.editor;return[new i.Plugin({props:{decorations:t=>{if(!e)return a.DecorationSet.empty;const{doc:n,selection:r}=t,o=[],i=(0,s.getCellsInRow)(0)(r);return i&&i.forEach((e,t)=>{let{pos:n}=e;o.push(a.Decoration.widget(n+1,()=>{let e="grip-column";(0,s.isColumnSelected)(t)(r)&&(e+=" selected"),0===t&&(e+=" first"),t===i.length-1&&(e+=" last");const n=document.createElement("a"),o=document.createElement("span");return o.className="material-symbols-outlined acms-admin-block-editor-icon grip-icon",o.textContent="more_horiz",o.setAttribute("aria-hidden","true"),n.appendChild(o),n.className=e,n.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,s.selectColumn)(t)(this.editor.state.tr))}),n}))}),a.DecorationSet.create(n,o)}}})]}});t.default=l},45912:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableRow=void 0;var o=r(n(55340));const i=t.TableRow=o.default.extend({allowGapCursor:!1,content:"(tableCell | tableHeader)*"});t.default=i},45844:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Table=void 0;var r=n(10601),o=n(99248);const i=t.Table=r.Table.extend({addAttributes(){return{scrollable:{default:!0,parseHTML:e=>!!e.getAttribute("data-scrollable"),renderHTML:e=>({"data-scrollable":!!e.scrollable||null})}}},renderHTML(e){let{HTMLAttributes:t}=e;const n=t["data-scrollable"],r=n?ACMS.Config.blockEditorConfig.tableScrollableWrapperClass:"",i=ACMS.Config.blockEditorConfig.tableScrollableClass||"",a=(0,o.mergeAttributes)(this.options.HTMLAttributes,t),s=(a.class||"").split(/\s+/).filter(e=>e&&e!==i);return n&&s.push(i),a.class=s.join(" "),["div",{class:`tableWrapper ${r}`.trim()},["table",a,["tbody",0]]]},addCommands(){return{...this.parent?.(),toggleTableScrollable:()=>e=>{let{commands:t,editor:n}=e;const{state:r}=n,{from:o,to:i}=r.selection;let a=!1;return r.doc.nodesBetween(o,i,e=>{if("table"===e.type.name){a=!0;const{scrollable:n}=e.attrs;return t.updateAttributes("table",{scrollable:!n}),!1}}),a}}}}).configure({resizable:!1});t.default=i},10248:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return r.Table}}),Object.defineProperty(t,"TableCell",{enumerable:!0,get:function(){return o.TableCell}}),Object.defineProperty(t,"TableHeader",{enumerable:!0,get:function(){return a.TableHeader}}),Object.defineProperty(t,"TableRow",{enumerable:!0,get:function(){return i.TableRow}});var r=n(45844),o=n(26302),i=n(45912),a=n(68803)},41566:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableColorPicker=void 0;var r=n(96540),o=n(45035),i=n(84505),a=n(4923),s=n(30473),l=n(72767),c=n(74848);t.TableColorPicker=(0,r.memo)(e=>{let{editor:t}=e;const n=(0,r.useRef)(null),{handleSetBgColor:u,handleClearBgColor:d}=(0,l.useTableStyle)(t);return(0,c.jsxs)(i.Popover,{ref:n,modal:!0,placement:"bottom-start",children:[(0,c.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,c.jsx)(o.MenuItem,{icon:(0,c.jsx)(s.Icon,{name:"format_color_fill"}),onSelect:()=>n.current?.togglePopover(),children:""})}),(0,c.jsx)(i.PopoverContent,{"data-elevation":"3",children:(0,c.jsx)(a.ColorPicker,{onChange:e=>{/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&u(e)},onClear:()=>{d()}})})]})})},69934:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableColumnMenu=void 0;var r=n(83574),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),i=n(45035),a=n(30473),s=n(99990),l=n(8999),c=n(41566),u=n(74848);const d=t.TableColumnMenu=o.default.memo(e=>{let{editor:t,appendTo:n}=e;const{features:d}=(0,s.useSettingsContext)(),[f,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(null),g=(0,o.useCallback)(e=>{let{view:n,state:r,from:o}=e;if(!r)return p(!1),!1;const i=(0,l.isColumnGripSelected)({editor:t,view:n,from:o||0});return p(i),i},[t]);return(0,u.jsx)(r.BubbleMenu,{editor:t,pluginKey:"tableColumnMenu",updateDelay:0,tippyOptions:{appendTo:()=>n?.current,placement:"bottom-end",offset:[0,15],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},getReferenceClientRect:()=>{const{view:e}=t,{state:n}=t,{$from:r}=n.selection,o=r.before(r.depth),i=e.nodeDOM(o);if(i instanceof HTMLElement){const e=i.getBoundingClientRect();return m(e),e}return m(t.view.dom.getBoundingClientRect()),t.view.dom.getBoundingClientRect()}},shouldShow:g,children:(0,u.jsx)(i.Menu,{isOpen:f,getAnchorRect:()=>h,children:(0,u.jsx)(i.MenuPopover,{size:"small","data-elevation":"3",children:(0,u.jsxs)(i.MenuList,{children:[(0,u.jsx)(i.MenuItem,{icon:(0,u.jsx)(a.Icon,{name:"splitscreen_left"}),onSelect:()=>t.chain().focus().toggleHeaderCell().run(),children:""}),(0,u.jsx)(i.MenuDivider,{}),(0,u.jsx)(i.MenuItem,{icon:(0,u.jsx)(a.Icon,{name:"arrow_back"}),onSelect:()=>t.chain().focus().addColumnBefore().run(),children:""}),(0,u.jsx)(i.MenuItem,{icon:(0,u.jsx)(a.Icon,{name:"arrow_forward"}),onSelect:()=>t.chain().focus().addColumnAfter().run(),children:""}),(0,u.jsx)(i.MenuItem,{icon:(0,u.jsx)(a.Icon,{name:"cell_merge"}),onSelect:()=>t.chain().focus().mergeCells().run(),children:""}),(0,u.jsx)(i.MenuItem,{icon:(0,u.jsx)(a.Icon,{name:"arrows_outward"}),onSelect:()=>t.chain().focus().splitCell().run(),children:""}),d?.tableBgColor&&(0,u.jsx)(c.TableColorPicker,{editor:t}),(0,u.jsx)(i.MenuItem,{variant:"danger",icon:(0,u.jsx)(a.Icon,{name:"delete"}),onSelect:()=>t.chain().focus().deleteColumn().run(),children:""})]})})})})});d.displayName="TableColumnMenu",t.default=d},8999:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isColumnGripSelected=t.default=void 0;var r=n(10248);const o=e=>{let{editor:t,view:n,from:o}=e;const i=n.domAtPos(o).node,a=n.nodeDOM(o)||i;if(!t.isActive(r.Table.name)||!a)return!1;let s=a;for(;s&&!["TD","TH"].includes(s.tagName);)s=s.parentElement;return!!(s&&s.querySelector&&s.querySelector("a.grip-column.selected"))};t.isColumnGripSelected=o,t.default=o},11473:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableMenu=void 0;var r=n(83574),o=n(96540),i=n(22831),a=n(17273),s=n(30473),l=n(84505),c=n(99990),u=n(4923),d=n(8999),f=n(82213),p=n(72767),h=n(74848);const m=e=>{let{editor:t,appendTo:n}=e;const m=(0,o.useRef)(null),[g,v]=(0,o.useState)(!1),{handleSetBgColor:y,handleClearBgColor:b}=(0,p.useTableStyle)(t),{features:w}=(0,c.useSettingsContext)(),k=(0,o.useCallback)(e=>{let{view:n,state:r,from:o}=e;return!(!r||!o)&&t.isActive("table")&&!(0,d.isColumnGripSelected)({editor:t,view:n,from:o||0})&&!(0,f.isRowGripSelected)({editor:t,view:n,from:o})},[t]);return(0,h.jsx)(r.BubbleMenu,{editor:t,pluginKey:`table-menu-${(0,i.v4)()}`,shouldShow:k,updateDelay:0,tippyOptions:{offset:[0,15],appendTo:()=>n?.current,popperOptions:{modifiers:[{name:"flip",enabled:!0}]},getReferenceClientRect:()=>{const{view:e}=t,{state:n}=t,{$from:r}=n.selection;for(let{depth:t}=r;t>0;t--)if("table"===r.node(t).type.name){const n=r.before(t),o=e.nodeDOM(n);if(o instanceof HTMLElement)return o.getBoundingClientRect()}return t.view.dom.getBoundingClientRect()}},children:(0,h.jsxs)(a.Toolbar,{ref:m,children:[(0,h.jsx)(a.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",onClick:()=>t.chain().focus().mergeCells().run(),children:(0,h.jsx)(s.Icon,{name:"cell_merge"})}),(0,h.jsx)(a.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",onClick:()=>t.chain().focus().splitCell().run(),children:(0,h.jsx)(s.Icon,{name:"arrows_outward"})}),(0,h.jsx)(a.Toolbar.Button,{type:"button",tooltip:"","aria-label":"",active:t.getAttributes("table").scrollable,onClick:()=>t.chain().focus().toggleTableScrollable().run(),children:(0,h.jsx)(s.Icon,{name:"swipe"})}),w?.tableBgColor&&(0,h.jsxs)(l.Popover,{modal:!0,isOpen:g,onOpenChange:v,placement:"top",children:[(0,h.jsx)(a.Toolbar.Divider,{}),(0,h.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,h.jsx)(a.Toolbar.Button,{type:"button",tooltip:"",active:!1,"aria-label":"",onClick:()=>v(e=>!e),children:(0,h.jsx)(s.Icon,{name:"format_color_fill"})})}),(0,h.jsx)(l.PopoverContent,{"data-elevation":"3",children:(0,h.jsx)(u.ColorPicker,{onChange:e=>{/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&y(e)},onClear:()=>{b(),v(!1)}})})]})]})})};t.TableMenu=m,t.default=m},55203:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableRowMenu=void 0;var r=n(83574),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(96540)),i=n(30473),a=n(45035),s=n(99990),l=n(82213),c=n(41566),u=n(74848);const d=t.TableRowMenu=o.default.memo(e=>{let{editor:t,appendTo:n}=e;const{features:d}=(0,s.useSettingsContext)(),[f,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(null),g=(0,o.useCallback)(e=>{let{view:n,state:r,from:o}=e;if(!r||!o)return p(!1),!1;const i=(0,l.isRowGripSelected)({editor:t,view:n,from:o});return p(i),i},[t]);return(0,u.jsx)(r.BubbleMenu,{editor:t,pluginKey:"tableRowMenu",updateDelay:0,tippyOptions:{appendTo:()=>n?.current,placement:"bottom-end",offset:[0,15],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},getReferenceClientRect:()=>{const{view:e}=t,{state:n}=t,{$from:r}=n.selection,o=r.before(r.depth),i=e.nodeDOM(o);if(i instanceof HTMLElement){const e=i.getBoundingClientRect();return m(e),e}return m(t.view.dom.getBoundingClientRect()),t.view.dom.getBoundingClientRect()}},shouldShow:g,children:(0,u.jsx)(a.Menu,{isOpen:f,getAnchorRect:()=>h,children:(0,u.jsx)(a.MenuPopover,{size:"small","data-elevation":"3",children:(0,u.jsxs)(a.MenuList,{children:[(0,u.jsx)(a.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"splitscreen_top"}),onSelect:()=>t.chain().focus().toggleHeaderCell().run(),children:""}),(0,u.jsx)(a.MenuDivider,{}),(0,u.jsx)(a.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"arrow_upward"}),onSelect:()=>t.chain().focus().addRowBefore().run(),children:""}),(0,u.jsx)(a.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"arrow_downward"}),onSelect:()=>t.chain().focus().addRowAfter().run(),children:""}),(0,u.jsx)(a.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"cell_merge"}),onSelect:()=>t.chain().focus().mergeCells().run(),children:""}),(0,u.jsx)(a.MenuItem,{icon:(0,u.jsx)(i.Icon,{name:"arrows_outward"}),onSelect:()=>t.chain().focus().splitCell().run(),children:""}),d?.tableBgColor&&(0,u.jsx)(c.TableColorPicker,{editor:t}),(0,u.jsx)(a.MenuItem,{variant:"danger",icon:(0,u.jsx)(i.Icon,{name:"delete"}),onSelect:()=>t.chain().focus().deleteRow().run(),children:""})]})})})})});d.displayName="TableRowMenu",t.default=d},82213:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isRowGripSelected=t.default=void 0;var r=n(10248);const o=e=>{let{editor:t,view:n,from:o}=e;const i=n.domAtPos(o).node,a=n.nodeDOM(o)||i;if(!t.isActive(r.Table.name)||!a)return!1;let s=a;for(;s&&!["TD","TH"].includes(s.tagName);)s=s.parentElement;return!!(s&&s.querySelector&&s.querySelector("a.grip-row.selected"))};t.isRowGripSelected=o,t.default=o},72767:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTableStyle=void 0;var r=n(96540);t.useTableStyle=e=>({handleSetBgColor:(0,r.useCallback)(t=>{e.chain().setCellBackgroundColor(t).run(),e.chain().setHeaderBackgroundColor(t).run()},[e]),handleClearBgColor:(0,r.useCallback)(()=>{e.chain().setCellBackgroundColor("").run(),e.chain().setHeaderBackgroundColor("").run()},[e])})},12385:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11473);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var o=n(69934);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=n(55203);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},90229:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.selectTable=t.selectRow=t.selectColumn=t.isTableSelected=t.isRowSelected=t.isRectSelected=t.isColumnSelected=t.isCellSelection=t.getCellsInTable=t.getCellsInRow=t.getCellsInColumn=t.findTable=t.findParentNodeClosestToPos=t.findCellClosestToPos=void 0;var r=n(99248),o=n(8812);const i=e=>t=>{const n=o.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),i=n.cellsInRect(e),a=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r));for(let e=0,t=i.length;e<t;e+=1)if(-1===a.indexOf(i[e]))return!1;return!0};t.isRectSelected=i;const a=e=>(0,r.findParentNode)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e);t.findTable=a;const s=e=>e instanceof o.CellSelection;t.isCellSelection=s,t.isColumnSelected=e=>t=>{if(s(t)){const n=o.TableMap.get(t.$anchorCell.node(-1));return i({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1},t.isRowSelected=e=>t=>{if(s(t)){const n=o.TableMap.get(t.$anchorCell.node(-1));return i({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1},t.isTableSelected=e=>{if(s(e)){const t=o.TableMap.get(e.$anchorCell.node(-1));return i({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},t.getCellsInColumn=e=>t=>{const n=a(t);if(n){const t=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,r)=>{if(r>=0&&r<=t.width-1){const o=t.cellsInRect({left:r,right:r+1,top:0,bottom:t.height});return e.concat(o.map(e=>{const t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}}))}return e},[])}return null},t.getCellsInRow=e=>t=>{const n=a(t);if(n){const t=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,r)=>{if(r>=0&&r<=t.height-1){const o=t.cellsInRect({left:0,right:t.width,top:r,bottom:r+1});return e.concat(o.map(e=>{const t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}}))}return e},[])}return null},t.getCellsInTable=e=>{const t=a(e);if(t){const e=o.TableMap.get(t.node);return e.cellsInRect({left:0,right:e.width,top:0,bottom:e.height}).map(e=>{const n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}})}return null};const l=(e,t)=>{for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}return null};t.findParentNodeClosestToPos=l,t.findCellClosestToPos=e=>l(e,e=>e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole));const c=e=>t=>n=>{const r=a(n.selection),i="row"===e;if(r){const e=o.TableMap.get(r.node);if(t>=0&&t<(i?e.height:e.width)){const a=i?0:t,s=i?t:0,l=i?e.width:t+1,c=i?t+1:e.height,u=e.cellsInRect({left:a,top:s,right:i?l:a+1,bottom:i?s+1:c}),d=c-s==1?u:e.cellsInRect({left:i?a:l-1,top:i?c-1:s,right:l,bottom:c}),f=r.start+u[0],p=r.start+d[d.length-1],h=n.doc.resolve(f),m=n.doc.resolve(p);return n.setSelection(new o.CellSelection(m,h))}}return n};t.selectColumn=c("column"),t.selectRow=c("row"),t.selectTable=e=>{const t=a(e.selection);if(t){const{map:n}=o.TableMap.get(t.node);if(n&&n.length){const r=t.start+n[0],i=t.start+n[n.length-1],a=e.doc.resolve(r),s=e.doc.resolve(i);return e.setSelection(new o.CellSelection(s,a))}}return e}},50600:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(38923);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})},38923:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TrailingNode=void 0;var r=n(99248),o=n(56614);function i(e){let{types:t,node:n}=e;return Array.isArray(t)&&t.includes(n.type)||n.type===t}t.TrailingNode=r.Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const e=new o.PluginKey(this.name),t=Object.entries(this.editor.schema.nodes).map(e=>{let[,t]=e;return t}).filter(e=>this.options.notAfter.includes(e.name));return[new o.Plugin({key:e,appendTransaction:(t,n,r)=>{const{doc:o,tr:i,schema:a}=r,s=e.getState(r),l=o.content.size,c=a.nodes[this.options.node];if(s)return i.insert(l,c.create())},state:{init:(e,n)=>!i({node:n.tr.doc.lastChild,types:t}),apply:(e,n)=>e.docChanged?!i({node:e.doc.lastChild,types:t}):n}})]}})},89623:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ExtensionKit=void 0;var o=r(n(7689)),i=n(80575);const a=()=>[i.StarterKit.configure({document:!1,dropcursor:!1,heading:!1,horizontalRule:!1,history:!1}),o.default,i.Document,i.Columns,i.Column,i.Selection,i.Heading.configure({levels:[1,2,3,4,5,6]}),i.HorizontalRule,i.TextStyle,i.FontStyle,i.TrailingNode,i.Link.configure({openOnClick:!1,HTMLAttributes:{rel:"noopener noreferrer",target:null}}),i.Highlight.configure({multicolor:!0}),i.Underline,i.MediaUpload,i.CustomMark,i.CustomConvertBlock,i.ImageBlock,i.FileBlock,i.LinkButton,i.TextAlign.extend({addKeyboardShortcuts(){return{}}}).configure({types:["heading","paragraph"]}),i.Subscript,i.Superscript,i.Table,i.TableCell,i.TableHeader,i.TableRow,i.Typography,i.Placeholder.configure({includeChildren:!0,showOnlyCurrent:!1,placeholder:()=>""}),i.Focus,i.Figcaption,i.Dropcursor.configure({width:4,color:"#a3c0ef",class:"acms-admin-dropcursor"})];t.ExtensionKit=a,t.default=a},80575:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BlockquoteFigure",{enumerable:!0,get:function(){return E.BlockquoteFigure}}),Object.defineProperty(t,"BulletList",{enumerable:!0,get:function(){return g.BulletList}}),Object.defineProperty(t,"CodeBlock",{enumerable:!0,get:function(){return m.CodeBlock}}),Object.defineProperty(t,"Column",{enumerable:!0,get:function(){return D.Column}}),Object.defineProperty(t,"Columns",{enumerable:!0,get:function(){return D.Columns}}),Object.defineProperty(t,"CustomConvertBlock",{enumerable:!0,get:function(){return F.CustomConvertBlock}}),Object.defineProperty(t,"CustomMark",{enumerable:!0,get:function(){return L.CustomMark}}),Object.defineProperty(t,"Document",{enumerable:!0,get:function(){return x.Document}}),Object.defineProperty(t,"Dropcursor",{enumerable:!0,get:function(){return d.Dropcursor}}),Object.defineProperty(t,"Figcaption",{enumerable:!0,get:function(){return A.Figcaption}}),Object.defineProperty(t,"Figure",{enumerable:!0,get:function(){return O.Figure}}),Object.defineProperty(t,"FileBlock",{enumerable:!0,get:function(){return P.FileBlock}}),Object.defineProperty(t,"Focus",{enumerable:!0,get:function(){return u.FocusClasses}}),Object.defineProperty(t,"FontStyle",{enumerable:!0,get:function(){return M.FontStyle}}),Object.defineProperty(t,"Heading",{enumerable:!0,get:function(){return k.Heading}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return o.Highlight}}),Object.defineProperty(t,"HorizontalRule",{enumerable:!0,get:function(){return w.HorizontalRule}}),Object.defineProperty(t,"ImageBlock",{enumerable:!0,get:function(){return j.ImageBlock}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return N.Link}}),Object.defineProperty(t,"LinkButton",{enumerable:!0,get:function(){return I.LinkButton}}),Object.defineProperty(t,"MediaUpload",{enumerable:!0,get:function(){return R.MediaUpload}}),Object.defineProperty(t,"OrderedList",{enumerable:!0,get:function(){return v.OrderedList}}),Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return h.Paragraph}}),Object.defineProperty(t,"Placeholder",{enumerable:!0,get:function(){return a.Placeholder}}),Object.defineProperty(t,"Quote",{enumerable:!0,get:function(){return T.Quote}}),Object.defineProperty(t,"QuoteCaption",{enumerable:!0,get:function(){return _.QuoteCaption}}),Object.defineProperty(t,"Selection",{enumerable:!0,get:function(){return y.Selection}}),Object.defineProperty(t,"SlashCommand",{enumerable:!0,get:function(){return C.SlashCommand}}),Object.defineProperty(t,"StarterKit",{enumerable:!0,get:function(){return r.StarterKit}}),Object.defineProperty(t,"Subscript",{enumerable:!0,get:function(){return f.Subscript}}),Object.defineProperty(t,"Superscript",{enumerable:!0,get:function(){return p.Superscript}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return b.Table}}),Object.defineProperty(t,"TableCell",{enumerable:!0,get:function(){return b.TableCell}}),Object.defineProperty(t,"TableHeader",{enumerable:!0,get:function(){return b.TableHeader}}),Object.defineProperty(t,"TableRow",{enumerable:!0,get:function(){return b.TableRow}}),Object.defineProperty(t,"TextAlign",{enumerable:!0,get:function(){return s.TextAlign}}),Object.defineProperty(t,"TextStyle",{enumerable:!0,get:function(){return l.TextStyle}}),Object.defineProperty(t,"TrailingNode",{enumerable:!0,get:function(){return S.TrailingNode}}),Object.defineProperty(t,"Typography",{enumerable:!0,get:function(){return c.Typography}}),Object.defineProperty(t,"Underline",{enumerable:!0,get:function(){return i.Underline}});var r=n(61439),o=n(35857),i=n(19721),a=n(43100),s=n(52516),l=n(43420),c=n(29622),u=n(68445),d=n(60400),f=n(5820),p=n(14841),h=n(5067),m=n(95006),g=n(87918),v=n(45823),y=n(16670),b=n(10248),w=n(78274),k=n(70086),x=n(34861),S=n(50600),C=n(98766),M=n(26542),O=n(38432),A=n(28108),E=n(88459),T=n(38820),_=n(98102),N=n(10396),j=n(35522),P=n(80835),I=n(23700),D=n(72751),R=n(49493),L=n(32502),F=n(52475)},22970:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useBlockEditor=void 0;var r=n(83574),o=n(96540),i=n(28459),a=n(66474),s=n(80575),l=n(89623);t.useBlockEditor=e=>{let{defaultValue:t="",onUpdate:n=()=>{},blockMenus:c=[],...u}=e;const{getFilteredBlockMenus:d}=(0,i.useBlockMenus)({blockMenus:c}),f=(0,o.useRef)(d);f.current=d;const p=(0,o.useMemo)(()=>[...(0,l.ExtensionKit)(),a.BlockAttributes,s.SlashCommand.configure({getItems:e=>{let{query:t,editor:n}=e;return f.current({query:t,editor:n})}})],[]),h=(0,r.useEditor)({autofocus:!1,onCreate:e=>{let{editor:n}=e;n.isEmpty&&n.commands.setContent(t||"")},onUpdate:e=>{let{editor:t}=e;const r=t.getHTML();n(r)},extensions:p,...u,editorProps:{...u.editorProps,attributes:function(){return{autocomplete:"off",autocorrect:"off",autocapitalize:"off",..."function"==typeof u.editorProps?.attributes?u.editorProps.attributes(...arguments):u.editorProps?.attributes}}}},[]);return{editor:h,getFilteredBlockMenus:d}}},28459:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useBlockMenus=function(e){let{blockMenus:t}=e;const{frequentlyUsed:n,recordUsage:r}=(0,i.useFrequentlyUsed)(),a=(0,o.useRef)([]);(0,o.useEffect)(()=>{a.current=t??[]},[t]);const l=(0,o.useCallback)(e=>{let{query:t,editor:o}=e;const i=a.current;if(!i||0===i.length)return[];const l=i.map(e=>({...e,commands:e.commands.filter(e=>{const n=e.label.toLowerCase().trim(),r=t.toLowerCase().trim();if(e.aliases){const t=e.aliases.map(e=>e.toLowerCase().trim());return n.includes(r)||t.some(e=>e.includes(r))}return n.includes(r)}).filter(e=>!e.shouldBeHidden||!e.shouldBeHidden(o))})).filter(e=>e.commands.length>0).map(e=>({...e,commands:e.commands.map(e=>({...e,isEnabled:!0}))})).map(e=>({...e,commands:s(e.commands,r)}));if(n.length>0){const e=l.flatMap(e=>e.commands).filter((e,t,r)=>n.includes(e.name)&&r.findIndex(t=>t.name===e.name)===t).sort((e,t)=>n.indexOf(e.name)-n.indexOf(t.name));if(e.length>0)return[{title:"",name:"frequently-used",commands:e},...l]}return l},[r,n]);return{groups:t??[],getFilteredBlockMenus:l}},t.useFilteredCommands=function(e,t,n){return(0,o.useMemo)(()=>e.map(e=>{const r=e.commands.filter(e=>!e.isDisabled(t,n));return{...e,commands:r}}).filter(e=>e.commands.length>0&&"frequently-used"!==e.name),[e,t,n])};var r=n(56614),o=n(96540),i=n(79680),a=n(82704);const s=(e,t)=>{const n={paragraph:e=>({action:n=>{t(e.name),n.chain().focus().setParagraph().run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setParagraph().run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("paragraph",{class:e.class}):t.isActive("paragraph",{class:null})||t.isActive("paragraph",{class:""}))||!t.isActive("paragraph")&&!t.can().setParagraph(),isActive:t=>e.class?t.isActive("paragraph",{class:e.class}):t.isActive("paragraph",{class:null})||t.isActive("paragraph",{class:""})}),heading1:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:1}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:1}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:1,class:e.class}):t.isActive("heading",{level:1,class:null})||t.isActive("heading",{level:1,class:""}))||!t.isActive("heading",{level:1})&&!t.can().setHeading({level:1}),isActive:t=>e.class?t.isActive("heading",{level:1,class:e.class}):t.isActive("heading",{level:1,class:null})||t.isActive("heading",{level:1,class:""})}),heading2:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:2}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:2}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:2,class:e.class}):t.isActive("heading",{level:2,class:null})||t.isActive("heading",{level:2,class:""}))||!t.isActive("heading",{level:2})&&!t.can().setHeading({level:2}),isActive:t=>e.class?t.isActive("heading",{level:2,class:e.class}):t.isActive("heading",{level:2,class:null})||t.isActive("heading",{level:2,class:""})}),heading3:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:3}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:3}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:3,class:e.class}):t.isActive("heading",{level:3,class:null})||t.isActive("heading",{level:3,class:""}))||!t.isActive("heading",{level:3})&&!t.can().setHeading({level:3}),isActive:t=>e.class?t.isActive("heading",{level:3,class:e.class}):t.isActive("heading",{level:3,class:null})||t.isActive("heading",{level:3,class:""})}),heading4:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:4}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:4}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:4,class:e.class}):t.isActive("heading",{level:4,class:null})||t.isActive("heading",{level:4,class:""}))||!t.isActive("heading",{level:4})&&!t.can().setHeading({level:4}),isActive:t=>e.class?t.isActive("heading",{level:4,class:e.class}):t.isActive("heading",{level:4,class:null})||t.isActive("heading",{level:4,class:""})}),heading5:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:5}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:5}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:5,class:e.class}):t.isActive("heading",{level:5,class:null})||t.isActive("heading",{level:5,class:""}))||!t.isActive("heading",{level:5})&&!t.can().setHeading({level:5}),isActive:t=>e.class?t.isActive("heading",{level:5,class:e.class}):t.isActive("heading",{level:5,class:null})||t.isActive("heading",{level:5,class:""})}),heading6:e=>({action:n=>{t(e.name),n.chain().focus().setHeading({level:6}).run();const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setHeading({level:6}).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("heading",{level:6,class:e.class}):t.isActive("heading",{level:6,class:null})||t.isActive("heading",{level:6,class:""}))||!t.isActive("heading",{level:6})&&!t.can().setHeading({level:6}),isActive:t=>e.class?t.isActive("heading",{level:6,class:e.class}):t.isActive("heading",{level:6,class:null})||t.isActive("heading",{level:6,class:""})}),bulletList:e=>({action:n=>{t(e.name),n.chain().focus().toggleBulletList().run();const{$from:r}=n.state.selection;for(let{depth:t}=r;t>0;t--)if("bulletList"===r.node(t).type.name){const o=r.before(t);n.chain().focus().setBlockAttrs(o,{class:e.class}).run();break}},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).splitBulletList(n).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("bulletList",{class:e.class}):t.isActive("bulletList",{class:null})||t.isActive("bulletList",{class:""}))||!t.isActive("bulletList")&&!t.isActive("orderedList")&&!t.can().toggleBulletList(),isActive:e=>e.isActive("bulletList")}),numberedList:e=>({action:n=>{t(e.name),n.chain().focus().toggleOrderedList().run();const{$from:r}=n.state.selection;for(let{depth:t}=r;t>0;t--)if("orderedList"===r.node(t).type.name){const o=r.before(t);n.chain().focus().setBlockAttrs(o,{class:e.class}).run();break}},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).splitOrderedList(n).run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("orderedList",{class:e.class}):t.isActive("orderedList",{class:null})||t.isActive("orderedList",{class:""}))||!t.isActive("orderedList")&&!t.isActive("bulletList")&&!t.can().toggleOrderedList(),isActive:e=>e.isActive("orderedList")}),blockquote:e=>({action:n=>{t(e.name),n.chain().focus().setBlockquote().run();const{$from:r}=n.state.selection;for(let{depth:t}=r;t>0;t--)if("blockquote"===r.node(t).type.name){const o=r.before(t);n.chain().focus().setBlockAttrs(o,{class:e.class}).run();break}},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.setBlockquote().run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("blockquote",{class:e.class}):t.isActive("blockquote",{class:null})||t.isActive("blockquote",{class:""}))||!t.isActive("blockquote"),isActive:e=>e.isActive("blockquote")}),codeBlock:e=>({action:n=>{t(e.name),n.chain().focus().setCodeBlock().run();const{$from:r}=n.state.selection;for(let{depth:t}=r;t>0;t--)if("codeBlock"===r.node(t).type.name){const o=r.before(t);n.chain().focus().setBlockAttrs(o,{class:e.class}).run();break}},convert:(t,n)=>{const r=t.chain();r.setNodeSelection(n),r.removeList(n).removeBlockquote(n).setCodeBlock().run();const{$from:o}=t.state.selection,i=o.before(1);t.chain().focus().setBlockAttrs(i,{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("codeBlock",{class:e.class}):t.isActive("codeBlock",{class:null})||t.isActive("codeBlock",{class:""}))||!t.isActive("codeBlock")&&!t.can().setCodeBlock(),isActive:e=>e.isActive("codeBlock")}),image:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().uploadMediaImage().setBlockAttrs(o,{class:e.class}).run()},convert:t=>{const{state:n}=t,{selection:o}=n;(t.isActive("imageBlock")||o instanceof r.NodeSelection&&"imageBlock"===o.node.type.name)&&t.chain().focus().updateAttributes("imageBlock",{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("imageBlock",{class:e.class}):t.isActive("imageBlock",{class:null})||t.isActive("imageBlock",{class:""}))||!t.isActive("imageBlock"),isActive:e=>e.isActive("imageBlock")}),file:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().uploadMediaFile().setBlockAttrs(o,{class:e.class}).run()},convert:t=>{const{state:n}=t,{selection:o}=n;(t.isActive("fileBlock")||o instanceof r.NodeSelection&&"fileBlock"===o.node.type.name)&&t.chain().focus().updateAttributes("fileBlock",{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("fileBlock",{class:e.class}):t.isActive("fileBlock",{class:null})||t.isActive("fileBlock",{class:""}))||!t.isActive("fileBlock"),isActive:e=>e.isActive("fileBlock")}),linkButton:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setLinkButtonBlock().setBlockAttrs(o,{class:e.class}).run()},convert:t=>{const{state:n}=t,{selection:o}=n;(t.isActive("linkButton")||o instanceof r.NodeSelection&&"linkButton"===o.node.type.name)&&t.chain().focus().updateAttributes("linkButton",{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("linkButton",{class:e.class}):t.isActive("linkButton",{class:null})||t.isActive("linkButton",{class:""}))||!t.isActive("linkButton"),isActive:e=>e.isActive("linkButton")}),table:e=>({action:n=>{t(e.name),n.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!1}).run();const{$from:r}=n.state.selection;for(let{depth:t}=r;t>0;t--)if("table"===r.node(t).type.name){const o=r.before(t);n.chain().focus().setBlockAttrs(o,{class:e.class}).run();break}},convert:t=>{const{state:n}=t,{selection:o}=n;(t.isActive("table")||o instanceof r.NodeSelection&&"table"===o.node.type.name)&&t.chain().focus().updateAttributes("table",{class:e.class}).run()},isDisabled:t=>!!(e.class?t.isActive("table",{class:e.class}):t.isActive("table",{class:null})||t.isActive("table",{class:""}))||!t.isActive("table"),isActive:e=>e.isActive("table")}),columns2:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setColumns(a.ColumnLayout.TwoColumn).focus(n.state.selection.head-1).setBlockAttrs(o,{class:e.class}).run()},convert:()=>{},isDisabled:()=>!0,isActive:e=>e.isActive("columns2")}),columns3:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setColumns(a.ColumnLayout.ThreeColumn).focus(n.state.selection.head-1).setBlockAttrs(o,{class:e.class}).run()},convert:()=>{},isDisabled:()=>!0,isActive:e=>e.isActive("columns3")}),horizontalRule:e=>({action:n=>{t(e.name);const{$from:r}=n.state.selection,o=r.before(r.depth);n.chain().focus().setHorizontalRule().run(),n.chain().focus().setBlockAttrs(o,{class:e.class}).run()},convert:()=>{},isDisabled:()=>!0,isActive:e=>e.isActive("horizontalRule")})};return e.map(e=>n[e.name]?{...e,...n[e.name](e)}:null).filter(Boolean)}},79680:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useFrequentlyUsed=void 0;var r=n(96540),o=n(26051);t.useFrequentlyUsed=()=>{const[e,t]=(0,r.useState)(()=>(0,o.getFrequentlyUsedCommands)(5));return{frequentlyUsed:e,recordUsage:e=>{(0,o.recordCommandUsage)(e),t(t=>[e,...t.filter(t=>t!==e)].slice(0,5))}}}},5305:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=function(){const{data:e}=(0,o.default)(a.settingCacheKey,s);return{features:e?.features||{textItalic:!1,textUnderline:!1,textStrike:!1,textCode:!1,textMarker:!1,textColor:!1,fontSize:!1,fontFamily:!1,textSubscript:!1,textSuperscript:!1,customClass:!1,tableBgColor:!1},blockMenus:e?.blockMenus||[],fontSize:e?.fontSize||[],fontFamily:e?.fontFamily||[],customClass:e?.customClass||[],imageSizes:e?.imageSizes||[],colorPalette:e?.colorPalette||[]}};var o=r(n(88154)),i=n(36931),a=n(18819);async function s(){return await(0,i.fetchSettings)()}},26051:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.recordCommandUsage=t.getFrequentlyUsedCommands=void 0;const n=()=>`frequentlyUsedCommands-${ACMS.Config.editorSetId}-${ACMS.Config.root}-${ACMS.Config.suid}`;t.recordCommandUsage=e=>{const t=n(),r=localStorage.getItem(t);let o=r?JSON.parse(r):[];o=o.filter(t=>t!==e),o.unshift(e),o=o.slice(0,30),localStorage.setItem(t,JSON.stringify(o))},t.getFrequentlyUsedCommands=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=n(),r=localStorage.getItem(t);return r?JSON.parse(r).slice(0,e):[]}},51542:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0});var o={cn:!0,randomElement:!0};t.cn=function(){return(0,i.default)(...arguments)},t.randomElement=function(e){return e[Math.floor(Math.random()*e.length)]};var i=r(n(46942)),a=n(9870);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var s=n(40410);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))})},9870:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isTableGripSelected=t.isCustomNodeSelected=t.default=void 0;var r=n(80575);const o=e=>{let t=e;for(;t&&!["TD","TH"].includes(t.tagName);)t=t.parentElement;const n=t&&t.querySelector&&t.querySelector("a.grip-column.selected"),r=t&&t.querySelector&&t.querySelector("a.grip-row.selected");return!(!n&&!r)};t.isTableGripSelected=o;const i=(e,t)=>[r.HorizontalRule.name,r.ImageBlock.name,r.MediaUpload.name,r.CodeBlock.name,r.ImageBlock.name,r.FileBlock.name,r.LinkButton.name,r.Figcaption.name].some(t=>e.isActive(t))||o(t);t.isCustomNodeSelected=i,t.default=i},40410:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isTextSelected=t.default=void 0;var r=n(99248);const o=e=>{let{editor:t}=e;const{state:{doc:n,selection:o,selection:{empty:i,from:a,to:s}}}=t,l=!n.textBetween(a,s).length&&(0,r.isTextSelection)(o);return!(i||l||!t.isEditable)};t.isTextSelected=o,t.default=o},18819:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.settingCacheKey=void 0,t.settingCacheKey=`block-editor-settings:${ACMS.Config.bid}:${ACMS.Config.cid}`},99509:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(43693)),i=n(96540),a=n(43375),s=n(74979),l=r(n(65643)),c=r(n(46942)),u=r(n(21250)),d=r(n(86792)),f=r(n(78716));n(8094);var p=r(n(50416)),h=r(n(9839)),m=r(n(87145)),g=r(n(72381)),v=n(20872),y=n(39469),b=r(n(7019)),w=n(74848);const k=(0,u.default)(f.default)`
  .acms-admin-modal-backdrop {
    background-color: rgb(0 0 0);
  }

  .acms-admin-modal-body {
    padding: 0;
    margin: 0;
    background-color: #1a2029;
  }

  .acms-admin-modal-content {
    padding-right: 0;
    padding-left: 0;
  }

  .acms-admin-cropper-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px 10px 40px;

    > * + * {
      margin-top: 10px !important;
    }
  }

  .acms-admin-cropper-wrap {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: ${55}vh;
  }

  .acms-admin-cropper-img-container {
    position: relative;
    width: 100%;
    max-width: 100%;
  }

  .acms-admin-cropper-img-container img {
    max-height: ${55}vh;
  }

  .acms-admin-cropper-tools,
  .acms-admin-cropper-input-wrap {
    box-sizing: border-box;
    width: 130px;
    padding: 0 15px;
  }

  .acms-admin-cropper-input {
    padding: 7px 10px;
    margin-bottom: 5px;
    font-size: 14px;
    color: #fff;
    background-color: #2f3641;
    border: none;
    border-radius: 3px;
  }

  .acms-admin-cropper-input-label {
    display: inline-block;
    font-size: 10px;
    color: #fff;
  }

  .acms-admin-cropper-icon {
    display: block;
    width: auto;
    height: 30px;
    margin: 0 auto 5px;
  }

  .acms-admin-cropper-icon-crop {
    display: block;
    width: 40px;
    height: auto;
    margin: 0 auto 5px;
  }

  .acms-admin-cropper-reflect-group {
    display: table;
    width: 100%;
    border: 1px solid #333a45;
    border-radius: 3px;
  }

  .acms-admin-cropper-reflect-btn {
    display: table-cell;
    width: 50%;
    padding: 10px 15px;
    color: #fff;
    background-color: transparent;
    border: none;
  }

  .acms-admin-cropper-reflect-icon {
    display: block;
    width: 20px;
    height: auto;
    margin: 0 auto 5px;
  }

  .acms-admin-cropper-reflect-label {
    margin-bottom: 30px;
    font-size: 10px;
    color: #fff;
    text-align: center;
  }

  .acms-admin-cropper-btn-group-wrap {
    flex: 1;
  }

  .acms-admin-cropper-btn-group {
    display: table;
  }

  .acms-admin-cropper-btn-label {
    display: table-cell;
    padding-right: 20px;
    font-size: 12px;
    color: #fff;
    vertical-align: middle;
  }

  .acms-admin-cropper-group {
    display: flex;
  }

  .acms-admin-cropper-btn {
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 70px;
    height: 65px;
    padding: 10px;
    font-size: 12px;
    color: #fff;
    vertical-align: middle;
    background-color: transparent;
    border: none;
    border-radius: 3px;
    transition: background 0.3s;

    &.active,
    &:hover {
      background-color: #232b36;
      border-radius: 3px;
    }
  }

  .acms-admin-cropper-btn-txt {
    @media (width <= 767px) {
      display: none;
    }
  }

  .acms-admin-cropper-crop-btn-block {
    display: block;
  }

  .cropper-modal {
    background-color: #1a2029;
  }

  .acms-admin-focal-point-btn {
    position: absolute;
    display: inline-block;
    width: 45px;
    height: 45px;
    padding: 0;
    margin-top: -22.5px; /*  */
    margin-left: -22.5px; /*  */
    cursor: grab;
    background-color: transparent;
    border: none;
  }

  .acms-admin-cropper-focal-point {
    display: inline-block;
    width: 100%;
    height: 100%;
    background-image: url(${g.default});
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }

  .acms-admin-cropper-bottom {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0 30px;
    margin: 0;
    background-color: #303945;
  }

  .cropper-bg {
    max-width: 100%;
    background: transparent !important;
  }

  .cropper-face {
    opacity: 0;
  }

  .cropper-dashed {
    border: 1px solid #fff;
  }

  .cropper-point {
    width: 10px;
    height: 10px;
    background-color: #fff;
    border-radius: 50%;

    &.point-n {
      top: -5px;
      margin-left: -5px;
    }

    &.point-e {
      right: -5px;
      margin-top: -5px;
    }

    &.point-w {
      left: -5px;
      margin-top: -5px;
    }

    &.point-s {
      bottom: -5px;
      margin-left: -5px;
    }

    &.point-ne {
      top: -5px;
      right: -5px;
    }

    &.point-nw {
      top: -5px;
      left: -5px;
    }

    &.point-sw {
      bottom: -5px;
      left: -5px;
    }

    &.point-se {
      right: -5px;
      bottom: -5px;
    }
  }

  .cropper-line {
    background-color: #fff;
  }

  .cropper-view-box {
    outline: 1px solid #fff;
    outline-color: #fff;
  }

  .acms-admin-cropper-crop-list-wrap {
    position: relative;
  }

  .acms-admin-cropper-crop-list {
    position: absolute;
    bottom: 69px;
    left: 0;
    width: 80px;
    text-align: center;
    background-color: #3f4a58;

    &::after {
      position: absolute;
      bottom: -10px;
      left: 30px;
      display: block;
      width: 1px;
      height: 0;
      content: ' ';
      border-color: #3f4a58 transparent transparent;
      border-style: solid;
      border-width: 10px 10px 0;
    }

    @media (width <= 767px) {
      left: 0;
      width: 120px;

      &::after {
        left: 50px;
      }
    }
  }

  .acms-admin-cropper-list-btn {
    width: 100%;
    padding: 8px 0;
    font-size: 12px;
    color: #fff;
    background-color: transparent;
    border: none;
    border-bottom: 1px solid #303945;

    &:hover,
    &.active {
      background-color: #232b36;
    }

    &:last-child {
      border-bottom: none;
    }

    @media (width <= 767px) {
      font-size: 16px;
      line-height: 45px;
    }
  }

  .acms-admin-cropper-crop-info {
    text-align: center;
  }

  .acms-admin-cropper-crop-info-img {
    width: 18px;
    height: auto;
    margin-right: 10px;
    vertical-align: middle;
  }

  .acms-admin-cropper-crop-info-text {
    display: inline-block;
    margin-right: 5px;
    margin-left: 5px;
    font-size: 14px;
    color: #fff;
    vertical-align: middle;
  }

  .acms-admin-cropper-crop-info-input {
    display: inline-block;
    width: 100px;
    padding: 0 4px;
    font-size: 16px;
    line-height: 22px;
    color: #fff;
    vertical-align: middle;
    background-color: #090c12;
    border: none;
  }

  .acms-admin-cropper-original-btn {
    margin-right: 5px;
    font-size: 14px;
    color: #006dec;
    appearance: none;
    background: transparent;
    border: none;
  }
`,x=e=>{let{children:t,focalPointTransform:n}=e;const{attributes:r,listeners:o,setNodeRef:i,transform:l}=(0,a.useDraggable)({id:"focal-point"}),c={transform:s.CSS.Translate.toString(l),position:"absolute",left:`calc(50% + ${n.x}px)`,top:`calc(50% + ${n.y}px)`};return(0,w.jsx)("button",{type:"button",ref:i,className:"acms-admin-focal-point-btn",style:c,...o,...r,"aria-label":ACMS.i18n("media.focal_point_button_label"),children:t})};class S extends i.Component{constructor(e){super(e),(0,o.default)(this,"image",void 0),(0,o.default)(this,"cropper",void 0),(0,o.default)(this,"handleFocalDragEnd",e=>{if(!this.cropper)return;const{delta:t}=e,n=this.cropper.getCanvasData(),{width:r,height:o}=n,{focalPoint:i}=this.state,a=(0,y.focalPointToCoordinates)(i,n),s=(a.x+t.x)/r*100,l=(a.y+t.y)/o*100,c=Math.max(0,Math.min(100,s)),u=Math.max(0,Math.min(100,l));this.setState({focalPoint:[c,u]})}),(0,o.default)(this,"focalPointToTransform",e=>{if(!this.cropper)return{x:0,y:0,scaleX:1,scaleY:1};const t=this.cropper.getCanvasData(),n=(0,y.focalPointToCoordinates)(e,t);return(0,y.coordinatesToTransform)(n,t)}),(0,o.default)(this,"hoverOnCropList",()=>{this.state.timeout&&clearTimeout(this.state.timeout),this.setState({isCropListOpen:!0})}),(0,o.default)(this,"leaveFromCropList",()=>{const e=setTimeout(()=>{this.setState({isCropListOpen:!1})},500);this.setState({timeout:e})}),(0,o.default)(this,"toggleCropList",e=>{e.preventDefault();const{isCropListOpen:t}=this.state;this.setState({isCropListOpen:!t})}),(0,o.default)(this,"restrictToCanvas",e=>{let{draggingNodeRect:t,transform:n}=e;if(!this.cropper)return n;if(!t)return n;const r=(0,a.getClientRect)(this.cropper.canvas);return function(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}(n,t,{width:r.width+t.width,height:r.height+t.height,left:r.left-t.width/2,right:r.right+t.width/2,top:r.top-t.height/2,bottom:r.bottom+t.height/2})}),this.state={blob:null,upload:!1,cropWidth:0,cropHeight:0,zoom:1,ratio:0,src:"",useFocalPoint:!1,focalPoint:e.focalPoint,timeout:null,isCropListOpen:!1},this.cropper=null,this.image=null}componentWillUnmount(){this.cropper&&this.cropper.destroy()}setImageRef(e){this.image=e,null!==e&&null===this.cropper&&(this.cropper=new l.default(e,{autoCrop:!1,zoomable:!1,responsive:!0,viewMode:2,crop:e=>{const t=e.detail;t.width||t.height?this.setState({cropWidth:t.width,cropHeight:t.height}):this.setState({cropWidth:0,cropHeight:0})},autoCropArea:1,dragMode:"none"}))}handleAfterOpen(){const{focalPoint:e}=this.props;this.setState({focalPoint:e})}handleAfterClose(){this.cropper&&(this.cropper.destroy(),this.cropper=null),this.setState({cropWidth:0,cropHeight:0,ratio:0,useFocalPoint:!1})}onCancel(){this.setState({cropWidth:0,cropHeight:0,ratio:0,useFocalPoint:!1,focalPoint:this.props.focalPoint}),this.props.onClose()}onCrop(){if(!this.image)return;if(!this.cropper)return;let e="image/png";if(this.image.src){const t=this.image.src.lastIndexOf("?");"png"!==(-1===t?this.image.src:this.image.src.substring(0,t)).slice(-3)&&(e="image/jpeg")}this.cropper.getCroppedCanvas().toBlob(e=>{const{focalPoint:t}=this.state;this.props.onCrop(e,t)},e)}onUploadImg(e){e.length&&"image"===e[0].filetype&&this.cropper?.replace(e[0].preview)}useOriginalImg(){this.props.original&&this.cropper?.replace(this.props.original)}changeAspectRatio(e){if(!this.cropper)return;const{ratio:t}=this.state;this.cropper.clear(),e===t||isNaN(e)&&isNaN(t)?this.setState({ratio:0}):(this.cropper.setAspectRatio(e),this.cropper.crop(),this.setState({ratio:e}))}rotate(e){if(!this.cropper)return;const t=this.cropper.getCropBoxData(),n=this.cropper.getContainerData();t.width=2,t.height=2,t.top=0;const r=n.width/2-1;t.left=r,this.cropper.setCropBoxData(t),this.cropper.rotate(e);const o=this.cropper.getCanvasData(),i=o.height,a=i>n.height?n.height:i,s=o.width*(a/i);o.height=a,o.width=s,o.top=0,o.width>=n.width?o.left=0:o.left=(n.width-o.width)/2,o.height>=n.height?o.top=0:o.top=(n.height-o.height)/2,this.cropper.setCanvasData(o),t.left=0,t.top=0,t.width=o.width,t.height=o.height,this.cropper.setCropBoxData(t)}toggleFocalPoint(){const{useFocalPoint:e}=this.state;this.setState({useFocalPoint:!e})}getImgWidth(e,t){const n=e/t,r=(0,v.calcVhToPx)(55),o=(0,v.calcWidthFromRatio)(n,Math.min(r,t)),i=(0,v.calcHeightFromRatio)(n,o);return`${Math.max(o,i)}px`}render(){const{cropWidth:e,cropHeight:t,ratio:n,useFocalPoint:r,isCropListOpen:o,focalPoint:i}=this.state,{src:s,original:l,mediaCropSizes:u,title:f,width:g,height:v,isOpen:y,container:S}=this.props;return(0,w.jsxs)(k,{isOpen:y,onClose:this.onCancel.bind(this),size:"large",container:S,onAfterOpen:this.handleAfterOpen.bind(this),onAfterClose:this.handleAfterClose.bind(this),"aria-labelledby":"acms-media-edit-modal-title",children:[(0,w.jsx)(k.Header,{children:`${ACMS.i18n("media.edit_image")}${f?` - ${f}`:""}`}),(0,w.jsx)(k.Body,{children:(0,w.jsxs)("div",{children:[(0,w.jsx)(d.default,{onComplete:this.onUploadImg.bind(this),children:(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:"acms-admin-cropper-container",children:[e>0&&t>0&&(0,w.jsxs)("div",{className:"acms-admin-cropper-crop-info",children:[(0,w.jsx)("img",{src:m.default,className:"acms-admin-cropper-crop-info-img",alt:""}),(0,w.jsx)("input",{type:"text",className:"acms-admin-cropper-crop-info-input",value:e,readOnly:!0}),(0,w.jsx)("span",{className:"acms-admin-cropper-crop-info-text",children:""}),(0,w.jsx)("input",{type:"text",className:"acms-admin-cropper-crop-info-input",value:t,readOnly:!0})]}),(0,w.jsx)("div",{className:"acms-admin-cropper-wrap",children:(0,w.jsxs)("div",{className:"acms-admin-cropper-img-container",style:{maxWidth:this.getImgWidth(g,v)},children:[(0,w.jsx)("img",{src:s,ref:this.setImageRef.bind(this),className:"acms-admin-img-responsive",alt:""}),r&&(0,w.jsx)(a.DndContext,{onDragEnd:this.handleFocalDragEnd.bind(this),modifiers:[this.restrictToCanvas],children:(0,w.jsx)(x,{focalPointTransform:this.focalPointToTransform(i),children:(0,w.jsx)("span",{className:"acms-admin-cropper-focal-point","aria-hidden":!0})})})]})})]})})}),(0,w.jsx)("div",{className:"acms-admin-form acms-admin-cropper-bottom",children:(0,w.jsx)("div",{className:"acms-admin-cropper-group-wrap",children:(0,w.jsxs)("div",{className:"acms-admin-cropper-group",children:[(0,w.jsxs)("div",{className:"acms-admin-cropper-crop-list-wrap",children:[(0,w.jsxs)("button",{type:"button",className:"acms-admin-cropper-btn",onMouseOver:this.hoverOnCropList,onMouseLeave:this.leaveFromCropList,onFocus:this.hoverOnCropList,onBlur:this.leaveFromCropList,onClick:this.toggleCropList,children:[(0,w.jsx)("img",{src:m.default,className:"acms-admin-cropper-icon",alt:""}),(0,w.jsx)("span",{className:"acms-admin-cropper-btn-txt",children:ACMS.i18n("media.crop")})]}),o&&(0,w.jsxs)("div",{className:"acms-admin-cropper-crop-list",onMouseOver:this.hoverOnCropList,onMouseLeave:this.leaveFromCropList,onFocus:this.hoverOnCropList,onBlur:this.leaveFromCropList,children:[(0,w.jsx)("button",{type:"button",className:(0,c.default)("acms-admin-cropper-list-btn",{active:isNaN(n)}),onClick:e=>{e.preventDefault(),this.changeAspectRatio(NaN),this.setState({isCropListOpen:!1})},children:ACMS.i18n("media.custom")}),u.map(e=>(0,w.jsx)("button",{type:"button",className:(0,c.default)("acms-admin-cropper-list-btn",{active:n===e[0]/e[1]}),onClick:t=>{t.preventDefault(),this.changeAspectRatio(e[0]/e[1]),this.setState({isCropListOpen:!1})},children:`${e[0]} / ${e[1]}`},e.join("x")))]})]}),(0,w.jsxs)("button",{type:"button",className:"acms-admin-cropper-btn",onClick:e=>{e.preventDefault(),this.rotate(90)},children:[(0,w.jsx)("img",{src:p.default,className:"acms-admin-cropper-icon",alt:""}),(0,w.jsx)("span",{className:"acms-admin-cropper-btn-txt",children:ACMS.i18n("media.rotate")})]}),(0,w.jsxs)("button",{type:"button",className:(0,c.default)("acms-admin-cropper-btn",{active:r}),onClick:e=>{e.preventDefault(),this.toggleFocalPoint()},children:[(0,w.jsx)("img",{src:h.default,className:"acms-admin-cropper-icon",alt:""}),(0,w.jsx)("span",{className:"acms-admin-cropper-btn-txt",children:ACMS.i18n("media.focal_point")})]})]})})})]})}),(0,w.jsx)(k.Footer,{children:(0,w.jsxs)(b.default,{display:"inline-flex",children:[l&&(0,w.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-text",onClick:this.useOriginalImg.bind(this),children:ACMS.i18n("media.initialize")}),(0,w.jsx)("button",{type:"button",className:"acms-admin-btn",onClick:this.onCancel.bind(this),children:ACMS.i18n("media.cancel")}),(0,w.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-info",onClick:this.onCrop.bind(this),children:ACMS.i18n("media.apply")})]})})]})}}t.default=S},71359:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(43693)),i=n(96540),a=r(n(78716)),s=n(1982),l=r(n(6293)),c=r(n(28725)),u=r(n(85061)),d=n(74848);class f extends i.Component{constructor(e){super(e),(0,o.default)(this,"uploaderRef",void 0),this.state={tabIndex:this.defaultTabIndex(),isMediaModalOpen:!1};const t=new URLSearchParams(window.location.hash.replace("#",""));t.has("label")&&e.actions.setLabel(t.get("label")),this.uploaderRef=(0,i.createRef)()}defaultTabIndex(){const e=new URLSearchParams(window.location.hash.replace("#","")),{tab:t}=this.props;return"true"===e.get("upload")||"upload"===t?1:0}handleAfterOpen(){const{props:e}=this,{actions:t}=e;t.setFormToken(window.csrfToken),t.fetchTagList()}componentDidUpdate(e){e.item!==this.props.item&&null!==this.props.item&&this.setState({isMediaModalOpen:!0}),e.isOpen!==this.props.isOpen&&!0===this.props.isOpen&&this.setState({tabIndex:this.defaultTabIndex()})}handleMediaModalClose(){this.setState({isMediaModalOpen:!1})}handleAfterMediaModalClose(){this.props.actions.setItem(null)}insertMedia(){const{items:e,onInsert:t}=this.props,n=e.filter(e=>e.checked);"function"==typeof t&&t(n),this.props.actions.setMediaList(e.map(e=>({...e,checked:!1})))}upsert(){const{onInsert:e}=this.props;this.uploaderRef.current?.uploadItems().then(t=>{e(t)})}handleTabChange(e){this.uploaderRef.current&&this.uploaderRef.current.removeUploadedItems(),this.setState({tabIndex:e})}render(){const{tabIndex:e,isMediaModalOpen:t}=this.state,{items:n,actions:r,item:o,largeSize:i,formToken:f,archives:p,selectedTags:h,filetype:m,extensions:g,label:v,mode:y="insert",lastPage:b,config:w,tags:k,total:x,files:S,radioMode:C,isOpen:M,onClose:O}=this.props,A=1===e?(0,d.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-primary",onClick:this.upsert.bind(this),children:ACMS.i18n("media.upload_insert")}):(0,d.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-primary",onClick:this.insertMedia.bind(this),children:ACMS.i18n("media.insert_selections")});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.default,{className:"acms-admin-media-modal",isOpen:M,size:"large",onClose:O,onAfterOpen:this.handleAfterOpen.bind(this),"aria-labelledby":"acms-admin-media-insert-modal-title",children:[(0,d.jsx)(a.default.Header,{children:ACMS.i18n("media.media_insert")}),(0,d.jsx)(a.default.Body,{tabContentScrollable:!0,children:(0,d.jsxs)(s.Tabs,{index:e,onChange:this.handleTabChange.bind(this),children:[(0,d.jsx)(s.TabPanel,{label:ACMS.i18n("media.media_list"),id:"media-list",children:(0,d.jsx)(l.default,{extensions:g,filetype:m,items:n,actions:r,mode:y,radioMode:C,lastPage:b,config:w,archives:p,tags:k,total:x,selectedTags:h})}),(0,d.jsx)(s.TabPanel,{label:ACMS.i18n("media.upload"),id:"media-upload",children:(0,d.jsx)(u.default,{actions:r,largeSize:i,tags:k,label:v,config:w,ref:this.uploaderRef,files:S,showUploadButton:!1})})]})}),(0,d.jsx)(a.default.Footer,{children:A})]}),(0,d.jsx)(c.default,{isOpen:t,onClose:this.handleMediaModalClose.bind(this),item:o,actions:r,formToken:f,tags:k,onAfterClose:this.handleAfterMediaModalClose.bind(this)})]})}}t.default=f},46183:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(28895),i=n(73729),a=r(n(27701)),s=r(n(49308)),l=r(n(22078)),c=r(n(31040)),u=n(74848);const d=(0,a.default)(),f=(0,o.legacy_createStore)(l.default,(0,o.applyMiddleware)(d));d.run(c.default),t.default=e=>{let{mode:t="insert",tab:n,radioMode:r,filetype:o="all",files:a=[],onInsert:l,onClose:c,isOpen:d,container:p}=e;return(0,u.jsx)(i.Provider,{store:f,children:(0,u.jsx)(s.default,{mode:t,radioMode:r,tab:n,filetype:o,files:a,onInsert:l,onClose:c,isOpen:d,container:p})})}},6293:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(43693)),i=r(n(46942)),a=r(n(64176)),s=r(n(74353)),l=r(n(21250));n(7167);var c=n(96540),u=n(59860),d=r(n(1506)),f=n(20872),p=n(45035),h=n(70526),m=n(23870),g=r(n(2560)),v=r(n(43096)),y=r(n(61623)),b=n(13810),w=r(n(45482)),k=n(1186),x=n(74848);const S=l.default.div`
  .acms-admin-inline-block {
    vertical-align: middle;
  }
`;class C extends c.Component{constructor(e){super(e),(0,o.default)(this,"listRef",void 0),(0,o.default)(this,"getFileStyle",e=>e?"pdf"===e.media_ext.toLowerCase()?{height:"70%",width:"auto",opacity:1}:{verticalAlign:"middle",width:"70px",opacity:1}:{}),(0,o.default)(this,"getImageStyle",e=>e&&e.width&&e.height?e.width>e.height?{width:"100%",height:"auto",opacity:1,transform:`translate(-50%,-50%) scale(${e.width/e.height})`}:{width:"auto",height:"100%",opacity:1,transform:`translate(-50%,-50%) scale(${e.height/e.width})`}:{}),(0,o.default)(this,"scaleChanged",e=>{const t=Array.isArray(e)?e[0]:e;this.setState({scale:t})}),(0,o.default)(this,"getOptions",()=>{const{filteredOptions:e}=this.state,{tags:t,selectedTags:n}=this.props;return n.length?e:t.map(e=>({value:e,label:e}))}),this.state={order:{media_title:"asc",media_last_modified:"desc",media_path:"asc",media_size:"asc",media_filesize:"asc"},menu:{image:!0,id:!0,filename:!0,tag:!0,last_modified:!0,upload_datetime:!1,imagesize:!0,filesize:!0,blogname:!1},limit:20,displayPage:6,scale:1,selectedLabels:[],year:"",month:"",filterMenuOpened:!1,toggleAll:!1,orderActive:"media_last_modified",search:"",labels:[],items:e.items,filteredOptions:[],style:"table",editMode:"",filetype:e.filetype?e.filetype:"all",fileext:"all",owner:!1,blogAxis:!1,oldItemId:null},this.listRef=(0,c.createRef)()}getOrderSelectBtnLabel(){const{orderActive:e,order:t}=this.state,n="asc"===t[e]?ACMS.i18n("media.asc"):ACMS.i18n("media.desc");return"media_title"===e?`${ACMS.i18n("media.title")}${n}`:"media_last_modified"===e?`${ACMS.i18n("media.update_date")}${n}`:"media_datetime"===e?`${ACMS.i18n("media.created_date")}${n}`:"media_path"===e?`${ACMS.i18n("media.file_name")}${n}`:"media_filesize"===e?`${ACMS.i18n("media.file_size")}${n}`:ACMS.i18n("media.select")}setItem(e){const{media_id:t}=e,n=ACMS.Library.acmsLink({tpl:"ajax/edit/media-edit.json",bid:ACMS.Config.bid,Query:{cache:(new Date).getTime().toString()}},!1);return"history"in window&&history.replaceState(null,"",`#mid=${t}`),d.default.get(n,{params:{_mid:t}}).then(e=>{e.data.item&&e.data.item.media_id&&this.props.actions.setItem(e.data.item)}),!1}toggleCheck(e){const{items:t,radioMode:n}=this.props;if(n){const e=t.find(e=>e.checked);e&&this.props.actions.updateMediaList({...e,checked:!e.checked})}this.props.actions.updateMediaList({...e,checked:!e.checked})}toggleCheckFrom(e,t){const{items:n,radioMode:r}=this.props,{updateMediaList:o}=this.props.actions;if(r)return;const i=n.findIndex(t=>t.media_id===e),a=n.findIndex(e=>e.media_id===t.media_id),{checked:s}=t,l=i>a?a:i,c=i>a?i:a;n.forEach((e,t)=>{t>=l&&t<=c&&o({...e,checked:!s})})}toggleAllCheck(){const{items:e,actions:t,radioMode:n}=this.props,{toggleAll:r}=this.state,o=!r;this.setState({toggleAll:o}),n||(o?t.setMediaList(e.map(e=>({...e,checked:!0}))):t.setMediaList(e.map(e=>({...e,checked:!1}))))}async removeImgs(){if(!confirm(ACMS.i18n("media.remove_media_confirm")))return;if(null===this.listRef.current)return;const e=new FormData(this.listRef.current);e.append("ACMS_POST_Media_Index_Delete","true"),e.append("formToken",window.csrfToken);const t=k.pending.splash(ACMS.i18n("media.deleting_media"));try{await $.ajax({url:ACMS.Library.acmsLink({bid:ACMS.Config.bid}),type:"POST",data:e,processData:!1,contentType:!1}),b.notify.info(ACMS.i18n("media.remove_media_success")),this.fetchMediaList()}catch{b.notify.danger(ACMS.i18n("media.remove_media_error"))}finally{t()}}setOrder(e){const{state:t}=this,{order:n}=t,r=this.getNextSortDirection(e);this.setState({...t,orderActive:e,order:{...n,[e]:r}},()=>{this.fetchMediaList()})}checkOrder(e){this.setState({orderActive:e},()=>{this.fetchMediaList()})}checkAscDesc(e){const{order:t,orderActive:n}=this.state;t[n]=e,this.setState({order:t},()=>{this.fetchMediaList()})}getOrder(){const{orderActive:e,order:t}=this.state;return"media_title"===e?`file_name-${t[e]}`:"media_last_modified"===e?`last_modified-${t[e]}`:"media_datetime"===e?`upload_date-${t[e]}`:"media_filesize"===e?`file_size-${t[e]}`:""}fetchMediaList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{year:t,month:n,limit:r,filetype:o,fileext:i,owner:a,blogAxis:s}=this.state,{actions:l,selectedTags:c}=this.props,u={order:this.getOrder(),tag:c.reduce((e,t)=>e?`${e}/${t}`:t,""),limit:r,filetype:o,fileext:i,owner:a,blogAxis:s};t&&n?u.date=`${t}/${n}`:(u.date="",u.year=t,u.month=n),e.page||(e.page=1);const d={...e,...u};l&&l.fetchMediaList&&l.fetchMediaList(d)}getIsSorted(e){const{order:t,orderActive:n}=this.state;return n===e&&("asc"===t[n]?"asc":"desc")}getNextSortDirection(e){const{order:t}=this.state;return"asc"===t[e]?"desc":"asc"}changeStyle(e){this.setState({style:e})}getCheckedItemsLength(){const{items:e}=this.props,t=e.filter(e=>e.checked);return t&&t.length?t.length:0}onLabelChange(e){const t=e.map(e=>e.value);this.props.actions.setSelectedTags(t),this.getFilteredOptions(t)}getFilteredOptions(e){(0,d.default)({method:"GET",url:ACMS.Library.acmsLink({tpl:"ajax/edit/media-tag.json",bid:ACMS.Config.bid,Query:{cache:(new Date).getTime().toString()}},!1),responseType:"json",params:{tags:e}}).then(e=>{const{data:t}=e,n=t.map(e=>({value:e,label:e}));this.setState({filteredOptions:n})})}onChangeDisplayNumber(e){const{actions:t}=this.props,n=parseInt(e.target.value,10);t.setMediaConfig({limit:n,page:1}),this.setState({limit:n})}onKeywordInput(e){if(!(e.target instanceof HTMLInputElement))return;const{actions:t}=this.props;t.setMediaConfig({keyword:e.target.value})}getArchives(e){let t=[],n=[];return e.forEach(e=>{const[r,o]=e.split("-");t.push(r),n.push(o)}),t=[...new Set(t)].sort(),n=[...new Set(n)].sort(),{years:t,months:n}}onDateChange(e,t){"month"===t?this.setState({month:e}):this.setState({year:e})}onAddedLabelsChange(e){this.setState({selectedLabels:e.map(e=>e)})}async addLabelToItems(){if(null===this.listRef.current)return;const{selectedLabels:e}=this.state,t=e.map(e=>e.value).join(","),n=new FormData(this.listRef.current);n.append("tags",t),n.append("ACMS_POST_Media_Index_Tags","true"),n.append("formToken",window.csrfToken);try{await $.ajax({url:ACMS.Library.acmsLink({bid:ACMS.Config.bid}),data:n,type:"POST",processData:!1,contentType:!1}),b.notify.info(ACMS.i18n("media.add_tags_to_media_success")),this.fetchMediaList()}catch{b.notify.danger(ACMS.i18n("media.add_tags_to_media_error"))}}rowClick(e,t){const{oldItemId:n}=this.state,r=e.target;"INPUT"!==r.tagName&&"I"!==r.tagName&&"LABEL"!==r.tagName||e.preventDefault(),"BUTTON"!==r.tagName&&(e.shiftKey&&null!==n?this.toggleCheckFrom(n,t):(this.toggleCheck(t),this.setState({oldItemId:t.media_id})))}componentDidUpdate(e){const{style:t,scale:n,order:r,orderActive:o,limit:i,filterMenuOpened:a,owner:s,blogAxis:l}=this.state;localStorage.setItem("acms-media-list",JSON.stringify({style:t,scale:n,order:r,orderActive:o,limit:i,filterMenuOpened:a,owner:s,blogAxis:l})),e.items!==this.props.items&&this.setItems(this.props.items)}componentDidMount(){const e=localStorage.getItem("acms-media-list"),{selectedTags:t}=this.props;if(!e)return void this.fetchMediaList();if(location.hash){const{mid:e}=(0,f.parseQuery)(location.hash.slice(1));e&&this.setItem({media_id:e})}const{style:n,scale:r,order:o,orderActive:i,limit:a,filterMenuOpened:s,owner:l,blogAxis:c}=JSON.parse(e);this.setState({style:n,scale:r,order:o,orderActive:i,limit:a,filterMenuOpened:s,owner:l,blogAxis:c},()=>{this.fetchMediaList()}),t&&this.getFilteredOptions(t)}loadImg(e){return new Promise(t=>{const n=new Image;n.onload=()=>{t(n)},setTimeout(()=>{t(n)},500),n.src=e})}setItems(e){const t=e.map(async e=>{if(("image"===e.media_type||"svg"===e.media_type)&&!e.width){const t=await this.loadImg(e.media_thumbnail);return t.naturalWidth&&t.naturalHeight?{...e,width:t.naturalWidth,height:t.naturalHeight}:{...e,width:t.width,height:t.height}}return e});Promise.all(t).then(e=>{this.setState({items:e})})}toggleMenu(e){const{menu:t}=this.state,n={...t,[e]:!t[e]};this.setState({menu:n})}render(){const{mode:e,config:t,archives:n,tags:r,total:o,items:l,selectedTags:c,extensions:d}=this.props,{years:b,months:k}=this.getArchives(n),{page:C,keyword:M}=t,{style:O,editMode:A,scale:E,selectedLabels:T,items:_,limit:N,menu:j,owner:P,blogAxis:I,order:D,orderActive:R,oldItemId:L,toggleAll:F,filterMenuOpened:B,filetype:H}=this.state,z=this.getCheckedItemsLength();return(0,x.jsxs)(S,{children:[(0,x.jsx)("div",{id:"media-filter-form",role:"search",className:"acms-admin-form",children:(0,x.jsxs)(m.Filter,{children:[(0,x.jsxs)(m.FilterBody,{children:[(0,x.jsxs)(m.FilterGroup,{children:[(0,x.jsx)(m.FilterGroupTitle,{children:ACMS.i18n("media.filter_search")}),(0,x.jsxs)(m.FilterContent,{fit:!0,children:[(0,x.jsxs)(m.FilterItem,{children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-date",children:ACMS.i18n("media.created_date")}),(0,x.jsxs)("div",{style:{display:"flex"},children:[(0,x.jsx)("div",{className:"acms-admin-inline-block acms-admin-margin-right-mini",children:(0,x.jsxs)("select",{id:"filter-date",className:"acms-admin-margin-right-mini",onChange:e=>{this.onDateChange(e.target.value,"year")},children:[(0,x.jsx)("option",{value:"",children:ACMS.i18n("media.year")}),b.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})}),(0,x.jsx)(w.default,{asChild:!0,children:(0,x.jsx)("label",{htmlFor:"filter-date-month",children:ACMS.i18n("media.month")})}),(0,x.jsx)("div",{className:"acms-admin-inline-block",children:(0,x.jsxs)("select",{id:"filter-date-month",onChange:e=>{this.onDateChange(e.target.value,"month")},children:[(0,x.jsx)("option",{value:"",children:ACMS.i18n("media.month")}),k.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})})]})]}),(0,x.jsxs)(m.FilterItem,{full:!0,children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-tag",children:ACMS.i18n("media.tag")}),(0,x.jsx)("div",{className:"acms-admin-form-width-medium",children:(0,x.jsx)(v.default,{isMulti:!0,value:c.map(e=>({label:e,value:e})),options:this.getOptions(),onChange:this.onLabelChange.bind(this),closeMenuOnSelect:!1,placeholder:ACMS.i18n("media.tag_search_select_placeholder"),noOptionsMessage:()=>ACMS.i18n("media.tag_select_no_options_message"),inputId:"filter-tag"})})]})]})]}),B&&(0,x.jsx)("div",{id:"search-detail",children:(0,x.jsxs)(m.FilterInner,{children:[(0,x.jsxs)(m.FilterGroup,{children:[(0,x.jsx)(m.FilterGroupTitle,{children:ACMS.i18n("media.detailed_condition")}),(0,x.jsx)(m.FilterContent,{children:(0,x.jsxs)(m.FilterItem,{full:!0,children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-keyword",children:ACMS.i18n("media.keyword")}),(0,x.jsx)("input",{type:"text",placeholder:ACMS.i18n("media.search_by_keyword"),id:"filter-keyword",className:"acms-admin-form-width-full",value:M,onInput:this.onKeywordInput.bind(this)})]})})]}),(0,x.jsxs)(m.FilterGroup,{children:[(0,x.jsx)(m.FilterGroupTitle,{children:ACMS.i18n("media.narrow_down")}),(0,x.jsxs)(m.FilterContent,{children:[(0,x.jsxs)(m.FilterItem,{children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-sort",children:ACMS.i18n("media.number_of_items")}),(0,x.jsxs)("select",{id:"filter-sort",value:N,onChange:this.onChangeDisplayNumber.bind(this),children:[(0,x.jsx)("option",{value:"5",children:"5"}),(0,x.jsx)("option",{value:"10",children:"10"}),(0,x.jsx)("option",{value:"20",children:"20"}),(0,x.jsx)("option",{value:"50",children:"50"}),(0,x.jsx)("option",{value:"75",children:"75"}),(0,x.jsx)("option",{value:"100",children:"100"}),(0,x.jsx)("option",{value:"200",children:"200"}),(0,x.jsx)("option",{value:"300",children:"300"})]})]}),(0,x.jsxs)(m.FilterItem,{children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-type",children:ACMS.i18n("media.type")}),(0,x.jsxs)("select",{id:"filter-type",disabled:"all"!==this.props.filetype,defaultValue:H,onChange:e=>{this.setState({filetype:e.target.value})},children:[(0,x.jsx)("option",{value:"all",children:ACMS.i18n("media.all")}),(0,x.jsx)("option",{value:"image",children:ACMS.i18n("media.image")}),(0,x.jsx)("option",{value:"file",children:ACMS.i18n("media.file")})]})]}),(0,x.jsxs)(m.FilterItem,{children:[(0,x.jsx)(m.FilterItemLabel,{htmlFor:"filter-ext",children:ACMS.i18n("media.extension")}),(0,x.jsxs)("select",{id:"filter-ext",onChange:e=>{this.setState({fileext:e.target.value})},children:[(0,x.jsx)("option",{value:"all",children:ACMS.i18n("media.all")}),d&&d.map(e=>(0,x.jsx)("option",{value:e,children:e.toLowerCase()},e.toLowerCase()))]})]}),(0,x.jsx)(m.FilterItem,{children:(0,x.jsxs)("label",{htmlFor:"filter-owner",className:"acms-admin-form-checkbox acms-admin-m-0",children:[(0,x.jsx)("input",{id:"filter-owner",type:"checkbox",checked:P,onChange:e=>{this.setState({owner:e.target.checked})}}),(0,x.jsx)("i",{className:"acms-admin-ico-checkbox"}),ACMS.i18n("media.owner")]})}),ACMS.Config.sbid!==ACMS.Config.bid&&(0,x.jsx)(m.FilterItem,{children:(0,x.jsxs)("label",{htmlFor:"filter-blog-axis",className:"acms-admin-form-checkbox acms-admin-m-0",children:[(0,x.jsx)("input",{id:"filter-blog-axis",type:"checkbox",checked:I,onChange:e=>{this.setState({blogAxis:e.target.checked})}}),(0,x.jsx)("i",{className:"acms-admin-ico-checkbox"}),ACMS.i18n("media.blog_axis")]})})]})]})]})})]}),(0,x.jsxs)(m.FilterFooter,{children:[(0,x.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-info acms-admin-btn-search",onClick:()=>{this.fetchMediaList()},children:ACMS.i18n("media.search")}),(0,x.jsx)(m.FilterDetailButton,{type:"button",onClick:e=>{e.preventDefault(),this.setState({filterMenuOpened:!B})},"aria-expanded":B,"aria-controls":"search-detail",children:ACMS.i18n("media.detailed_search")})]})]})}),(0,x.jsxs)("div",{className:"acms-admin-media-action-group",children:[(0,x.jsxs)("div",{className:"acms-admin-media-action-item acms-admin-media-action-item-fix",children:[(0,x.jsxs)("div",{className:"acms-admin-btn-group acms-admin-media-action-display-switch",role:"group",children:[(0,x.jsx)("button",{type:"button",className:(0,i.default)("acms-admin-btn",{"acms-admin-btn-active":"table"===O}),onClick:this.changeStyle.bind(this,"table"),"aria-pressed":"table"===O,"aria-label":ACMS.i18n("media.display_switch_list"),children:(0,x.jsx)("i",{className:"acms-admin-icon-list"})}),(0,x.jsx)("button",{type:"button",className:(0,i.default)("acms-admin-btn",{"acms-admin-btn-active":"list"===O}),onClick:this.changeStyle.bind(this,"list"),"aria-pressed":"list"===O,"aria-label":ACMS.i18n("media.display_switch_grid"),children:(0,x.jsx)("i",{className:"acms-admin-icon-grid"})})]}),(0,x.jsxs)("div",{className:"acms-admin-media-action-sort-select-wrap",children:[(0,x.jsx)("div",{className:"acms-admin-media-action-sort-select",children:"table"===O&&(0,x.jsxs)(p.Menu,{closeOnSelect:!1,children:[(0,x.jsx)(p.MenuTrigger,{className:"acms-admin-btn","aria-label":ACMS.i18n("media.open_config_menu"),children:(0,x.jsx)("i",{className:"acms-admin-icon-config","aria-hidden":"true"})}),(0,x.jsx)(p.MenuPopover,{children:(0,x.jsxs)(p.MenuList,{children:[(0,x.jsx)(p.MenuItemCheckbox,{value:"image",checked:j.image,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.image2")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"id",checked:j.id,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:"ID"}),(0,x.jsx)(p.MenuItemCheckbox,{value:"filename",checked:j.filename,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.file_name")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"tag",checked:j.tag,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.tag")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"last_modified",checked:j.last_modified,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.updated_date")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"upload_datetime",checked:j.upload_datetime,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.created_date")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"filesize",checked:j.filesize,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.file_size")}),(0,x.jsx)(p.MenuItemCheckbox,{value:"blogname",checked:j.blogname,onCheckedChange:e=>{this.toggleMenu(e.detail.value)},children:ACMS.i18n("media.blog_name")})]})})]})}),(0,x.jsx)("div",{className:"acms-admin-media-action-sort-select",style:{position:"relative"},children:(0,x.jsxs)(p.Menu,{closeOnSelect:!1,children:[(0,x.jsx)(p.MenuTrigger,{type:"button",className:"acms-admin-select-btn",children:this.getOrderSelectBtnLabel()}),(0,x.jsx)(p.MenuPopover,{children:(0,x.jsxs)(p.MenuList,{children:[(0,x.jsxs)(p.MenuItemRadioGroup,{value:R,onValueChange:e=>{this.checkOrder(e.detail.value)},children:[(0,x.jsx)(p.MenuItemRadio,{value:"media_title",children:ACMS.i18n("media.title")}),(0,x.jsx)(p.MenuItemRadio,{value:"media_last_modified",children:ACMS.i18n("media.updated_date")}),(0,x.jsx)(p.MenuItemRadio,{value:"media_datetime",children:ACMS.i18n("media.created_date")}),(0,x.jsx)(p.MenuItemRadio,{value:"media_filesize",children:ACMS.i18n("media.file_size")})]}),(0,x.jsx)(p.MenuDivider,{}),(0,x.jsxs)(p.MenuItemRadioGroup,{value:D[R],onValueChange:e=>{this.checkAscDesc(e.detail.value)},children:[(0,x.jsx)(p.MenuItemRadio,{value:"asc",children:ACMS.i18n("media.asc")}),(0,x.jsx)(p.MenuItemRadio,{value:"desc",children:ACMS.i18n("media.desc")})]})]})})]})})]})]}),(0,x.jsxs)("div",{className:"acms-admin-media-action-item acms-admin-media-action-item-middle",children:["list"===O&&(0,x.jsx)("div",{className:"acms-admin-media-action-range",children:(0,x.jsxs)("span",{style:{display:"inline-flex",width:"100%",alignItems:"center"},children:[(0,x.jsx)(w.default,{children:ACMS.i18n("media.display_size")}),(0,x.jsx)("i",{className:"acms-admin-icon-unit-image",style:{fontSize:"12px",color:"#777777",marginRight:"10px"}}),(0,x.jsx)(a.default,{className:"acms-admin-range-slider",min:1,max:2,step:.1,value:E,onChange:this.scaleChanged}),(0,x.jsx)("i",{className:"acms-admin-icon-unit-image",style:{fontSize:"18px",color:"#777777",marginLeft:"10px"}})]})}),"list"===O&&(0,x.jsx)("div",{className:"acms-admin-media-action-select-all",children:(0,x.jsxs)("button",{type:"button",onClick:this.toggleAllCheck.bind(this),className:"acms-admin-media-grid-checkbox-wrap",children:[(0,x.jsx)("span",{className:(0,i.default)("acms-admin-media-grid-checkbox",{selected:F}),"aria-hidden":"true"}),ACMS.i18n("media.select_all")]})})]}),(0,x.jsx)("div",{className:"acms-admin-form-group acms-admin-media-action-item acms-admin-media-action-item-left",children:(0,x.jsxs)("div",{className:"acms-admin-form",children:[(0,x.jsx)(w.default,{asChild:!0,children:(0,x.jsx)("label",{htmlFor:"media-action-select",children:ACMS.i18n("media.select")})}),(0,x.jsxs)("select",{id:"media-action-select",className:"acms-admin-margin-right-mini",value:A,onChange:e=>{const{value:t}=e.target;this.setState({editMode:t})},children:[(0,x.jsx)("option",{children:ACMS.i18n("media.select")}),(0,x.jsx)("option",{value:"remove",children:ACMS.i18n("media.remove")}),(0,x.jsx)("option",{value:"tag",children:ACMS.i18n("media.add_tags")})]}),"remove"===A&&(0,x.jsxs)(x.Fragment,{children:[ACMS.i18n("media.checked_items").replace("$1",z.toString()),"",(0,x.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-danger",onClick:this.removeImgs.bind(this),children:ACMS.i18n("media.remove")})]}),"tag"===A&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},className:"acms-admin-margin-right-mini",children:ACMS.i18n("media.add_tags_to_checked_items").replace("$1",z.toString())}),(0,x.jsx)("div",{style:{display:"inline-block",width:"200px",verticalAlign:"middle",marginRight:"5px"},children:(0,x.jsx)(y.default,{isMulti:!0,onChange:this.onAddedLabelsChange.bind(this),value:T,options:r.map(e=>({label:e,value:e})),placeholder:ACMS.i18n("media.tag_select_placeholder"),noOptionsMessage:()=>ACMS.i18n("media.tag_select_no_options_message"),formatCreateLabel:e=>ACMS.i18n("media.add_tag",{name:e}),isValidNewOption:e=>e.trim().length>0,closeMenuOnSelect:!1})}),(0,x.jsx)("button",{type:"button",className:"acms-admin-btn",onClick:this.addLabelToItems.bind(this),children:""})]})]})}),(0,x.jsx)("form",{ref:this.listRef,className:"acms-admin-media-list",style:{display:"table"===O?"block":"none"},children:(0,x.jsx)("div",{className:"acms-admin-table-scroll-xs acms-admin-table-scroll-sm acms-admin-table-scroll-md",children:(0,x.jsxs)("table",{className:"adminTable acms-admin-table-admin acms-admin-table-hover acms-admin-media-table",children:[(0,x.jsx)("thead",{className:"acms-admin-table-heading",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"acms-admin-media-row-check acms-admin-table-nowrap",children:"edit"===e&&(0,x.jsxs)("label",{htmlFor:"checkAll",className:"acms-admin-form-checkbox acms-admin-m-0",onChange:this.toggleAllCheck.bind(this),children:[(0,x.jsx)("input",{id:"checkAll",type:"checkbox"}),(0,x.jsx)("i",{className:"acms-admin-ico-checkbox"})]})}),j.image&&(0,x.jsx)("th",{className:"acms-admin-media-row-image acms-admin-table-nowrap",children:ACMS.i18n("media.image2")}),j.id&&(0,x.jsx)("th",{className:"acms-admin-media-row-id acms-admin-table-nowrap",children:"ID"}),j.filename&&(0,x.jsx)("th",{className:"acms-admin-media-row-title","aria-sort":this.getIsSorted("media_title")?`${this.getIsSorted("media_title")}ending`:void 0,children:(0,x.jsxs)("button",{type:"button",className:"acms-admin-th-sort-btn",onClick:this.setOrder.bind(this,"media_title"),"data-next-sort":`${this.getNextSortDirection("media_title")}ending`,children:[ACMS.i18n("media.file_name"),(0,x.jsx)("span",{className:"acms-admin-th-sort-btn-icon"}),(0,x.jsx)(w.default,{children:ACMS.i18n(`table.label.sort.${this.getIsSorted("media_title")||"none"}`)})]})}),j.tag&&(0,x.jsx)("th",{className:"acms-admin-media-row-tag",children:ACMS.i18n("media.tag")}),j.last_modified&&(0,x.jsx)("th",{className:"acms-admin-media-row-date acms-admin-table-nowrap","aria-sort":this.getIsSorted("media_last_modified")?`${this.getIsSorted("media_last_modified")}ending`:void 0,children:(0,x.jsxs)("button",{type:"button",className:"acms-admin-th-sort-btn",onClick:this.setOrder.bind(this,"media_last_modified"),"data-next-sort":`${this.getNextSortDirection("media_last_modified")}ending`,children:[ACMS.i18n("media.updated_date"),(0,x.jsx)("span",{className:"acms-admin-th-sort-btn-icon"}),(0,x.jsx)(w.default,{children:ACMS.i18n(`table.label.sort.${this.getIsSorted("media_last_modified")||"none"}`)})]})}),j.upload_datetime&&(0,x.jsx)("th",{className:"acms-admin-media-row-date acms-admin-table-nowrap","aria-sort":this.getIsSorted("media_datetime")?`${this.getIsSorted("media_datetime")}ending`:void 0,children:(0,x.jsxs)("button",{type:"button",className:"acms-admin-th-sort-btn",onClick:this.setOrder.bind(this,"media_datetime"),"data-next-sort":`${this.getNextSortDirection("media_datetime")}ending`,children:[ACMS.i18n("media.created_date"),(0,x.jsx)("span",{className:"acms-admin-th-sort-btn-icon"}),(0,x.jsx)(w.default,{children:ACMS.i18n(`table.label.sort.${this.getIsSorted("media_datetime")||"none"}`)})]})}),j.filesize&&(0,x.jsx)("th",{className:"acms-admin-media-row-size acms-admin-table-nowrap","aria-sort":this.getIsSorted("media_filesize")?`${this.getIsSorted("media_filesize")}ending`:void 0,children:(0,x.jsxs)("button",{type:"button",className:"acms-admin-th-sort-btn",onClick:this.setOrder.bind(this,"media_filesize"),"data-next-sort":`${this.getNextSortDirection("media_filesize")}ending`,children:[ACMS.i18n("media.file_size"),(0,x.jsx)("span",{className:"acms-admin-th-sort-btn-icon"}),(0,x.jsx)(w.default,{children:ACMS.i18n(`table.label.sort.${this.getIsSorted("media_filesize")||"none"}`)})]})}),j.blogname&&(0,x.jsx)("th",{className:"acms-admin-media-row-blogname",children:ACMS.i18n("media.blog_name")}),"edit"===e&&(0,x.jsx)("th",{className:"acms-admin-media-row-action acms-admin-table-nowrap",style:{whiteSpace:"nowrap"},children:ACMS.i18n("media.action")})]})}),(0,x.jsx)("tbody",{children:l.map(t=>(0,x.jsxs)("tr",{onClick:e=>{this.rowClick(e,t)},children:[(0,x.jsxs)("td",{className:"acms-admin-media-row-check acms-admin-table-nowrap",children:[t.media_editable,("edit"!==e||t.media_editable)&&(0,x.jsxs)("label",{className:"acms-admin-form-checkbox acms-admin-m-0",children:[(0,x.jsx)("input",{type:"checkbox",name:"checks[]",value:`${t.media_bid}:${t.media_id}`,checked:t.checked,onChange:this.toggleCheck.bind(this,t)}),(0,x.jsx)("i",{className:"acms-admin-ico-checkbox"})]})]}),j.image&&(0,x.jsx)("td",{className:"acms-admin-media-row-image acms-admin-table-nowrap",children:(0,x.jsx)(g.default,{wrap:e=>(0,x.jsx)("a",{href:t.media_permalink,target:"_blank",rel:"noopener noreferrer",children:e}),condition:"file"===t.media_type,children:(0,x.jsx)("div",{className:"acms-admin-media-list-thumbnail-wrap",children:(0,x.jsx)("img",{src:`${t.media_thumbnail}?date=${t.media_last_modified}`,className:"acms-admin-media-list-thumbnail",alt:""})})})}),j.id&&(0,x.jsx)("td",{className:"acms-admin-media-row-id acms-admin-table-nowrap",children:(0,x.jsx)("span",{className:"acms-admin-label",children:t.media_id})}),j.filename&&(0,x.jsx)("td",{className:"acms-admin-media-row-title",children:t.media_title}),j.tag&&(0,x.jsx)("td",{className:"acms-admin-media-row-tag",children:t.media_label&&t.media_label.split(",").map(e=>(0,x.jsx)("span",{className:"acms-admin-label acms-admin-label-info",style:{display:"inline-block",marginRight:"5px",marginTop:"5px"},children:e},e))}),j.last_modified&&(0,x.jsxs)("td",{className:"acms-admin-media-row-date acms-admin-table-nowrap",children:[(0,s.default)(t.media_last_modified).format("YYYY/MM/DD"),(0,x.jsx)("br",{}),(0,s.default)(t.media_last_modified).format("HH:mm")]}),j.upload_datetime&&(0,x.jsxs)("td",{className:"acms-admin-media-row-date acms-admin-table-nowrap",children:[(0,s.default)(t.media_datetime).format("YYYY/MM/DD"),(0,x.jsx)("br",{}),(0,s.default)(t.media_datetime).format("HH:mm")]}),j.filesize&&(0,x.jsxs)("td",{className:"acms-admin-media-row-action acms-admin-table-nowrap",children:[t.media_filesize&&(0,x.jsx)(x.Fragment,{children:(0,f.formatBytes)(t.media_filesize)}),t.media_size&&"image"===t.media_type&&(0,x.jsxs)("span",{style:{display:"block",marginTop:"5px"},children:[t.media_size,"px"]})]}),j.blogname&&(0,x.jsx)("td",{className:"acms-admin-media-row-blogname",children:t.media_blog_name}),"edit"===e&&(0,x.jsx)("td",{className:"acms-admin-table-nowrap",children:t.media_editable&&(0,x.jsx)("button",{type:"button",onClick:this.setItem.bind(this,t),className:"acms-admin-btn",children:ACMS.i18n("media.edit")})})]},t.media_id))})]})})}),(0,x.jsx)("div",{className:"acms-admin-media-grid",style:{display:"table"===O?"none":"flex"},children:l.map((t,n)=>(0,x.jsxs)("div",{className:"acms-admin-media-grid-item",style:{width:150*E+"px",height:150*E+"px"},children:[(0,x.jsxs)("div",{className:(0,i.default)("acms-admin-media-grid-figure",{selected:t.checked}),title:t.media_title,role:"button",tabIndex:0,onClick:e=>{e.shiftKey&&null!==L?this.toggleCheckFrom(L,t):(this.toggleCheck(t),this.setState({oldItemId:t.media_id}))},onKeyDown:e=>{e.currentTarget===document.activeElement&&("Enter"!==e.key&&" "!==e.key||(e.shiftKey&&null!==L?this.toggleCheckFrom(L,t):(this.toggleCheck(t),this.setState({oldItemId:t.media_id})),e.preventDefault()))},children:[(0,x.jsx)("div",{className:"acms-admin-media-grid-shadow"}),"file"===t.media_type&&(0,x.jsxs)("div",{className:"acms-admin-media-grid-img-wrap",children:[(0,x.jsx)("img",{className:"acms-admin-media-grid-file-img",src:t.media_thumbnail,style:this.getFileStyle(_[n]),alt:""}),(0,x.jsx)("span",{className:"acms-admin-media-grid-filename",children:t.media_title})]}),("image"===t.media_type||"svg"===t.media_type)&&(0,x.jsx)("img",{src:`${t.media_thumbnail}?date=${t.media_last_modified}`,style:this.getImageStyle(_[n]),id:`media-image-${n}`,alt:""}),(0,x.jsxs)("div",{className:(0,i.default)("acms-admin-media-grid-flame",{selected:t.checked}),children:[(0,x.jsx)("div",{className:"acms-admin-media-grid-checkbox"}),"edit"===e&&t.media_editable&&(0,x.jsx)("div",{className:"acms-admin-media-edit-list-btn-wrap",children:(0,x.jsx)("button",{type:"button",className:"acms-admin-media-edit-btn acms-admin-media-edit-list-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.setItem(t)},children:ACMS.i18n("media.edit")})})]})]}),(0,x.jsx)("input",{type:"hidden",name:"checks[]",value:`${t.media_bid}:${t.media_id}`})]},t.media_id))}),(0,x.jsx)(u.Grid,{className:"acms-admin-margin-top-medium",children:(0,x.jsxs)(h.PaginationRoot,{page:C,pageSize:N,total:Math.ceil(o/N),totalItems:o,onChange:e=>this.fetchMediaList({page:e}),children:[(0,x.jsx)(u.GridItem,{col:{md:6,xs:12},children:(0,x.jsx)(h.Pagination,{})}),(0,x.jsx)(u.GridItem,{col:{md:6,xs:12},children:(0,x.jsx)(h.PaginationSummary,{})})]})})]})]})}}t.default=C,(0,o.default)(C,"defaultProps",{radioMode:!1,filetype:"all",extensions:[]})},28725:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(43693)),i=n(96540),a=r(n(25454)),s=r(n(58475)),l=n(64483),c=n(20872),u=r(n(9930)),d=n(1982),f=r(n(78716)),p=r(n(61623)),h=r(n(99509)),m=n(39469),g=r(n(7019)),v=r(n(45482)),y=n(13810),b=n(1186),w=r(n(73905)),k=n(74848);const x=new s.default;class S extends i.Component{constructor(e){super(e),(0,o.default)(this,"form",void 0),(0,o.default)(this,"filenameInputRef",void 0),(0,o.default)(this,"modalRef",void 0),(0,o.default)(this,"root",void 0),this.state={isEditDialogOpen:!1,file:null,blob:null,preview:e.item?this.getDefaultPreview(e.item):"",replaced:!1,pdfPreviewSrc:"",pdfHasPrevPage:!1,pdfHasNextPage:!1,pdfPage:e.item?.media_pdf_page?parseInt(e.item.media_pdf_page,10):1,focalPoint:e.item?(0,m.getFocalPoint)(e.item):[50,50],activeTab:"edit"},this.root=document.createElement("div"),(this.props.container||document.body).appendChild(this.root),this.form=null,this.modalRef=(0,i.createRef)(),this.filenameInputRef=(0,i.createRef)()}getDefaultPreview(e){return"file"===e.media_type?e.media_thumbnail:`${e.media_edited}?date=${e.media_last_modified}`}handleAfterClose(){this.props.actions.setItem(null);const{onAfterClose:e}=this.props;e&&e()}handleAfterOpen(){const{onAfterOpen:e,item:t}=this.props;null!==t&&this.setState({focalPoint:(0,m.getFocalPoint)(t),pdfPage:parseInt(t.media_pdf_page,10)||1}),e&&e()}componentDidUpdate(e){const{item:t}=this.props;e.item!==t&&null!==t&&("pdf"===t.media_ext.toLowerCase()?this.pdfPreview(t.media_permalink,parseInt(t.media_pdf_page,10)||1):this.setState({preview:this.getDefaultPreview(t)}),this.setState({focalPoint:(0,m.getFocalPoint)(t),pdfPage:parseInt(t.media_pdf_page,10)||1}))}setFormRef(e){this.form=e}componentWillUnmount(){document.body.removeChild(this.root)}async pdfPreview(e,t){const n=await(0,l.fetchPdfPage)(e,t);!1!==n.image&&this.setState({pdfPreviewSrc:n.image,pdfHasPrevPage:n.hasPrev,pdfHasNextPage:n.hasNext,pdfPage:n.currentPage})}async pdfPrevPage(e){e.preventDefault();const{item:t}=this.props;if(!t)return;const n=t.media_permalink,r=Math.max(1,(this.state.pdfPage||1)-1);await this.pdfPreview(n,r)}async pdfNextPage(e){e.preventDefault();const{item:t}=this.props;if(!t)return;const n=t.media_permalink,r=(this.state.pdfPage||1)+1;await this.pdfPreview(n,r)}hideModal(){"history"in window&&history.replaceState(null,"","#"),this.props.onClose&&this.props.onClose()}handleClose(){this.hideModal()}isImageMedia(e,t){return!(!e.blob||!e.blob.type.match(/image/))||!e.replaced&&"image"===t.item?.media_type}isSvgMedia(e,t){return!(!e.file||"image/svg+xml"!==e.file.type)||!e.replaced&&"svg"===t.item?.media_type}isFileMedia(e,t){return!(!e.file||"image/svg+xml"===e.file.type)||!e.replaced&&"file"===t.item?.media_type}isPdfFile(e,t){return!(!e.file||"application/pdf"!==e.file.type)||!e.replaced&&"file"===t.item?.media_type&&"pdf"===t.item.media_ext.toLowerCase()}buildFormData(e){const{blob:t,file:n,focalPoint:r,replaced:o,pdfPreviewSrc:i}=this.state,a=new FormData(this.form);return t?a.append("media_file",t):n&&a.append("media_file",n),Array.isArray(r)&&r.length>0&&(a.append("media[]","focal_x"),a.append("media[]","focal_y"),a.append("focal_x",`${r[0]}`),a.append("focal_y",`${r[1]}`)),o&&(a.append("media[]","replaced"),a.append("replaced","true")),this.isFileMedia(this.state,this.props)&&this.isPdfFile(this.state,this.props)&&i&&(a.append("media_pdf_thumbnail",(0,c.dataURItoBlob)(i)),a.append("media[]","pdf_page"),a.append("pdf_page",String(this.state.pdfPage||1))),a.append(e,"true"),a.append("formToken",window.csrfToken),a}updateStateOnAfterSave(e){this.setState({file:null,blob:null,replaced:!1,focalPoint:(0,m.getFocalPoint)(e),pdfPage:parseInt(e.media_pdf_page,10)||1})}update(e){const{actions:t}=this.props,{file:n,blob:r}=this.state,o=this.buildFormData("ACMS_POST_Media_Update");if(n||r){const e=n?ACMS.i18n("media.file_changed"):ACMS.i18n("media.img_changed");if(!confirm(e))return}const i=b.pending.splash(ACMS.i18n("media.saving")),a=ACMS.Library.acmsLink({Query:{_mid:e.media_id}});$.ajax({url:a,type:"POST",data:o,processData:!1,contentType:!1}).then(e=>{i(),"failure"!==e.status?(t.updateMediaList(e),this.props.onUpdate&&this.props.onUpdate(e),this.hideModal(),this.updateStateOnAfterSave(e)):e.message?alert(e.message):alert(ACMS.i18n("media.cannot_edit"))})}uploadAsNew(e){const{actions:t}=this.props,n=this.buildFormData("ACMS_POST_Media_UpdateAsNew"),r=b.pending.splash(ACMS.i18n("media.saving")),o=ACMS.Library.acmsLink({Query:{_mid:e.media_id}});$.ajax({url:o,type:"POST",data:n,processData:!1,contentType:!1}).then(e=>{r(),"failure"!==e.status?(t.fetchMediaList(),this.props.onUpdate&&this.props.onUpdate(e),this.hideModal(),this.updateStateOnAfterSave(e)):e.message?alert(e.message):alert(ACMS.i18n("media.cannot_edit"))})}makeTags(e){return e?e.split(",").map(e=>({value:e,label:e})):null}addTags(e){const{actions:t,item:n}=this.props;if(null===n)return;const r=e.reduce((e,t,n)=>0===n?t.value:`${e},${t.value}`,"");t.setItem({...n,media_label:r})}openEditDialog(){this.setState({isEditDialogOpen:!0})}blobToDataURL(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=e=>{e.target instanceof FileReader?t(e.target.result):n(new Error("Failed to load blob"))},r.readAsDataURL(e)})}handleEditDialogClose(){this.setState({isEditDialogOpen:!1})}handleCrop(e,t){e&&this.blobToDataURL(e).then(n=>{t?this.setState({preview:n,blob:e,focalPoint:t}):this.setState({preview:n,blob:e})}),this.setState({isEditDialogOpen:!1})}async changeImage(e){if(!(e.target instanceof HTMLInputElement))return;if(!e.target.files)return;const{item:t}=this.props;if(null===t)return;const r=e.target.files[0],o=r.type.match(/svg/)?"svg":r.type.match(/image/)?"image":"file",i=/(heic|heif)/i.test(r.type);if(t.media_type!==o)return alert(ACMS.i18n("media.cannnot_change_type")),!1;const s={replaced:!0};if("image"===o)if(i){const{heicTo:e}=await n.e(172).then(n.bind(n,99234)),t=await e({blob:r,type:"image/jpeg"}),o=Array.isArray(t)?t[0]:t;if(!(o instanceof Blob))throw new Error("Invalid blob result from heicTo");const i=await this.blobToDataURL(o);s.preview=i,s.blob=o}else{const[e,t]=ACMS.Config.lgImg.split(":"),{blob:n,resize:o}=await x.getBlobFromFile(r,e,parseInt(t,10)),i=await this.blobToDataURL(n);s.preview=i,!1===o||"on"!==ACMS.Config.mediaClientResize?s.blob=r:s.blob=n}else if("svg"===o){const e=await r.text(),t=a.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}}),n=new Blob([t],{type:"image/svg+xml"});s.file=new File([n],r.name,{type:n.type}),s.preview=await this.blobToDataURL(s.file)}else if("file"===o)if(s.file=r,"application/pdf"===r.type){const e=URL.createObjectURL(r);this.pdfPreview(e,1)}else s.preview=`${ACMS.Config.root}themes/system/images/fileicon/document.svg`;this.filenameInputRef.current&&(this.filenameInputRef.current.value=r.name),this.setState(s)}imageWidth(e){const[t]=e.split(" x ");return parseInt(t,10)}imageHeight(e){const[,t]=e.split(" x ");return parseInt(t,10)}render(){const{item:e,formToken:t,tags:n,isOpen:r}=this.props,{isEditDialogOpen:o,preview:i,pdfHasPrevPage:a,pdfHasNextPage:s,pdfPreviewSrc:l,focalPoint:m}=this.state;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.default,{ref:this.modalRef,isOpen:r,onClose:this.handleClose.bind(this),size:"large",container:this.root,onAfterClose:this.handleAfterClose.bind(this),onAfterOpen:this.handleAfterOpen.bind(this),"aria-labelledby":"acms-media-modal-title",children:[(0,k.jsx)(f.default.Header,{children:ACMS.i18n("media.media_edit")}),(0,k.jsx)(f.default.Body,{children:e&&(0,k.jsxs)("form",{className:"acms-admin-form",ref:this.setFormRef.bind(this),children:[(0,k.jsxs)("div",{className:"acms-admin-media-modal-layout",children:[(0,k.jsxs)("div",{className:"acms-admin-media-modal-preview",children:[this.isImageMedia(this.state,this.props)&&(0,k.jsxs)("div",{className:"acms-admin-media-thumb-container acms-admin-margin-bottom-small",children:["svg"!==e.media_ext&&(0,k.jsx)("button",{className:"acms-admin-media-edit-btn acms-admin-media-edit-thumb-btn",type:"button",onClick:this.openEditDialog.bind(this),children:ACMS.i18n("media.edit")}),(0,k.jsx)("div",{style:{backgroundImage:`url("${i}")`},className:"acms-admin-media-thumb"})]}),this.isSvgMedia(this.state,this.props)&&(0,k.jsx)("div",{className:"acms-admin-media-thumb-container acms-admin-margin-bottom-small acms-admin-media-thumb-container-assets",children:(0,k.jsx)("div",{className:"acms-admin-media-thumb-assets",style:{width:"80%"},children:(0,k.jsx)("img",{src:i,style:{margin:"auto",display:"block",width:"auto",maxWidth:"100%",objectFit:"contain"},alt:""})})}),this.isFileMedia(this.state,this.props)&&(this.isPdfFile(this.state,this.props)?(0,k.jsxs)("div",{className:"acms-admin-media-thumb-container acms-admin-margin-bottom-small acms-admin-media-thumb-container-assets",children:[(0,k.jsx)("div",{className:"acms-admin-media-thumb-assets",style:{width:"70%"},children:(0,k.jsx)("img",{src:l,className:"acms-admin-media-thumb-box",style:{margin:"auto",display:"block",width:"auto",maxWidth:"100%",objectFit:"contain"},alt:""})}),(0,k.jsxs)("div",{style:{marginTop:"5px"},className:"acms-admin-media-thumb-pager",children:[a&&(0,k.jsxs)("button",{type:"button",className:"acms-admin-media-thumb-pager-arrow acms-admin-media-thumb-pager-arrow-left",onClick:this.pdfPrevPage.bind(this),children:[(0,k.jsx)("span",{className:"acms-admin-icon-arrow-small-left"}),(0,k.jsx)(v.default,{children:""})]}),s&&(0,k.jsxs)("button",{type:"button",className:"acms-admin-media-thumb-pager-arrow acms-admin-media-thumb-pager-arrow-right",onClick:this.pdfNextPage.bind(this),children:[(0,k.jsx)("span",{className:"acms-admin-icon-arrow-small-right"}),(0,k.jsx)(v.default,{children:""})]})]})]}):(0,k.jsx)("div",{className:"acms-admin-media-thumb-container acms-admin-margin-bottom-small acms-admin-media-thumb-container-assets",children:(0,k.jsx)("div",{className:"acms-admin-media-thumb-assets",style:{width:"70%"},children:(0,k.jsx)("img",{className:"acms-admin-media-thumb-box",src:i,style:{margin:"auto",display:"block",width:"70px"},alt:""})})}))]}),(0,k.jsxs)("div",{className:"acms-admin-media-modal-info",children:[(0,k.jsxs)(d.Tabs,{children:[(0,k.jsx)(d.TabPanel,{label:ACMS.i18n("media.edit"),id:"media-edit",children:(0,k.jsx)("table",{className:"acms-admin-media-table-edit",children:(0,k.jsxs)("tbody",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{children:[ACMS.i18n("media.media_change"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.managed_media_change")})]}),(0,k.jsx)("td",{children:(0,k.jsx)("label",{children:(0,k.jsx)("input",{type:"file",onChange:this.changeImage.bind(this)})})})]}),"file"===e.media_type&&(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.status"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.status_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsxs)("select",{name:"status",defaultValue:e.media_status,style:{maxWidth:"max-content",width:"100%"},children:[(0,k.jsx)("option",{value:"entry",children:ACMS.i18n("media.follow_media_status")}),(0,k.jsx)("option",{value:"open",children:ACMS.i18n("media.open")}),(0,k.jsx)("option",{value:"close",children:ACMS.i18n("media.close")}),(0,k.jsx)("option",{value:"secret",children:ACMS.i18n("media.secret")})]}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"status"})]})]}),(0,k.jsxs)("tr",{style:{display:"undefined"!=typeof ACMS&&ACMS.Config&&ACMS.Config.mediaShowAltAndCaptionOnModal?"table-row":"none"},children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.filename"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.filename_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("input",{ref:this.filenameInputRef,type:"text",defaultValue:e.media_title,name:"file_name",className:"acms-admin-form-width-full"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"file_name"})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.tag"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.managed_tag")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)(p.default,{isMulti:!0,value:this.makeTags(e.media_label),className:"acms-admin-form-width-full",onChange:this.addTags.bind(this),options:n&&n.map(e=>({label:e,value:e})),placeholder:ACMS.i18n("media.tag_select_placeholder"),noOptionsMessage:()=>ACMS.i18n("media.tag_select_no_options_message"),formatCreateLabel:e=>ACMS.i18n("media.add_tag",{name:e}),isValidNewOption:e=>e.trim().length>0,closeMenuOnSelect:!1}),(0,k.jsx)("input",{type:"hidden",value:e.media_label,name:"media_label"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"media_label"})]})]}),(0,k.jsxs)("tr",{style:{display:"undefined"!=typeof ACMS&&ACMS.Config&&ACMS.Config.mediaShowAltAndCaptionOnModal?"table-row":"none"},children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.caption"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.caption_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("input",{type:"text",defaultValue:e.media_caption,name:"field_1",className:"acms-admin-form-width-full"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"field_1"})]})]}),(0,k.jsxs)("tr",{style:{display:"undefined"!=typeof ACMS&&ACMS.Config&&ACMS.Config.mediaShowAltAndCaptionOnModal?"table-row":"none"},children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.alt"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.alt_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)(w.default,{defaultValue:e.media_alt,name:"field_3",className:"acms-admin-form-width-full"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"field_3"})]})]}),"file"!==e.media_type&&(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.link"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.link_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("input",{type:"text",defaultValue:e.media_link,name:"field_2",className:"acms-admin-form-width-full"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"field_2"})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{className:"acms-admin-table-nowrap",children:[ACMS.i18n("media.memo"),(0,k.jsx)("i",{className:"acms-admin-icon-tooltip acms-admin-margin-left-mini js-acms-tooltip-hover","data-acms-position":"top","data-acms-tooltip":ACMS.i18n("media.memo_settings")})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("textarea",{defaultValue:e.media_text,name:"field_4",className:"acms-admin-form-width-full"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"field_4"})]})]})]})})}),(0,k.jsx)(d.TabPanel,{label:ACMS.i18n("media.info"),id:"media-info",children:(0,k.jsx)("table",{className:"acms-admin-media-table-edit",children:(0,k.jsxs)("tbody",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.media_id")}),(0,k.jsx)("td",{children:(0,k.jsx)("span",{className:"acms-admin-label",children:e.media_id})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.upload_date")}),(0,k.jsxs)("td",{children:[e.media_datetime,(0,k.jsx)("input",{type:"hidden",name:"upload_date",value:e.media_datetime}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"upload_date"})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.user_name")}),(0,k.jsxs)("td",{children:[e.media_user_name,(0,k.jsx)("input",{type:"hidden",name:"user_id",value:e.media_user_id}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"user_id"})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.last_modified")}),(0,k.jsx)("td",{children:e.media_last_modified})]}),""!==e.media_last_update_user_name&&(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.last_update_user_name")}),(0,k.jsxs)("td",{children:[e.media_last_update_user_name,(0,k.jsx)("input",{type:"hidden",name:"last_update_user_id",value:e.media_last_update_user_id}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"last_update_user_id"})]})]}),"image"===e.media_type&&(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.image_size")}),(0,k.jsxs)("td",{children:[e.media_size," px"]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:ACMS.i18n("media.file_size")}),(0,k.jsx)("td",{children:(0,c.formatBytes)(e.media_filesize)})]})]})})})]}),(0,k.jsx)("div",{className:"acms-admin-media-clipboard",children:(0,k.jsx)("table",{className:"acms-admin-table-admin-media-edit",children:(0,k.jsxs)("tbody",{children:[this.isFileMedia(this.state,this.props)&&(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"acms-admin-table-nowrap",children:ACMS.i18n("media.entity_path")}),(0,k.jsxs)("td",{children:[(0,k.jsxs)("div",{className:"acms-admin-form-action",children:[(0,k.jsx)("input",{type:"text",value:decodeURI(e.media_path),readOnly:!0,className:"acms-admin-form-width-full",disabled:!0,style:{cursor:"auto"}}),(0,k.jsx)(u.default,{text:e.media_path,onCopy:()=>{y.notify.info(ACMS.i18n("media.intrinsic_link_copied"))},children:(0,k.jsx)("span",{className:"acms-admin-form-side-btn",children:(0,k.jsx)("button",{type:"button",className:"acms-admin-btn",children:ACMS.i18n("media.copy")})})})]}),(0,k.jsx)("p",{style:{fontSize:"12px",marginTop:"5px"},className:"acms-admin-text-primary",children:ACMS.i18n("media.entity_path_attention")})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"acms-admin-table-nowrap",children:ACMS.i18n("media.permalink")}),(0,k.jsxs)("td",{children:[(0,k.jsxs)("div",{className:"acms-admin-form-action",children:[(0,k.jsx)("input",{type:"text",value:e.media_permalink,readOnly:!0,className:"acms-admin-form-width-full",disabled:!0,style:{cursor:"auto"}}),(0,k.jsx)(u.default,{text:e.media_permalink,onCopy:()=>{y.notify.info(ACMS.i18n("media.permalink_copied"))},children:(0,k.jsx)("span",{className:"acms-admin-form-side-btn",children:(0,k.jsx)("button",{type:"button",className:"acms-admin-btn",children:ACMS.i18n("media.copy")})})})]}),(0,k.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",marginBottom:0},className:"acms-admin-text-danger",children:ACMS.i18n("media.permalink_attention")})]})]})]})})})]})]}),(0,k.jsx)("input",{type:"hidden",name:"formToken",value:t}),e.media_ext&&(0,k.jsx)("input",{type:"hidden",name:"extension",value:e.media_ext.toUpperCase()}),(0,k.jsx)("input",{type:"hidden",name:"type",value:e.media_type}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"extension"}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"type"}),(0,k.jsx)("input",{type:"hidden",name:"file_size",value:e.media_size}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"file_size"}),(0,k.jsx)("input",{type:"hidden",name:"path",value:e.media_path}),(0,k.jsx)("input",{type:"hidden",name:"media[]",value:"path"})]})}),(0,k.jsx)(f.default.Footer,{className:"acms-admin-media-modal-footer",children:(0,k.jsxs)(g.default,{children:[(0,k.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-media-cancel-btn",onClick:this.hideModal.bind(this),children:ACMS.i18n("media.cancel")}),(0,k.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-primary",onClick:()=>{e&&this.uploadAsNew(e)},children:ACMS.i18n("media.save_as_new")}),(0,k.jsx)("button",{type:"button",className:"acms-admin-btn acms-admin-btn-primary",onClick:()=>{e&&this.update(e)},children:ACMS.i18n("media.save")})]})})]}),e&&(0,k.jsx)(h.default,{isOpen:o,onClose:this.handleEditDialogClose.bind(this),onCrop:this.handleCrop.bind(this),src:i||e.media_edited,original:e.media_original,focalPoint:m,width:this.imageWidth(e.media_size),height:this.imageHeight(e.media_size),mediaCropSizes:ACMS.Config.mediaCropSizes,container:this.root})]})}}t.default=S,(0,o.default)(S,"defaultProps",{tags:[]})},64483:function(e,t,n){let r;Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPdfPage=async function(e,t){const l=s(e,t),c=a.get(l);if(c)return c;const u=i.get(l);if(u)return u;const d=(async()=>{const i=await async function(e){if(!r){const{default:e}=await n.e(5822).then(n.bind(n,90605));r=e}let t=o.get(e);return t||(t=new r(e),o.set(e,t)),t}(e),s=await i.getPageImage(t),[c,u]=await Promise.all([i.hasPrevPage(),i.hasNextPage()]),d={image:s,hasPrev:c,hasNext:u,currentPage:i.currentPage};return!1!==s&&a.set(l,d),d})();i.set(l,d);try{return await d}finally{i.delete(l)}};const o=new Map,i=new Map,a=new Map,s=(e,t)=>`${e}|${t}`},14559:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(96540),i=r(n(1506)),a=r(n(28725)),s=n(74848);class l extends o.Component{handleAfterMediaModalOpen(){const{mid:e}=this.props,t=ACMS.Library.acmsLink({tpl:"ajax/edit/media-edit.json",bid:ACMS.Config.bid,Query:{cache:(new Date).getTime().toString()}},!1);i.default.get(t,{params:{_mid:e}}).then(e=>{this.props.actions.setItem(e.data.item)});const n=ACMS.Library.acmsLink({tpl:"ajax/edit/media-tag.json",bid:ACMS.Config.bid,Query:{cache:(new Date).getTime().toString()}},!1);i.default.get(n).then(e=>{this.props.actions.setMediaTags(e.data)})}handleAfterMediaModalClose(){this.props.actions.setItem(null)}render(){const{actions:e,item:t,formToken:n,tags:r,onClose:o,onUpdate:i,isOpen:l,container:c}=this.props;return(0,s.jsx)(a.default,{isOpen:l,item:t,actions:e,formToken:n,tags:r,onUpdate:i,onClose:o,onAfterClose:this.handleAfterMediaModalClose.bind(this),onAfterOpen:this.handleAfterMediaModalOpen.bind(this),container:c})}}t.default=l},86311:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(28895),i=n(73729),a=r(n(27701)),s=r(n(96304)),l=r(n(22078)),c=r(n(31040)),u=n(74848);const d=(0,a.default)(),f=(0,o.legacy_createStore)(l.default,(0,o.applyMiddleware)(d));d.run(c.default),t.default=e=>(0,u.jsx)(i.Provider,{store:f,children:(0,u.jsx)(s.default,{...e})})},85061:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(43693)),i=n(96540),a=r(n(46942)),s=r(n(25454)),l=r(n(61623)),c=r(n(1506)),u=r(n(86792)),d=r(n(9512)),f=r(n(58475)),p=n(20872),h=r(n(99618)),m=r(n(94986)),g=n(74848);class v extends i.Component{constructor(e){super(e),this.state={items:[],label:e.label||"",loading:!1,imgsOnStage:!1,hasUploadedItems:!1}}componentDidMount(){this.props.files&&(0,m.default)(this.props.files).then(e=>{this.onComplete(e)})}async createPdfThumbnail(e){return await(0,h.default)(e,1)}upload(e,t,n,r){const{largeSize:o}=this.props;return new Promise(async i=>{const a=new FormData;a.append("ACMS_POST_Media_Upload","true"),t&&a.append("tags",t);const s=(0,p.getExt)(n);if("pdf"===s.toLowerCase()){const t=await this.createPdfThumbnail(e);t&&(a.append("media_pdf_thumbnail",(0,p.dataURItoBlob)(t)),a.append("pdf_page","1"))}const l=(0,p.random)(10);a.append("name",`${l}.${s}`),a.append("size",`${o}`),a.append("file",e,n),a.append("formToken",window.csrfToken),this.setProgressBar(r,0),c.default.post(location.href,a,{onUploadProgress:e=>{"number"==typeof e.total&&this.setProgressBar(r,e.loaded/e.total*70)}}).then(e=>{if(e&&e.data){if("failure"===e.data.status)throw new Error(e.data.message);return this.setProgressBar(r,100),void setTimeout(()=>{i(e.data)},300)}throw new Error(ACMS.i18n("media.error.unknown"))}).catch(e=>{console.error(e),this.setProgressBar(r,100,!0),e instanceof Error&&alert(e.message)})})}setProgressBar(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{items:r}=this.state,o=r.findIndex(t=>t.id===e.id),i={...e,progress:t,progressError:n};this.setState({items:[...r.slice(0,o),i,...r.slice(o+1)]})}removeFile(e){const{items:t}=this.state,n=t.findIndex(t=>t.idx===e.idx);this.setState({items:[...t.slice(0,n),...t.slice(n+1)]})}setUploadedItem(e,t){const{items:n}=this.state,r=n.findIndex(t=>t.idx===e.idx),o={...n[r],uploadedItem:t,progress:-1},i=this.state.items.slice();i[r]=o,this.setState({items:i})}editItem(e){e.uploadedItem&&this.props.actions.setItem(e.uploadedItem)}uploadItems(){return new Promise(e=>{const{items:t,label:n}=this.state,{actions:r}=this.props,o=[],i=new f.default;this.setState({loading:!0,hasUploadedItems:!0});const[a,l]=ACMS.Config.lgImg.split(":");[].forEach.call(t,e=>{const{name:t,filetype:r,file:c}=e,u="image"===r&&/(heic|heif)/i.test(c.type),d="image"===r&&c.type.includes("svg"),f="image"===r&&c.type.includes("gif"),p=new Promise(o=>{"image"===r?u?e.blob instanceof Blob&&this.upload(e.blob,n,t,e).then(t=>{this.setUploadedItem(e,t),o(t)}):d?c.text().then(r=>{const i=s.default.sanitize(r,{USE_PROFILES:{svg:!0,svgFilters:!0}}),a=new Blob([i],{type:"image/svg+xml"});this.upload(a,n,t,e).then(t=>{this.setUploadedItem(e,t),o(t)})}):f?this.upload(c,n,t,e).then(t=>{this.setUploadedItem(e,t),o(t)}):i.getBlobFromFile(c,a,parseInt(l,10)).then(r=>{let{blob:i,resize:a}=r;const s=a&&"off"!==ACMS.Config.mediaClientResize?i:c;this.upload(s,n,t,e).then(t=>{this.setUploadedItem(e,t),o(t)})}):this.upload(c,n,t,e).then(t=>{this.setUploadedItem(e,t),o(t)})});o.push(p)}),Promise.all(o).then(t=>{this.setState({loading:!1}),r.fetchMediaList(),e(t)})})}onComplete(e){let t=[...this.state.items,...e.map(e=>({file:e.file,filetype:e.filetype,preview:"image"===e.filetype?e.preview:"",blob:"image"===e.filetype?e.blob:null,name:e.file.name,size:e.file.size,idx:-1,id:"",progress:0,progressError:!1}))].filter(e=>!e.uploadedItem).map((e,t)=>({...e,idx:t,id:(0,p.random)(10)}));t=Array.from(new Map(t.map(e=>[e.file.name,e])).values()),t.length>20&&(alert(ACMS.i18n("media.more_than_20_not_allowed")),t=t.slice(0,20)),t.length>0&&this.setState({items:t,hasUploadedItems:!1,imgsOnStage:!0})}makeTags(e){return e?e.split(",").map(e=>({value:e,label:e})):null}addTags(e){const t=e.reduce((e,t,n)=>0===n?t.value:`${e},${t.value}`,"");this.setState({label:t})}removeUploadedItems(){const{items:e}=this.state,t=e.filter(e=>!e.uploadedItem);this.setState({items:t})}render(){const{items:e,label:t,hasUploadedItems:n,imgsOnStage:r}=this.state,{showUploadButton:o,tags:i}=this.props;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"clearfix",style:{marginBottom:"10px"},children:(0,g.jsx)("div",{style:{padding:"0 10px"},children:(0,g.jsx)(l.default,{isMulti:!0,options:(i||[]).map(e=>({label:e,value:e})),value:this.makeTags(t),onChange:this.addTags.bind(this),placeholder:ACMS.i18n("media.tag_select_placeholder"),formatCreateLabel:e=>ACMS.i18n("media.add_tag",{name:e}),isValidNewOption:e=>e.trim().length>0,noOptionsMessage:()=>ACMS.i18n("media.tag_select_no_options_message"),closeMenuOnSelect:!1,menuPortalTarget:document.body})})}),(0,g.jsx)("div",{className:"acms-admin-media-upload-container-wrap",children:(0,g.jsxs)("div",{className:"acms-admin-media-upload-container",children:[(0,g.jsx)("div",{className:"acms-admin-media-upload-item",children:(0,g.jsx)("div",{className:"acms-admin-media-upload-item-inner",children:(0,g.jsx)(u.default,{onComplete:this.onComplete.bind(this)})})}),e.map(e=>(0,g.jsx)("div",{className:"acms-admin-media-upload-item",children:(0,g.jsxs)("div",{className:(0,a.default)("acms-admin-media-upload-item-inner",{"-progress":e.progress>0}),style:{position:"relative"},children:[e.progress>0&&(0,g.jsx)("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",boxSizing:"border-box",zIndex:2},children:(0,g.jsx)(d.default,{progress:e.progress,alert:e.progressError})}),!e.uploadedItem&&(0,g.jsx)("button",{type:"button",className:"acms-admin-media-upload-cancel",onClick:this.removeFile.bind(this,e),"aria-label":ACMS.i18n("media.remove_file")}),e.uploadedItem&&(0,g.jsx)("button",{type:"button",className:"acms-admin-media-edit-btn acms-admin-media-edit-upload-btn",onClick:this.editItem.bind(this,e),children:ACMS.i18n("media.edit")}),"image"===e.filetype&&(0,g.jsx)("div",{className:"acms-admin-media-upload-bg",style:{backgroundImage:`url(${e.preview})`}}),"image"!==e.filetype&&(0,g.jsx)("div",{className:"acms-admin-media-upload-bg",children:(0,g.jsx)("img",{src:`${ACMS.Config.root}themes/system/images/fileicon/file.png`,className:"acms-admin-media-upload-file",alt:""})}),(0,g.jsx)("div",{className:"acms-admin-media-overlay"}),(0,g.jsx)("div",{className:"acms-admin-media-upload-caption",children:(0,g.jsx)("p",{className:"acms-admin-media-upload-caption-text",children:e.name})})]})},e.id))]})}),0===e.length&&(0,g.jsx)("p",{style:{textAlign:"center"},children:ACMS.i18n("media.no_staged_media")}),o&&r&&(0,g.jsx)("div",{className:"clearfix",children:(0,g.jsx)("button",{type:"button",className:"acms-admin-btn-admin acms-admin-btn-admin-primary acms-admin-float-right",onClick:this.uploadItems.bind(this),disabled:n,children:ACMS.i18n("media.upload")})})]})}}t.default=v,(0,o.default)(v,"defaultProps",{showUploadButton:!0,tags:[],files:[]})},38209:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATEMEDIALIST=t.SETSELECTEDTAGS=t.SETMEDIATOTAL=t.SETMEDIATAGS=t.SETMEDIAPAGE=t.SETMEDIALIST=t.SETMEDIALIMIT=t.SETMEDIALASTPAGE=t.SETMEDIALARGESIZE=t.SETMEDIAKEYWORD=t.SETMEDIAEXTENSIONS=t.SETMEDIACONFIG=t.SETMEDIAARCHIVES=t.SETLOADING=t.SETLABEL=t.SETITEM=t.SETFORMTOKEN=t.FETCHTAGLIST=t.FETCHMEDIALIST=void 0,t.FETCHMEDIALIST="FETCHMEDIALIST",t.FETCHTAGLIST="FETCHTAGLIST",t.SETMEDIALIST="SETMEDIALIST",t.SETMEDIALASTPAGE="SETMEDIALASTPAGE",t.SETMEDIACONFIG="SETMEDIACONFIG",t.SETMEDIAPAGE="SETMEDIAPAGE",t.SETMEDIALIMIT="SETMEDIALIMIT",t.SETITEM="SETITEM",t.UPDATEMEDIALIST="UPDATEMEDIALIST",t.SETMEDIALARGESIZE="SETMEDIALARGESIZE",t.SETFORMTOKEN="SETFORMTOKEN",t.SETLABEL="SETLABEL",t.SETMEDIAKEYWORD="SETMEDIAKEYWORD",t.SETMEDIAARCHIVES="SETMEDIAARCHIVES",t.SETMEDIATAGS="SETMEDIATAGS",t.SETMEDIATOTAL="SETMEDIATOTAL",t.SETLOADING="SETLOADING",t.SETSELECTEDTAGS="SETSELECTEDTAGS",t.SETMEDIAEXTENSIONS="SETMEDIAEXTENSIONS"},49308:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(73729),i=n(28895),a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(29597)),s=r(n(71359));t.default=(0,o.connect)(function(e){return e},function(e){return{actions:(0,i.bindActionCreators)(a,e)}})(s.default)},96304:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(73729),i=n(28895),a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(29597)),s=r(n(14559));t.default=(0,o.connect)(function(e){return e},function(e){return{actions:(0,i.bindActionCreators)(a,e)}})(s.default)},29597:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.updateMediaList=t.setSelectedTags=t.setMediaTotal=t.setMediaTags=t.setMediaList=t.setMediaLastPage=t.setMediaLargeSize=t.setMediaExtensions=t.setMediaConfig=t.setMediaArchives=t.setLoading=t.setLabel=t.setItem=t.setFormToken=t.fetchTagList=t.fetchMediaList=void 0;var r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(38209));t.fetchTagList=()=>({type:r.FETCHTAGLIST}),t.fetchMediaList=e=>({type:r.FETCHMEDIALIST,config:e}),t.setMediaList=e=>({type:r.SETMEDIALIST,items:e}),t.setMediaConfig=e=>({type:r.SETMEDIACONFIG,config:e}),t.setMediaLastPage=e=>({type:r.SETMEDIALASTPAGE,page:e}),t.setMediaLargeSize=e=>({type:r.SETMEDIALARGESIZE,largeSize:e}),t.setFormToken=e=>({type:r.SETFORMTOKEN,formToken:e}),t.setItem=e=>({type:r.SETITEM,item:e}),t.updateMediaList=e=>({type:r.UPDATEMEDIALIST,item:e}),t.setLabel=e=>({type:r.SETLABEL,label:e}),t.setMediaArchives=e=>({type:r.SETMEDIAARCHIVES,archives:e}),t.setMediaTags=e=>({type:r.SETMEDIATAGS,tags:e}),t.setMediaTotal=e=>({type:r.SETMEDIATOTAL,total:e}),t.setLoading=e=>({type:r.SETLOADING,loading:e}),t.setSelectedTags=e=>({type:r.SETSELECTEDTAGS,tags:e}),t.setMediaExtensions=e=>({type:r.SETMEDIAEXTENSIONS,extensions:e})},22078:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29597)),o=i(n(38209));function i(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(i=function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?o(a,t,i):a[t]=e[t]);return a})(e,t)}const a={items:[],archives:[],tags:[],extensions:[],selectedTags:[],item:null,lastPage:1,largeSize:0,total:0,config:{limit:20,page:1,order:"upload_date-desc",keyword:"",tag:"",date:"",filetype:"all",fileext:"all",year:"",month:"",owner:!1,blogAxis:!1},formToken:"",label:"",loading:!1,actions:r};t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.SETMEDIALIST:const{items:n}=t;return{...e,items:n};case o.SETMEDIALASTPAGE:return{...e,lastPage:t.page};case o.SETMEDIACONFIG:return{...e,config:{...e.config,...t.config}};case o.SETMEDIATAGS:return{...e,tags:t.tags};case o.SETMEDIAARCHIVES:return{...e,archives:t.archives};case o.SETITEM:return{...e,item:t.item};case o.UPDATEMEDIALIST:const r=e.items.findIndex(e=>e.media_id===t.item.media_id);return{...e,items:[...e.items.slice(0,r),t.item,...e.items.slice(r+1)]};case o.SETMEDIALARGESIZE:return{...e,largeSize:t.largeSize};case o.SETFORMTOKEN:return{...e,formToken:t.formToken};case o.SETLABEL:return{...e,label:t.label};case o.SETMEDIATOTAL:return{...e,total:t.total};case o.SETLOADING:return{...e,loading:t.loading};case o.SETSELECTEDTAGS:return{...e,selectedTags:t.tags};case o.SETMEDIAEXTENSIONS:return{...e,extensions:t.extensions};default:return e}}},31040:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function*(){yield(0,o.takeEvery)(a.FETCHMEDIALIST,u),yield(0,o.takeEvery)(a.FETCHTAGLIST,c)};var o=n(43786),i=r(n(1506)),a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(o,t,r):o[t]=e[t]);return o}(e)}(n(38209)),s=n(29597);function l(e){return new Promise(t=>{i.default.get(e).then(e=>{t(e.data)})})}function*c(){const e=ACMS.Library.acmsLink({bid:ACMS.Config.bid,tpl:"ajax/edit/media-tag.json"},!1),t=yield(0,o.call)(l,e);yield(0,o.put)((0,s.setMediaTags)(t))}function u(e){let{config:t={}}=e;return function*(){const e=yield(0,o.select)(),n={...e.config,...t},r=ACMS.Library.acmsLink({tpl:"ajax/edit/media.json",bid:ACMS.Config.bid,page:n.page,tag:n.tag,keyword:n.keyword,order:n.order,limit:n.limit,date:n.date,Query:{type:n.filetype,ext:n.fileext,year:n.year,month:n.month,owner:n.owner?"true":"false",blogAxis:n.blogAxis?"true":"false",cache:(new Date).getTime().toString()}},!1);yield(0,o.put)((0,s.setLoading)(!0)),yield(0,o.put)((0,s.setLoading)(!1));const i=yield(0,o.call)(l,r),{items:a}=i,c=a.map(t=>{const n=e.items.find(e=>t.media_id===e.media_id);return n?{...t,checked:n.checked}:t});yield(0,o.put)((0,s.setMediaList)(c)),yield(0,o.put)((0,s.setMediaLastPage)(i.pageAmount)),yield(0,o.put)((0,s.setMediaTotal)(i.total)),yield(0,o.put)((0,s.setMediaLargeSize)(i.largeSize)),yield(0,o.put)((0,s.setMediaArchives)(i.archives)),yield(0,o.put)((0,s.setMediaTags)(i.tags)),yield(0,o.put)((0,s.setMediaExtensions)(i.extensions)),t&&(yield(0,o.put)((0,s.setMediaConfig)(t)))}()}},39469:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.coordinatesToTransform=function(e,t){const{x:n,y:r}=e;return{x:n-t.width/2,y:r-t.height/2,scaleX:1,scaleY:1}},t.focalPointToCoordinates=function(e,t){const[n,r]=e;return{x:t.width*(n/100),y:t.height*(r/100)}},t.getFocalPoint=function(e){return e.media_focal_point?e.media_focal_point.split(",").map(e=>parseFloat(e)):[50,50]}},24033:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let{onCopy:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,o.useState)(!1);return{copy:(0,o.useCallback)(n=>{const o=(0,i.default)(n,t);r(o),o&&e&&e(n)},[t,e]),copied:n,reset:(0,o.useCallback)(()=>{r(!1)},[])}};var o=n(96540),i=r(n(17965))},88031:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaSelect=t.useFileUpload=t.useDropZone=void 0;var r=n(96540);t.useMediaSelect=()=>{const[e,t]=(0,r.useState)({isInsertModalOpen:!1,files:[],tab:"upload"}),n=(0,r.useCallback)(e=>{t(t=>({...t,isInsertModalOpen:!0,files:e,tab:"upload"}))},[]),o=(0,r.useCallback)(()=>{t(e=>({...e,isInsertModalOpen:!0,files:[],tab:"select"}))},[]);return{isInsertModalOpen:e.isInsertModalOpen,files:e.files,tab:e.tab,uploadFile:n,handleModalClose:()=>{t(e=>({...e,isInsertModalOpen:!1}))},handleSelectClick:o}},t.useFileUpload=e=>{let{uploader:t}=e;const n=(0,r.useRef)(null),o=(0,r.useCallback)(()=>{n.current?.click()},[]);return{fileInputRef:n,handleUploadClick:o,handleUploadFile:e=>{const{files:n}=e.target;n&&n instanceof FileList&&t(Array.from(n))}}},t.useDropZone=e=>{let{uploader:t}=e;return{onDrop:e=>{t(e.map(e=>e.file))}}}},86860:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{orientation:t="horizontal",direction:n="ltr"}=e,a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useCallback)(e=>{if(!e.currentTarget.contains(e.target))return;if(!a.current)return;const r="horizontal"===t,i="rtl"===n,l=(0,o.tabbable)(a.current);if(!l.length)return;const c=document.activeElement,u=null!==c?Array.from(l).indexOf(c):0;let d=u;switch(e.key){case"ArrowRight":r&&(e.stopPropagation(),e.preventDefault(),d=i?u-1:u+1);break;case"ArrowLeft":r&&(e.stopPropagation(),e.preventDefault(),d=i?u+1:u-1);break;case"ArrowDown":r||(e.stopPropagation(),e.preventDefault(),d=u+1);break;case"ArrowUp":r||(e.stopPropagation(),e.preventDefault(),d=u-1);break;case"Home":e.stopPropagation(),e.preventDefault(),d=0;break;case"End":e.stopPropagation(),e.preventDefault(),d=l.length-1;break;case"Tab":return e.stopPropagation(),s.current=document.activeElement,void(e.shiftKey?l[0]?.focus():l[l.length-1]?.focus());default:return}d<0?d=l.length-1:d>=l.length&&(d=0);const f=l[d];f&&(f.focus(),s.current=f)},[t,n]),c=(0,r.useCallback)(e=>{e.currentTarget.contains(e.relatedTarget)||s.current||(s.current=e.target)},[]),u=(0,r.useCallback)(e=>{s.current&&!e.currentTarget.contains(e.relatedTarget)&&a.current?.contains(e.target)&&(s.current?.focus(),s.current=null)},[]),d=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ref:n,onKeyDownCapture:r,onFocusCapture:o,onBlurCapture:s,...d}=e;return{...d,ref:(0,i.handleRef)(n,a),role:"toolbar","aria-orientation":t,onKeyDownCapture:e=>{r&&r(e),l(e)},onFocusCapture:e=>{o&&o(e),u(e)},onBlurCapture:e=>{s&&s(e),c(e)}}},[t,l,u,c]);return{toolbarProps:d}};var r=n(96540),o=n(49054),i=n(36725)},94986:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[];return Array.from(e).forEach(e=>{const r=new Promise((t,r)=>{const o=new FileReader;if(/(heic|heif)/i.test(e.type)){let r=null;o.onload=()=>{t({file:e,filetype:"image",preview:o.result,blob:r})},(async()=>{const{heicTo:t}=await n.e(172).then(n.bind(n,99234)),i=await t({blob:e,type:"image/jpeg"});i instanceof Blob&&(r=i,o.readAsDataURL(i))})()}else e.type.match("image.*")?(o.onload=()=>{t({file:e,filetype:"image",preview:o.result})},o.readAsDataURL(e)):(o.onload=()=>{t({file:e,filetype:"file"})},o.readAsDataURL(e));o.onerror=()=>{r(new Error(`Failed to read file: ${e.name}`))}});t.push(r)}),Promise.all(t)}},99618:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,o)=>{const i=new FileReader;i.onload=e=>{n.e(5822).then(n.bind(n,90605)).then(async n=>{let{default:i}=n;e.target?.result instanceof ArrayBuffer||r(""),new i(new Uint8Array(e.target?.result)).getPageImage(t).then(e=>{r(e)}).catch(e=>{o(new Error(e))})})},i.readAsArrayBuffer(e)})}},54659:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=function(e){return n.format(e)};const n=new Intl.NumberFormat(navigator.languages,{style:"decimal"})},17965:function(e,t,n){"use strict";var r=n(16426),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,s,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),s=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(c),s.selectNodeContents(c),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}},65643:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach(function(e){var r,i,a;r=t,i=e,a=o[e],(i=n(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s="undefined"!=typeof window&&void 0!==window.document,l=s?window:{},c=!(!s||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,u=!!s&&"PointerEvent"in l,d="cropper",f="all",p="crop",h="move",m="zoom",g="e",v="w",y="s",b="n",w="ne",k="nw",x="se",S="sw",C="".concat(d,"-crop"),M="".concat(d,"-disabled"),O="".concat(d,"-hidden"),A="".concat(d,"-hide"),E="".concat(d,"-invisible"),T="".concat(d,"-modal"),_="".concat(d,"-move"),N="".concat(d,"Action"),j="".concat(d,"Preview"),P="crop",I="move",D="none",R="crop",L="cropend",F="cropmove",B="cropstart",H="dblclick",z=u?"pointerdown":c?"touchstart":"mousedown",$=u?"pointermove":c?"touchmove":"mousemove",V=u?"pointerup pointercancel":c?"touchend touchcancel":"mouseup",U="ready",W="resize",q="wheel",K="zoom",G="image/jpeg",Y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,J=/^data:/,X=/^data:image\/jpeg;base64,/,Q=/^img|canvas$/i,Z={viewMode:0,dragMode:P,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ee=Number.isNaN||l.isNaN;function te(e){return"number"==typeof e&&!ee(e)}var ne=function(e){return e>0&&e<1/0};function re(e){return void 0===e}function oe(e){return"object"===r(e)&&null!==e}var ie=Object.prototype.hasOwnProperty;function ae(e){if(!oe(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ie.call(n,"isPrototypeOf")}catch(e){return!1}}function se(e){return"function"==typeof e}var le=Array.prototype.slice;function ce(e){return Array.from?Array.from(e):le.call(e)}function ue(e,t){return e&&se(t)&&(Array.isArray(e)||te(e.length)?ce(e).forEach(function(n,r){t.call(e,n,r,e)}):oe(e)&&Object.keys(e).forEach(function(n){t.call(e,e[n],n,e)})),e}var de=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oe(e)&&n.length>0&&n.forEach(function(t){oe(t)&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e},fe=/\.\d*(?:0|9){12}\d*$/;function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return fe.test(e)?Math.round(e*t)/t:e}var he=/^width|height|left|top|marginLeft|marginTop$/;function me(e,t){var n=e.style;ue(t,function(e,t){he.test(t)&&te(e)&&(e="".concat(e,"px")),n[t]=e})}function ge(e,t){if(t)if(te(e.length))ue(e,function(e){ge(e,t)});else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function ve(e,t){t&&(te(e.length)?ue(e,function(e){ve(e,t)}):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function ye(e,t,n){t&&(te(e.length)?ue(e,function(e){ye(e,t,n)}):n?ge(e,t):ve(e,t))}var be=/([a-z\d])([A-Z])/g;function we(e){return e.replace(be,"$1-$2").toLowerCase()}function ke(e,t){return oe(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(we(t)))}function xe(e,t,n){oe(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(we(t)),n)}var Se=/\s\s*/,Ce=function(){var e=!1;if(s){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});l.addEventListener("test",n,r),l.removeEventListener("test",n,r)}return e}();function Me(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Se).forEach(function(t){if(!Ce){var i=e.listeners;i&&i[t]&&i[t][n]&&(o=i[t][n],delete i[t][n],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners)}e.removeEventListener(t,o,r)})}function Oe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Se).forEach(function(t){if(r.once&&!Ce){var i=e.listeners,a=void 0===i?{}:i;o=function(){delete a[t][n],e.removeEventListener(t,o,r);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];n.apply(e,s)},a[t]||(a[t]={}),a[t][n]&&e.removeEventListener(t,a[t][n],r),a[t][n]=o,e.listeners=a}e.addEventListener(t,o,r)})}function Ae(e,t,n){var r;return se(Event)&&se(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function Ee(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Te=l.location,_e=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ne(e){var t=e.match(_e);return null!==t&&(t[1]!==Te.protocol||t[2]!==Te.hostname||t[3]!==Te.port)}function je(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Pe(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,o=e.translateX,i=e.translateY,a=[];te(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),te(i)&&0!==i&&a.push("translateY(".concat(i,"px)")),te(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),te(n)&&1!==n&&a.push("scaleX(".concat(n,")")),te(r)&&1!==r&&a.push("scaleY(".concat(r,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Ie(e,n){var r=e.pageX,o=e.pageY,i={endX:r,endY:o};return n?i:t({startX:r,startY:o},i)}function De(e){var t=e.aspectRatio,n=e.height,r=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=ne(r),a=ne(n);if(i&&a){var s=n*t;"contain"===o&&s>r||"cover"===o&&s<r?n=r/t:r=n*t}else i?n=r/t:a&&(r=n*t);return{width:r,height:n}}var Re=String.fromCharCode;var Le=/^data:.*,/;function Fe(e){var t,n=new DataView(e);try{var r,o,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){o=s;break}s+=1}if(o){var l=o+10;if("Exif"===function(e,t,n){var r="";n+=t;for(var o=t;o<n;o+=1)r+=Re(e.getUint8(o));return r}(n,o+4,4)){var c=n.getUint16(l);if(((r=18761===c)||19789===c)&&42===n.getUint16(l+2,r)){var u=n.getUint32(l+4,r);u>=8&&(i=l+u)}}}if(i){var d,f,p=n.getUint16(i,r);for(f=0;f<p;f+=1)if(d=i+12*f+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(e){t=1}return t}var Be={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),i=Number(t.minContainerHeight);ge(r,O),ve(e,O);var a={width:Math.max(n.offsetWidth,o>=0?o:200),height:Math.max(n.offsetHeight,i>=0?i:100)};this.containerData=a,me(r,{width:a.width,height:a.height}),ge(e,O),ve(r,O)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,o=r?t.naturalHeight:t.naturalWidth,i=r?t.naturalWidth:t.naturalHeight,a=o/i,s=e.width,l=e.height;e.height*a>e.width?3===n?s=e.height*a:l=e.width/a:3===n?l=e.width/a:s=e.height*a;var c={aspectRatio:a,naturalWidth:o,naturalHeight:i,width:s,height:l};this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(e.width-c.width)/2,c.top=(e.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=de({},c)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=n.viewMode,s=o.aspectRatio,l=this.cropped&&i;if(e){var c=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;a>1?(c=Math.max(c,r.width),u=Math.max(u,r.height),3===a&&(u*s>c?c=u*s:u=c/s)):a>0&&(c?c=Math.max(c,l?i.width:0):u?u=Math.max(u,l?i.height:0):l&&(c=i.width,(u=i.height)*s>c?c=u*s:u=c/s));var d=De({aspectRatio:s,width:c,height:u});c=d.width,u=d.height,o.minWidth=c,o.minHeight=u,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(a>(l?0:1)){var f=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,f),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,f),o.maxTop=Math.max(0,p),l&&this.limited&&(o.minLeft=Math.min(i.left,i.left+(i.width-o.width)),o.minTop=Math.min(i.top,i.top+(i.height-o.height)),o.maxLeft=i.left,o.maxTop=i.top,2===a&&(o.width>=r.width&&(o.minLeft=Math.min(0,f),o.maxLeft=Math.max(0,f)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=function(e){var t=e.width,n=e.height,r=e.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:t};var o=r%90*Math.PI/180,i=Math.sin(o),a=Math.cos(o),s=t*a+n*i,l=t*i+n*a;return r>90?{width:l,height:s}:{width:s,height:l}}({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),i=o.width,a=o.height,s=n.width*(i/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=i/a,n.naturalWidth=i,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,me(this.canvas,de({width:n.width,height:n.height},Pe({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);de(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),me(this.image,de({width:n.width,height:n.height},Pe(de({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=de({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,u=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,d=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;l=Math.min(l,r.width),c=Math.min(c,r.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),d*s>u?d=u/s:u=d*s),i.minWidth=Math.min(l,u),i.minHeight=Math.min(c,d),i.maxWidth=u,i.maxHeight=d}t&&(a?(i.minLeft=Math.max(0,o.left),i.minTop=Math.max(0,o.top),i.maxLeft=Math.min(r.width,o.left+o.width)-i.width,i.maxTop=Math.min(r.height,o.top+o.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=r.width-i.width,i.maxTop=r.height-i.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&xe(this.face,N,n.width>=t.width&&n.height>=t.height?h:f),me(this.cropBox,de({width:n.width,height:n.height},Pe({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ae(this.element,R,this.getData())}},He={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=r,i.alt=o,this.viewBox.appendChild(i),this.viewBoxImage=i,n){var a=n;"string"==typeof n?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,ue(a,function(e){var n=document.createElement("img");xe(e,j,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)})}},resetPreview:function(){ue(this.previews,function(e){var t=ke(e,j);me(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(oe(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(we(t)))}(e,j)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,i=e.width,a=e.height,s=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(me(this.viewBoxImage,de({width:i,height:a},Pe(de({translateX:-s,translateY:-l},e)))),ue(this.previews,function(t){var n=ke(t,j),c=n.width,u=n.height,d=c,f=u,p=1;r&&(f=o*(p=c/r)),o&&f>u&&(d=r*(p=u/o),f=u),me(t,{width:d,height:f}),me(t.getElementsByTagName("img")[0],de({width:i*p,height:a*p},Pe(de({translateX:-s*p,translateY:-l*p},e))))}))}},ze={bind:function(){var e=this.element,t=this.options,n=this.cropper;se(t.cropstart)&&Oe(e,B,t.cropstart),se(t.cropmove)&&Oe(e,F,t.cropmove),se(t.cropend)&&Oe(e,L,t.cropend),se(t.crop)&&Oe(e,R,t.crop),se(t.zoom)&&Oe(e,K,t.zoom),Oe(n,z,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Oe(n,q,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Oe(n,H,this.onDblclick=this.dblclick.bind(this)),Oe(e.ownerDocument,$,this.onCropMove=this.cropMove.bind(this)),Oe(e.ownerDocument,V,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Oe(window,W,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;se(t.cropstart)&&Me(e,B,t.cropstart),se(t.cropmove)&&Me(e,F,t.cropmove),se(t.cropend)&&Me(e,L,t.cropend),se(t.crop)&&Me(e,R,t.crop),se(t.zoom)&&Me(e,K,t.zoom),Me(n,z,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Me(n,q,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Me(n,H,this.onDblclick),Me(e.ownerDocument,$,this.onCropMove),Me(e.ownerDocument,V,this.onCropEnd),t.responsive&&Me(window,W,this.onResize)}},$e={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,o=this.containerData,i=r.offsetWidth/o.width,a=r.offsetHeight/o.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;1!==s&&(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(ue(e,function(t,n){e[n]=t*s})),this.setCropBoxData(ue(t,function(e,n){t[n]=e*s}))))}},dblclick:function(){var e,t;this.disabled||this.options.dragMode===D||this.setDragMode((e=this.dragBox,t=C,(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)?I:P))},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(te(t)&&1!==t||te(n)&&0!==n||e.ctrlKey))){var r,o=this.options,i=this.pointers;e.changedTouches?ue(e.changedTouches,function(e){i[e.identifier]=Ie(e)}):i[e.pointerId||0]=Ie(e),r=Object.keys(i).length>1&&o.zoomable&&o.zoomOnTouch?m:ke(e.target,N),Y.test(r)&&!1!==Ae(this.element,B,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===p&&(this.cropping=!0,ge(this.dragBox,T)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ae(this.element,F,{originalEvent:e,action:t})&&(e.changedTouches?ue(e.changedTouches,function(e){de(n[e.identifier]||{},Ie(e,!0))}):de(n[e.pointerId||0]||{},Ie(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?ue(e.changedTouches,function(e){delete n[e.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ye(this.dragBox,T,this.cropped&&this.options.modal)),Ae(this.element,L,{originalEvent:e,action:t}))}}},Ve={change:function(e){var n,r=this.options,o=this.canvasData,i=this.containerData,a=this.cropBoxData,s=this.pointers,l=this.action,c=r.aspectRatio,u=a.left,d=a.top,C=a.width,M=a.height,A=u+C,E=d+M,T=0,_=0,N=i.width,j=i.height,P=!0;!c&&e.shiftKey&&(c=C&&M?C/M:1),this.limited&&(T=a.minLeft,_=a.minTop,N=T+Math.min(i.width,o.width,o.left+o.width),j=_+Math.min(i.height,o.height,o.top+o.height));var I=s[Object.keys(s)[0]],D={x:I.endX-I.startX,y:I.endY-I.startY},R=function(e){switch(e){case g:A+D.x>N&&(D.x=N-A);break;case v:u+D.x<T&&(D.x=T-u);break;case b:d+D.y<_&&(D.y=_-d);break;case y:E+D.y>j&&(D.y=j-E)}};switch(l){case f:u+=D.x,d+=D.y;break;case g:if(D.x>=0&&(A>=N||c&&(d<=_||E>=j))){P=!1;break}R(g),(C+=D.x)<0&&(l=v,u-=C=-C),c&&(M=C/c,d+=(a.height-M)/2);break;case b:if(D.y<=0&&(d<=_||c&&(u<=T||A>=N))){P=!1;break}R(b),M-=D.y,d+=D.y,M<0&&(l=y,d-=M=-M),c&&(C=M*c,u+=(a.width-C)/2);break;case v:if(D.x<=0&&(u<=T||c&&(d<=_||E>=j))){P=!1;break}R(v),C-=D.x,u+=D.x,C<0&&(l=g,u-=C=-C),c&&(M=C/c,d+=(a.height-M)/2);break;case y:if(D.y>=0&&(E>=j||c&&(u<=T||A>=N))){P=!1;break}R(y),(M+=D.y)<0&&(l=b,d-=M=-M),c&&(C=M*c,u+=(a.width-C)/2);break;case w:if(c){if(D.y<=0&&(d<=_||A>=N)){P=!1;break}R(b),M-=D.y,d+=D.y,C=M*c}else R(b),R(g),D.x>=0?A<N?C+=D.x:D.y<=0&&d<=_&&(P=!1):C+=D.x,D.y<=0?d>_&&(M-=D.y,d+=D.y):(M-=D.y,d+=D.y);C<0&&M<0?(l=S,d-=M=-M,u-=C=-C):C<0?(l=k,u-=C=-C):M<0&&(l=x,d-=M=-M);break;case k:if(c){if(D.y<=0&&(d<=_||u<=T)){P=!1;break}R(b),M-=D.y,d+=D.y,C=M*c,u+=a.width-C}else R(b),R(v),D.x<=0?u>T?(C-=D.x,u+=D.x):D.y<=0&&d<=_&&(P=!1):(C-=D.x,u+=D.x),D.y<=0?d>_&&(M-=D.y,d+=D.y):(M-=D.y,d+=D.y);C<0&&M<0?(l=x,d-=M=-M,u-=C=-C):C<0?(l=w,u-=C=-C):M<0&&(l=S,d-=M=-M);break;case S:if(c){if(D.x<=0&&(u<=T||E>=j)){P=!1;break}R(v),C-=D.x,u+=D.x,M=C/c}else R(y),R(v),D.x<=0?u>T?(C-=D.x,u+=D.x):D.y>=0&&E>=j&&(P=!1):(C-=D.x,u+=D.x),D.y>=0?E<j&&(M+=D.y):M+=D.y;C<0&&M<0?(l=w,d-=M=-M,u-=C=-C):C<0?(l=x,u-=C=-C):M<0&&(l=k,d-=M=-M);break;case x:if(c){if(D.x>=0&&(A>=N||E>=j)){P=!1;break}R(g),M=(C+=D.x)/c}else R(y),R(g),D.x>=0?A<N?C+=D.x:D.y>=0&&E>=j&&(P=!1):C+=D.x,D.y>=0?E<j&&(M+=D.y):M+=D.y;C<0&&M<0?(l=k,d-=M=-M,u-=C=-C):C<0?(l=S,u-=C=-C):M<0&&(l=w,d-=M=-M);break;case h:this.move(D.x,D.y),P=!1;break;case m:this.zoom(function(e){var n=t({},e),r=0;return ue(e,function(e,t){delete n[t],ue(n,function(t){var n=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+o*o),l=(Math.sqrt(i*i+a*a)-s)/s;Math.abs(l)>Math.abs(r)&&(r=l)})}),r}(s),e),P=!1;break;case p:if(!D.x||!D.y){P=!1;break}n=Ee(this.cropper),u=I.startX-n.left,d=I.startY-n.top,C=a.minWidth,M=a.minHeight,D.x>0?l=D.y>0?x:w:D.x<0&&(u-=C,l=D.y>0?S:k),D.y<0&&(d-=M),this.cropped||(ve(this.cropBox,O),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}P&&(a.width=C,a.height=M,a.left=u,a.top=d,this.action=l,this.renderCropBox()),ue(s,function(e){e.startX=e.endX,e.startY=e.endY})}},Ue={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ge(this.dragBox,T),ve(this.cropBox,O),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=de({},this.initialImageData),this.canvasData=de({},this.initialCanvasData),this.cropBoxData=de({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(de(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ve(this.dragBox,T),ge(this.cropBox,O)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ue(this.previews,function(t){t.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ve(this.cropper,M)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ge(this.cropper,M)),this},destroy:function(){var e=this.element;return e[d]?(e[d]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(re(e)?e:r+Number(e),re(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(te(e)&&(n.left=e,r=!0),te(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,i=o.width,a=o.height,s=o.naturalWidth,l=o.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var c=s*e,u=l*e;if(!1===Ae(this.element,K,{ratio:e,oldRatio:i/s,originalEvent:n}))return this;if(n){var d=this.pointers,f=Ee(this.cropper),p=d&&Object.keys(d).length?function(e){var t=0,n=0,r=0;return ue(e,function(e){var o=e.startX,i=e.startY;t+=o,n+=i,r+=1}),{pageX:t/=r,pageY:n/=r}}(d):{pageX:n.pageX,pageY:n.pageY};o.left-=(c-i)*((p.pageX-f.left-o.left)/i),o.top-=(u-a)*((p.pageY-f.top-o.top)/a)}else ae(t)&&te(t.x)&&te(t.y)?(o.left-=(c-i)*((t.x-o.left)/i),o.top-=(u-a)*((t.y-o.top)/a)):(o.left-=(c-i)/2,o.top-=(u-a)/2);o.width=c,o.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return te(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,te(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(te(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(te(e)&&(n.scaleX=e,r=!0),te(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,o=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){e={x:i.left-o.left,y:i.top-o.top,width:i.width,height:i.height};var a=r.width/r.naturalWidth;if(ue(e,function(t,n){e[n]=t/a}),t){var s=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&ae(e)){var i=!1;t.rotatable&&te(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,i=!0),t.scalable&&(te(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,i=!0),te(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;te(e.x)&&(o.left=e.x*a+r.left),te(e.y)&&(o.top=e.y*a+r.top),te(e.width)&&(o.width=e.width*a),te(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?de({},this.containerData):{}},getImageData:function(){return this.sized?de({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&ue(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ae(e)&&(te(e.left)&&(t.left=e.left),te(e.top)&&(t.top=e.top),te(e.width)?(t.width=e.width,t.height=e.width/n):te(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ae(e)&&(te(e.left)&&(r.left=e.left),te(e.top)&&(r.top=e.top),te(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),te(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=function(e,t,n,r){var o=t.aspectRatio,a=t.naturalWidth,s=t.naturalHeight,l=t.rotate,c=void 0===l?0:l,u=t.scaleX,d=void 0===u?1:u,f=t.scaleY,p=void 0===f?1:f,h=n.aspectRatio,m=n.naturalWidth,g=n.naturalHeight,v=r.fillColor,y=void 0===v?"transparent":v,b=r.imageSmoothingEnabled,w=void 0===b||b,k=r.imageSmoothingQuality,x=void 0===k?"low":k,S=r.maxWidth,C=void 0===S?1/0:S,M=r.maxHeight,O=void 0===M?1/0:M,A=r.minWidth,E=void 0===A?0:A,T=r.minHeight,_=void 0===T?0:T,N=document.createElement("canvas"),j=N.getContext("2d"),P=De({aspectRatio:h,width:C,height:O}),I=De({aspectRatio:h,width:E,height:_},"cover"),D=Math.min(P.width,Math.max(I.width,m)),R=Math.min(P.height,Math.max(I.height,g)),L=De({aspectRatio:o,width:C,height:O}),F=De({aspectRatio:o,width:E,height:_},"cover"),B=Math.min(L.width,Math.max(F.width,a)),H=Math.min(L.height,Math.max(F.height,s)),z=[-B/2,-H/2,B,H];return N.width=pe(D),N.height=pe(R),j.fillStyle=y,j.fillRect(0,0,D,R),j.save(),j.translate(D/2,R/2),j.rotate(c*Math.PI/180),j.scale(d,p),j.imageSmoothingEnabled=w,j.imageSmoothingQuality=x,j.drawImage.apply(j,[e].concat(i(z.map(function(e){return Math.floor(pe(e))})))),j.restore(),N}(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(e.rounded),o=r.x,a=r.y,s=r.width,l=r.height,c=n.width/Math.floor(t.naturalWidth);1!==c&&(o*=c,a*=c,s*=c,l*=c);var u=s/l,d=De({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=De({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=De({aspectRatio:u,width:e.width||(1!==c?n.width:s),height:e.height||(1!==c?n.height:l)}),h=p.width,m=p.height;h=Math.min(d.width,Math.max(f.width,h)),m=Math.min(d.height,Math.max(f.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=pe(h),g.height=pe(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,h,m);var y=e.imageSmoothingEnabled,b=void 0===y||y,w=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var k,x,S,C,M,O,A=n.width,E=n.height,T=o,_=a;T<=-s||T>A?(T=0,k=0,S=0,M=0):T<=0?(S=-T,T=0,M=k=Math.min(A,s+T)):T<=A&&(S=0,M=k=Math.min(s,A-T)),k<=0||_<=-l||_>E?(_=0,x=0,C=0,O=0):_<=0?(C=-_,_=0,O=x=Math.min(E,l+_)):_<=E&&(C=0,O=x=Math.min(l,E-_));var N=[T,_,k,x];if(M>0&&O>0){var j=h/s;N.push(S*j,C*j,M*j,O*j)}return v.drawImage.apply(v,[n].concat(i(N.map(function(e){return Math.floor(pe(e))})))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||re(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===P,i=t.movable&&e===I;e=o||i?e:D,t.dragMode=e,xe(n,N,e),ye(n,C,o),ye(n,_,i),t.cropBoxMovable||(xe(r,N,e),ye(r,C,o),ye(r,_,i))}return this}},We=l.Cropper,qe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t||!Q.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=de({},Z,ae(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return t=e,r=[{key:"noConflict",value:function(){return window.Cropper=We,e}},{key:"setDefaults",value:function(e){de(Z,ae(e)&&e)}}],(n=[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[d]){if(t[d]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t,n,r,o,i=this;if(e){this.url=e,this.imageData={};var a=this.element,s=this.options;if(s.rotatable||s.scalable||(s.checkOrientation=!1),s.checkOrientation&&window.ArrayBuffer)if(J.test(e))X.test(e)?this.read((t=e.replace(Le,""),n=atob(t),r=new ArrayBuffer(n.length),ue(o=new Uint8Array(r),function(e,t){o[t]=n.charCodeAt(t)}),r)):this.clone();else{var l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){l.getResponseHeader("content-type")!==G&&l.abort()},l.onload=function(){i.read(l.response)},l.onloadend=function(){i.reloading=!1,i.xhr=null},s.checkCrossOrigin&&Ne(e)&&a.crossOrigin&&(e=je(e)),l.open("GET",e,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===a.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=Fe(e),o=0,i=1,a=1;if(r>1){this.url=function(e,t){for(var n=[],r=new Uint8Array(e);r.length>0;)n.push(Re.apply(null,ce(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}(e,G);var s=function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(r);o=s.rotate,i=s.scaleX,a=s.scaleY}t.rotatable&&(n.rotate=o),t.scalable&&(n.scaleX=i,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&Ne(t)&&(n||(n="anonymous"),r=je(t)),this.crossOrigin=n,this.crossOriginUrl=r;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=r||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),ge(o,A),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),r=function(t,n){de(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=de({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var o=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),n||i.removeChild(o)},o.src=t.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(o))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var i=o.querySelector(".".concat(d,"-container")),a=i.querySelector(".".concat(d,"-canvas")),s=i.querySelector(".".concat(d,"-drag-box")),l=i.querySelector(".".concat(d,"-crop-box")),c=l.querySelector(".".concat(d,"-face"));this.container=r,this.cropper=i,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=i.querySelector(".".concat(d,"-view-box")),this.face=c,a.appendChild(n),ge(e,O),r.insertBefore(i,e.nextSibling),ve(n,A),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,ge(l,O),t.guides||ge(l.getElementsByClassName("".concat(d,"-dashed")),O),t.center||ge(l.getElementsByClassName("".concat(d,"-center")),O),t.background&&ge(i,"".concat(d,"-bg")),t.highlight||ge(c,E),t.cropBoxMovable&&(ge(c,_),xe(c,N,f)),t.cropBoxResizable||(ge(l.getElementsByClassName("".concat(d,"-line")),O),ge(l.getElementsByClassName("".concat(d,"-point")),O)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),se(t.ready)&&Oe(e,U,t.ready,{once:!0}),Ae(e,U)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),ve(this.element,O)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();return de(qe.prototype,Be,He,ze,$e,Ve,Ue),qe}()},74353:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",o="minute",i="hour",a="day",s="week",l="month",c="quarter",u="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,l),i=n-o<0,a=t.clone().add(r+(i?-1:1),l);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:s,d:a,D:d,h:i,m:o,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=m;var w="$isDayjsObject",k=function(e){return e instanceof M||!(!e||!e[w])},x=function e(t,n,r){var o;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(o=i),n&&(b[i]=n,o=i);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var s=t.name;b[s]=t,o=s}return!r&&o&&(y=o),o||!r&&y},S=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},C=v;C.l=x,C.i=k,C.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function m(e){this.$L=x(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return S(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<S(e)},g.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,c=!!C.u(t)||t,f=C.p(e),p=function(e,t){var r=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(a)},h=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case u:return c?p(1,0):p(31,11);case l:return c?p(1,g):p(0,g+1);case s:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return p(c?v-w:v+(6-w),g);case a:case d:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case o:return h(y+"Seconds",2);case r:return h(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var s,c=C.p(e),f="set"+(this.$u?"UTC":""),p=(s={},s[a]=f+"Date",s[d]=f+"Date",s[l]=f+"Month",s[u]=f+"FullYear",s[i]=f+"Hours",s[o]=f+"Minutes",s[r]=f+"Seconds",s[n]=f+"Milliseconds",s)[c],h=c===a?this.$D+(t-this.$W):t;if(c===l||c===u){var m=this.clone().set(d,1);m.$d[p](h),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[C.p(e)]()},g.add=function(n,c){var d,f=this;n=Number(n);var p=C.p(c),h=function(e){var t=S(f);return C.w(t.date(t.date()+Math.round(e*n)),f)};if(p===l)return this.set(l,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===a)return h(1);if(p===s)return h(7);var m=(d={},d[o]=e,d[i]=t,d[r]=1e3,d)[p]||1,g=this.$d.getTime()+n*m;return C.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=C.z(this),i=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,o,i){return e&&(e[n]||e(t,r))||o[n].slice(0,i)},p=function(e){return C.s(i%12||12,e,"0")},m=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(h,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return s+1;case"MM":return C.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(i,a,!0);case"A":return m(i,a,!1);case"m":return String(a);case"mm":return C.s(a,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,f){var p,h=this,m=C.p(d),g=S(n),v=(g.utcOffset()-this.utcOffset())*e,y=this-g,b=function(){return C.m(h,g)};switch(m){case u:p=b()/12;break;case l:p=b();break;case c:p=b()/3;break;case s:p=(y-v)/6048e5;break;case a:p=(y-v)/864e5;break;case i:p=y/t;break;case o:p=y/e;break;case r:p=y/1e3;break;default:p=y}return f?p:C.a(p)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),O=M.prototype;return S.prototype=O,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",a],["$M",l],["$y",u],["$D",d]].forEach(function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(e,t){return e.$i||(e(t,M,S),e.$i=!0),S},S.locale=x,S.isDayjs=k,S.unix=function(e){return S(1e3*e)},S.en=b[y],S.Ls=b,S.p={},S}()},25454:function(e){"use strict";const{entries:t,setPrototypeOf:n,isFrozen:r,getPrototypeOf:o,getOwnPropertyDescriptor:i}=Object;let{freeze:a,seal:s,create:l}=Object,{apply:c,construct:u}="undefined"!=typeof Reflect&&Reflect;a||(a=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t,n){return e.apply(t,n)}),u||(u=function(e,t){return new e(...t)});const d=O(Array.prototype.forEach),f=O(Array.prototype.lastIndexOf),p=O(Array.prototype.pop),h=O(Array.prototype.push),m=O(Array.prototype.splice),g=O(String.prototype.toLowerCase),v=O(String.prototype.toString),y=O(String.prototype.match),b=O(String.prototype.replace),w=O(String.prototype.indexOf),k=O(String.prototype.trim),x=O(Object.prototype.hasOwnProperty),S=O(RegExp.prototype.test),C=(M=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(M,t)});var M;function O(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return c(e,t,r)}}function A(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;n&&n(e,null);let i=t.length;for(;i--;){let n=t[i];if("string"==typeof n){const e=o(n);e!==n&&(r(t)||(t[i]=e),n=e)}e[n]=!0}return e}function E(e){for(let t=0;t<e.length;t++)x(e,t)||(e[t]=null);return e}function T(e){const n=l(null);for(const[r,o]of t(e))x(e,r)&&(Array.isArray(o)?n[r]=E(o):o&&"object"==typeof o&&o.constructor===Object?n[r]=T(o):n[r]=o);return n}function _(e,t){for(;null!==e;){const n=i(e,t);if(n){if(n.get)return O(n.get);if("function"==typeof n.value)return O(n.value)}e=o(e)}return function(){return null}}const N=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=a(["#text"]),F=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B=a(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V=s(/<%[\w\W]*|[\w\W]*%>/gm),U=s(/\$\{[\w\W]*/gm),W=s(/^data-[\-\w.\u00B7-\uFFFF]+$/),q=s(/^aria-[\-\w]+$/),K=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=s(/^(?:\w+script|data):/i),Y=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=s(/^html$/i),X=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var Q=Object.freeze({__proto__:null,ARIA_ATTR:q,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:X,DATA_ATTR:W,DOCTYPE_NAME:J,ERB_EXPR:V,IS_ALLOWED_URI:K,IS_SCRIPT_OR_DATA:G,MUSTACHE_EXPR:$,TMPLIT_EXPR:U});const Z=function(){return"undefined"==typeof window?null:window};var ee=function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z();const r=t=>e(t);if(r.version="3.2.6",r.removed=[],!n||!n.document||9!==n.document.nodeType||!n.Element)return r.isSupported=!1,r;let{document:o}=n;const i=o,s=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:u,Node:M,Element:O,NodeFilter:E,NamedNodeMap:$=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:V,DOMParser:U,trustedTypes:W}=n,q=O.prototype,G=_(q,"cloneNode"),Y=_(q,"remove"),X=_(q,"nextSibling"),ee=_(q,"childNodes"),te=_(q,"parentNode");if("function"==typeof u){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let ne,re="";const{implementation:oe,createNodeIterator:ie,createDocumentFragment:ae,getElementsByTagName:se}=o,{importNode:le}=i;let ce={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported="function"==typeof t&&"function"==typeof te&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:fe,DATA_ATTR:pe,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:ve}=Q;let{IS_ALLOWED_URI:ye}=Q,be=null;const we=A({},[...N,...j,...P,...D,...L]);let ke=null;const xe=A({},[...F,...B,...H,...z]);let Se=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,Me=null,Oe=!0,Ae=!0,Ee=!1,Te=!0,_e=!1,Ne=!0,je=!1,Pe=!1,Ie=!1,De=!1,Re=!1,Le=!1,Fe=!0,Be=!1,He=!0,ze=!1,$e={},Ve=null;const Ue=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let We=null;const qe=A({},["audio","video","img","source","image","track"]);let Ke=null;const Ge=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml";let Qe=Xe,Ze=!1,et=null;const tt=A({},[Ye,Je,Xe],v);let nt=A({},["mi","mo","mn","ms","mtext"]),rt=A({},["annotation-xml"]);const ot=A({},["title","style","font","a","script"]);let it=null;const at=["application/xhtml+xml","text/html"];let st=null,lt=null;const ct=o.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!lt||lt!==e){if(e&&"object"==typeof e||(e={}),e=T(e),it=-1===at.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===it?v:g,be=x(e,"ALLOWED_TAGS")?A({},e.ALLOWED_TAGS,st):we,ke=x(e,"ALLOWED_ATTR")?A({},e.ALLOWED_ATTR,st):xe,et=x(e,"ALLOWED_NAMESPACES")?A({},e.ALLOWED_NAMESPACES,v):tt,Ke=x(e,"ADD_URI_SAFE_ATTR")?A(T(Ge),e.ADD_URI_SAFE_ATTR,st):Ge,We=x(e,"ADD_DATA_URI_TAGS")?A(T(qe),e.ADD_DATA_URI_TAGS,st):qe,Ve=x(e,"FORBID_CONTENTS")?A({},e.FORBID_CONTENTS,st):Ue,Ce=x(e,"FORBID_TAGS")?A({},e.FORBID_TAGS,st):T({}),Me=x(e,"FORBID_ATTR")?A({},e.FORBID_ATTR,st):T({}),$e=!!x(e,"USE_PROFILES")&&e.USE_PROFILES,Oe=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Ee=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,_e=e.SAFE_FOR_TEMPLATES||!1,Ne=!1!==e.SAFE_FOR_XML,je=e.WHOLE_DOCUMENT||!1,De=e.RETURN_DOM||!1,Re=e.RETURN_DOM_FRAGMENT||!1,Le=e.RETURN_TRUSTED_TYPE||!1,Ie=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,Be=e.SANITIZE_NAMED_PROPS||!1,He=!1!==e.KEEP_CONTENT,ze=e.IN_PLACE||!1,ye=e.ALLOWED_URI_REGEXP||K,Qe=e.NAMESPACE||Xe,nt=e.MATHML_TEXT_INTEGRATION_POINTS||nt,rt=e.HTML_INTEGRATION_POINTS||rt,Se=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Se.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(Ae=!1),Re&&(De=!0),$e&&(be=A({},L),ke=[],!0===$e.html&&(A(be,N),A(ke,F)),!0===$e.svg&&(A(be,j),A(ke,B),A(ke,z)),!0===$e.svgFilters&&(A(be,P),A(ke,B),A(ke,z)),!0===$e.mathMl&&(A(be,D),A(ke,H),A(ke,z))),e.ADD_TAGS&&(be===we&&(be=T(be)),A(be,e.ADD_TAGS,st)),e.ADD_ATTR&&(ke===xe&&(ke=T(ke)),A(ke,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&A(Ke,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(Ve===Ue&&(Ve=T(Ve)),A(Ve,e.FORBID_CONTENTS,st)),He&&(be["#text"]=!0),je&&A(be,["html","head","body"]),be.table&&(A(be,["tbody"]),delete Ce.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,re=ne.createHTML("")}else void 0===ne&&(ne=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(W,s)),null!==ne&&"string"==typeof re&&(re=ne.createHTML(""));a&&a(e),lt=e}},ft=A({},[...j,...P,...I]),pt=A({},[...D,...R]),ht=function(e){h(r.removed,{element:e});try{te(e).removeChild(e)}catch(t){Y(e)}},mt=function(e,t){try{h(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(De||Re)try{ht(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},gt=function(e){let t=null,n=null;if(Ie)e="<remove></remove>"+e;else{const t=y(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===it&&Qe===Xe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ne?ne.createHTML(e):e;if(Qe===Xe)try{t=(new U).parseFromString(r,it)}catch(e){}if(!t||!t.documentElement){t=oe.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Ze?re:r}catch(e){}}const i=t.body||t.documentElement;return e&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),Qe===Xe?se.call(t,je?"html":"body")[0]:je?t.documentElement:i},vt=function(e){return ie.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},yt=function(e){return e instanceof V&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof $)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},bt=function(e){return"function"==typeof M&&e instanceof M};function wt(e,t,n){d(e,e=>{e.call(r,t,n,lt)})}const kt=function(e){let t=null;if(wt(ce.beforeSanitizeElements,e,null),yt(e))return ht(e),!0;const n=st(e.nodeName);if(wt(ce.uponSanitizeElement,e,{tagName:n,allowedTags:be}),Ne&&e.hasChildNodes()&&!bt(e.firstElementChild)&&S(/<[/\w!]/g,e.innerHTML)&&S(/<[/\w!]/g,e.textContent))return ht(e),!0;if(7===e.nodeType)return ht(e),!0;if(Ne&&8===e.nodeType&&S(/<[/\w]/g,e.data))return ht(e),!0;if(!be[n]||Ce[n]){if(!Ce[n]&&St(n)){if(Se.tagNameCheck instanceof RegExp&&S(Se.tagNameCheck,n))return!1;if(Se.tagNameCheck instanceof Function&&Se.tagNameCheck(n))return!1}if(He&&!Ve[n]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const o=G(n[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,X(e))}}return ht(e),!0}return e instanceof O&&!function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Qe,tagName:"template"});const n=g(e.tagName),r=g(t.tagName);return!!et[e.namespaceURI]&&(e.namespaceURI===Je?t.namespaceURI===Xe?"svg"===n:t.namespaceURI===Ye?"svg"===n&&("annotation-xml"===r||nt[r]):Boolean(ft[n]):e.namespaceURI===Ye?t.namespaceURI===Xe?"math"===n:t.namespaceURI===Je?"math"===n&&rt[r]:Boolean(pt[n]):e.namespaceURI===Xe?!(t.namespaceURI===Je&&!rt[r])&&!(t.namespaceURI===Ye&&!nt[r])&&!pt[n]&&(ot[n]||!ft[n]):!("application/xhtml+xml"!==it||!et[e.namespaceURI]))}(e)?(ht(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!S(/<\/no(script|embed|frames)/i,e.innerHTML)?(_e&&3===e.nodeType&&(t=e.textContent,d([ue,de,fe],e=>{t=b(t,e," ")}),e.textContent!==t&&(h(r.removed,{element:e.cloneNode()}),e.textContent=t)),wt(ce.afterSanitizeElements,e,null),!1):(ht(e),!0)},xt=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in o||n in ct))return!1;if(Ae&&!Me[t]&&S(pe,t));else if(Oe&&S(he,t));else if(!ke[t]||Me[t]){if(!(St(e)&&(Se.tagNameCheck instanceof RegExp&&S(Se.tagNameCheck,e)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(e))&&(Se.attributeNameCheck instanceof RegExp&&S(Se.attributeNameCheck,t)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(t))||"is"===t&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&S(Se.tagNameCheck,n)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(n))))return!1}else if(Ke[t]);else if(S(ye,b(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(n,"data:")||!We[e])if(Ee&&!S(me,b(n,ge,"")));else if(n)return!1;return!0},St=function(e){return"annotation-xml"!==e&&y(e,ve)},Ct=function(e){wt(ce.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||yt(e))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke,forceKeepAttr:void 0};let o=t.length;for(;o--;){const i=t[o],{name:a,namespaceURI:s,value:l}=i,c=st(a),u=l;let f="value"===a?u:k(u);if(n.attrName=c,n.attrValue=f,n.keepAttr=!0,n.forceKeepAttr=void 0,wt(ce.uponSanitizeAttribute,e,n),f=n.attrValue,!Be||"id"!==c&&"name"!==c||(mt(a,e),f="user-content-"+f),Ne&&S(/((--!?|])>)|<\/(style|title)/i,f)){mt(a,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){mt(a,e);continue}if(!Te&&S(/\/>/i,f)){mt(a,e);continue}_e&&d([ue,de,fe],e=>{f=b(f,e," ")});const h=st(e.nodeName);if(xt(h,c,f)){if(ne&&"object"==typeof W&&"function"==typeof W.getAttributeType)if(s);else switch(W.getAttributeType(h,c)){case"TrustedHTML":f=ne.createHTML(f);break;case"TrustedScriptURL":f=ne.createScriptURL(f)}if(f!==u)try{s?e.setAttributeNS(s,a,f):e.setAttribute(a,f),yt(e)?ht(e):p(r.removed)}catch(t){mt(a,e)}}else mt(a,e)}wt(ce.afterSanitizeAttributes,e,null)},Mt=function e(t){let n=null;const r=vt(t);for(wt(ce.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)wt(ce.uponSanitizeShadowNode,n,null),kt(n),Ct(n),n.content instanceof c&&e(n.content);wt(ce.afterSanitizeShadowDOM,t,null)};return r.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,a=null,s=null;if(Ze=!e,Ze&&(e="\x3c!--\x3e"),"string"!=typeof e&&!bt(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!r.isSupported)return e;if(Pe||dt(t),r.removed=[],"string"==typeof e&&(ze=!1),ze){if(e.nodeName){const t=st(e.nodeName);if(!be[t]||Ce[t])throw C("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof M)n=gt("\x3c!----\x3e"),o=n.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!De&&!_e&&!je&&-1===e.indexOf("<"))return ne&&Le?ne.createHTML(e):e;if(n=gt(e),!n)return De?null:Le?re:""}n&&Ie&&ht(n.firstChild);const l=vt(ze?e:n);for(;a=l.nextNode();)kt(a),Ct(a),a.content instanceof c&&Mt(a.content);if(ze)return e;if(De){if(Re)for(s=ae.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(ke.shadowroot||ke.shadowrootmode)&&(s=le.call(i,s,!0)),s}let u=je?n.outerHTML:n.innerHTML;return je&&be["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&S(J,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),_e&&d([ue,de,fe],e=>{u=b(u,e," ")}),ne&&Le?ne.createHTML(u):u},r.setConfig=function(){dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Pe=!0},r.clearConfig=function(){lt=null,Pe=!1},r.isValidAttribute=function(e,t,n){lt||dt({});const r=st(e),o=st(t);return xt(r,o,n)},r.addHook=function(e,t){"function"==typeof t&&h(ce[e],t)},r.removeHook=function(e,t){if(void 0!==t){const n=f(ce[e],t);return-1===n?void 0:m(ce[e],n,1)[0]}return p(ce[e])},r.removeHooks=function(e){ce[e]=[]},r.removeAllHooks=function(){ce={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r}();e.exports=ee},4146:function(e,t,n){"use strict";var r=n(44363),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!(i[v]||r&&r[v]||m&&m[v]||s&&s[v])){var y=f(n,v);try{c(t,v,y)}catch(e){}}}}return t}},8094:function(e,t,n){"use strict";n.r(t)},7167:function(e,t,n){"use strict";n.r(t)},64176:function(e,t,n){"use strict";n.r(t),n.d(t,{UnstableContext:function(){return j},default:function(){return W}});var r=n(89379),o=n(64467),i=n(45458),a=n(82284),s=n(80296),l=n(46942),c=n.n(l),u=n(96540);function d(e){var t=u.useRef();t.current=e;var n=u.useCallback(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))},[]);return n}var f="undefined"!=typeof window&&window.document&&window.document.createElement?u.useLayoutEffect:u.useEffect,p=function(e,t){!function(e,t){var n=u.useRef(!0);f(function(){return e(n.current)},t),f(function(){return n.current=!1,function(){n.current=!0}},[])}(function(t){if(!t)return e()},t)};function h(e){var t=u.useRef(!1),n=u.useState(e),r=(0,s.A)(n,2),o=r[0],i=r[1];return u.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]),[o,function(e,n){n&&t.current||i(e)}]}function m(e){return void 0!==e}n(66351);Number(u.version.split(".")[0]),"undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;var g={},v=[];function y(e,t){}function b(e,t){}function w(e,t,n){t||g[n]||(e(!1,n),g[n]=!0)}function k(e,t){w(y,e,t)}k.preMessage=function(e){v.push(e)},k.resetWarned=function(){g={}},k.noteOnce=function(e,t){w(b,e,t)};var x=k,S=n(58168),C=n(80045),M=n(40961);function O(e,t,n){return(e-t)/(n-t)}function A(e,t,n,r){var o=O(t,n,r),i={};switch(e){case"rtl":i.right="".concat(100*o,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(100*o,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(100*o,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(100*o,"%"),i.transform="translateX(-50%)"}return i}function E(e,t){return Array.isArray(e)?e[t]:e}var T={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=T.F1&&t<=T.F12)return!1;switch(t){case T.ALT:case T.CAPS_LOCK:case T.CONTEXT_MENU:case T.CTRL:case T.DOWN:case T.END:case T.ESC:case T.HOME:case T.INSERT:case T.LEFT:case T.MAC_FF_META:case T.META:case T.NUMLOCK:case T.NUM_CENTER:case T.PAGE_DOWN:case T.PAGE_UP:case T.PAUSE:case T.PRINT_SCREEN:case T.RIGHT:case T.SHIFT:case T.UP:case T.WIN_KEY:case T.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=T.ZERO&&e<=T.NINE)return!0;if(e>=T.NUM_ZERO&&e<=T.NUM_MULTIPLY)return!0;if(e>=T.A&&e<=T.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case T.SPACE:case T.QUESTION_MARK:case T.NUM_PLUS:case T.NUM_MINUS:case T.NUM_PERIOD:case T.NUM_DIVISION:case T.SEMICOLON:case T.DASH:case T.EQUALS:case T.COMMA:case T.PERIOD:case T.SLASH:case T.APOSTROPHE:case T.SINGLE_QUOTE:case T.OPEN_SQUARE_BRACKET:case T.BACKSLASH:case T.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},_=T,N=u.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),j=u.createContext({}),P=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],I=u.forwardRef(function(e,t){var n,i=e.prefixCls,a=e.value,s=e.valueIndex,l=e.onStartMove,d=e.onDelete,f=e.style,p=e.render,h=e.dragging,m=e.draggingDelete,g=e.onOffsetChange,v=e.onChangeComplete,y=e.onFocus,b=e.onMouseEnter,w=(0,C.A)(e,P),k=u.useContext(N),x=k.min,M=k.max,O=k.direction,T=k.disabled,j=k.keyboard,I=k.range,D=k.tabIndex,R=k.ariaLabelForHandle,L=k.ariaLabelledByForHandle,F=k.ariaValueTextFormatterForHandle,B=k.styles,H=k.classNames,z="".concat(i,"-handle"),$=function(e){T||l(e,s)},V=A(O,a,x,M),U={};null!==s&&(U={tabIndex:T?null:E(D,s),role:"slider","aria-valuemin":x,"aria-valuemax":M,"aria-valuenow":a,"aria-disabled":T,"aria-label":E(R,s),"aria-labelledby":E(L,s),"aria-valuetext":null===(n=E(F,s))||void 0===n?void 0:n(a),"aria-orientation":"ltr"===O||"rtl"===O?"horizontal":"vertical",onMouseDown:$,onTouchStart:$,onFocus:function(e){null==y||y(e,s)},onMouseEnter:function(e){b(e,s)},onKeyDown:function(e){if(!T&&j){var t=null;switch(e.which||e.keyCode){case _.LEFT:t="ltr"===O||"btt"===O?-1:1;break;case _.RIGHT:t="ltr"===O||"btt"===O?1:-1;break;case _.UP:t="ttb"!==O?1:-1;break;case _.DOWN:t="ttb"!==O?-1:1;break;case _.HOME:t="min";break;case _.END:t="max";break;case _.PAGE_UP:t=2;break;case _.PAGE_DOWN:t=-2;break;case _.BACKSPACE:case _.DELETE:d(s)}null!==t&&(e.preventDefault(),g(t,s))}},onKeyUp:function(e){switch(e.which||e.keyCode){case _.LEFT:case _.RIGHT:case _.UP:case _.DOWN:case _.HOME:case _.END:case _.PAGE_UP:case _.PAGE_DOWN:null==v||v()}}});var W=u.createElement("div",(0,S.A)({ref:t,className:c()(z,(0,o.A)((0,o.A)((0,o.A)({},"".concat(z,"-").concat(s+1),null!==s&&I),"".concat(z,"-dragging"),h),"".concat(z,"-dragging-delete"),m),H.handle),style:(0,r.A)((0,r.A)((0,r.A)({},V),f),B.handle)},U,w));return p&&(W=p(W,{index:s,prefixCls:i,value:a,dragging:h,draggingDelete:m})),W}),D=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],R=u.forwardRef(function(e,t){var n=e.prefixCls,o=e.style,i=e.onStartMove,a=e.onOffsetChange,l=e.values,c=e.handleRender,d=e.activeHandleRender,f=e.draggingIndex,p=e.draggingDelete,h=e.onFocus,m=(0,C.A)(e,D),g=u.useRef({}),v=u.useState(!1),y=(0,s.A)(v,2),b=y[0],w=y[1],k=u.useState(-1),x=(0,s.A)(k,2),O=x[0],A=x[1],T=function(e){A(e),w(!0)};u.useImperativeHandle(t,function(){return{focus:function(e){var t;null===(t=g.current[e])||void 0===t||t.focus()},hideHelp:function(){(0,M.flushSync)(function(){w(!1)})}}});var _=(0,r.A)({prefixCls:n,onStartMove:i,onOffsetChange:a,render:c,onFocus:function(e,t){T(t),null==h||h(e)},onMouseEnter:function(e,t){T(t)}},m);return u.createElement(u.Fragment,null,l.map(function(e,t){var n=f===t;return u.createElement(I,(0,S.A)({ref:function(e){e?g.current[t]=e:delete g.current[t]},dragging:n,draggingDelete:n&&p,style:E(o,t),key:t,value:e,valueIndex:t},_))}),d&&b&&u.createElement(I,(0,S.A)({key:"a11y"},_,{value:l[O],valueIndex:null,dragging:-1!==f,draggingDelete:p,render:d,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),L=function(e){var t=e.prefixCls,n=e.style,i=e.children,a=e.value,s=e.onClick,l=u.useContext(N),d=l.min,f=l.max,p=l.direction,h=l.includedStart,m=l.includedEnd,g=l.included,v="".concat(t,"-text"),y=A(p,a,d,f);return u.createElement("span",{className:c()(v,(0,o.A)({},"".concat(v,"-active"),g&&h<=a&&a<=m)),style:(0,r.A)((0,r.A)({},y),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){s(a)}},i)},F=function(e){var t=e.prefixCls,n=e.marks,r=e.onClick,o="".concat(t,"-mark");return n.length?u.createElement("div",{className:o},n.map(function(e){var t=e.value,n=e.style,i=e.label;return u.createElement(L,{key:t,prefixCls:o,style:n,value:t,onClick:r},i)})):null},B=function(e){var t=e.prefixCls,n=e.value,i=e.style,a=e.activeStyle,s=u.useContext(N),l=s.min,d=s.max,f=s.direction,p=s.included,h=s.includedStart,m=s.includedEnd,g="".concat(t,"-dot"),v=p&&h<=n&&n<=m,y=(0,r.A)((0,r.A)({},A(f,n,l,d)),"function"==typeof i?i(n):i);return v&&(y=(0,r.A)((0,r.A)({},y),"function"==typeof a?a(n):a)),u.createElement("span",{className:c()(g,(0,o.A)({},"".concat(g,"-active"),v)),style:y})},H=function(e){var t=e.prefixCls,n=e.marks,r=e.dots,o=e.style,i=e.activeStyle,a=u.useContext(N),s=a.min,l=a.max,c=a.step,d=u.useMemo(function(){var e=new Set;if(n.forEach(function(t){e.add(t.value)}),r&&null!==c)for(var t=s;t<=l;)e.add(t),t+=c;return Array.from(e)},[s,l,c,r,n]);return u.createElement("div",{className:"".concat(t,"-step")},d.map(function(e){return u.createElement(B,{prefixCls:t,key:e,value:e,style:o,activeStyle:i})}))},z=function(e){var t=e.prefixCls,n=e.style,i=e.start,a=e.end,s=e.index,l=e.onStartMove,d=e.replaceCls,f=u.useContext(N),p=f.direction,h=f.min,m=f.max,g=f.disabled,v=f.range,y=f.classNames,b="".concat(t,"-track"),w=O(i,h,m),k=O(a,h,m),x=function(e){!g&&l&&l(e,-1)},S={};switch(p){case"rtl":S.right="".concat(100*w,"%"),S.width="".concat(100*k-100*w,"%");break;case"btt":S.bottom="".concat(100*w,"%"),S.height="".concat(100*k-100*w,"%");break;case"ttb":S.top="".concat(100*w,"%"),S.height="".concat(100*k-100*w,"%");break;default:S.left="".concat(100*w,"%"),S.width="".concat(100*k-100*w,"%")}var C=d||c()(b,(0,o.A)((0,o.A)({},"".concat(b,"-").concat(s+1),null!==s&&v),"".concat(t,"-track-draggable"),l),y.track);return u.createElement("div",{className:C,style:(0,r.A)((0,r.A)({},S),n),onMouseDown:x,onTouchStart:x})},$=function(e){var t=e.prefixCls,n=e.style,o=e.values,i=e.startPoint,a=e.onStartMove,s=u.useContext(N),l=s.included,d=s.range,f=s.min,p=s.styles,h=s.classNames,m=u.useMemo(function(){if(!d){if(0===o.length)return[];var e=null!=i?i:f,t=o[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],r=0;r<o.length-1;r+=1)n.push({start:o[r],end:o[r+1]});return n},[o,d,i,f]);if(!l)return null;var g=h.tracks||p.tracks?u.createElement(z,{index:null,prefixCls:t,start:m[0].start,end:m[m.length-1].end,replaceCls:c()(h.tracks,"".concat(t,"-tracks")),style:p.tracks}):null;return u.createElement(u.Fragment,null,g,m.map(function(e,o){var i=e.start,s=e.end;return u.createElement(z,{index:o,prefixCls:t,style:(0,r.A)((0,r.A)({},E(n,o)),p.track),start:i,end:s,key:o,onStartMove:a})}))};function V(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}var U=u.forwardRef(function(e,t){var n=e.prefixCls,l=void 0===n?"rc-slider":n,f=e.className,g=e.style,v=e.classNames,y=e.styles,b=e.disabled,w=void 0!==b&&b,k=e.keyboard,S=void 0===k||k,C=e.autoFocus,M=e.onFocus,O=e.onBlur,A=e.min,E=void 0===A?0:A,T=e.max,_=void 0===T?100:T,P=e.step,I=void 0===P?1:P,D=e.value,L=e.defaultValue,B=e.range,z=e.count,U=e.onChange,W=e.onBeforeChange,q=e.onAfterChange,K=e.onChangeComplete,G=e.allowCross,Y=void 0===G||G,J=e.pushable,X=void 0!==J&&J,Q=e.reverse,Z=e.vertical,ee=e.included,te=void 0===ee||ee,ne=e.startPoint,re=e.trackStyle,oe=e.handleStyle,ie=e.railStyle,ae=e.dotStyle,se=e.activeDotStyle,le=e.marks,ce=e.dots,ue=e.handleRender,de=e.activeHandleRender,fe=e.track,pe=e.tabIndex,he=void 0===pe?0:pe,me=e.ariaLabelForHandle,ge=e.ariaLabelledByForHandle,ve=e.ariaValueTextFormatterForHandle,ye=u.useRef(null),be=u.useRef(null),we=u.useMemo(function(){return Z?Q?"ttb":"btt":Q?"rtl":"ltr"},[Q,Z]),ke=function(e){return(0,u.useMemo)(function(){if(!0===e||!e)return[!!e,!1,!1,0];var t=e.editable,n=e.draggableTrack;return[!0,t,!t&&n,e.minCount||0,e.maxCount]},[e])}(B),xe=(0,s.A)(ke,5),Se=xe[0],Ce=xe[1],Me=xe[2],Oe=xe[3],Ae=xe[4],Ee=u.useMemo(function(){return isFinite(E)?E:0},[E]),Te=u.useMemo(function(){return isFinite(_)?_:100},[_]),_e=u.useMemo(function(){return null!==I&&I<=0?1:I},[I]),Ne=u.useMemo(function(){return"boolean"==typeof X?!!X&&_e:X>=0&&X},[X,_e]),je=u.useMemo(function(){return Object.keys(le||{}).map(function(e){var t=le[e],n={value:Number(e)};return t&&"object"===(0,a.A)(t)&&!u.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n}).filter(function(e){var t=e.label;return t||"number"==typeof t}).sort(function(e,t){return e.value-t.value})},[le]),Pe=function(e,t,n,r,o,a){var s=u.useCallback(function(n){return Math.max(e,Math.min(t,n))},[e,t]),l=u.useCallback(function(r){if(null!==n){var o=e+Math.round((s(r)-e)/n)*n,i=function(e){return(String(e).split(".")[1]||"").length},a=Math.max(i(n),i(t),i(e)),l=Number(o.toFixed(a));return e<=l&&l<=t?l:null}return null},[n,e,t,s]),c=u.useCallback(function(o){var i=s(o),a=r.map(function(e){return e.value});null!==n&&a.push(l(o)),a.push(e,t);var c=a[0],u=t-e;return a.forEach(function(e){var t=Math.abs(i-e);t<=u&&(c=e,u=t)}),c},[e,t,r,n,s,l]),d=function o(a,s,c){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof s){var d,f=a[c],p=f+s,h=[];r.forEach(function(e){h.push(e.value)}),h.push(e,t),h.push(l(f));var m=s>0?1:-1;"unit"===u?h.push(l(f+m*n)):h.push(l(p)),h=h.filter(function(e){return null!==e}).filter(function(e){return s<0?e<=f:e>=f}),"unit"===u&&(h=h.filter(function(e){return e!==f}));var g="unit"===u?f:p;d=h[0];var v=Math.abs(d-g);if(h.forEach(function(e){var t=Math.abs(e-g);t<v&&(d=e,v=t)}),void 0===d)return s<0?e:t;if("dist"===u)return d;if(Math.abs(s)>1){var y=(0,i.A)(a);return y[c]=d,o(y,s-m,c,u)}return d}return"min"===s?e:"max"===s?t:void 0},f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e[n],i=d(e,t,n,r);return{value:i,changed:i!==o}},p=function(e){return null===a&&0===e||"number"==typeof a&&e<a};return[c,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=e.map(c),s=i[n],l=d(i,t,n,r);if(i[n]=l,!1===o){var u=a||0;n>0&&i[n-1]!==s&&(i[n]=Math.max(i[n],i[n-1]+u)),n<i.length-1&&i[n+1]!==s&&(i[n]=Math.min(i[n],i[n+1]-u))}else if("number"==typeof a||null===a){for(var h=n+1;h<i.length;h+=1)for(var m=!0;p(i[h]-i[h-1])&&m;){var g=f(i,1,h);i[h]=g.value,m=g.changed}for(var v=n;v>0;v-=1)for(var y=!0;p(i[v]-i[v-1])&&y;){var b=f(i,-1,v-1);i[v-1]=b.value,y=b.changed}for(var w=i.length-1;w>0;w-=1)for(var k=!0;p(i[w]-i[w-1])&&k;){var x=f(i,-1,w-1);i[w-1]=x.value,k=x.changed}for(var S=0;S<i.length-1;S+=1)for(var C=!0;p(i[S+1]-i[S])&&C;){var M=f(i,1,S+1);i[S+1]=M.value,C=M.changed}}return{value:i[n],values:i}}]}(Ee,Te,_e,je,Y,Ne),Ie=(0,s.A)(Pe,2),De=Ie[0],Re=Ie[1],Le=function(e,t){var n=t||{},r=n.defaultValue,o=n.value,i=n.onChange,a=n.postState,l=h(function(){return m(o)?o:m(r)?"function"==typeof r?r():r:"function"==typeof e?e():e}),c=(0,s.A)(l,2),u=c[0],f=c[1],g=void 0!==o?o:u,v=a?a(g):g,y=d(i),b=h([g]),w=(0,s.A)(b,2),k=w[0],x=w[1];return p(function(){var e=k[0];u!==e&&y(u,e)},[k]),p(function(){m(o)||f(o)},[o]),[v,d(function(e,t){f(e,t),x([g],t)})]}(L,{value:D}),Fe=(0,s.A)(Le,2),Be=Fe[0],He=Fe[1],ze=u.useMemo(function(){var e=null==Be?[]:Array.isArray(Be)?Be:[Be],t=(0,s.A)(e,1)[0],n=null===Be?[]:[void 0===t?Ee:t];if(Se){if(n=(0,i.A)(e),z||void 0===Be){var r=z>=0?z+1:2;for(n=n.slice(0,r);n.length<r;){var o;n.push(null!==(o=n[n.length-1])&&void 0!==o?o:Ee)}}n.sort(function(e,t){return e-t})}return n.forEach(function(e,t){n[t]=De(e)}),n},[Be,Se,Ee,z,De]),$e=function(e){return Se?e:e[0]},Ve=d(function(e){var t=(0,i.A)(e).sort(function(e,t){return e-t});U&&!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=r.has(t);if(x(!s,"Warning: There may be circular references"),s)return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var l=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c],o[c],l))return!1;return!0}if(t&&o&&"object"===(0,a.A)(t)&&"object"===(0,a.A)(o)){var u=Object.keys(t);return u.length===Object.keys(o).length&&u.every(function(n){return e(t[n],o[n],l)})}return!1}(e,t)}(t,ze,!0)&&U($e(t)),He(t)}),Ue=d(function(e){e&&ye.current.hideHelp();var t=$e(ze);null==q||q(t),x(!q,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==K||K(t)}),We=function(e,t,n,r,o,a,l,c,f,p,h){var m=u.useState(null),g=(0,s.A)(m,2),v=g[0],y=g[1],b=u.useState(-1),w=(0,s.A)(b,2),k=w[0],x=w[1],S=u.useState(!1),C=(0,s.A)(S,2),M=C[0],O=C[1],A=u.useState(n),E=(0,s.A)(A,2),T=E[0],_=E[1],N=u.useState(n),P=(0,s.A)(N,2),I=P[0],D=P[1],R=u.useRef(null),L=u.useRef(null),F=u.useContext(j),B=F.onDragStart,H=F.onDragChange;u.useLayoutEffect(function(){-1===k&&_(n)},[n,k]),u.useEffect(function(){return function(){document.removeEventListener("mousemove",R.current),document.removeEventListener("mouseup",L.current),document.removeEventListener("touchmove",R.current),document.removeEventListener("touchend",L.current)}},[]);var z=function(e,t,n){void 0!==t&&y(t),_(e);var r=e;n&&(r=e.filter(function(e,t){return t!==k})),l(r),H&&H({rawValues:e,deleteIndex:n?k:-1,draggingIndex:k,draggingValue:t})},$=d(function(e,t,n){if(-1===e){var s=I[0],l=I[I.length-1],c=r-s,u=o-l,d=t*(o-r);d=Math.max(d,c),d=Math.min(d,u);var p=a(s+d);d=p-s;var h=I.map(function(e){return e+d});z(h)}else{var m=(o-r)*t,g=(0,i.A)(T);g[e]=I[e];var v=f(g,m,e,"dist");z(v.values,v.value,n)}}),U=u.useMemo(function(){var e=(0,i.A)(n).sort(function(e,t){return e-t}),t=(0,i.A)(T).sort(function(e,t){return e-t}),r={};t.forEach(function(e){r[e]=(r[e]||0)+1}),e.forEach(function(e){r[e]=(r[e]||0)-1});var o=p?1:0;return Object.values(r).reduce(function(e,t){return e+Math.abs(t)},0)<=o?T:n},[n,T,p]);return[k,v,M,U,function(r,o,i){r.stopPropagation();var a=i||n,s=a[o];x(o),y(s),D(a),_(a),O(!1);var l=V(r),u=l.pageX,d=l.pageY,f=!1;B&&B({rawValues:a,draggingIndex:o,draggingValue:s});var m=function(n){n.preventDefault();var r,i,a=V(n),s=a.pageX,l=a.pageY,c=s-u,m=l-d,g=e.current.getBoundingClientRect(),v=g.width,y=g.height;switch(t){case"btt":r=-m/y,i=c;break;case"ttb":r=m/y,i=c;break;case"rtl":r=-c/v,i=m;break;default:r=c/v,i=m}f=!!p&&Math.abs(i)>130&&h<T.length,O(f),$(o,r,f)},g=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",m),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",m),R.current=null,L.current=null,c(f),x(-1),O(!1)};document.addEventListener("mouseup",g),document.addEventListener("mousemove",m),document.addEventListener("touchend",g),document.addEventListener("touchmove",m),R.current=m,L.current=g}]}(be,we,ze,Ee,Te,De,Ve,Ue,Re,Ce,Oe),qe=(0,s.A)(We,5),Ke=qe[0],Ge=qe[1],Ye=qe[2],Je=qe[3],Xe=qe[4],Qe=function(e,t){if(!w){var n=(0,i.A)(ze),r=0,o=0,a=Te-Ee;ze.forEach(function(t,n){var i=Math.abs(e-t);i<=a&&(a=i,r=n),t<e&&(o=n)});var s=r;Ce&&0!==a&&(!Ae||ze.length<Ae)?(n.splice(o+1,0,e),s=o+1):n[r]=e,Se&&!ze.length&&void 0===z&&n.push(e);var l,c,u=$e(n);null==W||W(u),Ve(n),t?(null===(l=document.activeElement)||void 0===l||null===(c=l.blur)||void 0===c||c.call(l),ye.current.focus(s),Xe(t,s,n)):(null==q||q(u),x(!q,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==K||K(u))}},Ze=u.useState(null),et=(0,s.A)(Ze,2),tt=et[0],nt=et[1];u.useEffect(function(){if(null!==tt){var e=ze.indexOf(tt);e>=0&&ye.current.focus(e)}nt(null)},[tt]);var rt=u.useMemo(function(){return(!Me||null!==_e)&&Me},[Me,_e]),ot=d(function(e,t){Xe(e,t),null==W||W($e(ze))}),it=-1!==Ke;u.useEffect(function(){if(!it){var e=ze.lastIndexOf(Ge);ye.current.focus(e)}},[it]);var at=u.useMemo(function(){return(0,i.A)(Je).sort(function(e,t){return e-t})},[Je]),st=u.useMemo(function(){return Se?[at[0],at[at.length-1]]:[Ee,at[0]]},[at,Se,Ee]),lt=(0,s.A)(st,2),ct=lt[0],ut=lt[1];u.useImperativeHandle(t,function(){return{focus:function(){ye.current.focus(0)},blur:function(){var e,t=document.activeElement;null!==(e=be.current)&&void 0!==e&&e.contains(t)&&(null==t||t.blur())}}}),u.useEffect(function(){C&&ye.current.focus(0)},[]);var dt=u.useMemo(function(){return{min:Ee,max:Te,direction:we,disabled:w,keyboard:S,step:_e,included:te,includedStart:ct,includedEnd:ut,range:Se,tabIndex:he,ariaLabelForHandle:me,ariaLabelledByForHandle:ge,ariaValueTextFormatterForHandle:ve,styles:y||{},classNames:v||{}}},[Ee,Te,we,w,S,_e,te,ct,ut,Se,he,me,ge,ve,y,v]);return u.createElement(N.Provider,{value:dt},u.createElement("div",{ref:be,className:c()(l,f,(0,o.A)((0,o.A)((0,o.A)((0,o.A)({},"".concat(l,"-disabled"),w),"".concat(l,"-vertical"),Z),"".concat(l,"-horizontal"),!Z),"".concat(l,"-with-marks"),je.length)),style:g,onMouseDown:function(e){e.preventDefault();var t,n=be.current.getBoundingClientRect(),r=n.width,o=n.height,i=n.left,a=n.top,s=n.bottom,l=n.right,c=e.clientX,u=e.clientY;switch(we){case"btt":t=(s-u)/o;break;case"ttb":t=(u-a)/o;break;case"rtl":t=(l-c)/r;break;default:t=(c-i)/r}Qe(De(Ee+t*(Te-Ee)),e)}},u.createElement("div",{className:c()("".concat(l,"-rail"),null==v?void 0:v.rail),style:(0,r.A)((0,r.A)({},ie),null==y?void 0:y.rail)}),!1!==fe&&u.createElement($,{prefixCls:l,style:re,values:ze,startPoint:ne,onStartMove:rt?ot:void 0}),u.createElement(H,{prefixCls:l,marks:je,dots:ce,style:ae,activeStyle:se}),u.createElement(R,{ref:ye,prefixCls:l,style:oe,values:Je,draggingIndex:Ke,draggingDelete:Ye,onStartMove:ot,onOffsetChange:function(e,t){if(!w){var n=Re(ze,e,t);null==W||W($e(ze)),Ve(n.values),nt(n.value)}},onFocus:M,onBlur:O,handleRender:ue,activeHandleRender:de,onChangeComplete:Ue,onDelete:Ce?function(e){if(!(w||!Ce||ze.length<=Oe)){var t=(0,i.A)(ze);t.splice(e,1),null==W||W($e(t)),Ve(t);var n=Math.max(0,e-1);ye.current.hideHelp(),ye.current.focus(n)}}:void 0}),u.createElement(F,{prefixCls:l,marks:je,onClick:Qe})))}),W=U},57787:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),t.isFragment=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case d:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case u:case h:case p:case s:return e;default:return t}}case r:return t}}}(e)===o}},66351:function(e,t,n){"use strict";e.exports=n(57787)},34798:function(e,t,n){var r=n(96540),o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function s(e){var t=r.useRef(e),n=r.useRef(function(e){t.current&&t.current(e)});return t.current=e,n.current}var l=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},c=function(e){return"touches"in e},u=function(e){return e&&e.ownerDocument.defaultView||self},d=function(e,t,n){var r=e.getBoundingClientRect(),o=c(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:l((o.pageX-(r.left+u(e).pageXOffset))/r.width),top:l((o.pageY-(r.top+u(e).pageYOffset))/r.height)}},f=function(e){!c(e)&&e.preventDefault()},p=o.default.memo(function(e){var t=e.onMove,n=e.onKey,l=a(e,["onMove","onKey"]),p=r.useRef(null),h=s(t),m=s(n),g=r.useRef(null),v=r.useRef(!1),y=r.useMemo(function(){var e=function(e){f(e),(c(e)?e.touches.length>0:e.buttons>0)&&p.current?h(d(p.current,e,g.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=v.current,o=u(p.current),i=n?o.addEventListener:o.removeEventListener;i(r?"touchmove":"mousemove",e),i(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=p.current;if(r&&(f(t),!function(e,t){return t&&!c(e)}(t,v.current)&&r)){if(c(t)){v.current=!0;var o=t.changedTouches||[];o.length&&(g.current=o[0].identifier)}r.focus(),h(d(r,t,g.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),m({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]},[m,h]),b=y[0],w=y[1],k=y[2];return r.useEffect(function(){return k},[k]),o.default.createElement("div",i({},l,{onTouchStart:b,onMouseDown:b,className:"react-colorful__interactive",ref:p,onKeyDown:w,tabIndex:0,role:"slider"}))}),h=function(e){return e.filter(Boolean).join(" ")},m=function(e){var t=e.color,n=e.left,r=e.top,i=void 0===r?.5:r,a=h(["react-colorful__pointer",e.className]);return o.default.createElement("div",{className:a,style:{top:100*i+"%",left:100*n+"%"}},o.default.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},g=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},v={grad:.9,turn:360,rad:360/(2*Math.PI)},y=function(e){return D(b(e))},b=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?g(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?g(parseInt(e.substring(6,8),16)/255,2):1}},w=function(e,t){return void 0===t&&(t="deg"),Number(e)*(v[t]||1)},k=function(e){var t=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?S({h:w(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},x=k,S=function(e){var t=e.s,n=e.l;return{h:e.h,s:(t*=(n<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}},C=function(e){return I(E(e))},M=function(e){var t=e.s,n=e.v,r=e.a,o=(200-t)*n/100;return{h:g(e.h),s:g(o>0&&o<200?t*n/100/(o<=100?o:200-o)*100:0),l:g(o/2),a:g(r,2)}},O=function(e){var t=M(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},A=function(e){var t=M(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},E=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var i=Math.floor(t),a=r*(1-n),s=r*(1-(t-i)*n),l=r*(1-(1-t+i)*n),c=i%6;return{r:g(255*[r,s,a,a,l,r][c]),g:g(255*[l,r,r,s,a,a][c]),b:g(255*[a,a,l,r,r,s][c]),a:g(o,2)}},T=function(e){var t=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?R({h:w(t[1],t[2]),s:Number(t[3]),v:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},_=T,N=function(e){var t=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?D({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}},j=N,P=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},I=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,i=o<1?P(g(255*o)):"";return"#"+P(t)+P(n)+P(r)+i},D=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,i=Math.max(t,n,r),a=i-Math.min(t,n,r),s=a?i===t?(n-r)/a:i===n?2+(r-t)/a:4+(t-n)/a:0;return{h:g(60*(s<0?s+6:s)),s:g(i?a/i*100:0),v:g(i/255*100),a:o}},R=function(e){return{h:g(e.h),s:g(e.s),v:g(e.v),a:g(e.a,2)}},L=o.default.memo(function(e){var t=e.hue,n=e.onChange,r=h(["react-colorful__hue",e.className]);return o.default.createElement("div",{className:r},o.default.createElement(p,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:l(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":g(t),"aria-valuemax":"360","aria-valuemin":"0"},o.default.createElement(m,{className:"react-colorful__hue-pointer",left:t/360,color:O({h:t,s:100,v:100,a:1})})))}),F=o.default.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:O({h:t.h,s:100,v:100,a:1})};return o.default.createElement("div",{className:"react-colorful__saturation",style:r},o.default.createElement(p,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:l(t.s+100*e.left,0,100),v:l(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+g(t.s)+"%, Brightness "+g(t.v)+"%"},o.default.createElement(m,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:O(t)})))}),B=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},H=function(e,t){return e.replace(/\s/g,"")===t.replace(/\s/g,"")},z=function(e,t){return e.toLowerCase()===t.toLowerCase()||B(b(e),b(t))};function $(e,t,n){var o=s(n),i=r.useState(function(){return e.toHsva(t)}),a=i[0],l=i[1],c=r.useRef({color:t,hsva:a});r.useEffect(function(){if(!e.equal(t,c.current.color)){var n=e.toHsva(t);c.current={hsva:n,color:t},l(n)}},[t,e]),r.useEffect(function(){var t;B(a,c.current.hsva)||e.equal(t=e.fromHsva(a),c.current.color)||(c.current={hsva:a,color:t},o(t))},[a,e,o]);var u=r.useCallback(function(e){l(function(t){return Object.assign({},t,e)})},[]);return[a,u]}var V,U="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,W=new Map,q=function(e){U(function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!W.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',W.set(t,r);var o=V||n.nc;o&&r.setAttribute("nonce",o),t.head.appendChild(r)}},[])},K=function(e){var t=e.className,n=e.colorModel,s=e.color,l=void 0===s?n.defaultColor:s,c=e.onChange,u=a(e,["className","colorModel","color","onChange"]),d=r.useRef(null);q(d);var f=$(n,l,c),p=f[0],m=f[1],g=h(["react-colorful",t]);return o.default.createElement("div",i({},u,{ref:d,className:g}),o.default.createElement(F,{hsva:p,onChange:m}),o.default.createElement(L,{hue:p.h,onChange:m,className:"react-colorful__last-control"}))},G={defaultColor:"000",toHsva:y,fromHsva:function(e){return C({h:e.h,s:e.s,v:e.v,a:1})},equal:z},Y=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+A(Object.assign({},n,{a:0}))+", "+A(Object.assign({},n,{a:1}))+")"},a=h(["react-colorful__alpha",t]),s=g(100*n.a);return o.default.createElement("div",{className:a},o.default.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),o.default.createElement(p,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:l(n.a+e.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},o.default.createElement(m,{className:"react-colorful__alpha-pointer",left:n.a,color:A(n)})))},J=function(e){var t=e.className,n=e.colorModel,s=e.color,l=void 0===s?n.defaultColor:s,c=e.onChange,u=a(e,["className","colorModel","color","onChange"]),d=r.useRef(null);q(d);var f=$(n,l,c),p=f[0],m=f[1],g=h(["react-colorful",t]);return o.default.createElement("div",i({},u,{ref:d,className:g}),o.default.createElement(F,{hsva:p,onChange:m}),o.default.createElement(L,{hue:p.h,onChange:m}),o.default.createElement(Y,{hsva:p,onChange:m,className:"react-colorful__last-control"}))},X={defaultColor:"0001",toHsva:y,fromHsva:C,equal:z},Q={defaultColor:{h:0,s:0,l:0,a:1},toHsva:S,fromHsva:M,equal:B},Z={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:k,fromHsva:A,equal:H},ee={defaultColor:{h:0,s:0,l:0},toHsva:function(e){return S({h:e.h,s:e.s,l:e.l,a:1})},fromHsva:function(e){return{h:(t=M(e)).h,s:t.s,l:t.l};var t},equal:B},te={defaultColor:"hsl(0, 0%, 0%)",toHsva:x,fromHsva:O,equal:H},ne={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(e){return e},fromHsva:R,equal:B},re={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:T,fromHsva:function(e){var t=R(e);return"hsva("+t.h+", "+t.s+"%, "+t.v+"%, "+t.a+")"},equal:H},oe={defaultColor:{h:0,s:0,v:0},toHsva:function(e){return{h:e.h,s:e.s,v:e.v,a:1}},fromHsva:function(e){var t=R(e);return{h:t.h,s:t.s,v:t.v}},equal:B},ie={defaultColor:"hsv(0, 0%, 0%)",toHsva:_,fromHsva:function(e){var t=R(e);return"hsv("+t.h+", "+t.s+"%, "+t.v+"%)"},equal:H},ae={defaultColor:{r:0,g:0,b:0,a:1},toHsva:D,fromHsva:E,equal:B},se={defaultColor:"rgba(0, 0, 0, 1)",toHsva:N,fromHsva:function(e){var t=E(e);return"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")"},equal:H},le={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return D({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=E(e)).r,g:t.g,b:t.b};var t},equal:B},ce={defaultColor:"rgb(0, 0, 0)",toHsva:j,fromHsva:function(e){var t=E(e);return"rgb("+t.r+", "+t.g+", "+t.b+")"},equal:H},ue=/^#?([0-9A-F]{3,8})$/i,de=function(e){var t=e.color,n=void 0===t?"":t,l=e.onChange,c=e.onBlur,u=e.escape,d=e.validate,f=e.format,p=e.process,h=a(e,["color","onChange","onBlur","escape","validate","format","process"]),m=r.useState(function(){return u(n)}),g=m[0],v=m[1],y=s(l),b=s(c),w=r.useCallback(function(e){var t=u(e.target.value);v(t),d(t)&&y(p?p(t):t)},[u,p,d,y]),k=r.useCallback(function(e){d(e.target.value)||v(u(n)),b(e)},[n,u,d,b]);return r.useEffect(function(){v(u(n))},[n,u]),o.default.createElement("input",i({},h,{value:f?f(g):g,spellCheck:"false",onChange:w,onBlur:k}))},fe=function(e){return"#"+e};t.HexAlphaColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:X}))},t.HexColorInput=function(e){var t=e.prefixed,n=e.alpha,s=a(e,["prefixed","alpha"]),l=r.useCallback(function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),c=r.useCallback(function(e){return function(e,t){var n=ue.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,n)},[n]);return o.default.createElement(de,i({},s,{escape:l,format:t?fe:void 0,process:fe,validate:c}))},t.HexColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:G}))},t.HslColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:ee}))},t.HslStringColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:te}))},t.HslaColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:Q}))},t.HslaStringColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:Z}))},t.HsvColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:oe}))},t.HsvStringColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:ie}))},t.HsvaColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:ne}))},t.HsvaStringColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:re}))},t.RgbColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:le}))},t.RgbStringColorPicker=function(e){return o.default.createElement(K,i({},e,{colorModel:ce}))},t.RgbaColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:ae}))},t.RgbaStringColorPicker=function(e){return o.default.createElement(J,i({},e,{colorModel:se}))},t.setNonce=function(e){V=e}},22799:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case m:case l:return e;default:return t}}case o:return t}}}function x(e){return k(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||k(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===f},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===g},t.isMemo=function(e){return k(e)===m},t.isPortal=function(e){return k(e)===o},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===a},t.isSuspense=function(e){return k(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===s||e===a||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=k},44363:function(e,t,n){"use strict";e.exports=n(22799)},73729:function(e,t,n){"use strict";e.exports=n(37372)},12689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},useCreatable:function(){return h}});var r=n(58168),o=n(96540),i=n(42173),a=n(52836),s=n(89379),l=n(45458),c=n(80045),u=n(28581),d=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],f=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(t.getOptionValue(e)).toLowerCase(),o=String(t.getOptionLabel(e)).toLowerCase();return r===n||o===n},p={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some(function(t){return f(e,t,r)})||n.some(function(t){return f(e,t,r)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function h(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,r=e.createOptionPosition,a=void 0===r?"last":r,f=e.formatCreateLabel,h=void 0===f?p.formatCreateLabel:f,m=e.isValidNewOption,g=void 0===m?p.isValidNewOption:m,v=e.getNewOptionData,y=void 0===v?p.getNewOptionData:v,b=e.onCreateOption,w=e.options,k=void 0===w?[]:w,x=e.onChange,S=(0,c.A)(e,d),C=S.getOptionValue,M=void 0===C?i.g:C,O=S.getOptionLabel,A=void 0===O?i.b:O,E=S.inputValue,T=S.isLoading,_=S.isMulti,N=S.value,j=S.name,P=(0,o.useMemo)(function(){return g(E,(0,u.H)(N),k,{getOptionValue:M,getOptionLabel:A})?y(E,h(E)):void 0},[h,y,A,M,E,g,k,N]),I=(0,o.useMemo)(function(){return!n&&T||!P?k:"first"===a?[P].concat((0,l.A)(k)):[].concat((0,l.A)(k),[P])},[n,a,T,P,k]),D=(0,o.useCallback)(function(e,t){if("select-option"!==t.action)return x(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==P)x(e,t);else if(b)b(E);else{var r=y(E,E),o={action:"create-option",name:j,option:r};x((0,u.D)(_,[].concat((0,l.A)((0,u.H)(N)),[r]),r),o)}},[y,E,_,j,P,b,x,N]);return(0,s.A)((0,s.A)({},S),{},{options:I,onChange:D})}n(40961),n(27003);var m=(0,o.forwardRef)(function(e,t){var n=h((0,a.u)(e));return o.createElement(i.S,(0,r.A)({ref:t},n))})},42173:function(e,t,n){"use strict";n.d(t,{S:function(){return ge},b:function(){return X},c:function(){return j},d:function(){return te},g:function(){return Q},m:function(){return ee}});var r=n(58168),o=n(89379),i=n(20816);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.A)(r.key),r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}var u=n(82284);var d=n(45458),f=n(96540),p=n(28581),h=n(17437),m=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function g(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(o=t[n])||m(r)&&m(o)))return!1;var r,o;return!0}for(var v=n(80045),y={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},b=function(e){return(0,h.Y)("span",(0,r.A)({css:y},e))},w={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,o=e.context,i=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return i?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,o=e.labels,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return"option ".concat(r,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,o=e.label,i=void 0===o?"":o,a=e.selectValue,s=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&a)return"value ".concat(i," focused, ").concat(u(a,n),".");if("menu"===t&&c){var d=s?" disabled":"",f="".concat(l?" selected":"").concat(d);return"".concat(i).concat(f,", ").concat(u(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},k=function(e){var t=e.ariaSelection,n=e.focusedOption,r=e.focusedValue,i=e.focusableOptions,a=e.isFocused,s=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,g=l.isMulti,v=l.isOptionDisabled,y=l.isSearchable,k=l.menuIsOpen,x=l.options,S=l.screenReaderStatus,C=l.tabSelectsValue,M=l.isLoading,O=l["aria-label"],A=l["aria-live"],E=(0,f.useMemo)(function(){return(0,o.A)((0,o.A)({},w),d||{})},[d]),T=(0,f.useMemo)(function(){var e,n="";if(t&&E.onChange){var r=t.option,i=t.options,a=t.removedValue,l=t.removedValues,c=t.value,u=a||r||(e=c,Array.isArray(e)?null:e),d=u?p(u):"",f=i||l||void 0,h=f?f.map(p):[],m=(0,o.A)({isDisabled:u&&v(u,s),label:d,labels:h},t);n=E.onChange(m)}return n},[t,E,v,s,p]),_=(0,f.useMemo)(function(){var e="",t=n||r,o=!!(n&&s&&s.includes(n));if(t&&E.onFocus){var a={focused:t,label:p(t),isDisabled:v(t,s),isSelected:o,options:i,context:t===n?"menu":"value",selectValue:s,isAppleDevice:u};e=E.onFocus(a)}return e},[n,r,p,v,E,i,s,u]),N=(0,f.useMemo)(function(){var e="";if(k&&x.length&&!M&&E.onFilter){var t=S({count:i.length});e=E.onFilter({inputValue:m,resultsMessage:t})}return e},[i,m,k,E,x,S,M]),j="initial-input-focus"===(null==t?void 0:t.action),P=(0,f.useMemo)(function(){var e="";if(E.guidance){var t=r?"value":k?"menu":"input";e=E.guidance({"aria-label":O,context:t,isDisabled:n&&v(n,s),isMulti:g,isSearchable:y,tabSelectsValue:C,isInitialFocus:j})}return e},[O,n,r,g,v,y,k,E,s,C,j]),I=(0,h.Y)(f.Fragment,null,(0,h.Y)("span",{id:"aria-selection"},T),(0,h.Y)("span",{id:"aria-focused"},_),(0,h.Y)("span",{id:"aria-results"},N),(0,h.Y)("span",{id:"aria-guidance"},P));return(0,h.Y)(f.Fragment,null,(0,h.Y)(b,{id:c},j&&I),(0,h.Y)(b,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!j&&I))},x=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],S=new RegExp("["+x.map(function(e){return e.letters}).join("")+"]","g"),C={},M=0;M<x.length;M++)for(var O=x[M],A=0;A<O.letters.length;A++)C[O.letters[A]]=O.base;var E=function(e){return e.replace(S,function(e){return C[e]})},T=function(e,t){void 0===t&&(t=g);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}(E),_=function(e){return e.replace(/^\s+|\s+$/g,"")},N=function(e){return"".concat(e.label," ").concat(e.value)},j=function(e){return function(t,n){if(t.data.__isNew__)return!0;var r=(0,o.A)({ignoreCase:!0,ignoreAccents:!0,stringify:N,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,l=r.trim,c=r.matchFrom,u=l?_(n):n,d=l?_(s(t)):s(t);return i&&(u=u.toLowerCase(),d=d.toLowerCase()),a&&(u=T(u),d=E(d)),"start"===c?d.substr(0,u.length)===u:d.indexOf(u)>-1}},P=["innerRef"];function I(e){var t=e.innerRef,n=(0,v.A)(e,P),o=(0,p.r)(n,"onExited","in","enter","exit","appear");return(0,h.Y)("input",(0,r.A)({ref:t},o,{css:(0,h.AH)({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var D=["boxSizing","height","overflow","paddingRight","position"],R={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function L(e){e.preventDefault()}function F(e){e.stopPropagation()}function B(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function H(){return"ontouchstart"in window||navigator.maxTouchPoints}var z=!("undefined"==typeof window||!window.document||!window.document.createElement),$=0,V={capture:!1,passive:!1},U=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},W={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function q(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,o=function(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,o=e.onTopArrive,i=e.onTopLeave,a=(0,f.useRef)(!1),s=(0,f.useRef)(!1),l=(0,f.useRef)(0),c=(0,f.useRef)(null),u=(0,f.useCallback)(function(e,t){if(null!==c.current){var l=c.current,u=l.scrollTop,d=l.scrollHeight,f=l.clientHeight,p=c.current,h=t>0,m=d-f-u,g=!1;m>t&&a.current&&(r&&r(e),a.current=!1),h&&s.current&&(i&&i(e),s.current=!1),h&&t>m?(n&&!a.current&&n(e),p.scrollTop=d,g=!0,a.current=!0):!h&&-t>u&&(o&&!s.current&&o(e),p.scrollTop=0,g=!0,s.current=!0),g&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}},[n,r,o,i]),d=(0,f.useCallback)(function(e){u(e,e.deltaY)},[u]),h=(0,f.useCallback)(function(e){l.current=e.changedTouches[0].clientY},[]),m=(0,f.useCallback)(function(e){var t=l.current-e.changedTouches[0].clientY;u(e,t)},[u]),g=(0,f.useCallback)(function(e){if(e){var t=!!p.s&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",m,t)}},[m,h,d]),v=(0,f.useCallback)(function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",m,!1))},[m,h,d]);return(0,f.useEffect)(function(){if(t){var e=c.current;return g(e),function(){v(e)}}},[t,g,v]),function(e){c.current=e}}({isEnabled:void 0===r||r,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),i=function(e){var t=e.isEnabled,n=e.accountForScrollbars,r=void 0===n||n,o=(0,f.useRef)({}),i=(0,f.useRef)(null),a=(0,f.useCallback)(function(e){if(z){var t=document.body,n=t&&t.style;if(r&&D.forEach(function(e){var t=n&&n[e];o.current[e]=t}),r&&$<1){var i=parseInt(o.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+i||0;Object.keys(R).forEach(function(e){var t=R[e];n&&(n[e]=t)}),n&&(n.paddingRight="".concat(s,"px"))}t&&H()&&(t.addEventListener("touchmove",L,V),e&&(e.addEventListener("touchstart",B,V),e.addEventListener("touchmove",F,V))),$+=1}},[r]),s=(0,f.useCallback)(function(e){if(z){var t=document.body,n=t&&t.style;$=Math.max($-1,0),r&&$<1&&D.forEach(function(e){var t=o.current[e];n&&(n[e]=t)}),t&&H()&&(t.removeEventListener("touchmove",L,V),e&&(e.removeEventListener("touchstart",B,V),e.removeEventListener("touchmove",F,V)))}},[r]);return(0,f.useEffect)(function(){if(t){var e=i.current;return a(e),function(){s(e)}}},[t,a,s]),function(e){i.current=e}}({isEnabled:n});return(0,h.Y)(f.Fragment,null,n&&(0,h.Y)("div",{onClick:U,css:W}),t(function(e){o(e),i(e)}))}var K={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},G=function(e){var t=e.name,n=e.onFocus;return(0,h.Y)("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:K,value:"",onChange:function(){}})};function Y(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function J(){return Y(/^Mac/i)}var X=function(e){return e.label},Q=function(e){return e.value},Z={clearIndicator:p.a,container:p.b,control:p.d,dropdownIndicator:p.e,group:p.g,groupHeading:p.f,indicatorsContainer:p.i,indicatorSeparator:p.h,input:p.j,loadingIndicator:p.l,loadingMessage:p.k,menu:p.m,menuList:p.n,menuPortal:p.o,multiValue:p.p,multiValueLabel:p.q,multiValueRemove:p.t,noOptionsMessage:p.u,option:p.v,placeholder:p.w,singleValue:p.x,valueContainer:p.y};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.A)({},e);return Object.keys(t).forEach(function(r){var o=r;e[o]?n[o]=function(n,r){return t[o](e[o](n,r),r)}:n[o]=t[o]}),n}var te={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ne={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:(0,p.z)(),captureMenuScroll:!(0,p.z)(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:j(),formatGroupLabel:function(e){return e.label},getOptionLabel:X,getOptionValue:Q,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!(0,p.A)(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function re(e,t,n,r){return{type:"option",data:t,isDisabled:de(e,t,n),isSelected:fe(e,t,n),label:ce(e,t),value:ue(e,t),index:r}}function oe(e,t){return e.options.map(function(n,r){if("options"in n){var o=n.options.map(function(n,r){return re(e,n,t,r)}).filter(function(t){return se(e,t)});return o.length>0?{type:"group",data:n,options:o,index:r}:void 0}var i=re(e,n,t,r);return se(e,i)?i:void 0}).filter(p.K)}function ie(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,(0,d.A)(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function ae(e,t){return e.reduce(function(e,n){return"group"===n.type?e.push.apply(e,(0,d.A)(n.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}}))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e},[])}function se(e,t){var n=e.inputValue,r=void 0===n?"":n,o=t.data,i=t.isSelected,a=t.label,s=t.value;return(!he(e)||!i)&&pe(e,{label:a,value:s,data:o},r)}var le=function(e,t){var n;return(null===(n=e.find(function(e){return e.data===t}))||void 0===n?void 0:n.id)||null},ce=function(e,t){return e.getOptionLabel(t)},ue=function(e,t){return e.getOptionValue(t)};function de(e,t,n){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function fe(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=ue(e,t);return n.some(function(t){return ue(e,t)===r})}function pe(e,t,n){return!e.filterOption||e.filterOption(t,n)}var he=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},me=1,ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(h,e);var t,n,i=(t=h,n=c(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"==(0,u.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=i.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=J()||Y(/^iPhone/i)||Y(/^iPad/i)||J()&&navigator.maxTouchPoints>1,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,o=r.onChange,i=r.name;n.name=i,t.ariaOnChange(e,n),o(e,n)},t.setValue=function(e,n,r){var o=t.props,i=o.closeMenuOnSelect,a=o.isMulti,s=o.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:s}),i&&(t.setState({inputIsHiddenAfterUpdate:!a}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,o=n.isMulti,i=n.name,a=t.state.selectValue,s=o&&t.isOptionSelected(e,a),l=t.isOptionDisabled(e,a);if(s){var c=t.getOptionValue(e);t.setValue((0,p.B)(a.filter(function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange((0,p.C)(e),{action:"select-option",option:e,name:i});o?t.setValue((0,p.B)([].concat((0,d.A)(a),[e])),"select-option",e):t.setValue((0,p.C)(e),"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,o=t.getOptionValue(e),i=r.filter(function(e){return t.getOptionValue(e)!==o}),a=(0,p.D)(n,i,i[0]||null);t.onChange(a,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange((0,p.D)(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],o=n.slice(0,n.length-1),i=(0,p.D)(e,o,o[0]||null);t.onChange(i,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return le(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return ae(oe(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.E.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return ce(t.props,e)},t.getOptionValue=function(e){return ue(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,o=Z[e](n,r);o.boxSizing="border-box";var i=t.props.styles[e];return i?i(o,n):o},t.getClassNames=function(e,n){var r,o;return null===(r=(o=t.props.classNames)[e])||void 0===r?void 0:r.call(o,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return(0,p.F)(t.props)},t.buildCategorizedOptions=function(){return oe(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return ie(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:(0,o.A)({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||t.props.isDisabled)){var n=t.props,r=n.isMulti,o=n.menuIsOpen;t.focusInput(),o?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(e){"boolean"==typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&(0,p.G)(e.target)&&t.props.onMenuClose():"function"==typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var o=Math.abs(r.clientX-t.initialTouchX),i=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=o>5||i>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return he(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,o=n.backspaceRemovesValue,i=n.escapeClearsValue,a=n.inputValue,s=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,d=n.tabSelectsValue,f=n.openMenuOnFocus,p=t.state,h=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||a)return;t.focusValue("previous");break;case"ArrowRight":if(!r||a)return;t.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)t.removeValue(m);else{if(!o)return;r?t.popValue():s&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!d||!h||f&&t.isOptionSelected(h,g))return;t.selectOption(h);break;case"Enter":if(229===e.keyCode)break;if(c){if(!h)return;if(t.isComposing)return;t.selectOption(h);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:a}),t.onMenuClose()):s&&i&&t.clearValue();break;case" ":if(a)return;if(!c){t.openMenu("first");break}if(!h)return;t.selectOption(h);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++me),t.state.selectValue=(0,p.H)(e.value),e.menuIsOpen&&t.state.selectValue.length){var n=t.getFocusableOptionsWithIds(),r=t.buildFocusableOptions(),a=r.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=n,t.state.focusedOption=r[a],t.state.focusedOptionId=le(n,r[a])}return t}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(h,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&(0,p.I)(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,o=this.state.isFocused;(o&&!n&&e.isDisabled||o&&r&&!e.menuIsOpen)&&this.focusInput(),o&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):o||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&((0,p.I)(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,o=n.isFocused,i=this.buildFocusableOptions(),a="first"===e?0:i.length-1;if(!this.props.isMulti){var s=i.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:i[a],focusedOptionId:this.getFocusedOptionId(i[a])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var o=n.indexOf(r);r||(o=-1);var i=n.length-1,a=-1;if(n.length){switch(e){case"previous":a=0===o?0:-1===o?i:o-1;break;case"next":o>-1&&o<i&&(a=o+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var o=0,i=r.indexOf(n);n||(i=-1),"up"===e?o=i>0?i-1:r.length-1:"down"===e?o=(i+1)%r.length:"pageup"===e?(o=i-t)<0&&(o=0):"pagedown"===e?(o=i+t)>r.length-1&&(o=r.length-1):"last"===e&&(o=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[o],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[o])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(te):(0,o.A)((0,o.A)({},te),this.props.theme):te}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,o=this.getValue,i=this.selectOption,a=this.setValue,s=this.props,l=s.isMulti,c=s.isRtl,u=s.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:o,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:i,selectProps:s,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return de(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return fe(this.props,e,t)}},{key:"filterOption",value:function(e,t){return pe(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,i=e.inputId,a=e.inputValue,s=e.tabIndex,l=e.form,c=e.menuIsOpen,u=e.required,d=this.getComponents().Input,h=this.state,m=h.inputIsHidden,g=h.ariaSelection,v=this.commonProps,y=i||this.getElementId("input"),b=(0,o.A)((0,o.A)((0,o.A)({"aria-autocomplete":"list","aria-expanded":c,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":u,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},c&&{"aria-controls":this.getElementId("listbox")}),!n&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null==g?void 0:g.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return n?f.createElement(d,(0,r.A)({},v,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:y,innerRef:this.getInputRef,isDisabled:t,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:l,type:"text",value:a},b)):f.createElement(I,(0,r.A)({id:y,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:p.J,onFocus:this.onInputFocus,disabled:t,tabIndex:s,inputMode:"none",form:l,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),n=t.MultiValue,o=t.MultiValueContainer,i=t.MultiValueLabel,a=t.MultiValueRemove,s=t.SingleValue,l=t.Placeholder,c=this.commonProps,u=this.props,d=u.controlShouldRenderValue,p=u.isDisabled,h=u.isMulti,m=u.inputValue,g=u.placeholder,v=this.state,y=v.selectValue,b=v.focusedValue,w=v.isFocused;if(!this.hasValue()||!d)return m?null:f.createElement(l,(0,r.A)({},c,{key:"placeholder",isDisabled:p,isFocused:w,innerProps:{id:this.getElementId("placeholder")}}),g);if(h)return y.map(function(t,s){var l=t===b,u="".concat(e.getOptionLabel(t),"-").concat(e.getOptionValue(t));return f.createElement(n,(0,r.A)({},c,{components:{Container:o,Label:i,Remove:a},isFocused:l,isDisabled:p,key:u,index:s,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault()}},data:t}),e.formatOptionLabel(t,"value"))});if(m)return null;var k=y[0];return f.createElement(s,(0,r.A)({},c,{data:k,isDisabled:p}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!e||o||!this.hasValue()||i)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(e,(0,r.A)({},t,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,a=this.state.isFocused;return e&&i?f.createElement(e,(0,r.A)({},t,{innerProps:{"aria-hidden":"true"},isDisabled:o,isFocused:a})):null}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var o=this.commonProps,i=this.props.isDisabled,a=this.state.isFocused;return f.createElement(n,(0,r.A)({},o,{isDisabled:i,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,o=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(e,(0,r.A)({},t,{innerProps:i,isDisabled:n,isFocused:o}))}},{key:"renderMenu",value:function(){var e=this,t=this.getComponents(),n=t.Group,o=t.GroupHeading,i=t.Menu,a=t.MenuList,s=t.MenuPortal,l=t.LoadingMessage,c=t.NoOptionsMessage,u=t.Option,d=this.commonProps,h=this.state.focusedOption,m=this.props,g=m.captureMenuScroll,v=m.inputValue,y=m.isLoading,b=m.loadingMessage,w=m.minMenuHeight,k=m.maxMenuHeight,x=m.menuIsOpen,S=m.menuPlacement,C=m.menuPosition,M=m.menuPortalTarget,O=m.menuShouldBlockScroll,A=m.menuShouldScrollIntoView,E=m.noOptionsMessage,T=m.onMenuScrollToTop,_=m.onMenuScrollToBottom;if(!x)return null;var N,j=function(t,n){var o=t.type,i=t.data,a=t.isDisabled,s=t.isSelected,l=t.label,c=t.value,p=h===i,m=a?void 0:function(){return e.onOptionHover(i)},g=a?void 0:function(){return e.selectOption(i)},v="".concat(e.getElementId("option"),"-").concat(n),y={id:v,onClick:g,onMouseMove:m,onMouseOver:m,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:s};return f.createElement(u,(0,r.A)({},d,{innerProps:y,data:i,isDisabled:a,isSelected:s,key:v,label:l,type:o,value:c,isFocused:p,innerRef:p?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())N=this.getCategorizedOptions().map(function(t){if("group"===t.type){var i=t.data,a=t.options,s=t.index,l="".concat(e.getElementId("group"),"-").concat(s),c="".concat(l,"-heading");return f.createElement(n,(0,r.A)({},d,{key:l,data:i,options:a,Heading:o,headingProps:{id:c,data:t.data},label:e.formatGroupLabel(t.data)}),t.options.map(function(e){return j(e,"".concat(s,"-").concat(e.index))}))}if("option"===t.type)return j(t,"".concat(t.index))});else if(y){var P=b({inputValue:v});if(null===P)return null;N=f.createElement(l,d,P)}else{var I=E({inputValue:v});if(null===I)return null;N=f.createElement(c,d,I)}var D={minMenuHeight:w,maxMenuHeight:k,menuPlacement:S,menuPosition:C,menuShouldScrollIntoView:A},R=f.createElement(p.M,(0,r.A)({},d,D),function(t){var n=t.ref,o=t.placerProps,s=o.placement,l=o.maxHeight;return f.createElement(i,(0,r.A)({},d,D,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:y,placement:s}),f.createElement(q,{captureEnabled:g,onTopArrive:T,onBottomArrive:_,lockEnabled:O},function(t){return f.createElement(a,(0,r.A)({},d,{innerRef:function(n){e.getMenuListRef(n),t(n)},innerProps:{role:"listbox","aria-multiselectable":d.isMulti,id:e.getElementId("listbox")},isLoading:y,maxHeight:l,focusedOption:h}),N)}))});return M||"fixed"===C?f.createElement(s,(0,r.A)({},d,{appendTo:M,controlElement:this.controlRef,menuPlacement:S,menuPosition:C}),R):R}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,r=t.isDisabled,o=t.isMulti,i=t.name,a=t.required,s=this.state.selectValue;if(a&&!this.hasValue()&&!r)return f.createElement(G,{name:i,onFocus:this.onValueInputFocus});if(i&&!r){if(o){if(n){var l=s.map(function(t){return e.getOptionValue(t)}).join(n);return f.createElement("input",{name:i,type:"hidden",value:l})}var c=s.length>0?s.map(function(t,n){return f.createElement("input",{key:"i-".concat(n),name:i,type:"hidden",value:e.getOptionValue(t)})}):f.createElement("input",{name:i,type:"hidden",value:""});return f.createElement("div",null,c)}var u=s[0]?this.getOptionValue(s[0]):"";return f.createElement("input",{name:i,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,n=t.ariaSelection,o=t.focusedOption,i=t.focusedValue,a=t.isFocused,s=t.selectValue,l=this.getFocusableOptions();return f.createElement(k,(0,r.A)({},e,{id:this.getElementId("live-region"),ariaSelection:n,focusedOption:o,focusedValue:i,isFocused:a,selectValue:s,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,n=e.IndicatorsContainer,o=e.SelectContainer,i=e.ValueContainer,a=this.props,s=a.className,l=a.id,c=a.isDisabled,u=a.menuIsOpen,d=this.state.isFocused,p=this.commonProps=this.getCommonProps();return f.createElement(o,(0,r.A)({},p,{className:s,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:d}),this.renderLiveRegion(),f.createElement(t,(0,r.A)({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:d,menuIsOpen:u}),f.createElement(i,(0,r.A)({},p,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(n,(0,r.A)({},p,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,a=t.ariaSelection,s=t.isFocused,l=t.prevWasFocused,c=t.instancePrefix,u=e.options,d=e.value,f=e.menuIsOpen,h=e.inputValue,m=e.isMulti,g=(0,p.H)(d),v={};if(n&&(d!==n.value||u!==n.options||f!==n.menuIsOpen||h!==n.inputValue)){var y=f?function(e,t){return ie(oe(e,t))}(e,g):[],b=f?ae(oe(e,g),"".concat(c,"-option")):[],w=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,g):null,k=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,y);v={selectValue:g,focusedOption:k,focusedOptionId:le(b,k),focusableOptionsWithIds:b,focusedValue:w,clearFocusValueOnUpdate:!1}}var x=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},S=a,C=s&&l;return s&&!C&&(S={value:(0,p.D)(m,g,g[0]||null),options:g,action:"initial-input-focus"},C=!l),"initial-input-focus"===(null==a?void 0:a.action)&&(S=null),(0,o.A)((0,o.A)((0,o.A)({},v),x),{},{prevProps:e,ariaSelection:S,prevWasFocused:C})}}]),h}(f.Component);ge.defaultProps=ne},28581:function(e,t,n){"use strict";n.d(t,{A:function(){return A},B:function(){return D},C:function(){return I},D:function(){return P},E:function(){return v},F:function(){return _e},G:function(){return k},H:function(){return y},I:function(){return M},J:function(){return m},K:function(){return j},M:function(){return W},a:function(){return le},b:function(){return X},c:function(){return Te},d:function(){return pe},e:function(){return se},f:function(){return ge},g:function(){return me},h:function(){return ce},i:function(){return Z},j:function(){return ye},k:function(){return Y},l:function(){return de},m:function(){return V},n:function(){return q},o:function(){return J},p:function(){return xe},q:function(){return Se},r:function(){return R},s:function(){return N},t:function(){return Ce},u:function(){return G},v:function(){return Oe},w:function(){return Ae},x:function(){return Ee},y:function(){return Q},z:function(){return O}});var r=n(89379),o=n(58168),i=n(17437),a=n(80296),s=n(80045),l=n(82284),c=n(64467),u=n(96540),d=n(40961),f=n(18491),p=n(27003),h=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],m=function(){};function g(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=[].concat(r);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&i.push("".concat(g(e,a)));return i.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var y=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===(0,l.A)(e)&&null!==e?[e]:[];var t},b=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=(0,s.A)(e,h);return(0,r.A)({},t)},w=function(e,t,n){var r=e.cx,o=e.getStyles,i=e.getClassNames,a=e.className;return{css:o(t,e),className:r(null!=n?n:{},i(t,e),a)}};function k(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function x(e){return k(e)?window.pageYOffset:e.scrollTop}function S(e,t){k(e)?window.scrollTo(0,t):e.scrollTop=t}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m,o=x(e),i=t-o,a=0;!function t(){var s,l=i*((s=(s=a+=10)/n-1)*s*s+1)+o;S(e,l),a<n?window.requestAnimationFrame(t):r(e)}()}function M(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=t.offsetHeight/3;r.bottom+o>n.bottom?S(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+o,e.scrollHeight)):r.top-o<n.top&&S(e,Math.max(t.offsetTop-o,0))}function O(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function A(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}var E=!1,T={get passive(){return E=!0}},_="undefined"!=typeof window?window:{};_.addEventListener&&_.removeEventListener&&(_.addEventListener("p",m,T),_.removeEventListener("p",m,!1));var N=E;function j(e){return null!=e}function P(e,t,n){return e?t:n}function I(e){return e}function D(e){return e}var R=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.entries(e).filter(function(e){var t=(0,a.A)(e,1)[0];return!n.includes(t)}).reduce(function(e,t){var n=(0,a.A)(t,2),r=n[0],o=n[1];return e[r]=o,e},{})},L=["children","innerProps"],F=["children","innerProps"];var B,H,z,$=function(e){return"auto"===e?"bottom":e},V=function(e,t){var n,o=e.placement,i=e.theme,a=i.borderRadius,s=i.spacing,l=i.colors;return(0,r.A)((n={label:"menu"},(0,c.A)(n,function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(o),"100%"),(0,c.A)(n,"position","absolute"),(0,c.A)(n,"width","100%"),(0,c.A)(n,"zIndex",1),n),t?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},U=(0,u.createContext)(null),W=function(e){var t=e.children,n=e.minMenuHeight,o=e.maxMenuHeight,i=e.menuPlacement,s=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=((0,u.useContext)(U)||{}).setPortalPlacement,f=(0,u.useRef)(null),h=(0,u.useState)(o),m=(0,a.A)(h,2),g=m[0],v=m[1],y=(0,u.useState)(null),b=(0,a.A)(y,2),w=b[0],M=b[1],O=c.spacing.controlHeight;return(0,p.A)(function(){var e=f.current;if(e){var t="fixed"===s,r=function(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,o=e.placement,i=e.shouldScroll,a=e.isFixedPosition,s=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return o;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u,d=l.getBoundingClientRect().height,f=n.getBoundingClientRect(),p=f.bottom,h=f.height,m=f.top,g=n.offsetParent.getBoundingClientRect().top,v=a||k(u=l)?window.innerHeight:u.clientHeight,y=x(l),b=parseInt(getComputedStyle(n).marginBottom,10),w=parseInt(getComputedStyle(n).marginTop,10),M=g-w,O=v-m,A=M+y,E=d-y-m,T=p-v+y+b,_=y+m-w,N=160;switch(o){case"auto":case"bottom":if(O>=h)return{placement:"bottom",maxHeight:t};if(E>=h&&!a)return i&&C(l,T,N),{placement:"bottom",maxHeight:t};if(!a&&E>=r||a&&O>=r)return i&&C(l,T,N),{placement:"bottom",maxHeight:a?O-b:E-b};if("auto"===o||a){var j=t,P=a?M:A;return P>=r&&(j=Math.min(P-b-s,t)),{placement:"top",maxHeight:j}}if("bottom"===o)return i&&S(l,T),{placement:"bottom",maxHeight:t};break;case"top":if(M>=h)return{placement:"top",maxHeight:t};if(A>=h&&!a)return i&&C(l,_,N),{placement:"top",maxHeight:t};if(!a&&A>=r||a&&M>=r){var I=t;return(!a&&A>=r||a&&M>=r)&&(I=a?M-w:A-w),i&&C(l,_,N),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return c}({maxHeight:o,menuEl:e,minHeight:n,placement:i,shouldScroll:l&&!t,isFixedPosition:t,controlHeight:O});v(r.maxHeight),M(r.placement),null==d||d(r.placement)}},[o,i,s,l,n,d,O]),t({ref:f,placerProps:(0,r.A)((0,r.A)({},e),{},{placement:w||$(i),maxHeight:g})})},q=function(e,t){var n=e.maxHeight,o=e.theme.spacing.baseUnit;return(0,r.A)({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:o,paddingTop:o})},K=function(e,t){var n=e.theme,o=n.spacing.baseUnit,i=n.colors;return(0,r.A)({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*o,"px ").concat(3*o,"px")})},G=K,Y=K,J=function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},X=function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},Q=function(e,t){var n=e.theme.spacing,o=e.isMulti,i=e.hasValue,a=e.selectProps.controlShouldRenderValue;return(0,r.A)({alignItems:"center",display:o&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})},Z=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},ee=["size"],te=["innerProps","isRtl","size"],ne={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},re=function(e){var t=e.size,n=(0,s.A)(e,ee);return(0,i.Y)("svg",(0,o.A)({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ne},n))},oe=function(e){return(0,i.Y)(re,(0,o.A)({size:20},e),(0,i.Y)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ie=function(e){return(0,i.Y)(re,(0,o.A)({size:20},e),(0,i.Y)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ae=function(e,t){var n=e.isFocused,o=e.theme,i=o.spacing.baseUnit,a=o.colors;return(0,r.A)({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*i,":hover":{color:n?a.neutral80:a.neutral40}})},se=ae,le=ae,ce=function(e,t){var n=e.isDisabled,o=e.theme,i=o.spacing.baseUnit,a=o.colors;return(0,r.A)({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*i,marginTop:2*i})},ue=(0,i.i7)(B||(H=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],z||(z=H.slice(0)),B=Object.freeze(Object.defineProperties(H,{raw:{value:Object.freeze(z)}})))),de=function(e,t){var n=e.isFocused,o=e.size,i=e.theme,a=i.colors,s=i.spacing.baseUnit;return(0,r.A)({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*s})},fe=function(e){var t=e.delay,n=e.offset;return(0,i.Y)("span",{css:(0,i.AH)({animation:"".concat(ue," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},pe=function(e,t){var n=e.isDisabled,o=e.isFocused,i=e.theme,a=i.colors,s=i.borderRadius,l=i.spacing;return(0,r.A)({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:o?a.primary:a.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:o?a.primary:a.neutral30}})},he=["data"],me=function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},ge=function(e,t){var n=e.theme,o=n.colors,i=n.spacing;return(0,r.A)({label:"group",cursor:"default",display:"block"},t?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},ve=["innerRef","isDisabled","isHidden","inputClassName"],ye=function(e,t){var n=e.isDisabled,o=e.value,i=e.theme,a=i.spacing,s=i.colors;return(0,r.A)((0,r.A)({visibility:n?"hidden":"visible",transform:o?"translateZ(0)":""},we),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:s.neutral80})},be={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},we={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":(0,r.A)({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},be)},ke=function(e){return(0,r.A)({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},be)},xe=function(e,t){var n=e.theme,o=n.spacing,i=n.borderRadius,a=n.colors;return(0,r.A)({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:o.baseUnit/2})},Se=function(e,t){var n=e.theme,o=n.borderRadius,i=n.colors,a=e.cropWithEllipsis;return(0,r.A)({overflow:"hidden",textOverflow:a||void 0===a?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:o/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Ce=function(e,t){var n=e.theme,o=n.spacing,i=n.borderRadius,a=n.colors,s=e.isFocused;return(0,r.A)({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:s?a.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},Me=function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",n,t)},Oe=function(e,t){var n=e.isDisabled,o=e.isFocused,i=e.isSelected,a=e.theme,s=a.spacing,l=a.colors;return(0,r.A)({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?l.primary:o?l.primary25:"transparent",color:n?l.neutral20:i?l.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?l.primary:l.primary50}})},Ae=function(e,t){var n=e.theme,o=n.spacing,i=n.colors;return(0,r.A)({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},Ee=function(e,t){var n=e.isDisabled,o=e.theme,i=o.spacing,a=o.colors;return(0,r.A)({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Te={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||(0,i.Y)(oe,null))},Control:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,a=e.innerRef,s=e.innerProps,l=e.menuIsOpen;return(0,i.Y)("div",(0,o.A)({ref:a},w(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":l}),s,{"aria-disabled":n||void 0}),t)},DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||(0,i.Y)(ie,null))},DownChevron:ie,CrossIcon:oe,Group:function(e){var t=e.children,n=e.cx,r=e.getStyles,a=e.getClassNames,s=e.Heading,l=e.headingProps,c=e.innerProps,u=e.label,d=e.theme,f=e.selectProps;return(0,i.Y)("div",(0,o.A)({},w(e,"group",{group:!0}),c),(0,i.Y)(s,(0,o.A)({},l,{selectProps:f,theme:d,getStyles:r,getClassNames:a,cx:n}),u),(0,i.Y)("div",null,t))},GroupHeading:function(e){var t=b(e);t.data;var n=(0,s.A)(t,he);return(0,i.Y)("div",(0,o.A)({},w(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return(0,i.Y)("span",(0,o.A)({},t,w(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=b(e),a=r.innerRef,l=r.isDisabled,c=r.isHidden,u=r.inputClassName,d=(0,s.A)(r,ve);return(0,i.Y)("div",(0,o.A)({},w(e,"input",{"input-container":!0}),{"data-value":n||""}),(0,i.Y)("input",(0,o.A)({className:t({input:!0},u),ref:a,style:ke(c),disabled:l},d)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,a=e.size,l=void 0===a?4:a,c=(0,s.A)(e,te);return(0,i.Y)("div",(0,o.A)({},w((0,r.A)((0,r.A)({},c),{},{innerProps:t,isRtl:n,size:l}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),(0,i.Y)(fe,{delay:0,offset:n}),(0,i.Y)(fe,{delay:160,offset:!0}),(0,i.Y)(fe,{delay:320,offset:!n}))},Menu:function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"menu",{menu:!0}),{ref:n},r),t)},MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,a=e.isMulti;return(0,i.Y)("div",(0,o.A)({},w(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:r},n),t)},MenuPortal:function(e){var t=e.appendTo,n=e.children,s=e.controlElement,l=e.innerProps,c=e.menuPlacement,h=e.menuPosition,m=(0,u.useRef)(null),g=(0,u.useRef)(null),v=(0,u.useState)($(c)),y=(0,a.A)(v,2),b=y[0],k=y[1],x=(0,u.useMemo)(function(){return{setPortalPlacement:k}},[]),S=(0,u.useState)(null),C=(0,a.A)(S,2),M=C[0],O=C[1],A=(0,u.useCallback)(function(){if(s){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(s),t="fixed"===h?0:window.pageYOffset,n=e[b]+t;n===(null==M?void 0:M.offset)&&e.left===(null==M?void 0:M.rect.left)&&e.width===(null==M?void 0:M.rect.width)||O({offset:n,rect:e})}},[s,h,b,null==M?void 0:M.offset,null==M?void 0:M.rect.left,null==M?void 0:M.rect.width]);(0,p.A)(function(){A()},[A]);var E=(0,u.useCallback)(function(){"function"==typeof g.current&&(g.current(),g.current=null),s&&m.current&&(g.current=(0,f.ll)(s,m.current,A,{elementResize:"ResizeObserver"in window}))},[s,A]);(0,p.A)(function(){E()},[E]);var T=(0,u.useCallback)(function(e){m.current=e,E()},[E]);if(!t&&"fixed"!==h||!M)return null;var _=(0,i.Y)("div",(0,o.A)({ref:T},w((0,r.A)((0,r.A)({},e),{},{offset:M.offset,position:h,rect:M.rect}),"menuPortal",{"menu-portal":!0}),l),n);return(0,i.Y)(U.Provider,{value:x},t?(0,d.createPortal)(_,t):_)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,a=e.innerProps,l=(0,s.A)(e,F);return(0,i.Y)("div",(0,o.A)({},w((0,r.A)((0,r.A)({},l),{},{children:n,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,a=e.innerProps,l=(0,s.A)(e,L);return(0,i.Y)("div",(0,o.A)({},w((0,r.A)((0,r.A)({},l),{},{children:n,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),n)},MultiValue:function(e){var t=e.children,n=e.components,o=e.data,a=e.innerProps,s=e.isDisabled,l=e.removeProps,c=e.selectProps,u=n.Container,d=n.Label,f=n.Remove;return(0,i.Y)(u,{data:o,innerProps:(0,r.A)((0,r.A)({},w(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:c},(0,i.Y)(d,{data:o,innerProps:(0,r.A)({},w(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},t),(0,i.Y)(f,{data:o,innerProps:(0,r.A)((0,r.A)({},w(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},l),selectProps:c}))},MultiValueContainer:Me,MultiValueLabel:Me,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",(0,o.A)({role:"button"},n),t||(0,i.Y)(oe,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,a=e.isSelected,s=e.innerRef,l=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":a}),{ref:s,"aria-disabled":n},l),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,a=e.isRtl;return(0,i.Y)("div",(0,o.A)({},w(e,"container",{"--is-disabled":r,"--is-rtl":a}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return(0,i.Y)("div",(0,o.A)({},w(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,a=e.hasValue;return(0,i.Y)("div",(0,o.A)({},w(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":a}),n),t)}},_e=function(e){return(0,r.A)((0,r.A)({},Te),e.components)}},46005:function(e,t,n){"use strict";n.r(t),n.d(t,{NonceProvider:function(){return d},components:function(){return c.c},createFilter:function(){return a.c},default:function(){return u},defaultTheme:function(){return a.d},mergeStyles:function(){return a.m},useStateManager:function(){return r.u}});var r=n(52836),o=n(58168),i=n(96540),a=n(42173),s=n(99214),l=n(55655),c=n(28581),u=(n(40961),n(27003),(0,i.forwardRef)(function(e,t){var n=(0,r.u)(e);return i.createElement(a.S,(0,o.A)({ref:t},n))})),d=function(e){var t=e.nonce,n=e.children,r=e.cacheKey,o=(0,i.useMemo)(function(){return(0,l.A)({key:r,nonce:t})},[r,t]);return i.createElement(s.C,{value:o},n)}},52836:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(89379),o=n(80296),i=n(80045),a=n(96540),s=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function l(e){var t=e.defaultInputValue,n=void 0===t?"":t,l=e.defaultMenuIsOpen,c=void 0!==l&&l,u=e.defaultValue,d=void 0===u?null:u,f=e.inputValue,p=e.menuIsOpen,h=e.onChange,m=e.onInputChange,g=e.onMenuClose,v=e.onMenuOpen,y=e.value,b=(0,i.A)(e,s),w=(0,a.useState)(void 0!==f?f:n),k=(0,o.A)(w,2),x=k[0],S=k[1],C=(0,a.useState)(void 0!==p?p:c),M=(0,o.A)(C,2),O=M[0],A=M[1],E=(0,a.useState)(void 0!==y?y:d),T=(0,o.A)(E,2),_=T[0],N=T[1],j=(0,a.useCallback)(function(e,t){"function"==typeof h&&h(e,t),N(e)},[h]),P=(0,a.useCallback)(function(e,t){var n;"function"==typeof m&&(n=m(e,t)),S(void 0!==n?n:e)},[m]),I=(0,a.useCallback)(function(){"function"==typeof v&&v(),A(!0)},[v]),D=(0,a.useCallback)(function(){"function"==typeof g&&g(),A(!1)},[g]),R=void 0!==f?f:x,L=void 0!==p?p:O,F=void 0!==y?y:_;return(0,r.A)((0,r.A)({},b),{},{inputValue:R,menuIsOpen:L,onChange:j,onInputChange:P,onMenuClose:D,onMenuOpen:I,value:F})}},27701:function(e,t,n){"use strict";n.r(t),n.d(t,{CANCEL:function(){return r.bO},END:function(){return S},SAGA_LOCATION:function(){return r.x2},buffers:function(){return s.I},channel:function(){return M},default:function(){return J},detach:function(){return s.K},eventChannel:function(){return O},isEnd:function(){return C},multicastChannel:function(){return A},runSaga:function(){return Y},stdChannel:function(){return E}});var r=n(63821),o=n(58168),i=n(98587),a=n(21225),s=n(16873);var l=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},c=[],u=0;function d(e){try{h(),e()}finally{m()}}function f(e){c.push(e),u||(h(),g())}function p(e){try{return h(),e()}finally{g()}}function h(){u++}function m(){u--}function g(){var e;for(m();!u&&void 0!==(e=c.shift());)d(e)}var v=function(e){return function(t){return e.some(function(e){return x(e)(t)})}},y=function(e){return function(t){return e(t)}},b=function(e){return function(t){return t.type===String(e)}},w=function(e){return function(t){return t.type===e}},k=function(){return s.k};function x(e){var t="*"===e?k:(0,a.Yj)(e)?b:(0,a.YO)(e)?v:(0,a.mr)(e)?b:(0,a.Pc)(e)?y:(0,a.HR)(e)?w:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var S={type:r.x7},C=function(e){return e&&e.type===r.x7};function M(e){void 0===e&&(e=(0,s.e)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(S):e.isEmpty()?(n.push(r),r.cancel=function(){(0,s.r)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(S):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,o=e.length;r<o;r++)(0,e[r])(S)}}}}function O(e,t){void 0===t&&(t=(0,s.n)());var n,r=!1,o=M(t),i=function(){r||(r=!0,(0,a.Pc)(n)&&n(),o.close())};return n=e(function(e){C(e)?i():o.put(e)}),n=(0,s.o)(n),r&&n(),{take:o.take,flush:o.flush,close:i}}function A(){var e,t=!1,n=[],o=n,i=function(){o===n&&(o=n.slice())},a=function(){t=!0;var e=n=o;o=[],e.forEach(function(e){e(S)})};return(e={})[r.Xl]=!0,e.put=function(e){if(!t)if(C(e))a();else for(var i=n=o,s=0,l=i.length;s<l;s++){var c=i[s];c[r.E_](e)&&(c.cancel(),c(e))}},e.take=function(e,n){void 0===n&&(n=k),t?e(S):(e[r.E_]=n,i(),o.push(e),e.cancel=(0,s.o)(function(){i(),(0,s.r)(o,e)}))},e.close=a,e}function E(){var e=A(),t=e.put;return e.put=function(e){e[r.q8]?t(e):f(function(){t(e)})},e}var T=0,_=1,N=2,j=3;function P(e,t){var n=e[r.bO];(0,a.Pc)(n)&&(t.cancel=n),e.then(t,function(e){t(e,!0)})}var I,D=0,R=function(){return++D};function L(e){e.isRunning()&&e.cancel()}var F=((I={})[s.T]=function(e,t,n){var o=t.channel,i=void 0===o?e.channel:o,s=t.pattern,l=t.maybe,c=function(e){e instanceof Error?n(e,!0):!C(e)||l?n(e):n(r.a6)};try{i.take(c,(0,a.uQ)(s)?x(s):null)}catch(e){return void n(e,!0)}n.cancel=c.cancel},I[s.P]=function(e,t,n){var r=t.channel,o=t.action,i=t.resolve;f(function(){var t;try{t=(r?r.put:e.dispatch)(o)}catch(e){return void n(e,!0)}i&&(0,a.iv)(t)?P(t,n):n(t)})},I[s.A]=function(e,t,n,r){var o=r.digestEffect,i=D,l=Object.keys(t);if(0!==l.length){var c=(0,s.l)(t,n);l.forEach(function(e){o(t[e],i,c[e],e)})}else n((0,a.YO)(t)?[]:{})},I[s.R]=function(e,t,n,r){var o=r.digestEffect,i=D,l=Object.keys(t),c=(0,a.YO)(t)?(0,s.m)(l.length):{},u={},d=!1;l.forEach(function(e){var t=function(t,r){d||(r||(0,s.s)(t)?(n.cancel(),n(t,r)):(n.cancel(),d=!0,c[e]=t,n(c)))};t.cancel=s.t,u[e]=t}),n.cancel=function(){d||(d=!0,l.forEach(function(e){return u[e].cancel()}))},l.forEach(function(e){d||o(t[e],i,u[e],e)})},I[s.C]=function(e,t,n,r){var o=t.context,i=t.fn,l=t.args,c=r.task;try{var u=i.apply(o,l);if((0,a.iv)(u))return void P(u,n);if((0,a.lJ)(u))return void G(e,u,c.context,D,(0,s.j)(i),!1,n);n(u)}catch(e){n(e,!0)}},I[s.a]=function(e,t,n){var r=t.context,o=t.fn,i=t.args;try{var s=function(e,t){(0,a.vD)(e)?n(t):n(e,!0)};o.apply(r,i.concat(s)),s.cancel&&(n.cancel=s.cancel)}catch(e){n(e,!0)}},I[s.F]=function(e,t,n,r){var o=t.context,i=t.fn,l=t.args,c=t.detached,u=r.task,d=function(e){var t=e.context,n=e.fn,r=e.args;try{var o=n.apply(t,r);if((0,a.lJ)(o))return o;var i=!1;return(0,s.q)(function(e){return i?{value:e,done:!0}:(i=!0,{value:o,done:!(0,a.iv)(o)})})}catch(e){return(0,s.q)(function(){throw e})}}({context:o,fn:i,args:l}),f=function(e,t){return e.isSagaIterator?{name:e.meta.name}:(0,s.j)(t)}(d,i);p(function(){var t=G(e,d,u.context,D,f,c,void 0);c?n(t):t.isRunning()?(u.queue.addTask(t),n(t)):t.isAborted()?u.queue.abort(t.error()):n(t)})},I[s.J]=function(e,t,n,r){var o=r.task,i=function(e,t){if(e.isRunning()){var n={task:o,cb:t};t.cancel=function(){e.isRunning()&&(0,s.r)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if((0,a.YO)(t)){if(0===t.length)return void n([]);var l=(0,s.l)(t,n);t.forEach(function(e,t){i(e,l[t])})}else i(t,n)},I[s.b]=function(e,t,n,o){var i=o.task;t===r.Pe?L(i):(0,a.YO)(t)?t.forEach(L):L(t),n()},I[s.S]=function(e,t,n){var r=t.selector,o=t.args;try{n(r.apply(void 0,[e.getState()].concat(o)))}catch(e){n(e,!0)}},I[s.d]=function(e,t,n){var r=t.pattern,o=M(t.buffer),i=x(r),a=function t(n){C(n)||e.channel.take(t,i),o.put(n)},s=o.close;o.close=function(){a.cancel(),s()},e.channel.take(a,i),n(o)},I[s.f]=function(e,t,n,r){n(r.task.isCancelled())},I[s.g]=function(e,t,n){t.flush(n)},I[s.G]=function(e,t,n,r){n(r.task.context[t])},I[s.h]=function(e,t,n,r){var o=r.task;(0,s.p)(o.context,t),n()},I);function B(e,t){return e+"?"+t}function H(e){var t=e.name,n=e.location;return n?t+"  "+B(n.fileName,n.lineNumber):t}function z(e){var t=(0,s.u)(function(e){return e.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var $=null,V=[],U=function(e){e.crashedEffect=$,V.push(e)},W=function(){$=null,V.length=0},q=function(e){$=e},K=function(){var e=V[0],t=V.slice(1),n=e.crashedEffect?function(e){var t=(0,s.v)(e);return t?t.code+"  "+B(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+H(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map(function(e){return"    created by "+H(e.meta)}),[z(V)]).join("\n")};function G(e,t,n,o,i,c,u){var d=e.finalizeRunEffect(function(t,n,o){(0,a.iv)(t)?P(t,o):(0,a.lJ)(t)?G(e,t,p.context,n,i,!1,o):t&&t[r.IO]?(0,F[t.type])(e,t.payload,o,h):o(t)});m.cancel=s.t;var f={meta:i,cancel:function(){f.status===T&&(f.status=_,m(r.nm))},status:T},p=function(e,t,n,o,i,a,c){var u;void 0===c&&(c=s.t);var d,f,p=T,h=null,m=[],g=Object.create(n),v=function(e,t,n){var r,o=[],i=!1;function a(e){t(),c(),n(e,!0)}function l(t){o.push(t),t.cont=function(l,c){i||((0,s.r)(o,t),t.cont=s.t,c?a(l):(t===e&&(r=l),o.length||(i=!0,n(r))))}}function c(){i||(i=!0,o.forEach(function(e){e.cont=s.t,e.cancel()}),o=[])}return l(e),{addTask:l,cancelAll:c,abort:a,getTasks:function(){return o}}}(t,function(){m.push.apply(m,v.getTasks().map(function(e){return e.meta.name}))},y);function y(t,n){if(n){if(p=N,U({meta:i,cancelledTasks:m}),b.isRoot){var o=K();W(),e.onError(t,{sagaStack:o})}f=t,h&&h.reject(t)}else t===r.nm?p=_:p!==_&&(p=j),d=t,h&&h.resolve(t);b.cont(t,n),b.joiners.forEach(function(e){e.cb(t,n)}),b.joiners=null}var b=((u={})[r.wn]=!0,u.id=o,u.meta=i,u.isRoot=a,u.context=g,u.joiners=[],u.queue=v,u.cancel=function(){p===T&&(p=_,v.cancelAll(),y(r.nm,!1))},u.cont=c,u.end=y,u.setContext=function(e){(0,s.p)(g,e)},u.toPromise=function(){return h||(h=l(),p===N?h.reject(f):p!==T&&h.resolve(d)),h.promise},u.isRunning=function(){return p===T},u.isCancelled=function(){return p===_||p===T&&t.status===_},u.isAborted=function(){return p===N},u.result=function(){return d},u.error=function(){return f},u);return b}(e,f,n,o,i,c,u),h={task:p,digestEffect:g};return u&&(u.cancel=p.cancel),m(),p;function m(e,n){try{var i;n?(i=t.throw(e),W()):(0,s.y)(e)?(f.status=_,m.cancel(),i=(0,a.Pc)(t.return)?t.return(r.nm):{done:!0,value:r.nm}):i=(0,s.z)(e)?(0,a.Pc)(t.return)?t.return():{done:!0}:t.next(e),i.done?(f.status!==_&&(f.status=j),f.cont(i.value)):g(i.value,o,m)}catch(e){if(f.status===_)throw e;f.status=N,f.cont(e,!0)}}function g(t,n,r,o){void 0===o&&(o="");var i,a=R();function l(n,o){i||(i=!0,r.cancel=s.t,e.sagaMonitor&&(o?e.sagaMonitor.effectRejected(a,n):e.sagaMonitor.effectResolved(a,n)),o&&q(t),r(n,o))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:a,parentEffectId:n,label:o,effect:t}),l.cancel=s.t,r.cancel=function(){i||(i=!0,l.cancel(),l.cancel=s.t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(a))},d(t,a,l)}}function Y(e,t){for(var n=e.channel,r=void 0===n?E():n,o=e.dispatch,i=e.getState,a=e.context,l=void 0===a?{}:a,c=e.sagaMonitor,u=e.effectMiddlewares,d=e.onError,f=void 0===d?s.D:d,h=arguments.length,m=new Array(h>2?h-2:0),g=2;g<h;g++)m[g-2]=arguments[g];var v,y=t.apply(void 0,m),b=R();if(c&&(c.rootSagaStarted=c.rootSagaStarted||s.t,c.effectTriggered=c.effectTriggered||s.t,c.effectResolved=c.effectResolved||s.t,c.effectRejected=c.effectRejected||s.t,c.effectCancelled=c.effectCancelled||s.t,c.actionDispatched=c.actionDispatched||s.t,c.rootSagaStarted({effectId:b,saga:t,args:m})),u){var w=s.B.apply(void 0,u);v=function(e){return function(t,n,r){return w(function(t){return e(t,n,r)})(t)}}}else v=s.H;var k={channel:r,dispatch:(0,s.E)(o),getState:i,sagaMonitor:c,onError:f,finalizeRunEffect:v};return p(function(){var e=G(k,y,l,b,(0,s.j)(t),!0,void 0);return c&&c.effectResolved(b,e),e})}var J=function(e){var t,n=void 0===e?{}:e,r=n.context,a=void 0===r?{}:r,l=n.channel,c=void 0===l?E():l,u=n.sagaMonitor,d=(0,i.A)(n,["context","channel","sagaMonitor"]);function f(e){var n=e.getState,r=e.dispatch;return t=Y.bind(null,(0,o.A)({},d,{context:a,channel:c,dispatch:r,getState:n,sagaMonitor:u})),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var n=e(t);return c.put(t),n}}}return f.run=function(){return t.apply(void 0,arguments)},f.setContext=function(e){(0,s.p)(a,e)},f}},43786:function(e,t,n){"use strict";n.r(t),n.d(t,{actionChannel:function(){return o.U},all:function(){return o.$},apply:function(){return o.a0},call:function(){return o.O},cancel:function(){return o.N},cancelled:function(){return o.a5},cps:function(){return o.a1},debounce:function(){return w},delay:function(){return o.Q},effectTypes:function(){return o.X},flush:function(){return o.a6},fork:function(){return o.M},getContext:function(){return o.a7},join:function(){return o.a3},put:function(){return o.Z},putResolve:function(){return o._},race:function(){return o.W},retry:function(){return b},select:function(){return o.a4},setContext:function(){return o.a8},spawn:function(){return o.a2},take:function(){return o.L},takeEvery:function(){return m},takeLatest:function(){return g},takeLeading:function(){return v},takeMaybe:function(){return o.Y},throttle:function(){return y}});var r=n(21225),o=n(16873),i=function(e){return{done:!0,value:e}},a={};function s(e){return(0,r.Ix)(e)?"channel":(0,r.mr)(e)?String(e):(0,r.Pc)(e)?e.name:String(e)}function l(e,t,n){var r,s,l,c=t;function u(t,n){if(c===a)return i(t);if(n&&!s)throw c=a,n;r&&r(t);var o=n?e[s](n):e[c]();return c=o.nextState,l=o.effect,r=o.stateUpdater,s=o.errorState,c===a?i(t):l}return(0,o.q)(u,function(e){return u(null,e)},n)}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,c={done:!1,value:(0,o.L)(e)},u=function(e){return a=e};return l({q1:function(){return{nextState:"q2",effect:c,stateUpdater:u}},q2:function(){return{nextState:"q1",effect:(e=a,{done:!1,value:o.M.apply(void 0,[t].concat(r,[e]))})};var e}},"q1","takeEvery("+s(e)+", "+t.name+")")}function u(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,c,u={done:!1,value:(0,o.L)(e)},d=function(e){return{done:!1,value:o.M.apply(void 0,[t].concat(r,[e]))}},f=function(e){return{done:!1,value:(0,o.N)(e)}},p=function(e){return a=e},h=function(e){return c=e};return l({q1:function(){return{nextState:"q2",effect:u,stateUpdater:h}},q2:function(){return a?{nextState:"q3",effect:f(a)}:{nextState:"q1",effect:d(c),stateUpdater:p}},q3:function(){return{nextState:"q1",effect:d(c),stateUpdater:p}}},"q1","takeLatest("+s(e)+", "+t.name+")")}function d(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,c={done:!1,value:(0,o.L)(e)},u=function(e){return a=e};return l({q1:function(){return{nextState:"q2",effect:c,stateUpdater:u}},q2:function(){return{nextState:"q1",effect:(e=a,{done:!1,value:o.O.apply(void 0,[t].concat(r,[e]))})};var e}},"q1","takeLeading("+s(e)+", "+t.name+")")}function f(e,t,n){for(var i=arguments.length,a=new Array(i>3?i-3:0),c=3;c<i;c++)a[c-3]=arguments[c];var u,d,f={done:!1,value:(0,o.Q)(e)},p=function(e){return u=e},h=function(e){return d=e},m=!(0,r.Ix)(t);return m||h(t),l({q1:function(){return{nextState:"q2",effect:{done:!1,value:(0,o.U)(t,(0,o.V)(1))},stateUpdater:h}},q2:function(){return{nextState:"q3",effect:{done:!1,value:(0,o.L)(d)},stateUpdater:p}},q3:function(){return{nextState:"q4",effect:(e=u,{done:!1,value:o.M.apply(void 0,[n].concat(a,[e]))})};var e},q4:function(){return{nextState:"q2",effect:f}}},m?"q1":"q2","throttle("+s(t)+", "+n.name+")")}function p(e,t,n){for(var r=e,i=arguments.length,s=new Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];var u={done:!1,value:o.O.apply(void 0,[n].concat(s))},d={done:!1,value:(0,o.Q)(t)};return l({q1:function(){return{nextState:"q2",effect:u,errorState:"q10"}},q2:function(){return{nextState:a}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:d}}},"q1","retry("+n.name+")")}function h(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var c,u,d={done:!1,value:(0,o.L)(t)},f={done:!1,value:(0,o.W)({action:(0,o.L)(t),debounce:(0,o.Q)(e)})},p=function(e){return c=e},h=function(e){return u=e};return l({q1:function(){return{nextState:"q2",effect:d,stateUpdater:p}},q2:function(){return{nextState:"q3",effect:f,stateUpdater:h}},q3:function(){return u.debounce?{nextState:"q1",effect:(t=c,{done:!1,value:o.M.apply(void 0,[n].concat(i,[t]))})}:{nextState:"q2",effect:(e=u.action,{done:!1,value:e}),stateUpdater:p};var e,t}},"q1","debounce("+s(t)+", "+n.name+")")}function m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return o.M.apply(void 0,[c,e,t].concat(r))}function g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return o.M.apply(void 0,[u,e,t].concat(r))}function v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return o.M.apply(void 0,[d,e,t].concat(r))}function y(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return o.M.apply(void 0,[f,e,t,n].concat(i))}function b(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return o.O.apply(void 0,[p,e,t,n].concat(i))}function w(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return o.M.apply(void 0,[h,e,t,n].concat(i))}},2833:function(e){e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var c=i[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(o=n?n.call(r,u,d,c):void 0)||void 0===o&&u!==d)return!1}return!0}},88154:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u},immutable:function(){return c}});var r=n(96540),o=n(19888),i=n(14993);const a=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),s={dedupe:!0};i.qv.defineProperty(i.BE,"defaultValue",{value:i.sb});const l=(0,i.qm)((e,t,n)=>{const{cache:l,compare:c,suspense:u,fallbackData:d,revalidateOnMount:f,revalidateIfStale:p,refreshInterval:h,refreshWhenHidden:m,refreshWhenOffline:g,keepPreviousData:v}=n,[y,b,w,k]=i.bZ.get(l),[x,S]=(0,i.lK)(e),C=(0,r.useRef)(!1),M=(0,r.useRef)(!1),O=(0,r.useRef)(x),A=(0,r.useRef)(t),E=(0,r.useRef)(n),T=()=>E.current,_=()=>T().isVisible()&&T().isOnline(),[N,j,P,I]=(0,i.r9)(l,x),D=(0,r.useRef)({}).current,R=(0,i.b0)(d)?n.fallback[x]:d,L=(e,t)=>{for(const n in D){const r=n;if("data"===r){if(!c(e[r],t[r])){if(!(0,i.b0)(e[r]))return!1;if(!c(q,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},F=(0,r.useMemo)(()=>{const e=!!x&&!!t&&((0,i.b0)(f)?!T().isPaused()&&!u&&(!!(0,i.b0)(p)||p):f),n=t=>{const n=(0,i.rL)(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=N(),o=I(),a=n(r),s=r===o?a:n(o);let l=a;return[()=>{const e=n(N());return L(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>s]},[l,x]),B=(0,o.useSyncExternalStore)((0,r.useCallback)(e=>P(x,(t,n)=>{L(n,t)||e()}),[l,x]),F[0],F[1]),H=!C.current,z=y[x]&&y[x].length>0,$=B.data,V=(0,i.b0)($)?R:$,U=B.error,W=(0,r.useRef)(V),q=v?(0,i.b0)($)?W.current:$:V,K=!(z&&!(0,i.b0)(U))&&(H&&!(0,i.b0)(f)?f:!T().isPaused()&&(u?!(0,i.b0)(V)&&p:(0,i.b0)(V)||p)),G=!!(x&&t&&H&&K),Y=(0,i.b0)(B.isValidating)?G:B.isValidating,J=(0,i.b0)(B.isLoading)?G:B.isLoading,X=(0,r.useCallback)(async e=>{const t=A.current;if(!x||!t||M.current||T().isPaused())return!1;let r,o,a=!0;const s=e||{},l=!w[x]||!s.dedupe,u=()=>i.dO?!M.current&&x===O.current&&C.current:x===O.current,d={isValidating:!1,isLoading:!1},f=()=>{j(d)},p=()=>{const e=w[x];e&&e[1]===o&&delete w[x]},h={isValidating:!0};(0,i.b0)(N().data)&&(h.isLoading=!0);try{if(l&&(j(h),n.loadingTimeout&&(0,i.b0)(N().data)&&setTimeout(()=>{a&&u()&&T().onLoadingSlow(x,n)},n.loadingTimeout),w[x]=[t(S),(0,i.lg)()]),[r,o]=w[x],r=await r,l&&setTimeout(p,n.dedupingInterval),!w[x]||w[x][1]!==o)return l&&u()&&T().onDiscarded(x),!1;d.error=i.ZH;const e=b[x];if(!(0,i.b0)(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),l&&u()&&T().onDiscarded(x),!1;const s=N().data;d.data=c(s,r)?s:r,l&&u()&&T().onSuccess(r,x,n)}catch(e){p();const t=T(),{shouldRetryOnError:n}=t;t.isPaused()||(d.error=e,l&&u()&&(t.onError(e,x,t),(!0===n||(0,i.Tn)(n)&&n(e))&&(T().revalidateOnFocus&&T().revalidateOnReconnect&&!_()||t.onErrorRetry(e,x,t,e=>{const t=y[x];t&&t[0]&&t[0](i.bu.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0},[x,l]),Q=(0,r.useCallback)((...e)=>(0,i.mF)(l,O.current,...e),[]);if((0,i.Es)(()=>{A.current=t,E.current=n,(0,i.b0)($)||(W.current=$)}),(0,i.Es)(()=>{if(!x)return;const e=X.bind(i.ZH,s);let t=0;const n=(0,i.aw)(x,y,(n,r={})=>{if(n==i.bu.FOCUS_EVENT){const n=Date.now();T().revalidateOnFocus&&n>t&&_()&&(t=n+T().focusThrottleInterval,e())}else if(n==i.bu.RECONNECT_EVENT)T().revalidateOnReconnect&&_()&&e();else{if(n==i.bu.MUTATE_EVENT)return X();if(n==i.bu.ERROR_REVALIDATE_EVENT)return X(r)}});return M.current=!1,O.current=x,C.current=!0,j({_k:S}),K&&((0,i.b0)(V)||i.X3?e():(0,i.mf)(e)),()=>{M.current=!0,n()}},[x]),(0,i.Es)(()=>{let e;function t(){const t=(0,i.Tn)(h)?h(N().data):h;t&&-1!==e&&(e=setTimeout(n,t))}function n(){N().error||!m&&!T().isVisible()||!g&&!T().isOnline()?t():X(s).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[h,m,g,x]),(0,r.useDebugValue)(q),u&&(0,i.b0)(V)&&x){if(!i.dO&&i.X3)throw new Error("Fallback data is required when using suspense in SSR.");A.current=t,E.current=n,M.current=!1;const e=k[x];if(!(0,i.b0)(e)){const t=Q(e);a(t)}if(!(0,i.b0)(U))throw U;{const e=X(s);(0,i.b0)(q)||(e.status="fulfilled",e.value=!0),a(e)}}return{mutate:Q,get data(){return D.data=!0,q},get error(){return D.error=!0,U},get isValidating(){return D.isValidating=!0,Y},get isLoading(){return D.isLoading=!0,J}}}),c=e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r)),u=(0,i.Ht)(l,c)},79244:function(e,t,n){"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o(e){return e instanceof r(e).Element||e instanceof Element}function i(e){return e instanceof r(e).HTMLElement||e instanceof HTMLElement}function a(e){return"undefined"!=typeof ShadowRoot&&(e instanceof r(e).ShadowRoot||e instanceof ShadowRoot)}n.r(t),n.d(t,{animateFill:function(){return ut},createSingleton:function(){return st},default:function(){return yt},delegate:function(){return ct},followCursor:function(){return ht},hideAll:function(){return it},inlinePositioning:function(){return mt},roundArrow:function(){return fe},sticky:function(){return gt}});var s=Math.max,l=Math.min,c=Math.round;function u(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function d(){return!/^((?!chrome|android).)*safari/i.test(u())}function f(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var a=e.getBoundingClientRect(),s=1,l=1;t&&i(e)&&(s=e.offsetWidth>0&&c(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&c(a.height)/e.offsetHeight||1);var u=(o(e)?r(e):window).visualViewport,f=!d()&&n,p=(a.left+(f&&u?u.offsetLeft:0))/s,h=(a.top+(f&&u?u.offsetTop:0))/l,m=a.width/s,g=a.height/l;return{width:m,height:g,top:h,right:p+m,bottom:h+g,left:p,x:p,y:h}}function p(e){var t=r(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function h(e){return e?(e.nodeName||"").toLowerCase():null}function m(e){return((o(e)?e.ownerDocument:e.document)||window.document).documentElement}function g(e){return f(m(e)).left+p(e).scrollLeft}function v(e){return r(e).getComputedStyle(e)}function y(e){var t=v(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function b(e,t,n){void 0===n&&(n=!1);var o,a,s=i(t),l=i(t)&&function(e){var t=e.getBoundingClientRect(),n=c(t.width)/e.offsetWidth||1,r=c(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),u=m(t),d=f(e,l,n),v={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(s||!s&&!n)&&(("body"!==h(t)||y(u))&&(v=(o=t)!==r(o)&&i(o)?{scrollLeft:(a=o).scrollLeft,scrollTop:a.scrollTop}:p(o)),i(t)?((b=f(t,!0)).x+=t.clientLeft,b.y+=t.clientTop):u&&(b.x=g(u))),{x:d.left+v.scrollLeft-b.x,y:d.top+v.scrollTop-b.y,width:d.width,height:d.height}}function w(e){var t=f(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function k(e){return"html"===h(e)?e:e.assignedSlot||e.parentNode||(a(e)?e.host:null)||m(e)}function x(e){return["html","body","#document"].indexOf(h(e))>=0?e.ownerDocument.body:i(e)&&y(e)?e:x(k(e))}function S(e,t){var n;void 0===t&&(t=[]);var o=x(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),a=r(o),s=i?[a].concat(a.visualViewport||[],y(o)?o:[]):o,l=t.concat(s);return i?l:l.concat(S(k(s)))}function C(e){return["table","td","th"].indexOf(h(e))>=0}function M(e){return i(e)&&"fixed"!==v(e).position?e.offsetParent:null}function O(e){for(var t=r(e),n=M(e);n&&C(n)&&"static"===v(n).position;)n=M(n);return n&&("html"===h(n)||"body"===h(n)&&"static"===v(n).position)?t:n||function(e){var t=/firefox/i.test(u());if(/Trident/i.test(u())&&i(e)&&"fixed"===v(e).position)return null;var n=k(e);for(a(n)&&(n=n.host);i(n)&&["html","body"].indexOf(h(n))<0;){var r=v(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var A="top",E="bottom",T="right",_="left",N="auto",j=[A,E,T,_],P="start",I="end",D="viewport",R="popper",L=j.reduce(function(e,t){return e.concat([t+"-"+P,t+"-"+I])},[]),F=[].concat(j,[N]).reduce(function(e,t){return e.concat([t,t+"-"+P,t+"-"+I])},[]),B=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function H(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||o(e)}),r}var z={placement:"bottom",modifiers:[],strategy:"absolute"};function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function V(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?z:i;return function(e,t,n){void 0===n&&(n=a);var i,s,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},z,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,d={state:l,setOptions:function(n){var i="function"==typeof n?n(l.options):n;f(),l.options=Object.assign({},a,l.options,i),l.scrollParents={reference:o(e)?S(e):e.contextElement?S(e.contextElement):[],popper:S(t)};var s,u,p=function(e){var t=H(e);return B.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((s=[].concat(r,l.options.modifiers),u=s.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(u).map(function(e){return u[e]})));return l.orderedModifiers=p.filter(function(e){return e.enabled}),l.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:l,name:t,instance:d,options:r});c.push(i||function(){})}}),d.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,n=e.popper;if($(t,n)){l.rects={reference:b(t,O(n),"fixed"===l.options.strategy),popper:w(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<l.orderedModifiers.length;r++)if(!0!==l.reset){var o=l.orderedModifiers[r],i=o.fn,a=o.options,s=void 0===a?{}:a,c=o.name;"function"==typeof i&&(l=i({state:l,options:s,name:c,instance:d})||l)}else l.reset=!1,r=-1}}},update:(i=function(){return new Promise(function(e){d.forceUpdate(),e(l)})},function(){return s||(s=new Promise(function(e){Promise.resolve().then(function(){s=void 0,e(i())})})),s}),destroy:function(){f(),u=!0}};if(!$(e,t))return d;function f(){c.forEach(function(e){return e()}),c=[]}return d.setOptions(n).then(function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var U={passive:!0};function W(e){return e.split("-")[0]}function q(e){return e.split("-")[1]}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function G(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?W(o):null,a=o?q(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case A:t={x:s,y:n.y-r.height};break;case E:t={x:s,y:n.y+n.height};break;case T:t={x:n.x+n.width,y:l};break;case _:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?K(i):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case P:t[c]=t[c]-(n[u]/2-r[u]/2);break;case I:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var Y={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(e){var t,n=e.popper,o=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,l=e.position,u=e.gpuAcceleration,d=e.adaptive,f=e.roundOffsets,p=e.isFixed,h=s.x,g=void 0===h?0:h,y=s.y,b=void 0===y?0:y,w="function"==typeof f?f({x:g,y:b}):{x:g,y:b};g=w.x,b=w.y;var k=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),S=_,C=A,M=window;if(d){var N=O(n),j="clientHeight",P="clientWidth";N===r(n)&&"static"!==v(N=m(n)).position&&"absolute"===l&&(j="scrollHeight",P="scrollWidth"),(i===A||(i===_||i===T)&&a===I)&&(C=E,b-=(p&&N===M&&M.visualViewport?M.visualViewport.height:N[j])-o.height,b*=u?1:-1),i!==_&&(i!==A&&i!==E||a!==I)||(S=T,g-=(p&&N===M&&M.visualViewport?M.visualViewport.width:N[P])-o.width,g*=u?1:-1)}var D,R=Object.assign({position:l},d&&Y),L=!0===f?function(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:c(n*o)/o||0,y:c(r*o)/o||0}}({x:g,y:b},r(n)):{x:g,y:b};return g=L.x,b=L.y,u?Object.assign({},R,((D={})[C]=x?"0":"",D[S]=k?"0":"",D.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",D)):Object.assign({},R,((t={})[C]=x?b+"px":"",t[S]=k?g+"px":"",t.transform="",t))}var X={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];i(o)&&h(o)&&(Object.assign(o.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],o=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});i(r)&&h(r)&&(Object.assign(r.style,a),Object.keys(o).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]},Q={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(e){return e.replace(/left|right|bottom|top/g,function(e){return Q[e]})}var ee={start:"end",end:"start"};function te(e){return e.replace(/start|end/g,function(e){return ee[e]})}function ne(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&a(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function re(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oe(e,t,n){return t===D?re(function(e,t){var n=r(e),o=m(e),i=n.visualViewport,a=o.clientWidth,s=o.clientHeight,l=0,c=0;if(i){a=i.width,s=i.height;var u=d();(u||!u&&"fixed"===t)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:s,x:l+g(e),y:c}}(e,n)):o(t)?function(e,t){var n=f(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):re(function(e){var t,n=m(e),r=p(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=s(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=s(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-r.scrollLeft+g(e),c=-r.scrollTop;return"rtl"===v(o||n).direction&&(l+=s(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}(m(e)))}function ie(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ae(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function se(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,c=n.strategy,u=void 0===c?e.strategy:c,d=n.boundary,p=void 0===d?"clippingParents":d,g=n.rootBoundary,y=void 0===g?D:g,b=n.elementContext,w=void 0===b?R:b,x=n.altBoundary,C=void 0!==x&&x,M=n.padding,_=void 0===M?0:M,N=ie("number"!=typeof _?_:ae(_,j)),P=w===R?"reference":R,I=e.rects.popper,L=e.elements[C?P:w],F=function(e,t,n,r){var a="clippingParents"===t?function(e){var t=S(k(e)),n=["absolute","fixed"].indexOf(v(e).position)>=0&&i(e)?O(e):e;return o(n)?t.filter(function(e){return o(e)&&ne(e,n)&&"body"!==h(e)}):[]}(e):[].concat(t),c=[].concat(a,[n]),u=c[0],d=c.reduce(function(t,n){var o=oe(e,n,r);return t.top=s(o.top,t.top),t.right=l(o.right,t.right),t.bottom=l(o.bottom,t.bottom),t.left=s(o.left,t.left),t},oe(e,u,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}(o(L)?L:L.contextElement||m(e.elements.popper),p,y,u),B=f(e.elements.reference),H=G({reference:B,element:I,strategy:"absolute",placement:a}),z=re(Object.assign({},I,H)),$=w===R?z:B,V={top:F.top-$.top+N.top,bottom:$.bottom-F.bottom+N.bottom,left:F.left-$.left+N.left,right:$.right-F.right+N.right},U=e.modifiersData.offset;if(w===R&&U){var W=U[a];Object.keys(V).forEach(function(e){var t=[T,E].indexOf(e)>=0?1:-1,n=[A,E].indexOf(e)>=0?"y":"x";V[e]+=W[n]*t})}return V}function le(e,t,n){return s(e,l(t,n))}function ce(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ue(e){return[A,T,E,_].some(function(t){return e[t]>=0})}var de=V({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,i=o.scroll,a=void 0===i||i,s=o.resize,l=void 0===s||s,c=r(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach(function(e){e.addEventListener("scroll",n.update,U)}),l&&c.addEventListener("resize",n.update,U),function(){a&&u.forEach(function(e){e.removeEventListener("scroll",n.update,U)}),l&&c.removeEventListener("resize",n.update,U)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=G({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,l=void 0===s||s,c={placement:W(t.placement),variation:q(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,J(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,J(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},X,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=F.reduce(function(e,n){return e[n]=function(e,t,n){var r=W(e),o=[_,A].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[_,T].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e},{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=W(g),y=l||(v!==g&&h?function(e){if(W(e)===N)return[];var t=Z(e);return[te(e),t,te(t)]}(g):[Z(g)]),b=[g].concat(y).reduce(function(e,n){return e.concat(W(n)===N?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?F:l,u=q(r),d=u?s?L:L.filter(function(e){return q(e)===u}):j,f=d.filter(function(e){return c.indexOf(e)>=0});0===f.length&&(f=d);var p=f.reduce(function(t,n){return t[n]=se(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[W(n)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)},[]),w=t.rects.reference,k=t.rects.popper,x=new Map,S=!0,C=b[0],M=0;M<b.length;M++){var O=b[M],I=W(O),D=q(O)===P,R=[A,E].indexOf(I)>=0,B=R?"width":"height",H=se(t,{placement:O,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),z=R?D?T:_:D?E:A;w[B]>k[B]&&(z=Z(z));var $=Z(z),V=[];if(i&&V.push(H[I]<=0),s&&V.push(H[z]<=0,H[$]<=0),V.every(function(e){return e})){C=O,S=!1;break}x.set(O,V)}if(S)for(var U=function(e){var t=b.find(function(t){var n=x.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return C=t,"break"},K=h?3:1;K>0&&"break"!==U(K);K--);t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,c=void 0!==a&&a,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.padding,h=n.tether,m=void 0===h||h,g=n.tetherOffset,v=void 0===g?0:g,y=se(t,{boundary:u,rootBoundary:d,padding:p,altBoundary:f}),b=W(t.placement),k=q(t.placement),x=!k,S=K(b),C="x"===S?"y":"x",M=t.modifiersData.popperOffsets,N=t.rects.reference,j=t.rects.popper,I="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,D="number"==typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(M){if(i){var F,B="y"===S?A:_,H="y"===S?E:T,z="y"===S?"height":"width",$=M[S],V=$+y[B],U=$-y[H],G=m?-j[z]/2:0,Y=k===P?N[z]:j[z],J=k===P?-j[z]:-N[z],X=t.elements.arrow,Q=m&&X?w(X):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=Z[B],te=Z[H],ne=le(0,N[z],Q[z]),re=x?N[z]/2-G-ne-ee-D.mainAxis:Y-ne-ee-D.mainAxis,oe=x?-N[z]/2+G+ne+te+D.mainAxis:J+ne+te+D.mainAxis,ie=t.elements.arrow&&O(t.elements.arrow),ae=ie?"y"===S?ie.clientTop||0:ie.clientLeft||0:0,ce=null!=(F=null==R?void 0:R[S])?F:0,ue=$+oe-ce,de=le(m?l(V,$+re-ce-ae):V,$,m?s(U,ue):U);M[S]=de,L[S]=de-$}if(c){var fe,pe="x"===S?A:_,he="x"===S?E:T,me=M[C],ge="y"===C?"height":"width",ve=me+y[pe],ye=me-y[he],be=-1!==[A,_].indexOf(b),we=null!=(fe=null==R?void 0:R[C])?fe:0,ke=be?ve:me-N[ge]-j[ge]-we+D.altAxis,xe=be?me+N[ge]+j[ge]-we-D.altAxis:ye,Se=m&&be?function(e,t,n){var r=le(e,t,n);return r>n?n:r}(ke,me,xe):le(m?ke:ve,me,m?xe:ye);M[C]=Se,L[C]=Se-me}t.modifiersData[r]=L}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=W(n.placement),l=K(s),c=[_,T].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(e,t){return ie("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ae(e,j))}(o.padding,n),d=w(i),f="y"===l?A:_,p="y"===l?E:T,h=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=O(i),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=h/2-m/2,b=u[f],k=v-d[c]-u[p],x=v/2-d[c]/2+y,S=le(b,x,k),C=l;n.modifiersData[r]=((t={})[C]=S,t.centerOffset=S-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&ne(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=se(t,{elementContext:"reference"}),s=se(t,{altBoundary:!0}),l=ce(a,r),c=ce(s,o,i),u=ue(l),d=ue(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),fe='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',pe="tippy-content",he="tippy-backdrop",me="tippy-arrow",ge="tippy-svg-arrow",ve={passive:!0,capture:!0},ye=function(){return document.body};function be(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function we(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function ke(e,t){return"function"==typeof e?e.apply(void 0,t):e}function xe(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)};var n}function Se(e,t){var n=Object.assign({},e);return t.forEach(function(e){delete n[e]}),n}function Ce(e){return[].concat(e)}function Me(e,t){-1===e.indexOf(t)&&e.push(t)}function Oe(e){return e.split("-")[0]}function Ae(e){return[].slice.call(e)}function Ee(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function Te(){return document.createElement("div")}function _e(e){return["Element","Fragment"].some(function(t){return we(e,t)})}function Ne(e){return we(e,"MouseEvent")}function je(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Pe(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function Ie(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function De(e){var t,n=Ce(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function Re(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function Le(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var Fe={isTouch:!1},Be=0;function He(){Fe.isTouch||(Fe.isTouch=!0,window.performance&&document.addEventListener("mousemove",ze))}function ze(){var e=performance.now();e-Be<20&&(Fe.isTouch=!1,document.removeEventListener("mousemove",ze)),Be=e}function $e(){var e=document.activeElement;if(je(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var Ve=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Ue=Object.assign({appendTo:ye,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),We=Object.keys(Ue);function qe(e){var t=(e.plugins||[]).reduce(function(t,n){var r,o=n.name,i=n.defaultValue;return o&&(t[o]=void 0!==e[o]?e[o]:null!=(r=Ue[o])?r:i),t},{});return Object.assign({},e,t)}function Ke(e,t){var n=Object.assign({},t,{content:ke(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(qe(Object.assign({},Ue,{plugins:t}))):We).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}(e,t.plugins));return n.aria=Object.assign({},Ue.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var Ge=function(){return"innerHTML"};function Ye(e,t){e[Ge()]=t}function Je(e){var t=Te();return!0===e?t.className=me:(t.className=ge,_e(e)?t.appendChild(e):Ye(t,e)),t}function Xe(e,t){_e(t.content)?(Ye(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Ye(e,t.content):e.textContent=t.content)}function Qe(e){var t=e.firstElementChild,n=Ae(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(pe)}),arrow:n.find(function(e){return e.classList.contains(me)||e.classList.contains(ge)}),backdrop:n.find(function(e){return e.classList.contains(he)})}}function Ze(e){var t=Te(),n=Te();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Te();function o(n,r){var o=Qe(t),i=o.box,a=o.content,s=o.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"==typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Xe(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(i.removeChild(s),i.appendChild(Je(r.arrow))):i.appendChild(Je(r.arrow)):s&&i.removeChild(s)}return r.className=pe,r.setAttribute("data-state","hidden"),Xe(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props),{popper:t,onUpdate:o}}Ze.$$tippy=!0;var et=1,tt=[],nt=[];function rt(e,t){var n,r,o,i,a,s,l,c,u=Ke(e,Object.assign({},Ue,qe(Ee(t)))),d=!1,f=!1,p=!1,h=!1,m=[],g=xe(K,u.interactiveDebounce),v=et++,y=(c=u.plugins).filter(function(e,t){return c.indexOf(e)===t}),b={id:v,reference:e,popper:Te(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(o)},setProps:function(t){if(!b.state.isDestroyed){P("onBeforeUpdate",[b,t]),W();var n=b.props,r=Ke(e,Object.assign({},n,Ee(t),{ignoreAttributes:!0}));b.props=r,U(),n.interactiveDebounce!==r.interactiveDebounce&&(R(),g=xe(K,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?Ce(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),D(),j(),x&&x(n,r),b.popperInstance&&(X(),Z().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Fe.isTouch&&!b.props.touch,o=be(b.props.duration,0,Ue.duration);if(!(e||t||n||r||E().hasAttribute("disabled")||(P("onShow",[b],!1),!1===b.props.onShow(b)))){if(b.state.isVisible=!0,A()&&(k.style.visibility="visible"),j(),H(),b.state.isMounted||(k.style.transition="none"),A()){var i=_();Pe([i.box,i.content],0)}var a,l,c;s=function(){var e;if(b.state.isVisible&&!h){if(h=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,A()&&b.props.animation){var t=_(),n=t.box,r=t.content;Pe([n,r],o),Ie([n,r],"visible")}I(),D(),Me(nt,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&A()&&function(e){$(e,function(){b.state.isShown=!0,P("onShown",[b])})}(o)}},l=b.props.appendTo,c=E(),(a=b.props.interactive&&l===ye||"parent"===l?c.parentNode:ke(l,[c])).contains(k)||a.appendChild(k),b.state.isMounted=!0,X()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=be(b.props.duration,1,Ue.duration);if(!(e||t||n)&&(P("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,h=!1,d=!1,A()&&(k.style.visibility="hidden"),R(),z(),j(!0),A()){var o=_(),i=o.box,a=o.content;b.props.animation&&(Pe([i,a],r),Ie([i,a],"hidden"))}I(),D(),b.props.animation?A()&&function(e,t){$(e,function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&t()})}(r,b.unmount):b.unmount()}},hideWithInteractivity:function(e){T().addEventListener("mousemove",g),Me(tt,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Q(),Z().forEach(function(e){e._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),nt=nt.filter(function(e){return e!==b}),b.state.isMounted=!1,P("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),W(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b]))}};if(!u.render)return b;var w=u.render(b),k=w.popper,x=w.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+b.id,b.popper=k,e._tippy=b,k._tippy=b;var S=y.map(function(e){return e.fn(b)}),C=e.hasAttribute("aria-expanded");return U(),D(),j(),P("onCreate",[b]),u.showOnCreate&&ee(),k.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&T().addEventListener("mousemove",g)}),b;function M(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function O(){return"hold"===M()[0]}function A(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function E(){return l||e}function T(){var e=E().parentNode;return e?De(e):document}function _(){return Qe(k)}function N(e){return b.state.isMounted&&!b.state.isVisible||Fe.isTouch||i&&"focus"===i.type?0:be(b.props.delay,e?0:1,Ue.delay)}function j(e){void 0===e&&(e=!1),k.style.pointerEvents=b.props.interactive&&!e?"":"none",k.style.zIndex=""+b.props.zIndex}function P(e,t,n){var r;void 0===n&&(n=!0),S.forEach(function(n){n[e]&&n[e].apply(n,t)}),n&&(r=b.props)[e].apply(r,t)}function I(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=k.id;Ce(b.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var o=t&&t.replace(r,"").trim();o?e.setAttribute(n,o):e.removeAttribute(n)}})}}function D(){!C&&b.props.aria.expanded&&Ce(b.props.triggerTarget||e).forEach(function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===E()?"true":"false"):e.removeAttribute("aria-expanded")})}function R(){T().removeEventListener("mousemove",g),tt=tt.filter(function(e){return e!==g})}function L(t){if(!Fe.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!Le(k,n)){if(Ce(b.props.triggerTarget||e).some(function(e){return Le(e,n)})){if(Fe.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),f=!0,setTimeout(function(){f=!1}),b.state.isMounted||z())}}}function F(){p=!0}function B(){p=!1}function H(){var e=T();e.addEventListener("mousedown",L,!0),e.addEventListener("touchend",L,ve),e.addEventListener("touchstart",B,ve),e.addEventListener("touchmove",F,ve)}function z(){var e=T();e.removeEventListener("mousedown",L,!0),e.removeEventListener("touchend",L,ve),e.removeEventListener("touchstart",B,ve),e.removeEventListener("touchmove",F,ve)}function $(e,t){var n=_().box;function r(e){e.target===n&&(Re(n,"remove",r),t())}if(0===e)return t();Re(n,"remove",a),Re(n,"add",r),a=r}function V(t,n,r){void 0===r&&(r=!1),Ce(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})})}function U(){var e;O()&&(V("touchstart",q,{passive:!0}),V("touchend",G,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach(function(e){if("manual"!==e)switch(V(e,q),e){case"mouseenter":V("mouseleave",G);break;case"focus":V(Ve?"focusout":"blur",Y);break;case"focusin":V("focusout",Y)}})}function W(){m.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)}),m=[]}function q(e){var t,n=!1;if(b.state.isEnabled&&!J(e)&&!f){var r="focus"===(null==(t=i)?void 0:t.type);i=e,l=e.currentTarget,D(),!b.state.isVisible&&Ne(e)&&tt.forEach(function(t){return t(e)}),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(d=!n),n&&!r&&te(e)}}function K(e){var t=e.target,n=E().contains(t)||k.contains(t);if("mousemove"!==e.type||!n){var r=Z().concat(k).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null}).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,o=e.popperState,i=e.props.interactiveBorder,a=Oe(o.placement),s=o.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,d="left"===a?s.right.x:0,f=t.top-r+l>i,p=r-t.bottom-c>i,h=t.left-n+u>i,m=n-t.right-d>i;return f||p||h||m})})(r,e)&&(R(),te(e))}}function G(e){J(e)||b.props.trigger.indexOf("click")>=0&&d||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function Y(e){b.props.trigger.indexOf("focusin")<0&&e.target!==E()||b.props.interactive&&e.relatedTarget&&k.contains(e.relatedTarget)||te(e)}function J(e){return!!Fe.isTouch&&O()!==e.type.indexOf("touch")>=0}function X(){Q();var t=b.props,n=t.popperOptions,r=t.placement,o=t.offset,i=t.getReferenceClientRect,a=t.moveTransition,l=A()?Qe(k).arrow:null,c=i?{getBoundingClientRect:i,contextElement:i.contextElement||E()}:e,u=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(A()){var n=_().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];A()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=de(c,k,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:u}))}function Q(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Z(){return Ae(k.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),H();var t=N(!0),r=M(),o=r[0],i=r[1];Fe.isTouch&&"hold"===o&&i&&(t=i),t?n=setTimeout(function(){b.show()},t):b.show()}function te(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=N(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):o=requestAnimationFrame(function(){b.hide()})}}else z()}}function ot(e,t){void 0===t&&(t={});var n=Ue.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",He,ve),window.addEventListener("blur",$e);var r,o=Object.assign({},t,{plugins:n}),i=(r=e,_e(r)?[r]:function(e){return we(e,"NodeList")}(r)?Ae(r):Array.isArray(r)?r:Ae(document.querySelectorAll(r))).reduce(function(e,t){var n=t&&rt(t,o);return n&&e.push(n),e},[]);return _e(e)?i[0]:i}ot.defaultProps=Ue,ot.setDefaultProps=function(e){Object.keys(e).forEach(function(t){Ue[t]=e[t]})},ot.currentInput=Fe;var it=function(e){var t=void 0===e?{}:e,n=t.exclude,r=t.duration;nt.forEach(function(e){var t=!1;if(n&&(t=je(n)?e.reference===n:e.popper===n.popper),!t){var o=e.props.duration;e.setProps({duration:r}),e.hide(),e.state.isDestroyed||e.setProps({duration:o})}})},at=Object.assign({},X,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),st=function(e,t){var n;void 0===t&&(t={});var r,o=e,i=[],a=[],s=t.overrides,l=[],c=!1;function u(){a=o.map(function(e){return Ce(e.props.triggerTarget||e.reference)}).reduce(function(e,t){return e.concat(t)},[])}function d(){i=o.map(function(e){return e.reference})}function f(e){o.forEach(function(t){e?t.enable():t.disable()})}function p(e){return o.map(function(t){var n=t.setProps;return t.setProps=function(o){n(o),t.reference===r&&e.setProps(o)},function(){t.setProps=n}})}function h(e,t){var n=a.indexOf(t);if(t!==r){r=t;var l=(s||[]).concat("content").reduce(function(e,t){return e[t]=o[n].props[t],e},{});e.setProps(Object.assign({},l,{getReferenceClientRect:"function"==typeof l.getReferenceClientRect?l.getReferenceClientRect:function(){var e;return null==(e=i[n])?void 0:e.getBoundingClientRect()}}))}}f(!1),d(),u();var m={fn:function(){return{onDestroy:function(){f(!0)},onHidden:function(){r=null},onClickOutside:function(e){e.props.showOnCreate&&!c&&(c=!0,r=null)},onShow:function(e){e.props.showOnCreate&&!c&&(c=!0,h(e,i[0]))},onTrigger:function(e,t){h(e,t.currentTarget)}}}},g=ot(Te(),Object.assign({},Se(t,["overrides"]),{plugins:[m].concat(t.plugins||[]),triggerTarget:a,popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat((null==(n=t.popperOptions)?void 0:n.modifiers)||[],[at])})})),v=g.show;g.show=function(e){if(v(),!r&&null==e)return h(g,i[0]);if(!r||null!=e){if("number"==typeof e)return i[e]&&h(g,i[e]);if(o.indexOf(e)>=0){var t=e.reference;return h(g,t)}return i.indexOf(e)>=0?h(g,e):void 0}},g.showNext=function(){var e=i[0];if(!r)return g.show(0);var t=i.indexOf(r);g.show(i[t+1]||e)},g.showPrevious=function(){var e=i[i.length-1];if(!r)return g.show(e);var t=i.indexOf(r),n=i[t-1]||e;g.show(n)};var y=g.setProps;return g.setProps=function(e){s=e.overrides||s,y(e)},g.setInstances=function(e){f(!0),l.forEach(function(e){return e()}),o=e,f(!1),d(),u(),l=p(g),g.setProps({triggerTarget:a})},l=p(g),g},lt={mouseover:"mouseenter",focusin:"focus",click:"click"};function ct(e,t){var n=[],r=[],o=!1,i=t.target,a=Se(t,["target"]),s=Object.assign({},a,{trigger:"manual",touch:!1}),l=Object.assign({touch:Ue.touch},a,{showOnCreate:!0}),c=ot(e,s);function u(e){if(e.target&&!o){var n=e.target.closest(i);if(n){var a=n.getAttribute("data-tippy-trigger")||t.trigger||Ue.trigger;if(!n._tippy&&!("touchstart"===e.type&&"boolean"==typeof l.touch||"touchstart"!==e.type&&a.indexOf(lt[e.type])<0)){var s=ot(n,l);s&&(r=r.concat(s))}}}}function d(e,t,r,o){void 0===o&&(o=!1),e.addEventListener(t,r,o),n.push({node:e,eventType:t,handler:r,options:o})}return Ce(c).forEach(function(e){var t=e.destroy,i=e.enable,a=e.disable;e.destroy=function(e){void 0===e&&(e=!0),e&&r.forEach(function(e){e.destroy()}),r=[],n.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)}),n=[],t()},e.enable=function(){i(),r.forEach(function(e){return e.enable()}),o=!1},e.disable=function(){a(),r.forEach(function(e){return e.disable()}),o=!0},function(e){var t=e.reference;d(t,"touchstart",u,ve),d(t,"mouseover",u),d(t,"focusin",u),d(t,"click",u)}(e)}),c}var ut={name:"animateFill",defaultValue:!1,fn:function(e){var t;if(null==(t=e.props.render)||!t.$$tippy)return{};var n=Qe(e.popper),r=n.box,o=n.content,i=e.props.animateFill?function(){var e=Te();return e.className=he,Ie([e],"hidden"),e}():null;return{onCreate:function(){i&&(r.insertBefore(i,r.firstElementChild),r.setAttribute("data-animatefill",""),r.style.overflow="hidden",e.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(i){var e=r.style.transitionDuration,t=Number(e.replace("ms",""));o.style.transitionDelay=Math.round(t/10)+"ms",i.style.transitionDuration=e,Ie([i],"visible")}},onShow:function(){i&&(i.style.transitionDuration="0ms")},onHide:function(){i&&Ie([i],"hidden")}}}},dt={clientX:0,clientY:0},ft=[];function pt(e){var t=e.clientX,n=e.clientY;dt={clientX:t,clientY:n}}var ht={name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,n=De(e.props.triggerTarget||t),r=!1,o=!1,i=!0,a=e.props;function s(){return"initial"===e.props.followCursor&&e.state.isVisible}function l(){n.addEventListener("mousemove",d)}function c(){n.removeEventListener("mousemove",d)}function u(){r=!0,e.setProps({getReferenceClientRect:null}),r=!1}function d(n){var r=!n.target||t.contains(n.target),o=e.props.followCursor,i=n.clientX,a=n.clientY,s=t.getBoundingClientRect(),l=i-s.left,c=a-s.top;!r&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),n=i,r=a;"initial"===o&&(n=e.left+l,r=e.top+c);var s="horizontal"===o?e.top:r,u="vertical"===o?e.right:n,d="horizontal"===o?e.bottom:r,f="vertical"===o?e.left:n;return{width:u-f,height:d-s,top:s,right:u,bottom:d,left:f}}})}function f(){e.props.followCursor&&(ft.push({instance:e,doc:n}),function(e){e.addEventListener("mousemove",pt)}(n))}function p(){0===(ft=ft.filter(function(t){return t.instance!==e})).filter(function(e){return e.doc===n}).length&&function(e){e.removeEventListener("mousemove",pt)}(n)}return{onCreate:f,onDestroy:p,onBeforeUpdate:function(){a=e.props},onAfterUpdate:function(t,n){var i=n.followCursor;r||void 0!==i&&a.followCursor!==i&&(p(),i?(f(),!e.state.isMounted||o||s()||l()):(c(),u()))},onMount:function(){e.props.followCursor&&!o&&(i&&(d(dt),i=!1),s()||l())},onTrigger:function(e,t){Ne(t)&&(dt={clientX:t.clientX,clientY:t.clientY}),o="focus"===t.type},onHidden:function(){e.props.followCursor&&(u(),c(),i=!0)}}}},mt={name:"inlinePositioning",defaultValue:!1,fn:function(e){var t,n=e.reference,r=-1,o=!1,i=[],a={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(o){var a=o.state;e.props.inlinePositioning&&(-1!==i.indexOf(a.placement)&&(i=[]),t!==a.placement&&-1===i.indexOf(a.placement)&&(i.push(a.placement),e.setProps({getReferenceClientRect:function(){return function(e){return function(e,t,n,r){if(n.length<2||null===e)return t;if(2===n.length&&r>=0&&n[0].left>n[1].right)return n[r]||t;switch(e){case"top":case"bottom":var o=n[0],i=n[n.length-1],a="top"===e,s=o.top,l=i.bottom,c=a?o.left:i.left,u=a?o.right:i.right;return{top:s,bottom:l,left:c,right:u,width:u-c,height:l-s};case"left":case"right":var d=Math.min.apply(Math,n.map(function(e){return e.left})),f=Math.max.apply(Math,n.map(function(e){return e.right})),p=n.filter(function(t){return"left"===e?t.left===d:t.right===f}),h=p[0].top,m=p[p.length-1].bottom;return{top:h,bottom:m,left:d,right:f,width:f-d,height:m-h};default:return t}}(Oe(e),n.getBoundingClientRect(),Ae(n.getClientRects()),r)}(a.placement)}})),t=a.placement)}};function s(){var t;o||(t=function(e,t){var n;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat(((null==(n=e.popperOptions)?void 0:n.modifiers)||[]).filter(function(e){return e.name!==t.name}),[t])})}}(e.props,a),o=!0,e.setProps(t),o=!1)}return{onCreate:s,onAfterUpdate:s,onTrigger:function(t,n){if(Ne(n)){var o=Ae(e.reference.getClientRects()),i=o.find(function(e){return e.left-2<=n.clientX&&e.right+2>=n.clientX&&e.top-2<=n.clientY&&e.bottom+2>=n.clientY}),a=o.indexOf(i);r=a>-1?a:r}},onHidden:function(){r=-1}}}},gt={name:"sticky",defaultValue:!1,fn:function(e){var t=e.reference,n=e.popper;function r(t){return!0===e.props.sticky||e.props.sticky===t}var o=null,i=null;function a(){var s=r("reference")?(e.popperInstance?e.popperInstance.state.elements.reference:t).getBoundingClientRect():null,l=r("popper")?n.getBoundingClientRect():null;(s&&vt(o,s)||l&&vt(i,l))&&e.popperInstance&&e.popperInstance.update(),o=s,i=l,e.state.isMounted&&requestAnimationFrame(a)}return{onMount:function(){e.props.sticky&&a()}}}};function vt(e,t){return!e||!t||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left}ot.setDefaultProps({render:Ze});var yt=ot},16426:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},27003:function(e,t,n){"use strict";var r=n(96540).useLayoutEffect;t.A=r},1063:function(e,t,n){"use strict";var r=n(96540),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return s(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),a(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},77154:function(e,t,n){"use strict";var r=n(96540),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,a=r.useRef,s=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=l(function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==u&&f.hasValue){var t=f.value;if(u(t,e))return a=t}return a=e}if(t=a,o(i,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(i=e,a=n)}var i,a,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,u]);var p=i(e,d[0],d[1]);return s(function(){f.hasValue=!0,f.value=p},[p]),c(p),p}},19888:function(e,t,n){"use strict";e.exports=n(1063)},78418:function(e,t,n){"use strict";e.exports=n(77154)},22831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return g.default}});var r=v(n(74213)),o=v(n(14808)),i=v(n(96792)),a=v(n(49910)),s=v(n(13518)),l=v(n(30343)),c=v(n(14948)),u=v(n(45073)),d=v(n(77186)),f=v(n(74671)),p=v(n(43507)),h=v(n(30744)),m=v(n(37037)),g=v(n(7775));function v(e){return e&&e.__esModule?e:{default:e}}},74213:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},22311:function(e,t){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,a){return r((s=r(r(t,e),r(o,a)))<<(l=i)|s>>>32-l,n);var s,l}function i(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function a(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function l(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var o=0;o<t.length;++o)e[o]=t.charCodeAt(o)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",o=0;o<n;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var o=1732584193,c=-271733879,u=-1732584194,d=271733878,f=0;f<e.length;f+=16){var p=o,h=c,m=u,g=d;o=i(o,c,u,d,e[f],7,-680876936),d=i(d,o,c,u,e[f+1],12,-389564586),u=i(u,d,o,c,e[f+2],17,606105819),c=i(c,u,d,o,e[f+3],22,-1044525330),o=i(o,c,u,d,e[f+4],7,-176418897),d=i(d,o,c,u,e[f+5],12,1200080426),u=i(u,d,o,c,e[f+6],17,-1473231341),c=i(c,u,d,o,e[f+7],22,-45705983),o=i(o,c,u,d,e[f+8],7,1770035416),d=i(d,o,c,u,e[f+9],12,-1958414417),u=i(u,d,o,c,e[f+10],17,-42063),c=i(c,u,d,o,e[f+11],22,-1990404162),o=i(o,c,u,d,e[f+12],7,1804603682),d=i(d,o,c,u,e[f+13],12,-40341101),u=i(u,d,o,c,e[f+14],17,-1502002290),o=a(o,c=i(c,u,d,o,e[f+15],22,1236535329),u,d,e[f+1],5,-165796510),d=a(d,o,c,u,e[f+6],9,-1069501632),u=a(u,d,o,c,e[f+11],14,643717713),c=a(c,u,d,o,e[f],20,-373897302),o=a(o,c,u,d,e[f+5],5,-701558691),d=a(d,o,c,u,e[f+10],9,38016083),u=a(u,d,o,c,e[f+15],14,-660478335),c=a(c,u,d,o,e[f+4],20,-405537848),o=a(o,c,u,d,e[f+9],5,568446438),d=a(d,o,c,u,e[f+14],9,-1019803690),u=a(u,d,o,c,e[f+3],14,-187363961),c=a(c,u,d,o,e[f+8],20,1163531501),o=a(o,c,u,d,e[f+13],5,-1444681467),d=a(d,o,c,u,e[f+2],9,-51403784),u=a(u,d,o,c,e[f+7],14,1735328473),o=s(o,c=a(c,u,d,o,e[f+12],20,-1926607734),u,d,e[f+5],4,-378558),d=s(d,o,c,u,e[f+8],11,-2022574463),u=s(u,d,o,c,e[f+11],16,1839030562),c=s(c,u,d,o,e[f+14],23,-35309556),o=s(o,c,u,d,e[f+1],4,-1530992060),d=s(d,o,c,u,e[f+4],11,1272893353),u=s(u,d,o,c,e[f+7],16,-155497632),c=s(c,u,d,o,e[f+10],23,-1094730640),o=s(o,c,u,d,e[f+13],4,681279174),d=s(d,o,c,u,e[f],11,-358537222),u=s(u,d,o,c,e[f+3],16,-722521979),c=s(c,u,d,o,e[f+6],23,76029189),o=s(o,c,u,d,e[f+9],4,-640364487),d=s(d,o,c,u,e[f+12],11,-421815835),u=s(u,d,o,c,e[f+15],16,530742520),o=l(o,c=s(c,u,d,o,e[f+2],23,-995338651),u,d,e[f],6,-198630844),d=l(d,o,c,u,e[f+7],10,1126891415),u=l(u,d,o,c,e[f+14],15,-1416354905),c=l(c,u,d,o,e[f+5],21,-57434055),o=l(o,c,u,d,e[f+12],6,1700485571),d=l(d,o,c,u,e[f+3],10,-1894986606),u=l(u,d,o,c,e[f+10],15,-1051523),c=l(c,u,d,o,e[f+1],21,-2054922799),o=l(o,c,u,d,e[f+8],6,1873313359),d=l(d,o,c,u,e[f+15],10,-30611744),u=l(u,d,o,c,e[f+6],15,-1560198380),c=l(c,u,d,o,e[f+13],21,1309151649),o=l(o,c,u,d,e[f+4],6,-145523070),d=l(d,o,c,u,e[f+11],10,-1120210379),u=l(u,d,o,c,e[f+2],15,718787259),c=l(c,u,d,o,e[f+9],21,-343485551),o=r(o,p),c=r(c,h),u=r(u,m),d=r(d,g)}return[o,c,u,d]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),o=0;o<t;o+=8)r[o>>5]|=(255&e[o/8])<<o%32;return r}(e),8*e.length))}},46140:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},14808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},96792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(37037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},27656:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},2858:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},9042:function(e,t){"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var a=0;a<i.length;++a)e.push(i.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,l=Math.ceil(s/16),c=new Array(l),u=0;u<l;++u){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=e[64*u+4*f]<<24|e[64*u+4*f+1]<<16|e[64*u+4*f+2]<<8|e[64*u+4*f+3];c[u]=d}c[l-1][14]=8*(e.length-1)/Math.pow(2,32),c[l-1][14]=Math.floor(c[l-1][14]),c[l-1][15]=8*(e.length-1)&4294967295;for(var p=0;p<l;++p){for(var h=new Uint32Array(80),m=0;m<16;++m)h[m]=c[p][m];for(var g=16;g<80;++g)h[g]=r(h[g-3]^h[g-8]^h[g-14]^h[g-16],1);for(var v=o[0],y=o[1],b=o[2],w=o[3],k=o[4],x=0;x<80;++x){var S=Math.floor(x/20),C=r(v,5)+n(S,y,b,w)+k+t[S]+h[x]>>>0;k=w,w=b,b=r(y,30)>>>0,y=v,v=C}o[0]=o[0]+v>>>0,o[1]=o[1]+y>>>0,o[2]=o[2]+b>>>0,o[3]=o[3]+w>>>0,o[4]=o[4]+k>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},49910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;for(var r,o=(r=n(37037))&&r.__esModule?r:{default:r},i=[],a=0;a<256;++a)i.push((a+256).toString(16).slice(1));function s(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}t.default=function(e,t=0){var n=s(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},13518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,a=(r=n(2858))&&r.__esModule?r:{default:r},s=n(49910),l=0,c=0;t.default=function(e,t,n){var r=t&&n||0,u=t||new Array(16),d=(e=e||{}).node,f=e.clockseq;if(e._v6||(d||(d=o),null==f&&(f=i)),null==d||null==f){var p=e.random||(e.rng||a.default)();null==d&&(d=[p[0],p[1],p[2],p[3],p[4],p[5]],o||e._v6||(d[0]|=1,o=d)),null==f&&(f=16383&(p[6]<<8|p[7]),void 0!==i||e._v6||(i=f))}var h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-l+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>l)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,c=m,i=f;var v=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;u[r++]=v>>>24&255,u[r++]=v>>>16&255,u[r++]=v>>>8&255,u[r++]=255&v;var y=h/4294967296*1e4&268435455;u[r++]=y>>>8&255,u[r++]=255&y,u[r++]=y>>>24&15|16,u[r++]=y>>>16&255,u[r++]=f>>>8|128,u[r++]=255&f;for(var b=0;b<6;++b)u[r+b]=d[b];return t||(0,s.unsafeStringify)(u)}},30343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=(t="string"==typeof e?(0,o.default)(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,i.unsafeStringify)(n):n};var r,o=(r=n(96792))&&r.__esModule?r:{default:r},i=n(49910)},14948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(59025)),o=i(n(22311));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,o.default);t.default=a},59025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,a,s){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,i.default)(r)),16!==(null===(l=r)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),(c=n(c))[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(var u=0;u<16;++u)a[s+u]=c[u];return a}return(0,o.unsafeStringify)(c)}try{r.name=e}catch(e){}return r.DNS=a,r.URL=s,r};var r,o=n(49910),i=(r=n(96792))&&r.__esModule?r:{default:r},a=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},45073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(46140)),o=a(n(2858)),i=n(49910);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var a=(e=e||{}).random||(e.rng||o.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=a[s];return t}return(0,i.unsafeStringify)(a)}},77186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(59025)),o=i(n(9042));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,o.default);t.default=a},74671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t,n=0){var a=(0,o.default)(l(l({},e),{},{_v6:!0}),new Uint8Array(16));if(a=(0,i.default)(a),t){for(var s=0;s<16;s++)t[n+s]=a[s];return t}return(0,r.unsafeStringify)(a)};var r=n(49910),o=a(n(13518)),i=a(n(30343));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},43507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=(t="string"==typeof e?(0,o.default)(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,i.unsafeStringify)(n):n};var r,o=(r=n(96792))&&r.__esModule?r:{default:r},i=n(49910)},30744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(2858))&&r.__esModule?r:{default:r},i=n(49910),a=null,s=null,l=0;t.default=function(e,t,n){e=e||{};var r=t&&n||0,c=t||new Uint8Array(16),u=e.random||(e.rng||o.default)(),d=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.seq?e.seq:null,p=s,h=a;return d>l&&void 0===e.msecs&&(l=d,null!==f&&(p=null,h=null)),null!==f&&(f>2147483647&&(f=2147483647),p=f>>>19&4095,h=524287&f),null!==p&&null!==h||(p=(p=127&u[6])<<8|u[7],h=(h=(h=63&u[8])<<8|u[9])<<5|u[10]>>>3),d+1e4>l&&null===f?++h>524287&&(h=0,++p>4095&&(p=0,l++)):l=d,s=p,a=h,c[r++]=l/1099511627776&255,c[r++]=l/4294967296&255,c[r++]=l/16777216&255,c[r++]=l/65536&255,c[r++]=l/256&255,c[r++]=255&l,c[r++]=p>>>4&15|112,c[r++]=255&p,c[r++]=h>>>13&63|128,c[r++]=h>>>5&255,c[r++]=h<<3&255|7&u[10],c[r++]=u[11],c[r++]=u[12],c[r++]=u[13],c[r++]=u[14],c[r++]=u[15],t||(0,i.unsafeStringify)(c)}},37037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(27656))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},7775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(37037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},72381:function(e,t,n){"use strict";e.exports=n.p+"js/dest/assets/media-crop-focal.svg"},87145:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICA8ZyBpZD0i44Kw44Or44O844OX5YyWXzExNzgiIGRhdGEtbmFtZT0i44Kw44Or44O844OX5YyWIDExNzgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00Ni40NzEgLTM0NykiPgogICAgPGcgaWQ9IuOCsOODq+ODvOODl+WMll8xMTc3IiBkYXRhLW5hbWU9IuOCsOODq+ODvOODl+WMliAxMTc3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1My45MzggMzU0LjQ2NykiPgogICAgICA8cmVjdCBpZD0i6ZW35pa55b2iXzE2NDAiIGRhdGEtbmFtZT0i6ZW35pa55b2iIDE2NDAiIHdpZHRoPSIyNC41MzMiIGhlaWdodD0iMi40NTMiIGZpbGw9IiNmZmYiLz4KICAgICAgPHJlY3QgaWQ9IumVt+aWueW9ol8xNjQxIiBkYXRhLW5hbWU9IumVt+aWueW9oiAxNjQxIiB3aWR0aD0iMjQuNTMzIiBoZWlnaHQ9IjIuNDUzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjQ1Mykgcm90YXRlKDkwKSIgZmlsbD0iI2ZmZiIvPgogICAgPC9nPgogICAgPGcgaWQ9IuOCsOODq+ODvOODl+WMll8xMTc2IiBkYXRhLW5hbWU9IuOCsOODq+ODvOODl+WMliAxMTc2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MS4wMDUgMzcxLjUzMykgcm90YXRlKDE4MCkiPgogICAgICA8cmVjdCBpZD0i6ZW35pa55b2iXzE2NDIiIGRhdGEtbmFtZT0i6ZW35pa55b2iIDE2NDIiIHdpZHRoPSIyNC41MzMiIGhlaWdodD0iMi40NTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMCkiIGZpbGw9IiNmZmYiLz4KICAgICAgPHJlY3QgaWQ9IumVt+aWueW9ol8xNjQzIiBkYXRhLW5hbWU9IumVt+aWueW9oiAxNjQzIiB3aWR0aD0iMjQuNTMzIiBoZWlnaHQ9IjIuNDUzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjQ1MyAwKSByb3RhdGUoOTApIiBmaWxsPSIjZmZmIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},9839:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMC4xMTQiIGhlaWdodD0iMzAuMTEzIiB2aWV3Qm94PSIwIDAgMzAuMTE0IDMwLjExMyI+CiAgPHBhdGggaWQ9IuODkeOCuV85NiIgZGF0YS1uYW1lPSLjg5HjgrkgOTYiIGQ9Ik0yMjEuODcsMzkuMDA5aC00LjlhOS43NTIsOS43NTIsMCwwLDAtOS4zMzktOS4zMzh2LTQuOWEuNDA3LjQwNywwLDEsMC0uODE0LDB2NC45YTkuNzUxLDkuNzUxLDAsMCwwLTkuMzM5LDkuMzM4aC00LjlhLjQwNy40MDcsMCwwLDAsMCwuODE0aDQuOWE5Ljc1MSw5Ljc1MSwwLDAsMCw5LjMzOSw5LjMzOXY0LjlhLjQwNy40MDcsMCwwLDAsLjgxNCwwdi00LjlhOS43NTIsOS43NTIsMCwwLDAsOS4zMzktOS4zMzloNC45YS40MDcuNDA3LDAsMSwwLDAtLjgxNFptLTYuNTMyLDBIMjA5LjYyYTIuNDMyLDIuNDMyLDAsMCwwLTEuOTkzLTEuOTkzVjMxLjNBOC4xMzUsOC4xMzUsMCwwLDEsMjE1LjMzNywzOS4wMDlaTTIwNi44MTMsMzEuM3Y1LjcxOGEyLjQzMywyLjQzMywwLDAsMC0xLjk5NCwxLjk5M0gxOTkuMUE4LjEzNyw4LjEzNywwLDAsMSwyMDYuODEzLDMxLjNaTTE5OS4xLDM5LjgyM2g1LjcxOGEyLjQzMywyLjQzMywwLDAsMCwxLjk5NCwxLjk5NHY1LjcxOEE4LjEzNSw4LjEzNSwwLDAsMSwxOTkuMSwzOS44MjNabTguNTI1LDcuNzEyVjQxLjgxN2EyLjQzMSwyLjQzMSwwLDAsMCwxLjk5My0xLjk5NGg1LjcxN0E4LjEzNSw4LjEzNSwwLDAsMSwyMDcuNjI3LDQ3LjUzNFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xOTIuMTYzIC0yNC4zNTkpIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo="},50416:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMC42NiIgaGVpZ2h0PSIyNi43NDciIHZpZXdCb3g9IjAgMCAyMC42NiAyNi43NDciPgogIDxnIGlkPSLjgrDjg6vjg7zjg5fljJZfMTE4MCIgZGF0YS1uYW1lPSLjgrDjg6vjg7zjg5fljJYgMTE4MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40MzggMS4wMjIpIj4KICAgIDxwYXRoIGlkPSLjg5HjgrlfOTciIGRhdGEtbmFtZT0i44OR44K5IDk3IiBkPSJNMCwwLDEyLjM3Mi4ybC4yLDEyLjM3MkwuMiwxMi4zNzJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDE1LjM5Nikgcm90YXRlKC00NSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4KICAgIDxwYXRoIGlkPSLjg5HjgrlfNzUiIGRhdGEtbmFtZT0i44OR44K5IDc1IiBkPSJNMjIuOCw3bDIuNC4yMDYuMjA2LTIuNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTkuNDM2IC0yLjE5NSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPgogICAgPHBhdGggaWQ9IuODkeOCuV83NiIgZGF0YS1uYW1lPSLjg5HjgrkgNzYiIGQ9Ik0xNi43MTEsNS4xMjRhNy4yNTksNy4yNTksMCwwLDAtNy40Mi00LjA1M0E3LjQ4OCw3LjQ4OCwwLDAsMCw0LDQuOTg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS45MDUgLTEuMDA5KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPC9nPgo8L3N2Zz4K"},99248:function(e,t,n){"use strict";var r=n(56614),o=n(37392),i=n(88470),a=n(61106),s=n(54175),l=n(16675),c=n(13637);function u(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class d{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{const n=t(...e)(i);return o.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(o),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,a=[],s=!!e,l=e||o.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),o=n(...e)(r);return a.push(o),c}])),run:()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),a.every(e=>!0===e))};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,o=e||n.tr,i=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,a={tr:e,editor:r,view:i,state:u({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(a)]))}};return a}}class f{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function p(e,t,n){return void 0===e.config[t]&&e.parent?p(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?p(e.parent,t,n):null}):e.config[t]}function h(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function m(e){const t=[],{nodeExtensions:n,markExtensions:r}=h(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=p(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:o});n&&n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...i,...r}})})})})}),o.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=p(e,"addAttributes",n);if(!r)return;const o=r();Object.entries(o).forEach(([n,r])=>{const o={...i,...r};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&void 0===(null==o?void 0:o.default)&&delete o.default,t.push({type:e.name,name:n,attribute:o})})}),t}function g(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function v(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{if(n[e])if("class"===e){const r=t?String(t).split(" "):[],o=n[e]?n[e].split(" "):[],i=r.filter(e=>!o.includes(e));n[e]=[...o,...i].join(" ")}else if("style"===e){const r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],o=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;o.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[e]=Array.from(i.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t;else n[e]=t}),n},{})}function y(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>v(e,t),{})}function b(e){return"function"==typeof e}function w(e,t=void 0,...n){return b(e)?t?e.bind(t)(...n):e(...n):e}function k(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function x(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function S(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const o=t.reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):x(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...o}}}}function C(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!k(t))&&null!=t))}function M(e,t){var n;const r=m(e),{nodeExtensions:o,markExtensions:i}=h(e),s=null===(n=o.find(e=>p(e,"topNode")))||void 0===n?void 0:n.name,l=Object.fromEntries(o.map(n=>{const o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=C({...e.reduce((e,t)=>{const r=p(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:w(p(n,"content",i)),marks:w(p(n,"marks",i)),group:w(p(n,"group",i)),inline:w(p(n,"inline",i)),atom:w(p(n,"atom",i)),selectable:w(p(n,"selectable",i)),draggable:w(p(n,"draggable",i)),code:w(p(n,"code",i)),whitespace:w(p(n,"whitespace",i)),linebreakReplacement:w(p(n,"linebreakReplacement",i)),defining:w(p(n,"defining",i)),isolating:w(p(n,"isolating",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=w(p(n,"parseHTML",i));s&&(a.parseDOM=s.map(e=>S(e,o)));const l=p(n,"renderHTML",i);l&&(a.toDOM=e=>l({node:e,HTMLAttributes:y(e,o)}));const c=p(n,"renderText",i);return c&&(a.toText=c),[n.name,a]})),c=Object.fromEntries(i.map(n=>{const o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=C({...e.reduce((e,t)=>{const r=p(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:w(p(n,"inclusive",i)),excludes:w(p(n,"excludes",i)),group:w(p(n,"group",i)),spanning:w(p(n,"spanning",i)),code:w(p(n,"code",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=w(p(n,"parseHTML",i));s&&(a.parseDOM=s.map(e=>S(e,o)));const l=p(n,"renderHTML",i);return l&&(a.toDOM=e=>l({mark:e,HTMLAttributes:y(e,o)})),[n.name,a]}));return new a.Schema({topNode:s,nodes:l,marks:c})}function O(e,t){return t.nodes[e]||t.marks[e]||null}function A(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function E(e,t){const n=a.DOMSerializer.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}const T=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,o,i)=>{var a,s;const l=(null===(s=(a=e.type.spec).toText)||void 0===s?void 0:s.call(a,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n};function _(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class N{constructor(e){this.find=e.find,this.handler=e.handler}}const j=(e,t)=>{if(_(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function P(e){var t;const{editor:n,from:r,to:o,text:i,rules:a,plugin:s}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let f=!1;const p=T(c)+i;return a.forEach(e=>{if(f)return;const t=j(p,e.find);if(!t)return;const a=l.state.tr,c=u({state:l.state,transaction:a}),h={from:r-(t[0].length-i.length),to:o},{commands:m,chain:g,can:v}=new d({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:m,chain:g,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),l.dispatch(a),f=!0)}),f}function I(e){const{editor:t,rules:n}=e,o=new r.Plugin({state:{init(){return null},apply(e,r,i){const s=e.getMeta(o);if(s)return s;const l=e.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:e}=l;"string"==typeof e||(e=E(a.Fragment.from(e),i.schema));const{from:r}=l,s=r+e.length;P({editor:t,from:r,to:s,text:e,rules:n,plugin:o})}),e.selectionSet||e.docChanged?null:r}},props:{handleTextInput(e,r,i,a){return P({editor:t,from:r,to:i,text:a,rules:n,plugin:o})},handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:r}=e.state.selection;r&&P({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:o})}),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&P({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:o})}},isInputRules:!0});return o}function D(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function R(e,t){const n={...e};return D(e)&&D(t)&&Object.keys(t).forEach(r=>{D(t[r])&&D(e[r])?n[r]=R(e[r],t[r]):n[r]=t[r]}),n}class L{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(p(this,"addOptions",{name:this.name}))),this.storage=w(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new L(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>R(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new L(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=w(p(t,"addOptions",{name:t.name})),t.storage=w(p(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!o.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;const i=o.find(e=>(null==e?void 0:e.type.name)===t.name);return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}}function F(e){return"number"==typeof e}class B{constructor(e){this.find=e.find,this.handler=e.handler}}let H=null;function z(e){const{editor:t,rules:n}=e;let o,i=null,s=!1,l=!1,c="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{o="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{o=null}const f=({state:e,from:n,to:r,rule:i,pasteEvt:a})=>{const s=e.tr,l=u({state:e,transaction:s}),f=function(e){const{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:a,dropEvent:s}=e,{commands:l,chain:c,can:u}=new d({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,o,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const d=Math.max(r,t),p=Math.min(o,t+e.content.size);((e,t,n)=>{if(_(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.textBetween(d-t,p-t,void 0,""),i.find,a).forEach(e=>{if(void 0===e.index)return;const t=d+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:l,chain:c,can:u,pasteEvent:a,dropEvent:s});f.push(p)})}),f.every(e=>null!==e)}({editor:t,state:l,from:Math.max(n-1,0),to:r.b-1,rule:i,pasteEvent:a,dropEvent:o});if(f&&s.steps.length){try{o="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{o=null}return c="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,s}},p=n.map(e=>new r.Plugin({view(e){const n=n=>{var r;i=(null===(r=e.dom.parentElement)||void 0===r?void 0:r.contains(n.target))?e.dom.parentElement:null,i&&(H=t)},r=()=>{H&&(H=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(l=i===e.dom.parentElement,o=t,!l){const e=H;(null==e?void 0:e.isEditable)&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return c=t,s=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const o=t[0],i="paste"===o.getMeta("uiEvent")&&!s,u="drop"===o.getMeta("uiEvent")&&!l,d=o.getMeta("applyPasteRules"),p=!!d;if(!i&&!u&&!p)return;if(p){let{text:t}=d;"string"==typeof t||(t=E(a.Fragment.from(t),r.schema));const{from:n}=d,o=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(t);return f({rule:e,state:r,from:n,to:{b:o},pasteEvt:i})}const h=n.doc.content.findDiffStart(r.doc.content),m=n.doc.content.findDiffEnd(r.doc.content);return F(h)&&m&&h!==m.b?f({rule:e,state:r,from:h,to:m,pasteEvt:c}):void 0}}));return p}function $(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}class V{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=V.resolve(e),this.schema=M(this.extensions,t),this.setupExtensions()}static resolve(e){const t=V.sort(V.flatten(e)),n=$(t.map(e=>e.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(e=>{const t=p(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{const n=p(e,"priority")||100,r=p(t,"priority")||100;return n>r?-1:n<r?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n=p(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:O(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this,t=V.sort([...this.extensions].reverse()),n=[],r=[],o=t.map(t=>{const o={name:t.name,options:t.options,storage:t.storage,editor:e,type:O(t.name,this.schema)},a=[],s=p(t,"addKeyboardShortcuts",o);let l={};if("mark"===t.type&&p(t,"exitable",o)&&(l.ArrowRight=()=>L.handleExit({editor:e,mark:t})),s){const t=Object.fromEntries(Object.entries(s()).map(([t,n])=>[t,()=>n({editor:e})]));l={...l,...t}}const c=i.keymap(l);a.push(c);const u=p(t,"addInputRules",o);A(t,e.options.enableInputRules)&&u&&n.push(...u());const d=p(t,"addPasteRules",o);A(t,e.options.enablePasteRules)&&d&&r.push(...d());const f=p(t,"addProseMirrorPlugins",o);if(f){const e=f();a.push(...e)}return a}).flat();return[I({editor:e,rules:n}),...z({editor:e,rules:r}),...o]}get attributes(){return m(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=h(this.extensions);return Object.fromEntries(t.filter(e=>!!p(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:g(t.name,this.schema)},o=p(t,"addNodeView",r);return o?[t.name,(r,i,a,s,l)=>{const c=y(r,n);return o()({node:r,view:i,getPos:a,decorations:s,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:O(e.name,this.schema)};"mark"===e.type&&(null===(t=w(p(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);const r=p(e,"onBeforeCreate",n),o=p(e,"onCreate",n),i=p(e,"onUpdate",n),a=p(e,"onSelectionUpdate",n),s=p(e,"onTransaction",n),l=p(e,"onFocus",n),c=p(e,"onBlur",n),u=p(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),s&&this.editor.on("transaction",s),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}}class U{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(p(this,"addOptions",{name:this.name}))),this.storage=w(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new U(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>R(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new U({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=w(p(t,"addOptions",{name:t.name})),t.storage=w(p(t,"addStorage",{name:t.name,options:t.options})),t}}function W(e,t,n){const{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:a={}}=n||{};let s="";return e.nodesBetween(r,o,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(s+=i);const d=null==a?void 0:a[e.type.name];if(d)return l&&(s+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(s+=null===(u=null==e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n))}),s}function q(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const K=U.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,a=Math.min(...i.map(e=>e.$from.pos)),s=Math.max(...i.map(e=>e.$to.pos)),l=q(n);return W(r,{from:a,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function G(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:_(t[r])?t[r].test(e[r]):t[r]===e[r])}function Y(e,t,n={}){return e.find(e=>e.type===t&&G(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function J(e,t,n={}){return!!Y(e,t,n)}function X(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some(e=>e.type===t)||(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(e=>e.type===t))return;if(n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs),!Y([...o.node.marks],t,n))return;let i=o.index,a=e.start()+o.offset,s=i+1,l=a+o.node.nodeSize;for(;i>0&&J([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&J([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:l}}function Q(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Z(e){return e instanceof r.TextSelection}function ee(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function te(e,t=null){if(!t)return null;const n=r.Selection.atStart(e),o=r.Selection.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return o;const i=n.from,a=o.to;return"all"===t?r.TextSelection.create(e,ee(0,i,a),ee(e.content.size,i,a)):r.TextSelection.create(e,ee(t,i,a),ee(t,i,a))}function ne(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function re(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const oe=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&oe(r)}return e};function ie(e){const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return oe(n)}function ae(e,t,n){if(e instanceof a.Node||e instanceof a.Fragment)return e;n={slice:!0,parseOptions:{},...n};const r="string"==typeof e;if("object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return a.Fragment.fromArray(e.map(e=>t.nodeFromJSON(e)));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),ae("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,o="";const i=new a.Schema({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,o="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?a.DOMParser.fromSchema(i).parseSlice(ie(e),n.parseOptions):a.DOMParser.fromSchema(i).parse(ie(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const r=a.DOMParser.fromSchema(t);return n.slice?r.parseSlice(ie(e),n.parseOptions).content:r.parse(ie(e),n.parseOptions)}return ae("",t,n)}function se(e,t,n){const o=e.steps.length-1;if(o<t)return;const i=e.steps[o];if(!(i instanceof s.ReplaceStep||i instanceof s.ReplaceAroundStep))return;const a=e.mapping.maps[o];let l=0;a.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(r.Selection.near(e.doc.resolve(l),n))}function le(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function ce(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,a=t?g(t,e.schema):null,s=[];e.doc.nodesBetween(r,o,(e,t)=>{if(e.isText)return;const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);s.push({node:e,from:n,to:i})});const l=o-r,c=s.filter(e=>!a||a.name===e.node.type.name).filter(e=>G(e.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function ue(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function de(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function fe(e,t,n={},r={}){return ae(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function pe(e,t){const n=Q(t,e.schema),{from:r,to:o,empty:i}=e.selection,a=[];i?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,e=>{a.push(...e.marks)});const s=a.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function he(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function me(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function ge(e){return t=>me(t.$from,e)}function ve(e,t){return M(V.resolve(e),t)}function ye(e,t){return W(e,{from:0,to:e.content.size},t)}function be(e,t){const n=g(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,e=>{i.push(e)});const a=i.reverse().find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function we(e,t){const n=ue("string"==typeof t?t:t.name,e.schema);return"node"===n?be(e,t):"mark"===n?pe(e,t):{}}function ke(e,t=JSON.stringify){const n={};return e.filter(e=>{const r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}function xe(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(t=>{const o=X(n.resolve(e),t.type);o&&r.push({mark:t,...o})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function Se(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function Ce(e,t,n={}){const{empty:r,ranges:o}=e.selection,i=t?Q(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>G(e.attrs,n,{strict:!1}));let a=0;const s=[];if(o.forEach(({$from:t,$to:n})=>{const r=t.pos,o=n.pos;e.doc.nodesBetween(r,o,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);a+=i-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:i})))})}),0===a)return!1;const l=s.filter(e=>!i||i.name===e.mark.type.name).filter(e=>G(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=s.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=a}function Me(e,t,n={}){if(!t)return ce(e,null,n)||Ce(e,null,n);const r=ue(t,e.schema);return"node"===r?ce(e,t,n):"mark"===r&&Ce(e,t,n)}function Oe(e,t){const{nodeExtensions:n}=h(t),r=n.find(t=>t.name===e);if(!r)return!1;const o=w(p(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}function Ae(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(r=e.text)&&void 0!==r?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(Ae(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function Ee({json:e,validMarks:t,validNodes:n,options:r,rewrittenContent:o=[]}){return e.marks&&Array.isArray(e.marks)&&(e.marks=e.marks.filter(e=>{const n="string"==typeof e?e:e.type;return!!t.has(n)||(o.push({original:JSON.parse(JSON.stringify(e)),unsupported:n}),!1)})),e.content&&Array.isArray(e.content)&&(e.content=e.content.map(e=>Ee({json:e,validMarks:t,validNodes:n,options:r,rewrittenContent:o}).json).filter(e=>null!=e)),e.type&&!n.has(e.type)?(o.push({original:JSON.parse(JSON.stringify(e)),unsupported:e.type}),e.content&&Array.isArray(e.content)&&!1!==(null==r?void 0:r.fallbackToParagraph)?(e.type="paragraph",{json:e,rewrittenContent:o}):{json:null,rewrittenContent:o}):{json:e,rewrittenContent:o}}function Te(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}const _e=(e,t)=>{const n=ge(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!s.canJoin(e.doc,n.pos)||(e.join(n.pos),!0)},Ne=(e,t)=>{const n=ge(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!s.canJoin(e.doc,r)||(e.join(r),!0)};var je=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return!n||(o.forEach(({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,(e,n)=>{if(e.type.isText)return;const{doc:r,mapping:o}=t,i=r.resolve(o.map(n)),a=r.resolve(o.map(n+e.nodeSize)),l=i.blockRange(a);if(!l)return;const c=s.liftTarget(l);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());t.setNodeMarkup(l.start,e)}(c||0===c)&&t.lift(l,c)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>l.createParagraphNear(e,t),cut:(e,t)=>({editor:n,tr:o})=>{const{state:i}=n,a=i.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);const s=o.mapping.map(t);return o.insert(s,a.content),o.setSelection(new r.TextSelection(o.doc.resolve(s-1))),!0},deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const o=e.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===r.type){if(t){const t=o.before(n),r=o.after(n);e.delete(t,r).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:r})=>{const o=g(e,n.schema),i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1)if(i.node(e).type===o){if(r){const n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0},deleteSelection:()=>({state:e,dispatch:t})=>l.deleteSelection(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>l.exitCode(e,t),extendMarkRange:(e,t={})=>({tr:n,state:o,dispatch:i})=>{const a=Q(e,o.schema),{doc:s,selection:l}=n,{$from:c,from:u,to:d}=l;if(i){const e=X(c,a,t);if(e&&e.from<=u&&e.to>=d){const t=r.TextSelection.create(s,e.from,e.to);n.setSelection(t)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:i})=>{t={scrollIntoView:!0,...t};const a=()=>{(re()||ne())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(i&&null===e&&!Z(n.state.selection))return a(),!0;const s=te(o.doc,e)||n.state.selection,l=n.state.selection.eq(s);return i&&(l||o.setSelection(s),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){let o;const l=e=>{i.emit("contentError",{editor:i,error:e,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...(n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n}).parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{ae(t,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(e){l(e)}try{o=ae(t,i.schema,{parseOptions:c,errorOnInvalidContent:null!==(s=n.errorOnInvalidContent)&&void 0!==s?s:i.options.enableContentCheck})}catch(e){return l(e),!1}let u,{from:d,to:f}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},p=!0,h=!0;if(("type"in o?[o]:o).forEach(e=>{e.check(),p=!!p&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock}),d===f&&h){const{parent:e}=r.doc.resolve(d);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(d-=1,f+=1)}if(p){if(Array.isArray(t))u=t.map(e=>e.text||"").join("");else if(t instanceof a.Fragment){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),u=e}else u="object"==typeof t&&t&&t.text?t.text:t;r.insertText(u,d,f)}else u=o,r.replaceWith(d,f,u);n.updateSelection&&se(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:u}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:u})}return!0},joinBackward:()=>({state:e,dispatch:t})=>l.joinBackward(e,t),joinDown:()=>({state:e,dispatch:t})=>l.joinDown(e,t),joinForward:()=>({state:e,dispatch:t})=>l.joinForward(e,t),joinItemBackward:()=>({state:e,dispatch:t,tr:n})=>{try{const r=s.joinPoint(e.doc,e.selection.$from.pos,-1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},joinItemForward:()=>({state:e,dispatch:t,tr:n})=>{try{const r=s.joinPoint(e.doc,e.selection.$from.pos,1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},joinTextblockBackward:()=>({state:e,dispatch:t})=>l.joinTextblockBackward(e,t),joinTextblockForward:()=>({state:e,dispatch:t})=>l.joinTextblockForward(e,t),joinUp:()=>({state:e,dispatch:t})=>l.joinUp(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=function(e){const t=e.split(/-(?!$)/);let n,r,o,i,a=t[t.length-1];"Space"===a&&(a=" ");for(let e=0;e<t.length-1;e+=1){const a=t[e];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error(`Unrecognized modifier name: ${a}`);re()||le()?i=!0:r=!0}}return n&&(a=`Alt-${a}`),r&&(a=`Ctrl-${a}`),i&&(a=`Meta-${a}`),o&&(a=`Shift-${a}`),a}(e).split(/-(?!$)/),a=i.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),s=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,s))});return null==l||l.steps.forEach(e=>{const t=e.map(r.mapping);t&&o&&r.maybeStep(t)}),!0},lift:(e,t={})=>({state:n,dispatch:r})=>!!ce(n,g(e,n.schema),t)&&l.lift(n,r),liftEmptyBlock:()=>({state:e,dispatch:t})=>l.liftEmptyBlock(e,t),liftListItem:e=>({state:t,dispatch:n})=>{const r=g(e,t.schema);return c.liftListItem(r)(t,n)},newlineInCode:()=>({state:e,dispatch:t})=>l.newlineInCode(e,t),resetAttributes:(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null;const s=ue("string"==typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(i=g(e,r.schema)),"mark"===s&&(a=Q(e,r.schema)),o&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,de(e.attrs,t)),a&&e.marks.length&&e.marks.forEach(o=>{a===o.type&&n.addMark(r,r+e.nodeSize,a.create(de(o.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,dispatch:t})=>{if(t){const t=new r.AllSelection(e.doc);e.setSelection(t)}return!0},selectNodeBackward:()=>({state:e,dispatch:t})=>l.selectNodeBackward(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>l.selectNodeForward(e,t),selectParentNode:()=>({state:e,dispatch:t})=>l.selectParentNode(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>l.selectTextblockEnd(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>l.selectTextblockStart(e,t),setContent:(e,t=!1,n={},r={})=>({editor:o,tr:i,dispatch:a,commands:s})=>{var l,c;const{doc:u}=i;if("full"!==n.preserveWhitespace){const s=fe(e,o.schema,n,{errorOnInvalidContent:null!==(l=r.errorOnInvalidContent)&&void 0!==l?l:o.options.enableContentCheck});return a&&i.replaceWith(0,u.content.size,s).setMeta("preventUpdate",!t),!0}return a&&i.setMeta("preventUpdate",!t),s.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(c=r.errorOnInvalidContent)&&void 0!==c?c:o.options.enableContentCheck})},setMark:(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:a,ranges:s}=i,l=Q(e,r.schema);if(o)if(a){const e=pe(r,l);n.addStoredMark(l.create({...e,...t}))}else s.forEach(e=>{const o=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(o,i,(e,r)=>{const a=Math.max(r,o),s=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(a,s,l.create({...e.attrs,...t}))}):n.addMark(a,s,l.create(t))})});return function(e,t,n){var r;const{selection:o}=t;let i=null;if(Z(o)&&(i=o.$cursor),i){const t=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}const{ranges:a}=o;return a.some(({$from:t,$to:r})=>{let o=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(o)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));o=t&&i}return!o}),o})}(r,n,l)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:r,chain:o})=>{const i=g(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:e})=>!!l.setBlockType(i,{...a,...t})(n)||e.clearNodes()).command(({state:e})=>l.setBlockType(i,{...a,...t})(e,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,o=ee(e,0,n.content.size),i=r.NodeSelection.create(n,o);t.setSelection(i)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:o,to:i}="number"==typeof e?{from:e,to:e}:e,a=r.TextSelection.atStart(n).from,s=r.TextSelection.atEnd(n).to,l=ee(o,a,s),c=ee(i,a,s),u=r.TextSelection.create(n,l,c);t.setSelection(u)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>{const r=g(e,t.schema);return c.sinkListItem(r)(t,n)},splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:o,editor:i})=>{const{selection:a,doc:l}=t,{$from:c,$to:u}=a,d=Se(i.extensionManager.attributes,c.node().type.name,c.node().attrs);if(a instanceof r.NodeSelection&&a.node.isBlock)return!(!c.parentOffset||!s.canSplit(l,c.pos)||(o&&(e&&Te(n,i.extensionManager.splittableMarks),t.split(c.pos).scrollIntoView()),0));if(!c.parent.isBlock)return!1;const f=u.parentOffset===u.parent.content.size,p=0===c.depth?void 0:he(c.node(-1).contentMatchAt(c.indexAfter(-1)));let h=f&&p?[{type:p,attrs:d}]:void 0,m=s.canSplit(t.doc,t.mapping.map(c.pos),1,h);if(h||m||!s.canSplit(t.doc,t.mapping.map(c.pos),1,p?[{type:p}]:void 0)||(m=!0,h=p?[{type:p,attrs:d}]:void 0),o){if(m&&(a instanceof r.TextSelection&&t.deleteSelection(),t.split(t.mapping.map(c.pos),1,h),p&&!f&&!c.parentOffset&&c.parent.type!==p)){const e=t.mapping.map(c.before()),n=t.doc.resolve(e);c.node(-1).canReplaceWith(n.index(),n.index()+1,p)&&t.setNodeMarkup(t.mapping.map(c.before()),p)}e&&Te(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return m},splitListItem:(e,t={})=>({tr:n,state:o,dispatch:i,editor:l})=>{var c;const u=g(e,o.schema),{$from:d,$to:f}=o.selection,p=o.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(f))return!1;const h=d.node(-1);if(h.type!==u)return!1;const m=l.extensionManager.attributes;if(0===d.parent.content.size&&d.node(-1).childCount===d.indexAfter(-1)){if(2===d.depth||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let e=a.Fragment.empty;const o=d.index(-1)?1:d.index(-2)?2:3;for(let t=d.depth-o;t>=d.depth-3;t-=1)e=a.Fragment.from(d.node(t).copy(e));const i=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,s={...Se(m,d.node().type.name,d.node().attrs),...t},l=(null===(c=u.contentMatch.defaultType)||void 0===c?void 0:c.createAndFill(s))||void 0;e=e.append(a.Fragment.from(u.createAndFill(null,l)||void 0));const f=d.before(d.depth-(o-1));n.replace(f,d.after(-i),new a.Slice(e,4-o,0));let p=-1;n.doc.nodesBetween(f,n.doc.content.size,(e,t)=>{if(p>-1)return!1;e.isTextblock&&0===e.content.size&&(p=t+1)}),p>-1&&n.setSelection(r.TextSelection.near(n.doc.resolve(p))),n.scrollIntoView()}return!0}const v=f.pos===d.end()?h.contentMatchAt(0).defaultType:null,y={...Se(m,h.type.name,h.attrs),...t},b={...Se(m,d.node().type.name,d.node().attrs),...t};n.delete(d.pos,f.pos);const w=v?[{type:u,attrs:y},{type:v,attrs:b}]:[{type:u,attrs:y}];if(!s.canSplit(n.doc,d.pos,2))return!1;if(i){const{selection:e,storedMarks:t}=o,{splittableMarks:r}=l.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(n.split(d.pos,2,w).scrollIntoView(),!a||!i)return!0;const s=a.filter(e=>r.includes(e.type.name));n.ensureMarks(s)}return!0},toggleList:(e,t,n,r={})=>({editor:o,tr:i,state:a,dispatch:s,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=o.extensionManager,p=g(e,a.schema),h=g(t,a.schema),{selection:m,storedMarks:v}=a,{$from:y,$to:b}=m,w=y.blockRange(b),k=v||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const x=ge(e=>Oe(e.type.name,d))(m);if(w.depth>=1&&x&&w.depth-x.depth<=1){if(x.node.type===p)return c.liftListItem(h);if(Oe(x.node.type.name,d)&&p.validContent(x.node.content)&&s)return l().command(()=>(i.setNodeMarkup(x.pos,p),!0)).command(()=>_e(i,p)).command(()=>Ne(i,p)).run()}return n&&k&&s?l().command(()=>{const e=u().wrapInList(p,r),t=k.filter(e=>f.includes(e.type.name));return i.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(p,r).command(()=>_e(i,p)).command(()=>Ne(i,p)).run():l().command(()=>!!u().wrapInList(p,r)||c.clearNodes()).wrapInList(p,r).command(()=>_e(i,p)).command(()=>Ne(i,p)).run()},toggleMark:(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,a=Q(e,r.schema);return Ce(r,a,t)?o.unsetMark(a,{extendEmptyMarkRange:i}):o.setMark(a,t)},toggleNode:(e,t,n={})=>({state:r,commands:o})=>{const i=g(e,r.schema),a=g(t,r.schema),s=ce(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),s?o.setNode(a,l):o.setNode(i,{...l,...n})},toggleWrap:(e,t={})=>({state:n,commands:r})=>{const o=g(e,n.schema);return ce(n,o,t)?r.lift(o):r.wrapIn(o,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){const t=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(i.text){const n=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,n))}else t.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:a=!1}=t,{selection:s}=n,l=Q(e,r.schema),{$from:c,empty:u,ranges:d}=s;if(!o)return!0;if(u&&a){let{from:e,to:t}=s;const r=null===(i=c.marks().find(e=>e.type===l))||void 0===i?void 0:i.attrs,o=X(c,l,r);o&&(e=o.from,t=o.to),n.removeMark(e,t,l)}else d.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null;const s=ue("string"==typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(i=g(e,r.schema)),"mark"===s&&(a=Q(e,r.schema)),o&&n.selection.ranges.forEach(e=>{const o=e.$from.pos,s=e.$to.pos;let l,c,u,d;n.selection.empty?r.doc.nodesBetween(o,s,(e,t)=>{i&&i===e.type&&(u=Math.max(t,o),d=Math.min(t+e.nodeSize,s),l=t,c=e)}):r.doc.nodesBetween(o,s,(e,r)=>{r<o&&i&&i===e.type&&(u=Math.max(r,o),d=Math.min(r+e.nodeSize,s),l=r,c=e),r>=o&&r<=s&&(i&&i===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach(i=>{if(a===i.type){const l=Math.max(r,o),c=Math.min(r+e.nodeSize,s);n.addMark(l,c,a.create({...i.attrs,...t}))}}))}),c&&(void 0!==l&&n.setNodeMarkup(l,void 0,{...c.attrs,...t}),a&&c.marks.length&&c.marks.forEach(e=>{a===e.type&&n.addMark(u,d,a.create({...e.attrs,...t}))}))}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:r})=>{const o=g(e,n.schema);return l.wrapIn(o,t)(n,r)},wrapInList:(e,t={})=>({state:n,dispatch:r})=>{const o=g(e,n.schema);return c.wrapInList(o,t)(n,r)}});const Pe=U.create({name:"commands",addCommands(){return{...je}}}),Ie=U.create({name:"drop",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),De=U.create({name:"editable",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Re=new r.PluginKey("focusEvents"),Le=U.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new r.Plugin({key:Re,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Fe=U.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{const{selection:n,doc:o}=t,{empty:i,$anchor:a}=n,{pos:s,parent:l}=a,c=a.parent.isTextblock&&s>0?t.doc.resolve(s-1):a,u=c.parent.type.spec.isolating,d=a.pos-a.parentOffset,f=u&&1===c.parent.childCount?d===a.pos:r.Selection.atStart(o).from===s;return!(!i||!l.type.isTextblock||l.textContent.length||!f||f&&"paragraph"===a.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return re()||le()?i:o},addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const o=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!o||i)return;const{empty:a,from:s,to:l}=t.selection,c=r.Selection.atStart(t.doc).from,f=r.Selection.atEnd(t.doc).to;if(a||s!==c||l!==f)return;if(!Ae(n.doc))return;const p=n.tr,h=u({state:n,transaction:p}),{commands:m}=new d({editor:this.editor,state:h});return m.clearNodes(),p.steps.length?p:void 0}})]}}),Be=U.create({name:"paste",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),He=U.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var ze=Object.freeze({__proto__:null,ClipboardTextSerializer:K,Commands:Pe,Drop:Ie,Editable:De,FocusEvents:Le,Keymap:Fe,Paste:Be,Tabindex:He,focusEventsPluginKey:Re});class $e{get name(){return this.node.type.name}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new $e(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new $e(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new $e(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const r=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,i=this.pos+n+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!r&&a.depth<=this.depth)return;const s=new $e(a,this.editor,r,r?t:null);r&&(s.actualDepth=this.depth+1),e.push(new $e(a,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];if(e[o]!==t[o])break}}else n=r;r=r.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;const o=Object.keys(t);return this.children.forEach(i=>{n&&r.length>0||(i.node.type.name===e&&o.every(e=>t[e]===i.node.attrs[e])&&r.push(i),n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n))))}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}function Ve(e,t,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}class Ue{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(p(this,"addOptions",{name:this.name}))),this.storage=w(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ue(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>R(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ue(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=w(p(t,"addOptions",{name:t.name})),t.storage=w(p(t,"addStorage",{name:t.name,options:t.options})),t}}t.CommandManager=d,t.Editor=class extends f{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ve('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=b(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"==typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[De,K.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Pe,Le,Fe,He,Ie,Be].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new V(n,this)}createCommandManager(){this.commandManager=new d({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=fe(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message)))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=fe(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=te(t,this.options.autofocus);this.view=new o.EditorView(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:r.EditorState.create({doc:t,selection:n||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return we(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,r="string"==typeof e?t:e;return Me(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return E(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return ye(this.state.doc,{blockSeparator:t,textSerializers:{...q(this.schema),...n}})}get isEmpty(){return Ae(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new $e(t,this)}get $doc(){return this.$pos(0)}},t.Extension=U,t.InputRule=N,t.Mark=L,t.Node=Ue,t.NodePos=$e,t.NodeView=class{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,o,i,a,s,l;const{view:c}=this.editor,u=e.target,d=3===u.nodeType?null===(t=u.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(u))||!d)return;let f=0,p=0;if(this.dom!==d){const t=this.dom.getBoundingClientRect(),n=d.getBoundingClientRect(),r=null!==(o=e.offsetX)&&void 0!==o?o:null===(i=e.nativeEvent)||void 0===i?void 0:i.offsetX,l=null!==(a=e.offsetY)&&void 0!==a?a:null===(s=e.nativeEvent)||void 0===s?void 0:s.offsetY;f=n.x-t.x+r,p=n.y-t.y+l}const h=this.dom.cloneNode(!0);null===(l=e.dataTransfer)||void 0===l||l.setDragImage(h,f,p);const m=this.getPos();if("number"!=typeof m)return;const g=r.NodeSelection.create(c.state.doc,m),v=c.state.tr.setSelection(g);c.dispatch(v)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});const n=e.target;if(!this.dom.contains(n)||(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(n)))return!1;const o=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:s}=this,l=!!this.node.type.spec.draggable,c=r.NodeSelection.isSelectable(this.node),u="copy"===e.type,d="paste"===e.type,f="cut"===e.type,p="mousedown"===e.type;if(!l&&c&&o&&e.target===this.dom&&e.preventDefault(),l&&o&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(l&&a&&!s&&p){const e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(s||i||u||d||f||p&&c)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom)||"selection"!==e.type&&(!(this.dom.contains(e.target)&&"childList"===e.type&&(re()||ne())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))))}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return"number"==typeof n&&(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if("number"!=typeof e)return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}},t.PasteRule=B,t.Tracker=class{constructor(e){this.transaction=e,this.currentStep=this.transaction.steps.length}map(e){let t=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((e,n)=>{const r=n.getMap().mapResult(e);return r.deleted&&(t=!0),r.pos},e),deleted:t}}},t.callOrReturn=w,t.canInsertNode=function(e,t){const{selection:n}=e,{$from:o}=n;if(n instanceof r.NodeSelection){const e=o.index();return o.parent.canReplaceWith(e,e+1,t)}let i=o.depth;for(;i>=0;){const e=o.index(i);if(o.node(i).contentMatchAt(e).matchType(t))return!0;i-=1}return!1},t.combineTransactionSteps=function(e,t){const n=new s.Transform(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n},t.createChainableState=u,t.createDocument=fe,t.createNodeFromContent=ae,t.createStyleTag=Ve,t.defaultBlockAt=he,t.deleteProps=de,t.elementFromString=ie,t.escapeForRegEx=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},t.extensions=ze,t.findChildren=function(e,t){const n=[];return e.descendants((e,r)=>{t(e)&&n.push({node:e,pos:r})}),n},t.findChildrenInRange=function(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r},t.findDuplicates=$,t.findParentNode=ge,t.findParentNodeClosestToPos=me,t.fromString=x,t.generateHTML=function(e,t){const n=ve(t);return E(a.Node.fromJSON(n,e).content,n)},t.generateJSON=function(e,t){const n=ve(t),r=ie(e);return a.DOMParser.fromSchema(n).parse(r).toJSON()},t.generateText=function(e,t,n){const{blockSeparator:r="\n\n",textSerializers:o={}}=n||{},i=ve(t);return ye(a.Node.fromJSON(i,e),{blockSeparator:r,textSerializers:{...q(i),...o}})},t.getAttributes=we,t.getAttributesFromExtensions=m,t.getChangedRanges=function(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,o)=>{const i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{const{from:e,to:t}=n[o];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(({from:e,to:n})=>{const i=t.slice(o).map(e,-1),a=t.slice(o).map(n),s=t.invert().map(i,-1),l=t.invert().map(a);r.push({oldRange:{from:s,to:l},newRange:{from:i,to:a}})})}),function(e){const t=ke(e);return 1===t.length?t:t.filter((e,n)=>!t.filter((e,t)=>t!==n).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}(r)},t.getDebugJSON=function e(t,n=0){const r=t.type===t.type.schema.topNodeType?0:1,o=n,i=o+t.nodeSize,a=t.marks.map(e=>{const t={type:e.type.name};return Object.keys(e.attrs).length&&(t.attrs={...e.attrs}),t}),s={...t.attrs},l={type:t.type.name,from:o,to:i};return Object.keys(s).length&&(l.attrs=s),a.length&&(l.marks=a),t.content.childCount&&(l.content=[],t.forEach((t,o)=>{var i;null===(i=l.content)||void 0===i||i.push(e(t,n+o+r))})),t.text&&(l.text=t.text),l},t.getExtensionField=p,t.getHTMLFromFragment=E,t.getMarkAttributes=pe,t.getMarkRange=X,t.getMarkType=Q,t.getMarksBetween=xe,t.getNodeAtPosition=(e,t,n,r=20)=>{const o=e.doc.resolve(n);let i=r,a=null;for(;i>0&&null===a;){const e=o.node(i);(null==e?void 0:e.type.name)===t?a=e:i-=1}return[a,i]},t.getNodeAttributes=be,t.getNodeType=g,t.getRenderedAttributes=y,t.getSchema=ve,t.getSchemaByResolvedExtensions=M,t.getSchemaTypeByName=O,t.getSchemaTypeNameByName=ue,t.getSplittedAttributes=Se,t.getText=ye,t.getTextBetween=W,t.getTextContentFromNodes=T,t.getTextSerializersFromSchema=q,t.injectExtensionAttributesToParseRule=S,t.inputRulesPlugin=I,t.isActive=Me,t.isAtEndOfNode=(e,t)=>{const{$from:n,$to:r,$anchor:o}=e.selection;if(t){const n=ge(e=>e.type.name===t)(e.selection);if(!n)return!1;const r=e.doc.resolve(n.pos+1);return o.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},t.isAtStartOfNode=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)},t.isEmptyObject=k,t.isExtensionRulesEnabled=A,t.isFunction=b,t.isList=Oe,t.isMacOS=le,t.isMarkActive=Ce,t.isNodeActive=ce,t.isNodeEmpty=Ae,t.isNodeSelection=function(e){return e instanceof r.NodeSelection},t.isNumber=F,t.isPlainObject=D,t.isRegExp=_,t.isString=function(e){return"string"==typeof e},t.isTextSelection=Z,t.isiOS=re,t.markInputRule=function(e){return new N({find:e.find,handler:({state:t,range:n,match:r})=>{const o=w(e.getAttributes,void 0,r);if(!1===o||null===o)return null;const{tr:i}=t,a=r[r.length-1],s=r[0];if(a){const r=s.search(/\S/),l=n.from+s.indexOf(a),c=l+a.length;if(xe(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&i.delete(c,n.to),l>n.from&&i.delete(n.from+r,l);const u=n.from+r+a.length;i.addMark(n.from+r,u,e.type.create(o||{})),i.removeStoredMark(e.type)}}})},t.markPasteRule=function(e){return new B({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:o})=>{const i=w(e.getAttributes,void 0,r,o);if(!1===i||null===i)return null;const{tr:a}=t,s=r[r.length-1],l=r[0];let c=n.to;if(s){const r=l.search(/\S/),o=n.from+l.indexOf(s),u=o+s.length;if(xe(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>o).length)return null;u<n.to&&a.delete(u,n.to),o>n.from&&a.delete(n.from+r,o),c=n.from+r+s.length,a.addMark(n.from+r,c,e.type.create(i||{})),a.removeStoredMark(e.type)}}})},t.mergeAttributes=v,t.mergeDeep=R,t.minMax=ee,t.nodeInputRule=function(e){return new N({find:e.find,handler:({state:t,range:n,match:r})=>{const o=w(e.getAttributes,void 0,r)||{},{tr:i}=t,a=n.from;let s=n.to;const l=e.type.create(o);if(r[1]){let e=a+r[0].lastIndexOf(r[1]);e>s?e=s:s=e+r[1].length;const t=r[0][r[0].length-1];i.insertText(t,a+r[0].length-1),i.replaceWith(e,s,l)}else if(r[0]){const t=e.type.isInline?a:a-1;i.insert(t,e.type.create(o)).delete(i.mapping.map(a),i.mapping.map(s))}i.scrollIntoView()}})},t.nodePasteRule=function(e){return new B({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:o}){const i=w(e.getAttributes,void 0,t,o),a=w(e.getContent,void 0,i);if(!1===i||null===i)return null;const s={type:e.type.name,attrs:i};a&&(s.content=a),t.input&&n().deleteRange(r).insertContentAt(r.from,s)}})},t.objectIncludes=G,t.pasteRulesPlugin=z,t.posToDOMRect=function(e,t,n){const r=e.state.doc.content.size,o=ee(t,0,r),i=ee(n,0,r),a=e.coordsAtPos(o),s=e.coordsAtPos(i,-1),l=Math.min(a.top,s.top),c=Math.max(a.bottom,s.bottom),u=Math.min(a.left,s.left),d=Math.max(a.right,s.right),f={top:l,bottom:c,left:u,right:d,width:d-u,height:c-l,x:u,y:l};return{...f,toJSON:()=>f}},t.removeDuplicates=ke,t.resolveFocusPosition=te,t.rewriteUnknownContent=function(e,t,n){return Ee({json:e,validNodes:new Set(Object.keys(t.nodes)),validMarks:new Set(Object.keys(t.marks)),options:n})},t.selectionToInsertionEnd=se,t.splitExtensions=h,t.textInputRule=function(e){return new N({find:e.find,handler:({state:t,range:n,match:r})=>{let o=e.replace,i=n.from;const a=n.to;if(r[1]){const e=r[0].lastIndexOf(r[1]);o+=r[0].slice(e+r[1].length),i+=e;const t=i-a;t>0&&(o=r[0].slice(e-t,e)+o,i=a)}t.tr.insertText(o,i,a)}})},t.textPasteRule=function(e){return new B({find:e.find,handler:({state:t,range:n,match:r})=>{let o=e.replace,i=n.from;const a=n.to;if(r[1]){const e=r[0].lastIndexOf(r[1]);o+=r[0].slice(e+r[1].length),i+=e;const t=i-a;t>0&&(o=r[0].slice(e-t,e)+o,i=a)}t.tr.insertText(o,i,a)}})},t.textblockTypeInputRule=function(e){return new N({find:e.find,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=w(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)}})},t.wrappingInputRule=function(e){return new N({find:e.find,handler:({state:t,range:n,match:r,chain:o})=>{const i=w(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),l=a.doc.resolve(n.from).blockRange(),c=l&&s.findWrapping(l,e.type,i);if(!c)return null;if(a.wrap(l,c),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:o}=e.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){const e=i.filter(e=>o.includes(e.type.name));a.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";o().updateAttributes(t,i).run()}const u=a.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&s.canJoin(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&a.join(n.from-1)}})}},94144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/^\s*>\s$/,i=r.Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[r.wrappingInputRule({find:o,type:this.type})]}});t.Blockquote=i,t.default=i,t.inputRegex=o},27096:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,i=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,a=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,s=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,l=r.Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[r.markInputRule({find:o,type:this.type}),r.markInputRule({find:a,type:this.type})]},addPasteRules(){return[r.markPasteRule({find:i,type:this.type}),r.markPasteRule({find:s,type:this.type})]}});t.Bold=l,t.default=l,t.starInputRegex=o,t.starPasteRegex=i,t.underscoreInputRegex=a,t.underscorePasteRegex=s},27595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614);function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=i(n(79244));class s{constructor({editor:e,element:t,view:n,tippyOptions:o={},updateDelay:i=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:e,state:t,from:n,to:o})=>{const{doc:i,selection:a}=t,{empty:s}=a,l=!i.textBetween(n,o).length&&r.isTextSelection(t.selection),c=this.element.contains(document.activeElement);return!(!e.hasFocus()&&!c||s||l||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||(null==e?void 0:e.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.handleDebouncedUpdate=(e,t)=>{const n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,r,t)},this.updateDelay))},this.updateHandler=(e,t,n,o)=>{var i,a,s;const{state:l,composing:c}=e,{selection:u}=l;if(c||!t&&!n)return;this.createTooltip();const{ranges:d}=u,f=Math.min(...d.map(e=>e.$from.pos)),p=Math.max(...d.map(e=>e.$to.pos));(null===(i=this.shouldShow)||void 0===i?void 0:i.call(this,{editor:this.editor,element:this.element,view:e,state:l,oldState:o,from:f,to:p}))?(null===(a=this.tippy)||void 0===a||a.setProps({getReferenceClientRect:(null===(s=this.tippyOptions)||void 0===s?void 0:s.getReferenceClientRect)||(()=>{if(r.isNodeSelection(l.selection)){let t=e.nodeDOM(f);if(t){const e=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");if(e&&(t=e.firstChild),t)return t.getBoundingClientRect()}}return r.posToDOMRect(e,f,p)})}),this.show()):this.hide()},this.editor=e,this.element=t,this.view=n,this.updateDelay=i,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=a.default(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);const o=!(null==t?void 0:t.selection.eq(e.state.selection)),i=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,o,i,t)}show(){var e;null===(e=this.tippy)||void 0===e||e.show()}hide(){var e;null===(e=this.tippy)||void 0===e||e.hide()}destroy(){var e,t;(null===(e=this.tippy)||void 0===e?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const l=e=>new o.Plugin({key:"string"==typeof e.pluginKey?new o.PluginKey(e.pluginKey):e.pluginKey,view:t=>new s({view:t,...e})}),c=r.Extension.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[l({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});t.BubbleMenu=c,t.BubbleMenuPlugin=l,t.BubbleMenuView=s,t.default=c},87918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o="textStyle",i=/^\s*([-+*])\s$/,a=r.Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(o)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=r.wrappingInputRule({find:i,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r.wrappingInputRule({find:i,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(o),editor:this.editor})),[e]}});t.BulletList=a,t.default=a,t.inputRegex=i},95006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614);const i=/^```([a-z]+)?[\s\n]$/,a=/^~~~([a-z]+)?[\s\n]$/,s=r.Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",r.mergeAttributes(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith("\n\n");return!(!i||!a)&&e.chain().command(({tr:e})=>(e.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:a}=n;if(!a||i.parent.type!==this.type)return!1;if(i.parentOffset!==i.parent.nodeSize-2)return!1;const s=i.after();return void 0!==s&&(r.nodeAt(s)?e.commands.command(({tr:e})=>(e.setSelection(o.Selection.near(r.resolve(s))),!0)):e.commands.exitCode())}}},addInputRules(){return[r.textblockTypeInputRule({find:i,type:this.type,getAttributes:e=>({language:e[1]})}),r.textblockTypeInputRule({find:a,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new o.Plugin({key:new o.PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=null==i?void 0:i.mode;if(!n||!a)return!1;const{tr:s,schema:l}=e.state,c=l.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:a},c)),s.selection.$from.parent.type!==this.type&&s.setSelection(o.TextSelection.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}});t.CodeBlock=s,t.backtickInputRegex=i,t.default=s,t.tildeInputRegex=a},61470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(^|[^`])`([^`]+)`(?!`)/,i=/(^|[^`])`([^`]+)`(?!`)/g,a=r.Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[r.markInputRule({find:o,type:this.type})]},addPasteRules(){return[r.markPasteRule({find:i,type:this.type})]}});t.Code=a,t.default=a,t.inputRegex=o,t.pasteRegex=i},58104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614),i=n(17896);const a=r.Extension.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},addStorage(){return{isDisabled:!1}},onCreate(){this.editor.extensionManager.extensions.find(e=>"history"===e.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:e,state:t,dispatch:n})=>(e.setMeta("preventDispatch",!0),0!==i.yUndoPluginKey.getState(t).undoManager.undoStack.length&&(!n||i.undo(t))),redo:()=>({tr:e,state:t,dispatch:n})=>(e.setMeta("preventDispatch",!0),0!==i.yUndoPluginKey.getState(t).undoManager.redoStack.length&&(!n||i.redo(t)))}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var e;const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),n=i.yUndoPlugin(this.options.yUndoOptions),r=n.spec.view;n.spec.view=e=>{const{undoManager:t}=i.yUndoPluginKey.getState(e.state);t.restore&&(t.restore(),t.restore=()=>{});const n=r?r(e):void 0;return{destroy:()=>{const e=t.trackedOrigins.has(t),r=t._observers;t.restore=()=>{e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=r},(null==n?void 0:n.destroy)&&n.destroy()}}};const a={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},s=i.ySyncPlugin(t,a);return this.editor.options.enableContentCheck&&(null===(e=t.doc)||void 0===e||e.on("beforeTransaction",()=>{try{const e=i.yXmlFragmentToProsemirrorJSON(t);if(0===e.content.length)return;this.editor.schema.nodeFromJSON(e).check()}catch(e){return this.editor.emit("contentError",{error:e,editor:this.editor,disableCollaboration:()=>{var e;null===(e=t.doc)||void 0===e||e.destroy(),this.storage.isDisabled=!0}}),!1}})),[s,n,this.editor.options.enableContentCheck&&new o.Plugin({key:new o.PluginKey("filterInvalidContent"),filterTransaction:()=>{var e;return!this.storage.isDisabled||(null===(e=t.doc)||void 0===e||e.destroy(),!0)}})].filter(Boolean)}});t.Collaboration=a,t.default=a,t.isChangeOrigin=function(e){return!!e.getMeta(i.ySyncPluginKey)}},62430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(99248).Node.create({name:"doc",topNode:!0,content:"block+"});t.Document=r,t.default=r},77630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(58104),i=n(56614),a=n(79244),s=n(17896),l=n(90855);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(a);const d=e=>{const{x:t,y:n,direction:r,editor:o}=e;let i=null,a=null,s=null,l=t;for(;null===a&&l<window.innerWidth&&l>0;){const e=document.elementsFromPoint(l,n),t=e.findIndex(e=>e.classList.contains("ProseMirror")),c=e.slice(0,t);if(c.length>0){const e=c[0];if(i=e,s=o.view.posAtDOM(e,0),s>=0){a=o.state.doc.nodeAt(Math.max(s-1,0)),(null==a?void 0:a.isText)&&(a=o.state.doc.nodeAt(Math.max(s-1,0))),a||(a=o.state.doc.nodeAt(Math.max(s,0)));break}}"left"===r?l-=1:l+=1}return{resultElement:i,resultNode:a,pos:null!=s?s:null}};function f(e,t){return window.getComputedStyle(e)[t]}function p(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function h(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}const m=(e,t)=>{const n=e.resolve(t),{depth:r}=n;return 0===r?t:n.pos-n.parentOffset-1},g=(e,t)=>{const n=e.nodeAt(t),r=e.resolve(t);let{depth:o}=r,i=n;for(;o>0;){const e=r.node(o);o-=1,0===o&&(i=e)}return i},v=(e,t)=>{const n=s.ySyncPluginKey.getState(e);return n?s.absolutePositionToRelativePosition(t,n.type,n.binding.mapping):null},y=(e,t)=>{let n=t;for(;n&&n.parentNode&&n.parentNode!==e.dom;)n=n.parentNode;return n},b=new i.PluginKey("dragHandle"),w=({pluginKey:e=b,element:t,editor:n,tippyOptions:r,onNodeChange:a})=>{const c=document.createElement("div");let w,k=null,x=!1,S=null,C=-1;return t.addEventListener("dragstart",e=>{!function(e,t){const{view:n}=t;if(!e.dataTransfer)return;const{empty:r,$from:o,$to:i}=n.state.selection,a=function(e,t){const{doc:n}=t.view.state,r=d({editor:t,x:e.clientX,y:e.clientY,direction:"right"});if(!r.resultNode||null===r.pos)return[];const o=e.clientX,i=function(e,t,n){const r=parseInt(f(e.dom,"paddingLeft"),10),o=parseInt(f(e.dom,"paddingRight"),10),i=parseInt(f(e.dom,"borderLeftWidth"),10),a=parseInt(f(e.dom,"borderLeftWidth"),10),s=e.dom.getBoundingClientRect();return{left:p(t,s.left+r+i,s.right-o-a),top:n}}(t.view,o,e.clientY),a=t.view.posAtCoords(i);if(!a)return[];const{pos:s}=a;if(!n.resolve(s).parent)return[];const c=n.resolve(r.pos),u=n.resolve(r.pos+1);return l.getSelectionRanges(c,u,0)}(e,t),s=l.getSelectionRanges(o,i,0),c=s.some(e=>a.find(t=>t.$from===e.$from&&t.$to===e.$to)),u=r||!c?a:s;if(!u.length)return;const{tr:m}=n.state,g=document.createElement("div"),v=u[0].$from.pos,y=u[u.length-1].$to.pos,b=l.NodeRangeSelection.create(n.state.doc,v,y),w=b.content();u.forEach(e=>{const t=function(e){const t=e.cloneNode(!0),n=[e,...Array.from(e.getElementsByTagName("*"))],r=[t,...Array.from(t.getElementsByTagName("*"))];return n.forEach((e,t)=>{r[t].style.cssText=function(e){let t="";const n=getComputedStyle(e);for(let e=0;e<n.length;e+=1)t+=`${n[e]}:${n.getPropertyValue(n[e])};`;return t}(e)}),t}(n.nodeDOM(e.$from.pos));g.append(t)}),g.style.position="absolute",g.style.top="-10000px",document.body.append(g),e.dataTransfer.clearData(),e.dataTransfer.setDragImage(g,0,0),n.dragging={slice:w,move:!0},m.setSelection(b),n.dispatch(m),document.addEventListener("drop",()=>h(g),{once:!0})}(e,n),setTimeout(()=>{t&&(t.style.pointerEvents="none")},0)}),t.addEventListener("dragend",()=>{t&&(t.style.pointerEvents="auto")}),new i.Plugin({key:"string"==typeof e?new i.PluginKey(e):e,state:{init(){return{locked:!1}},apply(e,r,i,l){const c=e.getMeta("lockDragHandle"),u=e.getMeta("hideDragHandle");if(void 0!==c&&(x=c),u&&k)return k.hide(),x=!1,S=null,C=-1,null==a||a({editor:n,node:null,pos:-1}),r;if(e.docChanged&&-1!==C&&t&&k)if(o.isChangeOrigin(e)){const e=((e,t)=>{const n=s.ySyncPluginKey.getState(e);return n?s.relativePositionToAbsolutePosition(n.doc,n.type,t,n.binding.mapping)||0:-1})(l,w);e!==C&&(C=e)}else{const t=e.mapping.map(C);t!==C&&(C=t,w=v(l,C))}return r}},view:e=>{var o;return t.draggable=!0,t.style.pointerEvents="auto",null===(o=n.view.dom.parentElement)||void 0===o||o.appendChild(c),c.appendChild(t),c.style.pointerEvents="none",c.style.position="absolute",c.style.top="0",c.style.left="0",{update(o,i){if(!t)return;if(!n.isEditable)return null==k||k.destroy(),void(k=null);if(k||(k=u.default(e.dom,{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]},...r,appendTo:c,content:t})),t.draggable=!x,e.state.doc.eq(i.doc)||-1===C)return;let s=e.nodeDOM(C);if(s=y(e,s),s===e.dom)return;if(1!==(null==s?void 0:s.nodeType))return;const l=e.posAtDOM(s,0),d=g(n.state.doc,l),f=m(n.state.doc,l);S=d,C=f,w=v(e.state,C),null==a||a({editor:n,node:S,pos:C}),k.setProps({getReferenceClientRect:()=>s.getBoundingClientRect()})},destroy(){null==k||k.destroy(),k=null,t&&h(c)}}},props:{handleDOMEvents:{mouseleave(e,t){return x||t.target&&!c.contains(t.relatedTarget)&&(null==k||k.hide(),S=null,C=-1,null==a||a({editor:n,node:null,pos:-1})),!1},mousemove(e,r){if(!t||!k||x)return!1;const o=d({x:r.clientX,y:r.clientY,direction:"right",editor:n});if(!o.resultElement)return!1;let i=o.resultElement;if(i=y(e,i),i===e.dom)return!1;if(1!==(null==i?void 0:i.nodeType))return!1;const s=e.posAtDOM(i,0),l=g(n.state.doc,s);if(l!==S){const t=m(n.state.doc,s);S=l,C=t,w=v(e.state,C),null==a||a({editor:n,node:S,pos:C}),k.setProps({getReferenceClientRect:()=>i.getBoundingClientRect()}),k.show()}return!1}}}})},k=r.Extension.create({name:"dragHandle",addOptions(){return{render(){const e=document.createElement("div");return e.classList.add("drag-handle"),e},tippyOptions:{},locked:!1,onNodeChange:()=>null}},addCommands(){return{lockDragHandle:()=>({editor:e})=>(this.options.locked=!0,e.commands.setMeta("lockDragHandle",this.options.locked)),unlockDragHandle:()=>({editor:e})=>(this.options.locked=!1,e.commands.setMeta("lockDragHandle",this.options.locked)),toggleDragHandle:()=>({editor:e})=>(this.options.locked=!this.options.locked,e.commands.setMeta("lockDragHandle",this.options.locked))}},addProseMirrorPlugins(){const e=this.options.render();return[w({tippyOptions:this.options.tippyOptions,element:e,editor:this.editor,onNodeChange:this.options.onNodeChange})]}});t.DragHandle=k,t.DragHandlePlugin=w,t.default=k,t.dragHandlePluginDefaultKey=b},60400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(78938);const i=r.Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[o.dropCursor(this.options)]}});t.Dropcursor=i,t.default=i},20535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614);function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=i(n(79244));class s{getTextContent(e){return r.getText(e,{textSerializers:r.getTextSerializersFromSchema(this.editor.schema)})}constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:e,state:t})=>{const{selection:n}=t,{$anchor:r,empty:o}=n,i=1===r.depth,a=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent&&0===r.parent.childCount&&!this.getTextContent(r.parent);return!!(e.hasFocus()&&o&&i&&a&&this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||(null==e?void 0:e.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.editor=e,this.element=t,this.view=n,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=a.default(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var n,o,i;const{state:a}=e,{doc:s,selection:l}=a,{from:c,to:u}=l;t&&t.doc.eq(s)&&t.selection.eq(l)||(this.createTooltip(),(null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:e,state:a,oldState:t}))?(null===(o=this.tippy)||void 0===o||o.setProps({getReferenceClientRect:(null===(i=this.tippyOptions)||void 0===i?void 0:i.getReferenceClientRect)||(()=>r.posToDOMRect(e,c,u))}),this.show()):this.hide())}show(){var e;null===(e=this.tippy)||void 0===e||e.show()}hide(){var e;null===(e=this.tippy)||void 0===e||e.hide()}destroy(){var e,t;(null===(e=this.tippy)||void 0===e?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const l=e=>new o.Plugin({key:"string"==typeof e.pluginKey?new o.PluginKey(e.pluginKey):e.pluginKey,view:t=>new s({view:t,...e})}),c=r.Extension.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[l({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});t.FloatingMenu=c,t.FloatingMenuPlugin=l,t.FloatingMenuView=s,t.default=c},68445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614),i=n(37392);const a=r.Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new o.Plugin({key:new o.PluginKey("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=t,a=[];if(!n||!r)return i.DecorationSet.create(e,[]);let s=0;"deepest"===this.options.mode&&e.descendants((e,t)=>{if(!e.isText)return o>=t&&o<=t+e.nodeSize-1&&void(s+=1)});let l=0;return e.descendants((e,t)=>!e.isText&&(o>=t&&o<=t+e.nodeSize-1&&(l+=1,"deepest"===this.options.mode&&s-l>0||"shallowest"===this.options.mode&&l>1?"deepest"===this.options.mode:void a.push(i.Decoration.node(t,t+e.nodeSize,{class:this.options.className}))))),i.DecorationSet.create(e,a)}}})]}});t.FocusClasses=a,t.default=a},12415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(82769);const i=r.Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[o.gapCursor()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=r.callOrReturn(r.getExtensionField(e,"allowGapCursor",n)))&&void 0!==t?t:null}}});t.Gapcursor=i,t.default=i},29656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",r.mergeAttributes(this.options.HTMLAttributes,e)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:e,storedMarks:o}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,s=o||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&s&&i){const t=s.filter(e=>a.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});t.HardBreak=o,t.default=o},74951:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,r.mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>r.textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});t.Heading=o,t.default=o},35857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,i=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,a=r.Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[r.markInputRule({find:o,type:this.type})]},addPasteRules(){return[r.markPasteRule({find:i,type:this.type})]}});t.Highlight=a,t.default=a,t.inputRegex=o,t.pasteRegex=i},7689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(87223);const i=r.Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>o.undo(e,t),redo:()=>({state:e,dispatch:t})=>o.redo(e,t)}},addProseMirrorPlugins(){return[o.history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});t.History=i,t.default=i},33332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614);const i=r.Node.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",r.mergeAttributes(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!r.canInsertNode(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$from:i,$to:a}=n,s=e();return 0===i.parentOffset?s.insertContentAt({from:Math.max(i.pos-1,0),to:a.pos},{type:this.name}):r.isNodeSelection(n)?s.insertContentAt(a.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:e,dispatch:t})=>{var n;if(t){const{$to:t}=e.selection,r=t.end();if(t.nodeAfter)t.nodeAfter.isTextblock?e.setSelection(o.TextSelection.create(e.doc,t.pos+1)):t.nodeAfter.isBlock?e.setSelection(o.NodeSelection.create(e.doc,t.pos)):e.setSelection(o.TextSelection.create(e.doc,t.pos));else{const i=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(e.insert(r,i),e.setSelection(o.TextSelection.create(e.doc,r+1)))}e.scrollIntoView()}return!0}).run()}}},addInputRules(){return[r.nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});t.HorizontalRule=i,t.default=i},6268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,i=r.Node.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",r.mergeAttributes(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[r.nodeInputRule({find:o,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}});t.Image=i,t.default=i,t.inputRegex=o},39007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,i=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,a=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,s=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,l=r.Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[r.markInputRule({find:o,type:this.type}),r.markInputRule({find:a,type:this.type})]},addPasteRules(){return[r.markPasteRule({find:i,type:this.type}),r.markPasteRule({find:s,type:this.type})]}});t.Italic=l,t.default=l,t.starInputRegex=o,t.starPasteRegex=i,t.underscoreInputRegex=a,t.underscorePasteRegex=s},81531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(54631),i=n(56614);const a=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function s(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{const t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(a,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const l=r.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{"string"!=typeof e?o.registerCustomProtocol(e.scheme,e.optionalSlashes):o.registerCustomProtocol(e)})},onDestroy(){o.reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!s(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!(!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!s(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!s(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",r.mergeAttributes(this.options.HTMLAttributes,e),0]:["a",r.mergeAttributes(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!s(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!s(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[r.markPasteRule({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=o.find(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!s(e,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;var a;return this.options.autolink&&e.push((a={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!s(e,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink},new i.Plugin({key:new i.PluginKey("autolink"),appendTransaction:(e,t,n)=>{const i=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),s=e.some(e=>e.getMeta("preventAutolink"));if(!i||s)return;const{tr:l}=n,c=r.combineTransactionSteps(t.doc,[...e]);return r.getChangedRanges(c).forEach(({newRange:e})=>{const t=r.findChildrenInRange(n.doc,e,e=>e.isTextblock);let i,s;if(t.length>1?(i=t[0],s=n.doc.textBetween(i.pos,i.pos+i.node.nodeSize,void 0," ")):t.length&&n.doc.textBetween(e.from,e.to," "," ").endsWith(" ")&&(i=t[0],s=n.doc.textBetween(i.pos,e.to,void 0," ")),i&&s){const e=s.split(" ").filter(e=>""!==e);if(e.length<=0)return!1;const t=e[e.length-1],u=i.pos+s.lastIndexOf(t);if(!t)return!1;const d=o.tokenize(t).map(e=>e.toObject(a.defaultProtocol));if(!(1===(c=d).length?c[0].isLink:3===c.length&&c[1].isLink&&["()","[]"].includes(c[0].value+c[2].value)))return!1;d.filter(e=>e.isLink).map(e=>({...e,from:u+e.start+1,to:u+e.end+1})).filter(e=>!n.schema.marks.code||!n.doc.rangeHasMark(e.from,e.to,n.schema.marks.code)).filter(e=>a.validate(e.value)).filter(e=>a.shouldAutoLink(e.value)).forEach(e=>{r.getMarksBetween(e.from,e.to,n.doc).some(e=>e.mark.type===a.type)||l.addMark(e.from,e.to,a.type.create({href:e.href}))})}var c}),l.steps.length?l:void 0}}))),!0===this.options.openOnClick&&e.push(function(e){return new i.Plugin({key:new i.PluginKey("handleClickLink"),props:{handleClick:(t,n,o)=>{var i,a;if(0!==o.button)return!1;if(!t.editable)return!1;let s=o.target;const l=[];for(;"DIV"!==s.nodeName;)l.push(s),s=s.parentNode;if(!l.find(e=>"A"===e.nodeName))return!1;const c=r.getAttributes(t.state,e.type.name),u=o.target,d=null!==(i=null==u?void 0:u.href)&&void 0!==i?i:c.href,f=null!==(a=null==u?void 0:u.target)&&void 0!==a?a:c.target;return!(!u||!d||(window.open(d,f),0))}}})}({type:this.type})),this.options.linkOnPaste&&e.push(function(e){return new i.Plugin({key:new i.PluginKey("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:a}=i,{empty:s}=a;if(s)return!1;let l="";r.content.forEach(e=>{l+=e.textContent});const c=o.find(l,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===l);return!(!l||!c)&&e.editor.commands.setMark(e.type,{href:c.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}});t.Link=l,t.default=l,t.isAllowedUri=s,t.pasteRegex=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi},14757:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});t.ListItem=o,t.default=o},90855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614),i=n(37392),a=n(61106);function s(e){if(!e.length)return i.DecorationSet.empty;const t=[],n=e[0].$from.node(0);return e.forEach(e=>{const n=e.$from.pos,r=e.$from.nodeAfter;r&&t.push(i.Decoration.node(n,n+r.nodeSize,{class:"ProseMirror-selectednoderange"}))}),i.DecorationSet.create(n,t)}function l(e,t,n){const r=[],i=e.node(0);n="number"==typeof n&&n>=0?n:e.sameParent(t)?Math.max(0,e.sharedDepth(t.pos)-1):e.sharedDepth(t.pos);const s=new a.NodeRange(e,t,n),l=0===s.depth?0:i.resolve(s.start).posAtIndex(0);return s.parent.forEach((e,t)=>{const n=l+t,a=n+e.nodeSize;if(n<s.start||n>=s.end)return;const c=new o.SelectionRange(i.resolve(n),i.resolve(a));r.push(c)}),r}class c{constructor(e,t){this.anchor=e,this.head=t}map(e){return new c(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return new u(t,n)}}class u extends o.Selection{constructor(e,t,n,r=1){const{doc:o}=e,i=e===t,a=e.pos===o.content.size&&t.pos===o.content.size,s=i&&!a?o.resolve(t.pos+(r>0?1:-1)):t,c=i&&a?o.resolve(e.pos-(r>0?1:-1)):e,u=l(c.min(s),c.max(s),n);super(s.pos>=e.pos?u[0].$from:u[u.length-1].$to,s.pos>=e.pos?u[u.length-1].$to:u[0].$from,u),this.depth=n}get $to(){return this.ranges[this.ranges.length-1].$to}eq(e){return e instanceof u&&e.$from.pos===this.$from.pos&&e.$to.pos===this.$to.pos}map(e,t){const n=e.resolve(t.map(this.anchor)),r=e.resolve(t.map(this.head));return new u(n,r)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:e}=this.$from;if(this.isForwards&&this.ranges.length>1){const e=this.ranges.slice(0,-1),t=e[0].$from,n=e[e.length-1].$to;return new u(t,n,this.depth)}const t=this.ranges[0],n=e.resolve(Math.max(0,t.$from.pos-1));return new u(this.$anchor,n,this.depth)}extendForwards(){const{doc:e}=this.$from;if(this.isBackwards&&this.ranges.length>1){const e=this.ranges.slice(1),t=e[0].$from,n=e[e.length-1].$to;return new u(n,t,this.depth)}const t=this.ranges[this.ranges.length-1],n=e.resolve(Math.min(e.content.size,t.$to.pos+1));return new u(this.$anchor,n,this.depth)}static fromJSON(e,t){return new u(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n,r,o=1){return new this(e.resolve(t),e.resolve(n),r,o)}getBookmark(){return new c(this.anchor,this.head)}}function d(e){return e instanceof u}u.prototype.visible=!1;const f=r.Extension.create({name:"nodeRange",addOptions(){return{depth:void 0,key:"Mod"}},addKeyboardShortcuts(){return{"Shift-ArrowUp":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:o,selection:i,tr:a}=r,{anchor:s,head:l}=i;if(!d(i)){const e=u.create(o,s,l,t,-1);return a.setSelection(e),n.dispatch(a),!0}const c=i.extendBackwards();return a.setSelection(c),n.dispatch(a),!0},"Shift-ArrowDown":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:o,selection:i,tr:a}=r,{anchor:s,head:l}=i;if(!d(i)){const e=u.create(o,s,l,t);return a.setSelection(e),n.dispatch(a),!0}const c=i.extendForwards();return a.setSelection(c),n.dispatch(a),!0},"Mod-a":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:o,tr:i}=r,a=u.create(o,0,o.content.size,t);return i.setSelection(a),n.dispatch(i),!0}}},onSelectionUpdate(){const{selection:e}=this.editor.state;d(e)&&this.editor.view.dom.classList.add("ProseMirror-noderangeselection")},addProseMirrorPlugins(){let e=!1,t=!1;return[new o.Plugin({key:new o.PluginKey("nodeRange"),props:{attributes:()=>e?{class:"ProseMirror-noderangeselection"}:{class:""},handleDOMEvents:{mousedown:(e,n)=>{const{key:r}=this.options,o=/Mac/.test(navigator.platform),i=!!n.shiftKey,a=!!n.ctrlKey,s=!!n.altKey,l=!!n.metaKey;return(null==r||"Shift"===r&&i||"Control"===r&&a||"Alt"===r&&s||"Meta"===r&&l||"Mod"===r&&(o?l:a))&&(t=!0),!!t&&(document.addEventListener("mouseup",()=>{t=!1;const{state:n}=e,{doc:r,selection:o,tr:i}=n,{$anchor:a,$head:s}=o;if(a.sameParent(s))return;const l=u.create(r,a.pos,s.pos,this.options.depth);i.setSelection(l),e.dispatch(i)},{once:!0}),!1)}},decorations:n=>{const{selection:r}=n,o=d(r);if(e=!1,!t)return o?(e=!0,s(r.ranges)):null;const{$from:i,$to:a}=r;if(!o&&i.sameParent(a))return null;const c=l(i,a,this.options.depth);return c.length?(e=!0,s(c)):null}}})]}});t.NodeRange=f,t.NodeRangeSelection=u,t.default=f,t.getNodeRangeDecorations=s,t.getSelectionRanges=l,t.isNodeRangeSelection=d},45823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o="textStyle",i=/^(\d+)\.\s$/,a=r.Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",r.mergeAttributes(this.options.HTMLAttributes,n),0]:["ol",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(o)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=r.wrappingInputRule({find:i,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r.wrappingInputRule({find:i,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(o)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}});t.OrderedList=a,t.default=a,t.inputRegex=i},5067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});t.Paragraph=o,t.default=o},43100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614),i=n(37392);const a=r.Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new o.Plugin({key:new o.PluginKey("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=t,a=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((e,t)=>{const n=o>=t&&o<=t+e.nodeSize,l=!e.isLeaf&&r.isNodeEmpty(e);if((n||!this.options.showOnlyCurrent)&&l){const r=[this.options.emptyNodeClass];s&&r.push(this.options.emptyEditorClass);const o=i.Decoration.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});a.push(o)}return this.options.includeChildren}),i.DecorationSet.create(e,a)}}})]}});t.Placeholder=a,t.default=a},38393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,i=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,a=r.Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:e}){return["s",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[r.markInputRule({find:o,type:this.type})]},addPasteRules(){return[r.markPasteRule({find:i,type:this.type})]}});t.Strike=a,t.default=a,t.inputRegex=o,t.pasteRegex=i},5820:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Mark.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return"sub"===e&&null}}]},renderHTML({HTMLAttributes:e}){return["sub",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}});t.Subscript=o,t.default=o},14841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Mark.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return"super"===e&&null}}]},renderHTML({HTMLAttributes:e}){return["sup",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}});t.Superscript=o,t.default=o},17729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",r.mergeAttributes(this.options.HTMLAttributes,e),0]}});t.TableHeader=o,t.default=o},55340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Node.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",r.mergeAttributes(this.options.HTMLAttributes,e),0]}});t.TableRow=o,t.default=o},10601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(56614),i=n(8812);function a(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function s(e,t,n,r,o,i){var s;let l=0,c=!0,u=t.firstChild;const d=e.firstChild;if(null!==d)for(let e=0,n=0;e<d.childCount;e+=1){const{colspan:s,colwidth:f}=d.child(e).attrs;for(let e=0;e<s;e+=1,n+=1){const s=o===n?i:f&&f[e],d=s?`${s}px`:"";if(l+=s||r,s||(c=!1),u){if(u.style.width!==d){const[e,t]=a(r,s);u.style.setProperty(e,t)}u=u.nextSibling}else{const e=document.createElement("col"),[n,o]=a(r,s);e.style.setProperty(n,o),t.appendChild(e)}}}for(;u;){const e=u.nextSibling;null===(s=u.parentNode)||void 0===s||s.removeChild(u),u=e}c?(n.style.width=`${l}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${l}px`)}class l{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),s(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,s(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}}function c(e,t,n,r){let o=0,i=!0;const s=[],l=e.firstChild;if(!l)return{};for(let e=0,c=0;e<l.childCount;e+=1){const{colspan:u,colwidth:d}=l.child(e).attrs;for(let e=0;e<u;e+=1,c+=1){const l=n===c?r:d&&d[e];o+=l||t,l||(i=!1);const[u,f]=a(t,l);s.push(["col",{style:`${u}: ${f}`}])}}const c=i?`${o}px`:"",u=i?"":`${o}px`;return{colgroup:["colgroup",{},...s],tableWidth:c,tableMinWidth:u}}function u(e,t){return t?e.createChecked(null,t):e.createAndFill()}function d(e,t,n,r,o){const i=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),a=[],s=[];for(let e=0;e<n;e+=1){const e=u(i.cell,o);if(e&&s.push(e),r){const e=u(i.header_cell,o);e&&a.push(e)}}const l=[];for(let e=0;e<t;e+=1)l.push(i.row.createChecked(null,r&&0===e?a:s));return i.table.createChecked(null,l)}const f=({editor:e})=>{const{selection:t}=e.state;if(!(t instanceof i.CellSelection))return!1;let n=0;const o=r.findParentNodeClosestToPos(t.ranges[0].$from,e=>"table"===e.type.name);return null==o||o.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(n+=1)}),n===t.ranges.length&&(e.commands.deleteTable(),!0)},p=r.Node.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:l,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:o,tableMinWidth:i}=c(e,this.options.cellMinWidth);return["table",r.mergeAttributes(this.options.HTMLAttributes,t,{style:o?`width: ${o}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:a})=>{const s=d(a.schema,e,t,n);if(i){const e=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(o.TextSelection.near(r.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>i.addColumnBefore(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>i.addColumnAfter(e,t),deleteColumn:()=>({state:e,dispatch:t})=>i.deleteColumn(e,t),addRowBefore:()=>({state:e,dispatch:t})=>i.addRowBefore(e,t),addRowAfter:()=>({state:e,dispatch:t})=>i.addRowAfter(e,t),deleteRow:()=>({state:e,dispatch:t})=>i.deleteRow(e,t),deleteTable:()=>({state:e,dispatch:t})=>i.deleteTable(e,t),mergeCells:()=>({state:e,dispatch:t})=>i.mergeCells(e,t),splitCell:()=>({state:e,dispatch:t})=>i.splitCell(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>i.toggleHeader("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>i.toggleHeader("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>i.toggleHeaderCell(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!i.mergeCells(e,t)||i.splitCell(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>i.setCellAttr(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>i.goToNextCell(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>i.goToNextCell(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&i.fixTables(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const n=i.CellSelection.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:f,"Mod-Backspace":f,Delete:f,"Mod-Delete":f}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[i.columnResizing({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],i.tableEditing({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:r.callOrReturn(r.getExtensionField(e,"tableRole",t))}}});t.Table=p,t.TableView=l,t.createColGroup=c,t.createTable=d,t.default=p,t.updateColumns=s},52516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(99248).Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(e=>e),unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(e=>e),toggleTextAlign:e=>({editor:t,commands:n})=>!!this.options.alignments.includes(e)&&(t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});t.TextAlign=r,t.default=r},43420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&(this.options.mergeNestedSpanStyles&&(e=>{if(!e.children.length)return;const t=e.querySelectorAll("span");t&&t.forEach(e=>{var t,n;const r=e.getAttribute("style"),o=null===(n=null===(t=e.parentElement)||void 0===t?void 0:t.closest("span"))||void 0===n?void 0:n.getAttribute("style");e.setAttribute("style",`${o};${r}`)})})(e),{})}]},renderHTML({HTMLAttributes:e}){return["span",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(t,n)=>{if(t.isTextblock)return!0;t.marks.filter(e=>e.type===this.type).some(e=>Object.values(e.attrs).some(e=>!!e))||e.removeMark(n,n+t.nodeSize,this.type)}),!0}}}});t.TextStyle=o,t.default=o},50976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(99248).Node.create({name:"text",group:"inline"});t.Text=r,t.default=r},29622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=e=>r.textInputRule({find:/--$/,replace:null!=e?e:""}),i=e=>r.textInputRule({find:/\.\.\.$/,replace:null!=e?e:""}),a=e=>r.textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:null!=e?e:""}),s=e=>r.textInputRule({find:/"$/,replace:null!=e?e:""}),l=e=>r.textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:null!=e?e:""}),c=e=>r.textInputRule({find:/'$/,replace:null!=e?e:""}),u=e=>r.textInputRule({find:/<-$/,replace:null!=e?e:""}),d=e=>r.textInputRule({find:/->$/,replace:null!=e?e:""}),f=e=>r.textInputRule({find:/\(c\)$/,replace:null!=e?e:""}),p=e=>r.textInputRule({find:/\(tm\)$/,replace:null!=e?e:""}),h=e=>r.textInputRule({find:/\(sm\)$/,replace:null!=e?e:""}),m=e=>r.textInputRule({find:/\(r\)$/,replace:null!=e?e:""}),g=e=>r.textInputRule({find:/(?:^|\s)(1\/2)\s$/,replace:null!=e?e:""}),v=e=>r.textInputRule({find:/\+\/-$/,replace:null!=e?e:""}),y=e=>r.textInputRule({find:/!=$/,replace:null!=e?e:""}),b=e=>r.textInputRule({find:/<<$/,replace:null!=e?e:""}),w=e=>r.textInputRule({find:/>>$/,replace:null!=e?e:""}),k=e=>r.textInputRule({find:/\d+\s?([*x])\s?\d+$/,replace:null!=e?e:""}),x=e=>r.textInputRule({find:/\^2$/,replace:null!=e?e:""}),S=e=>r.textInputRule({find:/\^3$/,replace:null!=e?e:""}),C=e=>r.textInputRule({find:/(?:^|\s)(1\/4)\s$/,replace:null!=e?e:""}),M=e=>r.textInputRule({find:/(?:^|\s)(3\/4)\s$/,replace:null!=e?e:""}),O=r.Extension.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const e=[];return!1!==this.options.emDash&&e.push(o(this.options.emDash)),!1!==this.options.ellipsis&&e.push(i(this.options.ellipsis)),!1!==this.options.openDoubleQuote&&e.push(a(this.options.openDoubleQuote)),!1!==this.options.closeDoubleQuote&&e.push(s(this.options.closeDoubleQuote)),!1!==this.options.openSingleQuote&&e.push(l(this.options.openSingleQuote)),!1!==this.options.closeSingleQuote&&e.push(c(this.options.closeSingleQuote)),!1!==this.options.leftArrow&&e.push(u(this.options.leftArrow)),!1!==this.options.rightArrow&&e.push(d(this.options.rightArrow)),!1!==this.options.copyright&&e.push(f(this.options.copyright)),!1!==this.options.trademark&&e.push(p(this.options.trademark)),!1!==this.options.servicemark&&e.push(h(this.options.servicemark)),!1!==this.options.registeredTrademark&&e.push(m(this.options.registeredTrademark)),!1!==this.options.oneHalf&&e.push(g(this.options.oneHalf)),!1!==this.options.plusMinus&&e.push(v(this.options.plusMinus)),!1!==this.options.notEqual&&e.push(y(this.options.notEqual)),!1!==this.options.laquo&&e.push(b(this.options.laquo)),!1!==this.options.raquo&&e.push(w(this.options.raquo)),!1!==this.options.multiplication&&e.push(k(this.options.multiplication)),!1!==this.options.superscriptTwo&&e.push(x(this.options.superscriptTwo)),!1!==this.options.superscriptThree&&e.push(S(this.options.superscriptThree)),!1!==this.options.oneQuarter&&e.push(C(this.options.oneQuarter)),!1!==this.options.threeQuarters&&e.push(M(this.options.threeQuarters)),e}});t.Typography=O,t.closeDoubleQuote=s,t.closeSingleQuote=c,t.copyright=f,t.default=O,t.ellipsis=i,t.emDash=o,t.laquo=b,t.leftArrow=u,t.multiplication=k,t.notEqual=y,t.oneHalf=g,t.oneQuarter=C,t.openDoubleQuote=a,t.openSingleQuote=l,t.plusMinus=v,t.raquo=w,t.registeredTrademark=m,t.rightArrow=d,t.servicemark=h,t.superscriptThree=S,t.superscriptTwo=x,t.threeQuarters=M,t.trademark=p},19721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248);const o=r.Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}]},renderHTML({HTMLAttributes:e}){return["u",r.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});t.Underline=o,t.default=o},16675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(57449);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},78938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(44788);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},82769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97459);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},87223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(71669);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},88470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(88136);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},61106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(77712);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},13637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(34243);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},56614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(37820);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},8812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(27610);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},54175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(36553);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},37392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(49454);r=o,Object.keys(r).filter(e=>"default"!==e&&"__esModule"!==e).forEach(e=>{t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})},61439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(99248),o=n(94144),i=n(27096),a=n(87918),s=n(61470),l=n(95006),c=n(62430),u=n(60400),d=n(12415),f=n(29656),p=n(74951),h=n(7689),m=n(33332),g=n(39007),v=n(14757),y=n(45823),b=n(5067),w=n(38393),k=n(50976);const x=r.Extension.create({name:"starterKit",addExtensions(){const e=[];return!1!==this.options.bold&&e.push(i.Bold.configure(this.options.bold)),!1!==this.options.blockquote&&e.push(o.Blockquote.configure(this.options.blockquote)),!1!==this.options.bulletList&&e.push(a.BulletList.configure(this.options.bulletList)),!1!==this.options.code&&e.push(s.Code.configure(this.options.code)),!1!==this.options.codeBlock&&e.push(l.CodeBlock.configure(this.options.codeBlock)),!1!==this.options.document&&e.push(c.Document.configure(this.options.document)),!1!==this.options.dropcursor&&e.push(u.Dropcursor.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&e.push(d.Gapcursor.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&e.push(f.HardBreak.configure(this.options.hardBreak)),!1!==this.options.heading&&e.push(p.Heading.configure(this.options.heading)),!1!==this.options.history&&e.push(h.History.configure(this.options.history)),!1!==this.options.horizontalRule&&e.push(m.HorizontalRule.configure(this.options.horizontalRule)),!1!==this.options.italic&&e.push(g.Italic.configure(this.options.italic)),!1!==this.options.listItem&&e.push(v.ListItem.configure(this.options.listItem)),!1!==this.options.orderedList&&e.push(y.OrderedList.configure(this.options.orderedList)),!1!==this.options.paragraph&&e.push(b.Paragraph.configure(this.options.paragraph)),!1!==this.options.strike&&e.push(w.Strike.configure(this.options.strike)),!1!==this.options.text&&e.push(k.Text.configure(this.options.text)),e}});t.StarterKit=x,t.default=x},58991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(56614),o=n(37392),i=n(99248);function a(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:o,allowedPrefixes:a,startOfLine:s,$position:l}=e,c=r&&!o,u=i.escapeForRegEx(n),d=new RegExp(`\\s${u}$`),f=s?"^":"",p=o?"":u,h=c?new RegExp(`${f}${u}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${u}[^\\s${p}]*`,"gm"),m=(null===(t=l.nodeBefore)||void 0===t?void 0:t.isText)&&l.nodeBefore.text;if(!m)return null;const g=l.pos-m.length,v=Array.from(m.matchAll(h)).pop();if(!v||void 0===v.input||void 0===v.index)return null;const y=v.input.slice(Math.max(0,v.index-1),v.index),b=new RegExp(`^[${null==a?void 0:a.join("")}\0]?$`).test(y);if(null!==a&&!b)return null;const w=g+v.index;let k=w+v[0].length;return c&&d.test(m.slice(k-1,k+1))&&(v[0]+=" ",k+=1),w<l.pos&&k>=l.pos?{range:{from:w,to:k},query:v[0].slice(n.length),text:v[0]}:null}const s=new r.PluginKey("suggestion");function l({pluginKey:e=s,editor:t,char:n="@",allowSpaces:i=!1,allowToIncludeChar:l=!1,allowedPrefixes:c=[" "],startOfLine:u=!1,decorationTag:d="span",decorationClass:f="suggestion",command:p=()=>null,items:h=()=>[],render:m=()=>({}),allow:g=()=>!0,findSuggestionMatch:v=a}){let y;const b=null==m?void 0:m(),w=new r.Plugin({key:e,view(){return{update:async(e,n)=>{var r,o,i,a,s,l,c;const u=null===(r=this.key)||void 0===r?void 0:r.getState(n),d=null===(o=this.key)||void 0===o?void 0:o.getState(e.state),f=u.active&&d.active&&u.range.from!==d.range.from,m=!u.active&&d.active,g=u.active&&!d.active,v=!m&&!g&&u.query!==d.query,w=m||f&&v,k=v||f,x=g||f&&v;if(!w&&!k&&!x)return;const S=x&&!w?u:d,C=e.dom.querySelector(`[data-decoration-id="${S.decorationId}"]`);y={editor:t,range:S.range,query:S.query,text:S.text,items:[],command:e=>p({editor:t,range:S.range,props:e}),decorationNode:C,clientRect:C?()=>{var n;const{decorationId:r}=null===(n=this.key)||void 0===n?void 0:n.getState(t.state),o=e.dom.querySelector(`[data-decoration-id="${r}"]`);return(null==o?void 0:o.getBoundingClientRect())||null}:null},w&&(null===(i=null==b?void 0:b.onBeforeStart)||void 0===i||i.call(b,y)),k&&(null===(a=null==b?void 0:b.onBeforeUpdate)||void 0===a||a.call(b,y)),(k||w)&&(y.items=await h({editor:t,query:S.query})),x&&(null===(s=null==b?void 0:b.onExit)||void 0===s||s.call(b,y)),k&&(null===(l=null==b?void 0:b.onUpdate)||void 0===l||l.call(b,y)),w&&(null===(c=null==b?void 0:b.onStart)||void 0===c||c.call(b,y))},destroy:()=>{var e;y&&(null===(e=null==b?void 0:b.onExit)||void 0===e||e.call(b,y))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(e,r,o,a){const{isEditable:s}=t,{composing:d}=t.view,{selection:f}=e,{empty:p,from:h}=f,m={...r};if(m.composing=d,s&&(p||t.view.composing)){!(h<r.range.from||h>r.range.to)||d||r.composing||(m.active=!1);const e=v({char:n,allowSpaces:i,allowToIncludeChar:l,allowedPrefixes:c,startOfLine:u,$position:f.$from}),o=`id_${Math.floor(4294967295*Math.random())}`;e&&g({editor:t,state:a,range:e.range,isActive:r.active})?(m.active=!0,m.decorationId=r.decorationId?r.decorationId:o,m.range=e.range,m.query=e.query,m.text=e.text):m.active=!1}else m.active=!1;return m.active||(m.decorationId=null,m.range={from:0,to:0},m.query=null,m.text=null),m}},props:{handleKeyDown(e,t){var n;const{active:r,range:o}=w.getState(e.state);return r&&(null===(n=null==b?void 0:b.onKeyDown)||void 0===n?void 0:n.call(b,{view:e,event:t,range:o}))||!1},decorations(e){const{active:t,range:n,decorationId:r}=w.getState(e);return t?o.DecorationSet.create(e.doc,[o.Decoration.inline(n.from,n.to,{nodeName:d,class:f,"data-decoration-id":r})]):null}}});return w}t.Suggestion=l,t.SuggestionPluginKey=s,t.default=l,t.findSuggestionMatch=a},63717:function(e){"use strict";function t(e){this.content=e}t.prototype={constructor:t,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,n,r){var o=r&&r!=e?this.remove(r):this,i=o.find(e),a=o.content.slice();return-1==i?a.push(r||e,n):(a[i+1]=n,r&&(a[i]=r)),new t(a)},remove:function(e){var n=this.find(e);if(-1==n)return this;var r=this.content.slice();return r.splice(n,2),new t(r)},addToStart:function(e,n){return new t([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var r=this.remove(e).content.slice();return r.push(e,n),new t(r)},addBefore:function(e,n,r){var o=this.remove(n),i=o.content.slice(),a=o.find(e);return i.splice(-1==a?i.length:a,0,n,r),new t(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=t.from(e)).size?new t(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=t.from(e)).size?new t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=t.from(e);for(var r=0;r<e.content.length;r+=2)n=n.remove(e.content[r]);return n},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},t.from=function(e){if(e instanceof t)return e;var n=[];if(e)for(var r in e)n.push(r,e[r]);return new t(n)},e.exports=t},57449:function(e,t,n){"use strict";var r=n(36553),o=n(77712),i=n(37820),a=function(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)};function s(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}var l=function(e,t,n){var a=s(e,n);if(!a)return!1;var l=f(a);if(!l){var c=a.blockRange(),d=c&&r.liftTarget(c);return null!=d&&(t&&t(e.tr.lift(c,d).scrollIntoView()),!0)}var p=l.nodeBefore;if(M(e,l,t,-1))return!0;if(0==a.parent.content.size&&(u(p,"end")||i.NodeSelection.isSelectable(p)))for(var h=a.depth;;h--){var m=r.replaceStep(e.doc,a.before(h),a.after(h),o.Slice.empty);if(m&&m.slice.size<m.to-m.from){if(t){var g=e.tr.step(m);g.setSelection(u(p,"end")?i.Selection.findFrom(g.doc.resolve(g.mapping.map(l.pos,-1)),-1):i.NodeSelection.create(g.doc,l.pos-p.nodeSize)),t(g.scrollIntoView())}return!0}if(1==h||a.node(h-1).childCount>1)break}return!(!p.isAtom||l.depth!=a.depth-1||(t&&t(e.tr.delete(l.pos-p.nodeSize,l.pos).scrollIntoView()),0))};function c(e,t,n){for(var a=t.nodeBefore,s=t.pos-1;!a.isTextblock;s--){if(a.type.spec.isolating)return!1;var l=a.lastChild;if(!l)return!1;a=l}for(var c=t.nodeAfter,u=t.pos+1;!c.isTextblock;u++){if(c.type.spec.isolating)return!1;var d=c.firstChild;if(!d)return!1;c=d}var f=r.replaceStep(e.doc,s,u,o.Slice.empty);if(!f||f.from!=s||f instanceof r.ReplaceStep&&f.slice.size>=u-s)return!1;if(n){var p=e.tr.step(f);p.setSelection(i.TextSelection.create(p.doc,s)),n(p.scrollIntoView())}return!0}function u(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var d=function(e,t,n){var r=e.selection,o=r.$head,a=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=f(o)}var s=a&&a.nodeBefore;return!(!s||!i.NodeSelection.isSelectable(s)||(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),0))};function f(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function p(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}var h=function(e,t,n){var a=p(e,n);if(!a)return!1;var s=g(a);if(!s)return!1;var l=s.nodeAfter;if(M(e,s,t,1))return!0;if(0==a.parent.content.size&&(u(l,"start")||i.NodeSelection.isSelectable(l))){var c=r.replaceStep(e.doc,a.before(),a.after(),o.Slice.empty);if(c&&c.slice.size<c.to-c.from){if(t){var d=e.tr.step(c);d.setSelection(u(l,"start")?i.Selection.findFrom(d.doc.resolve(d.mapping.map(s.pos)),1):i.NodeSelection.create(d.doc,d.mapping.map(s.pos))),t(d.scrollIntoView())}return!0}}return!(!l.isAtom||s.depth!=a.depth-1||(t&&t(e.tr.delete(s.pos,s.pos+l.nodeSize).scrollIntoView()),0))},m=function(e,t,n){var r=e.selection,o=r.$head,a=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=g(o)}var s=a&&a.nodeAfter;return!(!s||!i.NodeSelection.isSelectable(s)||(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,a.pos)).scrollIntoView()),0))};function g(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}var v=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function y(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var b=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var a=r.node(-1),s=r.indexAfter(-1),l=y(a.contentMatchAt(s));if(!l||!a.canReplaceWith(s,s,l))return!1;if(t){var c=r.after(),u=e.tr.replaceWith(c,c,l.createAndFill());u.setSelection(i.Selection.near(u.doc.resolve(c),1)),t(u.scrollIntoView())}return!0},w=function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof i.AllSelection||r.parent.inlineContent||o.parent.inlineContent)return!1;var a=y(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=e.tr.insert(s,a.createAndFill());l.setSelection(i.TextSelection.create(l.doc,s+1)),t(l.scrollIntoView())}return!0},k=function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(r.canSplit(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),a=i&&r.liftTarget(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)};function x(e){return function(t,n){var o=t.selection,a=o.$from,s=o.$to;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!a.parentOffset||!r.canSplit(t.doc,a.pos)||(n&&n(t.tr.split(a.pos).scrollIntoView()),0));if(!a.depth)return!1;for(var l,c,u=[],d=!1,f=!1,p=a.depth;;p--){if(a.node(p).isBlock){d=a.end(p)==a.pos+(a.depth-p),f=a.start(p)==a.pos-(a.depth-p),c=y(a.node(p-1).contentMatchAt(a.indexAfter(p-1)));var h=e&&e(s.parent,d,a);u.unshift(h||(d&&c?{type:c}:null)),l=p;break}if(1==p)return!1;u.unshift(null)}var m=t.tr;(t.selection instanceof i.TextSelection||t.selection instanceof i.AllSelection)&&m.deleteSelection();var g=m.mapping.map(a.pos),v=r.canSplit(m.doc,g,u.length,u);if(v||(u[0]=c?{type:c}:null,v=r.canSplit(m.doc,g,u.length,u)),m.split(g,u.length,u),!d&&f&&a.node(l).type!=c){var b=m.mapping.map(a.before(l)),w=m.doc.resolve(b);c&&a.node(l-1).canReplaceWith(w.index(),w.index()+1,c)&&m.setNodeMarkup(m.mapping.map(a.before(l)),c)}return n&&n(m.scrollIntoView()),!0}}var S=x(),C=function(e,t){return t&&t(e.tr.setSelection(new i.AllSelection(e.doc))),!0};function M(e,t,n,a){var s,l,c=t.nodeBefore,d=t.nodeAfter,f=c.type.spec.isolating||d.type.spec.isolating;if(!f&&function(e,t,n){var o=t.nodeBefore,i=t.nodeAfter,a=t.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(a,a+1)||!i.isTextblock&&!r.canJoin(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var p=!f&&t.parent.canReplace(t.index(),t.index()+1);if(p&&(s=(l=c.contentMatchAt(c.childCount)).findWrapping(d.type))&&l.matchType(s[0]||d.type).validEnd){if(n){for(var h=t.pos+d.nodeSize,m=o.Fragment.empty,g=s.length-1;g>=0;g--)m=o.Fragment.from(s[g].create(null,m));m=o.Fragment.from(c.copy(m));var v=e.tr.step(new r.ReplaceAroundStep(t.pos-1,h,t.pos,h,new o.Slice(m,1,0),s.length,!0)),y=v.doc.resolve(h+2*s.length);y.nodeAfter&&y.nodeAfter.type==c.type&&r.canJoin(v.doc,y.pos)&&v.join(y.pos),n(v.scrollIntoView())}return!0}var b=d.type.spec.isolating||a>0&&f?null:i.Selection.findFrom(t,1),w=b&&b.$from.blockRange(b.$to),k=w&&r.liftTarget(w);if(null!=k&&k>=t.depth)return n&&n(e.tr.lift(w,k).scrollIntoView()),!0;if(p&&u(d,"start",!0)&&u(c,"end")){for(var x=c,S=[];S.push(x),!x.isTextblock;)x=x.lastChild;for(var C=d,M=1;!C.isTextblock;C=C.firstChild)M++;if(x.canReplace(x.childCount,x.childCount,C.content)){if(n){for(var O=o.Fragment.empty,A=S.length-1;A>=0;A--)O=o.Fragment.from(S[A].copy(O));n(e.tr.step(new r.ReplaceAroundStep(t.pos-S.length,t.pos+d.nodeSize,t.pos+M,t.pos+d.nodeSize-M,new o.Slice(O,S.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function O(e){return function(t,n){for(var r=t.selection,o=e<0?r.$from:r.$to,a=o.depth;o.node(a).isInline;){if(!a)return!1;a--}return!!o.node(a).isTextblock&&(n&&n(t.tr.setSelection(i.TextSelection.create(t.doc,e<0?o.start(a):o.end(a)))),!0)}}var A=O(-1),E=O(1);function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var _=T(a,l,d),N=T(a,h,m),j={Enter:T(v,w,k,S),"Mod-Enter":b,Backspace:_,"Mod-Backspace":_,"Shift-Backspace":_,Delete:N,"Mod-Delete":N,"Mod-a":C},P={"Ctrl-h":j.Backspace,"Alt-Backspace":j["Mod-Backspace"],"Ctrl-d":j.Delete,"Ctrl-Alt-Backspace":j["Mod-Delete"],"Alt-Delete":j["Mod-Delete"],"Alt-d":j["Mod-Delete"],"Ctrl-a":A,"Ctrl-e":E};for(var I in j)P[I]=j[I];var D=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&"darwin"==os.platform())?P:j;t.autoJoin=function(e,t){var n=Array.isArray(t)?function(e){return t.indexOf(e.type.name)>-1}:t;return function(t,o,i){return e(t,o&&function(e,t){return function(n){if(!n.isGeneric)return e(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var a=n.mapping.maps[i],s=0;s<o.length;s++)o[s]=a.map(o[s]);a.forEach(function(e,t,n,r){return o.push(n,r)})}for(var l=[],c=0;c<o.length;c+=2)for(var u=o[c],d=o[c+1],f=n.doc.resolve(u),p=f.sharedDepth(d),h=f.node(p),m=f.indexAfter(p),g=f.after(p+1);g<=d;++m){var v=h.maybeChild(m);if(!v)break;if(m&&-1==l.indexOf(g)){var y=h.child(m-1);y.type==v.type&&t(y,v)&&l.push(g)}g+=v.nodeSize}l.sort(function(e,t){return e-t});for(var b=l.length-1;b>=0;b--)r.canJoin(n.doc,l[b])&&n.join(l[b]);e(n)}}(o,n),i)}},t.baseKeymap=D,t.chainCommands=T,t.createParagraphNear=w,t.deleteSelection=a,t.exitCode=b,t.joinBackward=l,t.joinDown=function(e,t){var n,o=e.selection;if(o instanceof i.NodeSelection){if(o.node.isTextblock||!r.canJoin(e.doc,o.to))return!1;n=o.to}else if(null==(n=r.joinPoint(e.doc,o.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},t.joinForward=h,t.joinTextblockBackward=function(e,t,n){var r=s(e,n);if(!r)return!1;var o=f(r);return!!o&&c(e,o,t)},t.joinTextblockForward=function(e,t,n){var r=p(e,n);if(!r)return!1;var o=g(r);return!!o&&c(e,o,t)},t.joinUp=function(e,t){var n,o=e.selection,a=o instanceof i.NodeSelection;if(a){if(o.node.isTextblock||!r.canJoin(e.doc,o.from))return!1;n=o.from}else if(null==(n=r.joinPoint(e.doc,o.from,-1)))return!1;if(t){var s=e.tr.join(n);a&&s.setSelection(i.NodeSelection.create(s.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},t.lift=function(e,t){var n=e.selection,o=n.$from,i=n.$to,a=o.blockRange(i),s=a&&r.liftTarget(a);return null!=s&&(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)},t.liftEmptyBlock=k,t.macBaseKeymap=P,t.newlineInCode=v,t.pcBaseKeymap=j,t.selectAll=C,t.selectNodeBackward=d,t.selectNodeForward=m,t.selectParentNode=function(e,t){var n,r=e.selection,o=r.$from,a=r.to,s=o.sharedDepth(a);return 0!=s&&(n=o.before(s),t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,n))),!0)},t.selectTextblockEnd=E,t.selectTextblockStart=A,t.setBlockType=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var a=n.selection.ranges[i],s=a.$from.pos,l=a.$to.pos;n.doc.nodesBetween(s,l,function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{var a=n.doc.resolve(i),s=a.index();o=a.parent.canReplaceWith(s,s+1,e)}})}if(!o)return!1;if(r){for(var c=n.tr,u=0;u<n.selection.ranges.length;u++){var d=n.selection.ranges[u],f=d.$from.pos,p=d.$to.pos;c.setBlockType(f,p,e,t)}r(c.scrollIntoView())}return!0}},t.splitBlock=S,t.splitBlockAs=x,t.splitBlockKeepMarks=function(e,t){return S(e,t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})},t.toggleMark=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=!1!==(n&&n.removeWhenPresent),o=!1!==(n&&n.enterInlineAtoms);return function(n,a){var s=n.selection,l=s.empty,c=s.$cursor,u=s.ranges;if(l&&!c||!function(e,t,n,r){for(var o,i=function(){var o=t[a],i=o.$from,s=o.$to,l=0==i.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,function(e,t){if(l||!r&&e.isAtom&&e.isInline&&t>=i.pos&&t+e.nodeSize<=s.pos)return!1;l=e.inlineContent&&e.type.allowsMarkType(n)}),l)return{v:!0}},a=0;a<t.length;a++)if(o=i())return o.v;return!1}(n.doc,u,e,o))return!1;if(a)if(c)e.isInSet(n.storedMarks||c.marks())?a(n.tr.removeStoredMark(e)):a(n.tr.addStoredMark(e.create(t)));else{var d,f=n.tr;o||(u=function(e){for(var t=[],n=function(){var n=e[r],o=n.$from,a=n.$to;o.doc.nodesBetween(o.pos,a.pos,function(e,n){if(e.isAtom&&e.content.size&&e.isInline&&n>=o.pos&&n+e.nodeSize<=a.pos)return n+1>o.pos&&t.push(new i.SelectionRange(o,o.doc.resolve(n+1))),o=o.doc.resolve(n+1+e.content.size),!1}),o.pos<a.pos&&t.push(new i.SelectionRange(o,a))},r=0;r<e.length;r++)n();return t}(u)),d=r?!u.some(function(t){return n.doc.rangeHasMark(t.$from.pos,t.$to.pos,e)}):!u.every(function(t){var n=!1;return f.doc.nodesBetween(t.$from.pos,t.$to.pos,function(r,o,i){if(n)return!1;n=!e.isInSet(r.marks)&&!!i&&i.type.allowsMarkType(e)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,t.$from.pos-o),Math.min(r.nodeSize,t.$to.pos-o))))}),!n});for(var p=0;p<u.length;p++){var h=u[p],m=h.$from,g=h.$to;if(d){var v=m.pos,y=g.pos,b=m.nodeAfter,w=g.nodeBefore,k=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,x=w&&w.isText?/\s*$/.exec(w.text)[0].length:0;v+k<y&&(v+=k,y-=x),f.addMark(v,y,e.create(t))}else f.removeMark(m.pos,g.pos,e)}a(f.scrollIntoView())}return!0}},t.wrapIn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){var i=n.selection,a=i.$from,s=i.$to,l=a.blockRange(s),c=l&&r.findWrapping(l,e,t);return!!c&&(o&&o(n.tr.wrap(l,c).scrollIntoView()),!0)}}},44788:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(37820),i=n(36553),a=function(){function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var n=function(t){o[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}})}var t,n;return t=e,(n=[{key:"destroy",value:function(){var e=this;this.handlers.forEach(function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)})}},{key:"update",value:function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){var r=t.nodeBefore,o=t.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(i){var a=i.getBoundingClientRect(),s=r?a.bottom:a.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:a.left,right:a.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!e){var l=this.editorView.coordsAtPos(this.cursorPos);e={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}var c,u,d=this.editorView.dom.offsetParent;if(this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!d||d==document.body&&"static"==getComputedStyle(d).position)c=-pageXOffset,u=-pageYOffset;else{var f=d.getBoundingClientRect();c=f.left-d.scrollLeft,u=f.top-d.scrollTop}this.element.style.left=e.left-c+"px",this.element.style.top=e.top-u+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}},{key:"scheduleRemoval",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.setCursor(null)},e)}},{key:"dragover",value:function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){var a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var s=i.dropPoint(this.editorView.state.doc,a,this.editorView.dragging.slice);null!=s&&(a=s)}this.setCursor(a),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.dropCursor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o.Plugin({view:function(t){return new a(t,e)}})}},97459:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(88136),u=n(37820),d=n(77712),f=n(49454),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,i=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,o=l(t);if(n){var i=l(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return o(this,c),i.call(this,e,e)}return a(c,[{key:"map",value:function(e,t){var n=e.resolve(t.map(this.head));return c.valid(n)?new c(n):u.Selection.near(n)}},{key:"content",value:function(){return d.Slice.empty}},{key:"eq",value:function(e){return e instanceof c&&e.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new h(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new c(e.resolve(t.pos))}},{key:"valid",value:function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&c.valid(e))return e;for(var r=e.pos,o=null,i=e.depth;;i--){var a=e.node(i);if(t>0?e.indexAfter(i)<a.childCount:e.index(i)>0){o=a.child(t>0?e.indexAfter(i):e.index(i)-1);break}if(0==i)return null;r+=t;var s=e.doc.resolve(r);if(c.valid(s))return s}for(;;){var l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!u.NodeSelection.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=l,r+=t;var d=e.doc.resolve(r);if(c.valid(d))return d}return null}}}]),c}(u.Selection);p.prototype.visible=!1,p.findFrom=p.findGapCursorFrom,u.Selection.jsonID("gapcursor",p);var h=function(){function e(t){o(this,e),this.pos=t}return a(e,[{key:"map",value:function(t){return new e(t.map(this.pos))}},{key:"resolve",value:function(e){var t=e.resolve(this.pos);return p.valid(t)?new p(t):u.Selection.near(t)}}]),e}(),m=c.keydownHandler({ArrowLeft:g("horiz",-1),ArrowRight:g("horiz",1),ArrowUp:g("vert",-1),ArrowDown:g("vert",1)});function g(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof u.TextSelection){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var l=p.findGapCursorFrom(a,t,s);return!!l&&(r&&r(e.tr.setSelection(new p(l))),!0)}}function v(e,t,n){if(!e||!e.editable)return!1;var r=e.state.doc.resolve(t);if(!p.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&u.NodeSelection.isSelectable(e.state.doc.nodeAt(o.inside))||(e.dispatch(e.state.tr.setSelection(new p(r))),0))}function y(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof p))return!1;var n=e.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;for(var o=d.Fragment.empty,i=r.length-1;i>=0;i--)o=d.Fragment.from(r[i].createAndFill(null,o));var a=e.state.tr.replace(n.pos,n.pos,new d.Slice(o,0,0));return a.setSelection(u.TextSelection.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function b(e){if(!(e.selection instanceof p))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",f.DecorationSet.create(e.doc,[f.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}t.GapCursor=p,t.gapCursor=function(){return new u.Plugin({props:{decorations:b,createSelectionBetween:function(e,t,n){return t.pos==n.pos&&p.valid(n)?new p(n):null},handleClick:v,handleKeyDown:m,handleDOMEvents:{beforeinput:y}}})}},71669:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e){if("object"!==r(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(20614),l=n(36553),c=n(37820),u=function(){function e(t,n){o(this,e),this.items=t,this.eventCount=n}return a(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var o,i,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(o=this.remapping(a,this.items.length),i=o.maps.length);var s,l,c=t.tr,u=[],f=[];return this.items.forEach(function(t,n){if(!t.step)return o||(o=r.remapping(a,n+1),i=o.maps.length),i--,void f.push(t);if(o){f.push(new d(t.map));var p,h=t.step.map(o.slice(i));h&&c.maybeStep(h).doc&&(p=c.mapping.maps[c.mapping.maps.length-1],u.push(new d(p,void 0,void 0,u.length+f.length))),i--,p&&o.appendMap(p,i)}else c.maybeStep(t.step);return t.selection?(s=o?t.selection.map(o.slice(i)):t.selection,l=new e(r.items.slice(0,a).append(f.reverse().concat(u)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:l,transform:c,selection:s}}},{key:"addTransform",value:function(t,n,r,o){for(var i=[],a=this.eventCount,s=this.items,l=!o&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var u,f=t.steps[c].invert(t.docs[c]),h=new d(t.mapping.maps[c],f,n);(u=l&&l.merge(h))&&(h=u,c?i.pop():s=s.slice(0,s.length-1)),i.push(h),n&&(a++,n=void 0),o||(l=h)}var m,g,v,y=a-r.depth;return y>p&&(g=y,(m=s).forEach(function(e,t){if(e.selection&&0==g--)return v=t,!1}),s=m.slice(v),a-=y),new e(s.append(i),a)}},{key:"remapping",value:function(e,t){var n=new l.Mapping;return this.items.forEach(function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)},e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map(function(e){return new d(e)})),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach(function(e){e.selection&&s--},o);var l=n;this.items.forEach(function(e){var n=i.getMirror(--l);if(null!=n){a=Math.min(a,n);var o=i.maps[n];if(e.step){var c=t.steps[n].invert(t.docs[n]),u=e.selection&&e.selection.map(i.slice(l+1,n));u&&s++,r.push(new d(o,c,u))}else r.push(new d(o))}},o);for(var c=[],u=n;u<a;u++)c.push(new d(i.maps[u]));var f=new e(this.items.slice(0,o).append(c).append(r),s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach(function(e,a){if(a>=t)o.push(e),e.selection&&i++;else if(e.step){var s=e.step.map(n.slice(r)),l=s&&s.getMap();if(r--,l&&n.appendMap(l,r),s){var c=e.selection&&e.selection.map(n.slice(r));c&&i++;var u,f=new d(l.invert(),s,c),p=o.length-1;(u=o.length&&o[p].merge(f))?o[p]=u:o.push(f)}}else e.map&&r--},this.items.length,0),new e(s.from(o.reverse()),i)}}]),e}();u.empty=new u(s.empty,0);var d=function(){function e(t,n,r,i){o(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}return a(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}]),e}(),f=a(function e(t,n,r,i,a){o(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}),p=20;function h(e){for(var t=[],n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach(function(e,n,r,o){return t.push(r,o)});return t}function m(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}var g=!1,v=null;function y(e){var t=e.plugins;if(v!=t){g=!1,v=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){g=!0;break}}return g}var b=new c.PluginKey("history"),w=new c.PluginKey("closeHistory");function k(e,t){return function(n,r){var o=b.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){var i=function(e,t,n){var r=y(t),o=b.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;var a=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),l=new f(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(a).setMeta(b,{redo:n,historyState:l})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}var x=k(!1,!0),S=k(!0,!0),C=k(!1,!1),M=k(!0,!1);t.closeHistory=function(e){return e.setMeta(w,!0)},t.history=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new c.Plugin({key:b,state:{init:function(){return new f(u.empty,u.empty,null,0,-1)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(b);if(i)return i.historyState;n.getMeta(w)&&(e=new f(e.done,e.undone,null,0,-1));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(b))return a.getMeta(b).redo?new f(e.done.addTransform(n,void 0,r,y(t)),e.undone,h(n.mapping.maps),e.prevTime,e.prevComposition):new f(e.done,e.undone.addTransform(n,void 0,r,y(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new f(e.done.rebased(n,o),e.undone.rebased(n,o),m(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new f(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),m(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);var s=n.getMeta("composition"),l=0==e.prevTime||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),c=a?m(e.prevRanges,n.mapping):h(n.mapping.maps);return new f(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,y(t)),u.empty,c,n.time,null==s?e.prevComposition:s)}(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n=t.inputType,r="historyUndo"==n?x:"historyRedo"==n?S:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})},t.redo=S,t.redoDepth=function(e){var t=b.getState(e);return t?t.undone.eventCount:0},t.redoNoScroll=M,t.undo=x,t.undoDepth=function(e){var t=b.getState(e);return t?t.done.eventCount:0},t.undoNoScroll=C},88136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76237),o=n(37820),i="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function a(e){var t,n,r,o,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;l++){var c=a[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);i?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function l(e){var t=function(e){var t=Object.create(null);for(var n in e)t[a(n)]=e[n];return t}(e);return function(e,n){var o,i=r.keyName(n),a=t[s(i,n)];if(a&&a(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){var l=t[s(i,n,!1)];if(l&&l(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r.base[n.keyCode])&&o!=i){var c=t[s(o,n)];if(c&&c(e.state,e.dispatch,e))return!0}}return!1}}t.keydownHandler=l,t.keymap=function(e){return new o.Plugin({props:{handleKeyDown:l(e)}})}},77712:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function a(e){var t=c();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},s(e)}function l(e,t,n){return l=c()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o},l.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e){if("object"!==f(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var g=n(63717);function v(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=v(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function y(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=e.child(--o),s=t.child(--i),l=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var c=0,u=Math.min(a.text.length,s.text.length);c<u&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var d=y(a.content,s.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}var b=function(){function e(t,n){if(p(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}return m(e,[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<t;i++){var s=this.content[i],l=a+s.nodeSize;if(l>e&&!1!==n(s,r+a,o||null,i)&&s.content.size){var c=a+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}a=l}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,function(a,s){var l=a.isText?a.text.slice(Math.max(e,s)-s,t-s):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&n&&(i?i=!1:o+=n),o+=l},0),o}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new e(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==t&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,a=0;a<n;i++){var s=this.content[i],l=a+s.nodeSize;l>t&&((a<t||l>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=l}return new e(r,o)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new e(o,i)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){return v(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(e){return y(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return k(0,e);if(e==this.size)return k(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?k(n+1,o):k(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),e}();b.empty=new b([],0);var w={index:0,offset:0};function k(e,t){return w.index=e,w.offset=t,w}function x(e,t){if(e===t)return!0;if(!e||"object"!=f(e)||!t||"object"!=f(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!x(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!x(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var S=function(){function e(t,n){p(this,e),this.type=t,this.attrs=n}return m(e,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&x(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));var r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort(function(e,t){return e.type.rank-t.type.rank}),n}}]),e}();S.none=[];var C=function(e){i(n,e);var t=a(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(s(Error)),M=function(){function e(t,n,r){p(this,e),this.content=t,this.openStart=n,this.openEnd=r}return m(e,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var r=A(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(O(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new e(b.fromJSON(t,n.content),r,o)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new e(t,r,o)}}]),e}();function O(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,a=e.maybeChild(o),s=e.findIndex(n),l=s.index,c=s.offset;if(i==t||a.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,a.copy(O(a.content,t-i-1,n-i-1)))}function A(e,t,n,r){var o=e.findIndex(t),i=o.index,a=o.offset,s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=A(s.content,t-a-1,n);return l&&e.replaceChild(i,s.copy(l))}function E(e,t,n){if(n.openStart>e.depth)throw new C("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new C("Inconsistent open depths");return T(e,t,n,0)}function T(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var a=T(e,t,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(b.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return I(i,D(e,s.start,s.end,t,r))}var l=e.parent,c=l.content;return I(l,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return I(i,R(e,t,r))}function _(e,t){if(!t.type.compatibleContent(e.type))throw new C("Cannot join "+t.type.name+" onto "+e.type.name)}function N(e,t,n){var r=e.node(n);return _(r,t.node(n)),r}function j(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function P(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(j(e.nodeAfter,r),i++));for(var s=i;s<a;s++)j(o.child(s),r);t&&t.depth==n&&t.textOffset&&j(t.nodeBefore,r)}function I(e,t){return e.type.checkContent(t),e.copy(t)}function D(e,t,n,r,o){var i=e.depth>o&&N(e,t,o+1),a=r.depth>o&&N(n,r,o+1),s=[];return P(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(_(i,a),j(I(i,D(e,t,n,r,o+1)),s)):(i&&j(I(i,R(e,t,o+1)),s),P(t,n,o,s),a&&j(I(a,R(n,r,o+1)),s)),P(r,null,o,s),new b(s)}function R(e,t,n){var r=[];return P(null,e,n,r),e.depth>n&&j(I(N(e,t,n+1),R(e,t,n+1)),r),P(t,null,n,r),new b(r)}M.empty=new M(b.empty,0,0);var L=function(){function e(t,n,r){p(this,e),this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return m(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return S.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new z(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,a=t;;){var s=a.content.findIndex(i),l=s.index,c=s.offset,u=i-c;if(r.push(a,l,o+c),!u)break;if((a=a.child(l)).isText)break;i=u-1,o+=c+1}return new e(n,r,i)}},{key:"resolveCached",value:function(t,n){var r=H.get(t);if(r)for(var o=0;o<r.elts.length;o++){var i=r.elts[o];if(i.pos==n)return i}else H.set(t,r=new F);var a=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%B,a}}]),e}(),F=m(function e(){p(this,e),this.elts=[],this.i=0}),B=12,H=new WeakMap,z=function(){function e(t,n,r){p(this,e),this.$from=t,this.$to=n,this.depth=r}return m(e,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),e}(),$=Object.create(null),V=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S.none;p(this,e),this.type=t,this.attrs=n,this.marks=o,this.content=r||b.empty}return m(e,[{key:"children",get:function(){return this.content.content}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&x(this.attrs,t||e.defaultAttrs||$)&&S.sameSet(this.marks,n||S.none)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return M.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new M(s,r.depth-i,o.depth-i)}},{key:"replace",value:function(e,t,n){return E(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(e){return L.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return L.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,function(e){return n.isInSet(e.marks)&&(r=!0),!r}),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),W(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var e=S.none,t=0;t<this.marks.length;t++){var n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!S.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(function(e){return e.type.name})));this.content.forEach(function(e){return e.check()})}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(e){return e.toJSON()})),e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=void 0;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=b.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}]),e}();V.prototype.text=void 0;var U=function(e){i(n,e);var t=a(n);function n(e,r,o,i){var a;if(p(this,n),a=t.call(this,e,r,null,i),!o)throw new RangeError("Empty text nodes are not allowed");return a.text=o,a}return m(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):W(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=o(d(n.prototype),"toJSON",this).call(this);return e.text=this.text,e}}]),n}(V);function W(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var q=function(){function e(t){p(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return m(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,a){var s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return b.from(a.map(function(e){return e.createAndFill()}));for(var l=0;l<i.next.length;l++){var c=i.next[l],u=c.type,d=c.next;if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var f=o(d,a.concat(u));if(f)return f}}return null}(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var l=o.next[s],c=l.type,u=l.next;c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!u.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r}).join("\n")}}],[{key:"parse",value:function(t,n){var r=new K(t,n);if(null==r.next)return e.empty;var o=G(r);r.next&&r.err("Unexpected trailing text");var i=te(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce(function(t,n){return t.concat(e(n,i))},[]);if("seq"!=t.type){if("star"==t.type){var a=n();return r(i,a),o(e(t.expr,a),a),[r(a)]}if("plus"==t.type){var s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var l=i,c=0;c<t.min;c++){var u=n();o(e(t.expr,l),u),l=u}if(-1==t.max)o(e(t.expr,l),l);else for(var d=t.min;d<t.max;d++){var f=n();r(l,f),o(e(t.expr,l),f),l=f}return[r(l)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var h=e(t.exprs[p],i);if(p==t.exprs.length-1)return h;o(h,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach(function(e){return e.to=t})}}(o));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s++){var l=o.next[s],c=l.type,u=l.next;a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}]),e}();q.empty=new q(!0);var K=function(){function e(t,n){p(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return m(e,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}]),e}();function G(e){var t=[];do{t.push(Y(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Y(e){var t=[];do{t.push(J(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function J(e){for(var t=function(e){if(e.eat("(")){var t=G(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.isInGroup(t)&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map(function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}});return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Q(e,t)}return t}function X(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Q(e,t){var n=X(e),r=n;return e.eat(",")&&(r="}"!=e.next?X(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Z(e,t){return t-e}function ee(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,l=a.to;s||-1!=n.indexOf(l)||t(l)}}(t),n.sort(Z)}function te(e){var t=Object.create(null);return function n(r){var o=[];r.forEach(function(t){e[t].forEach(function(t){var n=t.term,r=t.to;if(n){for(var i,a=0;a<o.length;a++)o[a][0]==n&&(i=o[a][1]);ee(e,r).forEach(function(e){i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)})}})});for(var i=t[r.join(",")]=new q(r.indexOf(e.length-1)>-1),a=0;a<o.length;a++){var s=o[a][1].sort(Z);i.next.push({type:o[a][0],next:t[s.join(",")]||n(s)})}return i}(ee(e,0))}function ne(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function re(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function oe(e,t,n,r){for(var o in t)if(!(o in e))throw new RangeError("Unsupported attribute ".concat(o," for ").concat(n," of type ").concat(o));for(var i in e){var a=e[i];a.validate&&a.validate(t[i])}}function ie(e,t){var n=Object.create(null);if(t)for(var r in t)n[r]=new se(e,r,t[r]);return n}var ae=function(){function e(t,n,r){p(this,e),this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ie(t,r.attrs),this.defaultAttrs=ne(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return m(e,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==q.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"isInGroup",value:function(e){return this.groups.indexOf(e)>-1}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:re(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new V(this,this.computeAttrs(e),b.from(t),S.setFrom(n))}},{key:"createChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=b.from(t),this.checkContent(t),new V(this,this.computeAttrs(e),t,S.setFrom(n))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=b.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(b.empty,!0);return i?new V(this,e,t.append(i),S.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}},{key:"checkAttrs",value:function(e){oe(this.attrs,e,"node",this.name)}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:S.none:e}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach(function(t,o){return r[t]=new e(t,n,o)});var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),e}(),se=function(){function e(t,n,r){p(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,n){var r=n.split("|");return function(n){var o=null===n?"null":f(n);if(r.indexOf(o)<0)throw new RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(o))}}(t,n,r.validate):r.validate}return m(e,[{key:"isRequired",get:function(){return!this.hasDefault}}]),e}(),le=function(){function e(t,n,r,o){p(this,e),this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=ie(t,o.attrs),this.excluded=null;var i=ne(this.attrs);this.instance=i?new S(this,i):null}return m(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new S(this,re(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"checkAttrs",value:function(e){oe(this.attrs,e,"mark",this.name)}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),o=0;return t.forEach(function(t,i){return r[t]=new e(t,o++,n,i)}),r}}]),e}(),ce=function(){function e(t){p(this,e),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var r in t)n[r]=t[r];n.nodes=g.from(t.nodes),n.marks=g.from(t.marks||{}),this.nodes=ae.compile(this.spec.nodes,this),this.marks=le.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var a=this.nodes[i],s=a.spec.content||"",l=a.spec.marks;if(a.contentMatch=o[s]||(o[s]=q.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet="_"==l?null:l?ue(this,l.split(" ")):""!=l&&a.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],d=u.spec.excludes;u.excluded=null==d?[u]:""==d?[]:ue(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return m(e,[{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ae))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new U(n,n.defaultAttrs,e,S.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return V.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return S.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}]),e}();function ue(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var l=e.marks[s];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var de=function(){function e(t,n){var r=this;p(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[];var o=this.matchedStyles=[];n.forEach(function(e){if(function(e){return null!=e.tag}(e))r.tags.push(e);else if(function(e){return null!=e.style}(e)){var t=/[^=]*/.exec(e.style)[0];o.indexOf(t)<0&&o.push(t),r.styles.push(e)}}),this.normalizeLists=!this.tags.some(function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)})}return m(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ve(this,t,!1);return n.addAll(e,S.none,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ve(this,t,!0);return n.addAll(e,S.none,t.from,t.to),M.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(ye(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(e)||i.context&&!n.matchesContext(i.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach(function(e){n(e=be(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach(function(e){n(e=be(e)),e.node||e.ignore||e.mark||(e.node=t)})};for(var a in e.nodes)i(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}]),e}(),fe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},pe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},he={ol:!0,ul:!0};function me(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var ge=function(){function e(t,n,r,o,i,a){p(this,e),this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=S.none,this.match=i||(4&a?null:t.contentMatch)}return m(e,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(b.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}var o=b.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!fe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}]),e}(),ve=function(){function e(t,n,r){p(this,e),this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;var o,i=n.topNode,a=me(null,n.preserveWhitespace,0)|(r?4:0);o=i?new ge(i.type,i.attrs,S.none,!0,n.topMatch||i.type.contentMatch,a):new ge(r?null:t.schema.topNodeType,null,S.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}return m(e,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}},{key:"addTextNode",value:function(e,t){var n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],a=e.previousSibling;(!i||a&&"BR"==a.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t,n){var r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);var i,a=e.nodeName.toLowerCase();he.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&he.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(s?s.ignore:pe.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);var l,c=this.needsBlock;if(fe.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),l=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}var u=s&&s.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),l&&this.sync(o),this.needsBlock=c}else{var d=this.readStyles(e,t);d&&this.addElementByRule(e,s,d,!1===s.consuming?i:void 0)}this.localPreserveWS=r}},{key:"leafFallback",value:function(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}},{key:"ignoreFallback",value:function(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}},{key:"readStyles",value:function(e,t){var n=this,r=e.style;if(r&&r.length)for(var o=0;o<this.parser.matchedStyles.length;o++){var i=this.parser.matchedStyles[o],a=r.getPropertyValue(i);if(a)for(var s,l=function(e){var r=n.parser.matchStyle(i,a,n,e);return r?r.ignore?{v:null}:(t=r.clearMark?t.filter(function(e){return!r.clearMark(e)}):t.concat(n.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming?(c=e,0):void(c=e=r)):(c=e,0)},c=void 0;0!==(s=l(c));)if(s)return s.v}return t}},{key:"addElementByRule",value:function(e,t,n,r){var o,i,a=this;if(t.node)if((i=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{var s=this.enter(i,t.attrs||null,n,t.preserveWhitespace);s&&(o=!0,n=s)}else{var l=this.parser.schema.marks[t.mark];n=n.concat(l.create(t.attrs))}var c=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return a.insertNode(e,n,!1)});else{var u=e;"string"==typeof t.contentElement?u=e.querySelector(t.contentElement):"function"==typeof t.contentElement?u=t.contentElement(e):t.contentElement&&(u=t.contentElement),this.findAround(e,u,!0),this.addAll(u,n),this.findAround(e,u,!1)}o&&this.sync(c)&&this.open--}},{key:"addAll",value:function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}},{key:"findPlace",value:function(e,t,n){for(var r,o,i=this.open,a=0;i>=0;i--){var s=this.nodes[i],l=s.findWrapping(e);if(l&&(!r||r.length>l.length+a)&&(r=l,o=s,!l.length))break;if(s.solid){if(n)break;a+=2}}if(!r)return null;this.sync(o);for(var c=0;c<r.length;c++)t=this.enterInner(r[c],null,t,!1);return t}},{key:"insertNode",value:function(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){var o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}var i=this.findPlace(e,t,n);if(i){this.closeExtra();var a=this.top;a.match&&(a.match=a.match.matchType(e.type));var s,l=S.none,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(i.concat(e.marks));try{for(c.s();!(s=c.n()).done;){var u=s.value;(a.type?a.type.allowsMarkType(u.type):we(u.type,e.type))&&(l=u.addToSet(l))}}catch(e){c.e(e)}finally{c.f()}return a.content.push(e.mark(l)),!0}return!1}},{key:"enter",value:function(e,t,n,r){var o=this.findPlace(e.create(t),n,!1);return o&&(o=this.enterInner(e,t,n,!0,r)),o}},{key:"enterInner",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(e);var a=me(e,o,i.options);4&i.options&&0==i.content.length&&(a|=4);var s=S.none;return n=n.filter(function(t){return!(i.type?i.type.allowsMarkType(t.type):we(t.type,e))||(s=t.addToSet(s),!1)}),this.nodes.push(new ge(e,t,s,r,null,a)),this.open++,n}},{key:"closeExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function e(a,s){for(;a>=0;a--){var l=n[a];if(""==l){if(a==n.length-1||0==a)continue;for(;s>=i;s--)if(e(a-1,s))return!0;return!1}var c=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!c||c.name!=l&&!c.isInGroup(l))return!1;s--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}}]),e}();function ye(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function be(e){var t={};for(var n in e)t[n]=e[n];return t}function we(e,t){var n,r=t.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(e))return 0;var o=[];return function e(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),a=i.type,s=i.next;if(a==t)return!0;if(o.indexOf(s)<0&&e(s))return!0}}(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var ke=function(){function e(t,n){p(this,e),this.nodes=t,this.marks=n}return m(e,[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Se(n).createDocumentFragment());var o=r,i=[];return e.forEach(function(e){if(i.length||e.marks.length){for(var r=0,a=0;r<i.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(i[r][0])||!1===s.type.spec.spanning)break;r++,a++}else a++}for(;r<i.length;)o=i.pop()[1];for(;a<e.marks.length;){var l=e.marks[a++],c=t.serializeMark(l,e.isInline,n);c&&(i.push([l,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(t.serializeNodeInner(e,n))}),r}},{key:"serializeNodeInner",value:function(e,t){var n=Me(Se(t),this.nodes[e.type.name](e),null,e.attrs),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}},{key:"serializeNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&Me(Se(n),r(e,t),null,e.attrs)}}],[{key:"renderSpec",value:function(e,t){return Me(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=xe(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return xe(e.marks)}}]),e}();function xe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Se(e){return e.document||window.document}var Ce=new WeakMap;function Me(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var o,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(e){var t=Ce.get(e);return void 0===t&&Ce.set(e,t=function(e){var t=null;return function e(n){if(n&&"object"==f(n))if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(var r=0;r<n.length;r++)e(n[r]);else for(var o in n)e(n[o])}(e),t}(e)),t}(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var a,s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));var l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&"object"==f(c)&&null==c.nodeType&&!Array.isArray(c))for(var d in u=2,c)if(null!=c[d]){var p=d.indexOf(" ");p>0?l.setAttributeNS(d.slice(0,p),d.slice(p+1),c[d]):l.setAttribute(d,c[d])}for(var h=u;h<t.length;h++){var m=t[h];if(0===m){if(h<t.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}var g=Me(e,m,n,r),v=g.dom,y=g.contentDOM;if(l.appendChild(v),y){if(a)throw new RangeError("Multiple content holes");a=y}}return{dom:l,contentDOM:a}}t.ContentMatch=q,t.DOMParser=de,t.DOMSerializer=ke,t.Fragment=b,t.Mark=S,t.MarkType=le,t.Node=V,t.NodeRange=z,t.NodeType=ae,t.ReplaceError=C,t.ResolvedPos=L,t.Schema=ce,t.Slice=M},34243:function(e,t,n){"use strict";var r=n(36553),o=n(77712),i=n(37820),a=["ol",0],s=["ul",0],l=["li",0],c={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?a:["ol",{start:e.attrs.order},0]}},u={parseDOM:[{tag:"ul"}],toDOM:function(){return s}},d={parseDOM:[{tag:"li"}],toDOM:function(){return l},defining:!0};function f(e,t){var n={};for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n}function p(e,t){return function(n,a){var s=n.selection,l=s.$from,c=s.$to,u=s.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;var d=l.node(-1);if(d.type!=e)return!1;if(0==l.parent.content.size&&l.node(-1).childCount==l.indexAfter(-1)){if(3==l.depth||l.node(-3).type!=e||l.index(-2)!=l.node(-2).childCount-1)return!1;if(a){for(var f=o.Fragment.empty,p=l.index(-1)?1:l.index(-2)?2:3,h=l.depth-p;h>=l.depth-3;h--)f=o.Fragment.from(l.node(h).copy(f));var m=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3;f=f.append(o.Fragment.from(e.createAndFill()));var g=l.before(l.depth-(p-1)),v=n.tr.replace(g,l.after(-m),new o.Slice(f,4-p,0)),y=-1;v.doc.nodesBetween(g,v.doc.content.size,function(e,t){if(y>-1)return!1;e.isTextblock&&0==e.content.size&&(y=t+1)}),y>-1&&v.setSelection(i.Selection.near(v.doc.resolve(y))),a(v.scrollIntoView())}return!0}var b=c.pos==l.end()?d.contentMatchAt(0).defaultType:null,w=n.tr.delete(l.pos,c.pos),k=b?[t?{type:e,attrs:t}:null,{type:b}]:void 0;return!!r.canSplit(w.doc,l.pos,2,k)&&(a&&a(w.split(l.pos,2,k).scrollIntoView()),!0)}}t.addListNodes=function(e,t,n){return e.append({ordered_list:f(c,{content:"list_item+",group:n}),bullet_list:f(u,{content:"list_item+",group:n}),list_item:f(d,{content:t})})},t.bulletList=u,t.liftListItem=function(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,l=a.blockRange(s,function(t){return t.childCount>0&&t.firstChild.type==e});return!!l&&(!n||(a.node(l.depth-1).type==e?function(e,t,n,i){var a=e.tr,s=i.end,l=i.$to.end(i.depth);s<l&&(a.step(new r.ReplaceAroundStep(s-1,l,s,l,new o.Slice(o.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(l),i.depth));var c=r.liftTarget(i);if(null==c)return!1;a.lift(i,c);var u=a.mapping.map(s,-1)-1;return r.canJoin(a.doc,u)&&a.join(u),t(a.scrollIntoView()),!0}(t,n,e,l):function(e,t,n){for(var i=e.tr,a=n.parent,s=n.end,l=n.endIndex-1,c=n.startIndex;l>c;l--)s-=a.child(l).nodeSize,i.delete(s-1,s+1);var u=i.doc.resolve(n.start),d=u.nodeAfter;if(i.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var f=0==n.startIndex,p=n.endIndex==a.childCount,h=u.node(-1),m=u.index(-1);if(!h.canReplace(m+(f?0:1),m+1,d.content.append(p?o.Fragment.empty:o.Fragment.from(a))))return!1;var g=u.pos,v=g+d.nodeSize;return i.step(new r.ReplaceAroundStep(g-(f?1:0),v+(p?1:0),g+1,v-1,new o.Slice((f?o.Fragment.empty:o.Fragment.from(a.copy(o.Fragment.empty))).append(p?o.Fragment.empty:o.Fragment.from(a.copy(o.Fragment.empty))),f?0:1,p?0:1),f?0:1)),t(i.scrollIntoView()),!0}(t,n,l)))}},t.listItem=d,t.orderedList=c,t.sinkListItem=function(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,l=a.blockRange(s,function(t){return t.childCount>0&&t.firstChild.type==e});if(!l)return!1;var c=l.startIndex;if(0==c)return!1;var u=l.parent,d=u.child(c-1);if(d.type!=e)return!1;if(n){var f=d.lastChild&&d.lastChild.type==u.type,p=o.Fragment.from(f?e.create():null),h=new o.Slice(o.Fragment.from(e.create(null,o.Fragment.from(u.type.create(null,p)))),f?3:1,0),m=l.start,g=l.end;n(t.tr.step(new r.ReplaceAroundStep(m-(f?3:1),g,m,g,h,1,!0)).scrollIntoView())}return!0}},t.splitListItem=p,t.splitListItemKeepMarks=function(e,t){var n=p(e,t);return function(e,t){return n(e,t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})}},t.wrapInList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,i){var a=n.selection,s=a.$from,l=a.$to,c=s.blockRange(l),u=!1,d=c;if(!c)return!1;if(c.depth>=2&&s.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==s.index(c.depth-1))return!1;var f=n.doc.resolve(c.start-2);d=new o.NodeRange(f,f,c.depth),c.endIndex<c.parent.childCount&&(c=new o.NodeRange(s,n.doc.resolve(l.end(c.depth)),c.depth)),u=!0}var p=r.findWrapping(d,e,t,c);return!!p&&(i&&i(function(e,t,n,i,a){for(var s=o.Fragment.empty,l=n.length-1;l>=0;l--)s=o.Fragment.from(n[l].type.create(n[l].attrs,s));e.step(new r.ReplaceAroundStep(t.start-(i?2:0),t.end,t.start,t.end,new o.Slice(s,0,0),n.length,!0));for(var c=0,u=0;u<n.length;u++)n[u].type==a&&(c=u+1);for(var d=n.length-c,f=t.start+n.length-(i?2:0),p=t.parent,h=t.startIndex,m=t.endIndex,g=!0;h<m;h++,g=!1)!g&&r.canSplit(e.doc,f,d)&&(e.split(f,d),f+=2*d),f+=p.child(h).nodeSize;return e}(n.tr,c,p,u,e).scrollIntoView()),!0)}}},37820:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0});var f=n(77712),p=n(36553),h=Object.create(null),m=function(){function e(t,n,r){c(this,e),this.$anchor=t,this.$head=n,this.ranges=r||[new g(t.min(n),t.max(n))]}return d(e,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Slice.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var l=a[s],c=l.$from,u=l.$to,d=e.mapping.slice(i);e.replaceRange(d.map(c.pos),d.map(u.pos),s?f.Slice.empty:t),0==s&&O(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n),c=l.map(a.pos),u=l.map(s.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),O(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return b.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new b(e):M(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?M(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):M(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new S(e.node(0))}},{key:"atStart",value:function(e){return M(e,e,0,0,1)||new S(e)}},{key:"atEnd",value:function(e){return M(e,e,e.content.size,e.childCount,-1)||new S(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=h[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in h)throw new RangeError("Duplicate use of selection JSON ID "+e);return h[e]=t,t.prototype.jsonID=e,t}}]),e}();m.prototype.visible=!0;var g=d(function e(t,n){c(this,e),this.$from=t,this.$to=n}),v=!1;function y(e){v||e.parent.inlineContent||(v=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var b=function(e){i(n,e);var t=s(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return c(this,n),y(e),y(r),t.call(this,e,r)}return d(n,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,t){var r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return m.near(r);var o=e.resolve(t.map(this.anchor));return new n(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Slice.empty;if(o(l(n.prototype),"replace",this).call(this,e,t),t==f.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new w(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,t,r){var o=e.pos-t.pos;if(r&&!o||(r=o>=0?1:-1),!t.parent.inlineContent){var i=m.findFrom(t,r,!0)||m.findFrom(t,-r,!0);if(!i)return m.near(t,r);t=i.$head}return e.parent.inlineContent||(0==o||(e=(m.findFrom(e,-r,!0)||m.findFrom(e,r,!0)).$anchor).pos<t.pos!=o<0)&&(e=t),new n(e,t)}}]),n}(m);m.jsonID("text",b);var w=function(){function e(t,n){c(this,e),this.anchor=t,this.head=n}return d(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return b.between(e.resolve(this.anchor),e.resolve(this.head))}}]),e}(),k=function(e){i(n,e);var t=s(n);function n(e){var r;c(this,n);var o=e.nodeAfter,i=e.node(0).resolve(e.pos+o.nodeSize);return(r=t.call(this,e,i)).node=o,r}return d(n,[{key:"map",value:function(e,t){var r=t.mapResult(this.anchor),o=r.deleted,i=r.pos,a=e.resolve(i);return o?m.near(a):new n(a)}},{key:"content",value:function(){return new f.Slice(f.Fragment.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new x(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}},{key:"create",value:function(e,t){return new n(e.resolve(t))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),n}(m);k.prototype.visible=!1,m.jsonID("node",k);var x=function(){function e(t){c(this,e),this.anchor=t}return d(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new w(o,o):new e(o)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&k.isSelectable(n)?new k(t):m.near(t)}}]),e}(),S=function(e){i(n,e);var t=s(n);function n(e){return c(this,n),t.call(this,e.resolve(0),e.resolve(e.content.size))}return d(n,[{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Slice.empty;if(t==f.Slice.empty){e.delete(0,e.doc.content.size);var r=m.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else o(l(n.prototype),"replace",this).call(this,e,t)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new n(e)}},{key:"eq",value:function(e){return e instanceof n}},{key:"getBookmark",value:function(){return C}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(m);m.jsonID("all",S);var C={map:function(){return this},resolve:function(e){return new S(e)}};function M(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return b.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&k.isSelectable(s))return k.create(e,n-(o<0?s.nodeSize:0))}else{var l=M(e,s,n+o,o<0?s.childCount:0,o,i);if(l)return l}n+=s.nodeSize*o}return null}function O(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];(i instanceof p.ReplaceStep||i instanceof p.ReplaceAroundStep)&&(e.mapping.maps[r].forEach(function(e,t,n,r){null==o&&(o=r)}),e.setSelection(m.near(e.doc.resolve(o),n)))}}var A=function(e){i(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this,e.doc)).curSelectionFor=0,r.updated=0,r.meta=Object.create(null),r.time=Date.now(),r.curSelection=e.selection,r.storedMarks=e.storedMarks,r}return d(n,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return f.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(e,t){o(l(n.prototype),"addStep",this).call(this,e,t),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||f.Mark.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(m.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}]),n}(p.Transform);function E(e,t){return t&&e?e.bind(t):e}var T=d(function e(t,n,r){c(this,e),this.name=t,this.init=E(n.init,r),this.apply=E(n.apply,r)}),_=[new T("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new T("selection",{init:function(e,t){return e.selection||m.atStart(t.doc)},apply:function(e){return e.selection}}),new T("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new T("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],N=d(function e(t,n){var r=this;c(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_.slice(),n&&n.forEach(function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new T(e.key,e.spec.state,e))})}),j=function(){function e(t){c(this,e),this.config=t}return d(e,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,l=r?r[i].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new A(this)}},{key:"reconfigure",value:function(t){for(var n=new N(this.schema,t.plugins),r=n.fields,o=new e(n),i=0;i<r.length;i++){var a=r[i].name;o[a]=this.hasOwnProperty(a)?this[a]:r[i].init(t,o)}return o}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==r(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],i=o.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(o,this[o.key]))}return t}}],[{key:"create",value:function(t){for(var n=new N(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}},{key:"fromJSON",value:function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new N(t.schema,t.plugins),i=new e(o);return o.fields.forEach(function(e){if("doc"==e.name)i.doc=f.Node.fromJSON(t.schema,n.doc);else if("selection"==e.name)i.selection=m.fromJSON(i.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],s=a.spec.state;if(a.key==e.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[e.name]=s.fromJSON.call(a,t,n[o],i))}i[e.name]=e.init(t,i)}}),i}}]),e}();function P(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=P(o,t,{})),n[r]=o}return n}var I=function(){function e(t){c(this,e),this.spec=t,this.props={},t.props&&P(t.props,this,this.props),this.key=t.key?t.key.key:R("plugin")}return d(e,[{key:"getState",value:function(e){return e[this.key]}}]),e}(),D=Object.create(null);function R(e){return e in D?e+"$"+ ++D[e]:(D[e]=0,e+"$")}var L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";c(this,e),this.key=R(t)}return d(e,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),e}();t.AllSelection=S,t.EditorState=j,t.NodeSelection=k,t.Plugin=I,t.PluginKey=L,t.Selection=m,t.SelectionRange=g,t.TextSelection=b,t.Transaction=A},27610:function(e,t,n){"use strict";var r,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(l,{CellBookmark:()=>L,CellSelection:()=>R,ResizeState:()=>$e,TableMap:()=>m,TableView:()=>Fe,__clipCells:()=>xe,__insertCells:()=>Me,__pastedCells:()=>we,addColSpan:()=>I,addColumn:()=>G,addColumnAfter:()=>J,addColumnBefore:()=>Y,addRow:()=>ee,addRowAfter:()=>ne,addRowBefore:()=>te,cellAround:()=>S,cellNear:()=>O,colCount:()=>N,columnIsHeader:()=>D,columnResizing:()=>ze,columnResizingPluginKey:()=>He,deleteCellSelection:()=>ve,deleteColumn:()=>Q,deleteRow:()=>oe,deleteTable:()=>ge,findCell:()=>_,fixTables:()=>z,fixTablesKey:()=>B,goToNextCell:()=>me,handlePaste:()=>Ne,inSameTable:()=>T,isInTable:()=>C,mergeCells:()=>ae,moveCellForward:()=>E,nextCell:()=>j,pointsAtCell:()=>A,removeColSpan:()=>P,removeColumn:()=>X,removeRow:()=>re,rowIsHeader:()=>Z,selectedRect:()=>K,selectionCell:()=>M,setCellAttr:()=>ce,splitCell:()=>se,splitCellWithType:()=>le,tableEditing:()=>Ke,tableEditingKey:()=>x,tableNodeTypes:()=>k,tableNodes:()=>w,toggleHeader:()=>de,toggleHeaderCell:()=>he,toggleHeaderColumn:()=>pe,toggleHeaderRow:()=>fe,updateColumnsOnResize:()=>Be}),e.exports=(r=l,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of a(t))s.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=i(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var c,u,d=n(37820),f=n(77712),p=n(37820),h=n(49454);if("undefined"!=typeof WeakMap){let e=new WeakMap;c=t=>e.get(t),u=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;c=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},u=(r,o)=>(n==t&&(n=0),e[n++]=r,e[n++]=o)}var m=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,a=o+1;for(let e=1;i<this.width&&this.map[t+e]==n;e++)i++;for(let e=1;a<this.height&&this.map[t+this.width*e]==n;e++)a++;return{left:r,top:o,right:i,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:a}=this.findCell(e);return"horiz"==t?(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?0==i:a==this.height)?null:this.map[r+this.width*(n<0?i-1:a)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:a,right:s,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,a),top:Math.min(o,l),right:Math.max(r,s),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;for(;n<r&&this.map[n]<o;)n++;return n==r?i-1:this.map[n]}o=i}}static get(e){return c(e)||u(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const o=n.child(e);t+o.attrs.rowspan>r&&(i+=o.attrs.colspan)}}for(let e=0;e<o.childCount;e++){const t=o.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[];let o=0,i=null;const a=[];for(let e=0,o=t*n;e<o;e++)r[e]=0;for(let s=0,l=0;s<n;s++){const c=e.child(s);l++;for(let e=0;;e++){for(;o<r.length&&0!=r[o];)o++;if(e==c.childCount)break;const u=c.child(e),{colspan:d,rowspan:f,colwidth:p}=u.attrs;for(let e=0;e<f;e++){if(e+s>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:l,n:f-e});break}const c=o+e*t;for(let e=0;e<d;e++){0==r[c+e]?r[c+e]=l:(i||(i=[])).push({type:"collision",row:s,pos:l,n:d-e});const n=p&&p[e];if(n){const r=(c+e)%t*2,o=a[r];null==o||o!=n&&1==a[r+1]?(a[r]=n,a[r+1]=1):o==n&&a[r+1]++}}}o+=d,l+=u.nodeSize}const u=(s+1)*t;let d=0;for(;o<u;)0==r[o++]&&d++;d&&(i||(i=[])).push({type:"missing",row:s,n:d}),l++}0!==t&&0!==n||(i||(i=[])).push({type:"zero_sized"});const s=new m(t,n,r,i);let l=!1;for(let e=0;!l&&e<a.length;e+=2)null!=a[e]&&a[e+1]<n&&(l=!0);return l&&function(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const a=n.nodeAt(i);if(!a)throw new RangeError(`No cell with offset ${i} found`);let s=null;const l=a.attrs;for(let n=0;n<l.colspan;n++){const r=t[(o+n)%e.width*2];null==r||l.colwidth&&l.colwidth[n]==r||((s||(s=g(l)))[n]=r)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}(s,a,e),s}(e))}};function g(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function v(e,t){if("string"==typeof e)return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(e=>Number(e)):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const n in t){const r=t[n].getFromDOM,o=r&&r(e);null!=o&&(i[n]=o)}return i}function y(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function b(e){if(null!==e){if(!Array.isArray(e))throw new TypeError("colwidth must be null or an array");for(const t of e)if("number"!=typeof t)throw new TypeError("colwidth must be null or an array of numbers")}}function w(e){const t=e.cellAttributes||{},n={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:b}};for(const e in t)n[e]={default:t[e].default,validate:t[e].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>v(e,t)}],toDOM(e){return["td",y(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>v(e,t)}],toDOM(e){return["th",y(e,t),0]}}}}function k(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var x=new(n(37820).PluginKey)("selectingCells");function S(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function C(e){const t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function M(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=S(t.$head)||O(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function O(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}function A(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function E(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function T(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function _(e){return m.get(e.node(-1)).findCell(e.pos-e.start(-1))}function N(e){return m.get(e.node(-1)).colCount(e.pos-e.start(-1))}function j(e,t,n){const r=e.node(-1),o=m.get(r),i=e.start(-1),a=o.nextCell(e.pos-i,t,n);return null==a?null:e.node(0).resolve(i+a)}function P(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}function I(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}function D(e,t,n){const r=k(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var R=class e extends p.Selection{constructor(e,t=e){const n=e.node(-1),r=m.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),a=e.node(0),s=r.cellsInRect(i).filter(e=>e!=t.pos-o);s.unshift(t.pos-o);const l=s.map(e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=o+e+1;return new p.SelectionRange(a.resolve(r),a.resolve(r+t.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(A(r)&&A(o)&&T(r,o)){const t=this.$anchorCell.node(-1)!=r.node(-1);return t&&this.isRowSelection()?e.rowSelection(r,o):t&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return p.TextSelection.between(r,o)}content(){const e=this.$anchorCell.node(-1),t=m.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let n=r.top;n<r.bottom;n++){const a=[];for(let i=n*t.width+r.left,s=r.left;s<r.right;s++,i++){const n=t.map[i];if(o[n])continue;o[n]=!0;const s=t.findCell(n);let l=e.nodeAt(n);if(!l)throw RangeError(`No cell with offset ${n} found`);const c=r.left-s.left,u=s.right-r.right;if(c>0||u>0){let e=l.attrs;if(c>0&&(e=P(e,0,c)),u>0&&(e=P(e,e.colspan-u,u)),s.left<r.left){if(l=l.type.createAndFill(e),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(s.top<r.top||s.bottom>r.bottom){const e={...l.attrs,rowspan:Math.min(s.bottom,r.bottom)-Math.max(s.top,r.top)};l=s.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}a.push(l)}i.push(e.child(n).copy(f.Fragment.from(a)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new f.Slice(f.Fragment.from(a),1,1)}replace(e,t=f.Slice.empty){const n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){const{$from:i,$to:a}=r[o],s=e.mapping.slice(n);e.replace(s.map(i.pos),s.map(a.pos),o?f.Slice.empty:t)}const o=p.Selection.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new f.Slice(f.Fragment.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=m.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<o.length;n++)e(t.nodeAt(o[n]),r+o[n])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),o=m.get(r),i=t.start(-1),a=o.findCell(t.pos-i),s=o.findCell(n.pos-i),l=t.node(0);return a.top<=s.top?(a.top>0&&(t=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(t=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))),new e(t,n)}isRowSelection(){const e=this.$anchorCell.node(-1),t=m.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),o=m.get(r),i=t.start(-1),a=o.findCell(t.pos-i),s=o.findCell(n.pos-i),l=t.node(0);return a.left<=s.left?(a.left>0&&(t=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(n=l.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(t=l.resolve(i+o.map[o.width*(a.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new L(this.$anchorCell.pos,this.$headCell.pos)}};R.prototype.visible=!1,p.Selection.jsonID("cell",R);var L=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&T(t,n)?new R(t,n):p.Selection.near(n,1)}};function F(e){if(!(e.selection instanceof R))return null;const t=[];return e.selection.forEachCell((e,n)=>{t.push(h.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))}),h.DecorationSet.create(e.doc,t)}var B=new(n(37820).PluginKey)("fix-tables");function H(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let a=0,s=0;a<i;a++){const i=t.child(a);for(let t=s,r=Math.min(o,a+3);t<r;t++)if(e.child(t)==i){s=t+1,n+=i.nodeSize;continue e}r(i,n),s<o&&e.child(s).sameMarkup(i)?H(e.child(s),i,n+1,r):i.nodesBetween(0,i.content.size,r,n+1),n+=i.nodeSize}}function z(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){const o=m.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let e=0;e<o.height;e++)i.push(0);for(let e=0;e<o.problems.length;e++){const a=o.problems[e];if("collision"==a.type){const e=t.nodeAt(a.pos);if(!e)continue;const o=e.attrs;for(let e=0;e<o.rowspan;e++)i[a.row+e]+=a.n;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,P(o,o.colspan-a.n,a.n))}else if("missing"==a.type)i[a.row]+=a.n;else if("overlong_rowspan"==a.type){const e=t.nodeAt(a.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-a.n})}else if("colwidth mismatch"==a.type){const e=t.nodeAt(a.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,{...e.attrs,colwidth:a.colwidth})}else if("zero_sized"==a.type){const e=r.mapping.map(n);r.delete(e,e+t.nodeSize)}}let a,s;for(let e=0;e<i.length;e++)i[e]&&(null==a&&(a=e),s=e);for(let l=0,c=n+1;l<o.height;l++){const n=t.child(l),o=c+n.nodeSize,u=i[l];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const i=[];for(let n=0;n<u;n++){const n=k(e.schema)[t].createAndFill();n&&i.push(n)}const d=0!=l&&a!=l-1||s!=l?o-1:c+1;r.insert(r.mapping.map(d),i)}c=o}return r.setMeta(B,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&H(t.doc,e.doc,0,r):e.doc.descendants(r),n}var $=n(88136),V=n(77712),U=n(37820),W=n(77712),q=n(37820);function K(e){const t=e.selection,n=M(e),r=n.node(-1),o=n.start(-1),i=m.get(r);return{...t instanceof R?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function G(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;D(t,r,o+i)&&(i=0==o||o==t.width?null:0);for(let a=0;a<t.height;a++){const s=a*t.width+o;if(o>0&&o<t.width&&t.map[s-1]==t.map[s]){const i=t.map[s],l=r.nodeAt(i);e.setNodeMarkup(e.mapping.map(n+i),null,I(l.attrs,o-t.colCount(i))),a+=l.attrs.rowspan-1}else{const l=null==i?k(r.type.schema).cell:r.nodeAt(t.map[s+i]).type,c=t.positionAt(a,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function Y(e,t){if(!C(e))return!1;if(t){const n=K(e);t(G(e.tr,n,n.left))}return!0}function J(e,t){if(!C(e))return!1;if(t){const n=K(e);t(G(e.tr,n,n.right))}return!0}function X(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let a=0;a<t.height;){const s=a*t.width+o,l=t.map[s],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[s-1]==l||o<t.width-1&&t.map[s+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,P(u,o-t.colCount(l)));else{const t=e.mapping.slice(i).map(r+l);e.delete(t,t+c.nodeSize)}a+=u.rowspan}}function Q(e,t){if(!C(e))return!1;if(t){const n=K(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;X(r,n,e),e!=n.left;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=m.get(e)}t(r)}return!0}function Z(e,t,n){var r;const o=k(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0}function ee(e,{map:t,tableStart:n,table:r},o){var i;let a=n;for(let e=0;e<o;e++)a+=r.child(e).nodeSize;const s=[];let l=o>0?-1:0;Z(t,r,o+l)&&(l=0==o||o==t.height?null:0);for(let a=0,c=t.width*o;a<t.width;a++,c++)if(o>0&&o<t.height&&t.map[c]==t.map[c-t.width]){const o=t.map[c],i=r.nodeAt(o).attrs;e.setNodeMarkup(n+o,null,{...i,rowspan:i.rowspan+1}),a+=i.colspan-1}else{const e=null==l?k(r.type.schema).cell:null==(i=r.nodeAt(t.map[c+l*t.width]))?void 0:i.type,n=null==e?void 0:e.createAndFill();n&&s.push(n)}return e.insert(a,k(r.type.schema).row.create(null,s)),e}function te(e,t){if(!C(e))return!1;if(t){const n=K(e);t(ee(e.tr,n,n.top))}return!0}function ne(e,t){if(!C(e))return!1;if(t){const n=K(e);t(ee(e.tr,n,n.bottom))}return!0}function re(e,{map:t,table:n,tableStart:r},o){let i=0;for(let e=0;e<o;e++)i+=n.child(e).nodeSize;const a=i+n.child(o).nodeSize,s=e.mapping.maps.length;e.delete(i+r,a+r);const l=new Set;for(let i=0,a=o*t.width;i<t.width;i++,a++){const c=t.map[a];if(!l.has(c))if(l.add(c),o>0&&c==t.map[a-t.width]){const t=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(s).map(c+r),null,{...t,rowspan:t.rowspan-1}),i+=t.colspan-1}else if(o<t.height&&c==t.map[a+t.width]){const a=n.nodeAt(c),l=a.attrs,u=a.type.create({...l,rowspan:a.attrs.rowspan-1},a.content),d=t.positionAt(o+1,i,n);e.insert(e.mapping.slice(s).map(r+d),u),i+=l.colspan-1}}}function oe(e,t){if(!C(e))return!1;if(t){const n=K(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;re(r,n,e),e!=n.top;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=m.get(n.table)}t(r)}return!0}function ie(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function ae(e,t){const n=e.selection;if(!(n instanceof R)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=K(e),{map:o}=r;if(function({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,a=(r.bottom-1)*e+r.left,s=o+(r.right-r.left-1);for(let t=r.top;t<r.bottom;t++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[s]==n[s+1])return!0;i+=e,s+=e}for(let i=r.left;i<r.right;i++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[a]==n[a+e])return!0;o++,a++}return!1}(o,r))return!1;if(t){const n=e.tr,i={};let a,s,l=W.Fragment.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){const c=o.map[e*o.width+t],u=r.table.nodeAt(c);if(!i[c]&&u)if(i[c]=!0,null==a)a=c,s=u;else{ie(u)||(l=l.append(u.content));const e=n.mapping.map(c+r.tableStart);n.delete(e,e+u.nodeSize)}}if(null==a||null==s)return!0;if(n.setNodeMarkup(a+r.tableStart,null,{...I(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const e=a+1+s.content.size,t=ie(s)?a+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,l)}n.setSelection(new R(n.doc.resolve(a+r.tableStart))),t(n)}return!0}function se(e,t){const n=k(e.schema);return le(({node:e})=>n[e.type.spec.tableRole])(e,t)}function le(e){return(t,n)=>{var r;const o=t.selection;let i,a;if(o instanceof R){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,a=o.$anchorCell.pos}else{if(i=function(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from),!i)return!1;a=null==(r=S(o.$from))?void 0:r.pos}if(null==i||null==a)return!1;if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(n){let r=i.attrs;const s=[],l=r.colwidth;r.rowspan>1&&(r={...r,rowspan:1}),r.colspan>1&&(r={...r,colspan:1});const c=K(t),u=t.tr;for(let e=0;e<c.right-c.left;e++)s.push(l?{...r,colwidth:l&&l[e]?[l[e]]:null}:r);let d;for(let t=c.top;t<c.bottom;t++){let n=c.map.positionAt(t,c.left,c.table);t==c.top&&(n+=i.nodeSize);for(let r=c.left,o=0;r<c.right;r++,o++)r==c.left&&t==c.top||u.insert(d=u.mapping.map(n+c.tableStart,1),e({node:i,row:t,col:r}).createAndFill(s[o]))}u.setNodeMarkup(a,e({node:i,row:c.top,col:c.left}),s[0]),o instanceof R&&u.setSelection(new R(u.doc.resolve(o.$anchorCell.pos),d?u.doc.resolve(d):void 0)),n(u)}return!0}}function ce(e,t){return function(n,r){if(!C(n))return!1;const o=M(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof R?n.selection.forEachCell((n,r)=>{n.attrs[e]!==t&&i.setNodeMarkup(r,null,{...n.attrs,[e]:t})}):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function ue(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<r.length;e++){const o=t.table.nodeAt(r[e]);if(o&&o.type!==n.header_cell)return!1}return!0}function de(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!C(t))return!1;if(n){const r=k(t.schema),o=K(t),i=t.tr,a=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=a.map(e=>o.table.nodeAt(e));for(let e=0;e<a.length;e++)s[e].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[e],r.cell,s[e].attrs);if(0==i.steps.length)for(let e=0;e<a.length;e++)i.setNodeMarkup(o.tableStart+a[e],r.header_cell,s[e].attrs);n(i)}return!0}}(e):function(t,n){if(!C(t))return!1;if(n){const r=k(t.schema),o=K(t),i=t.tr,a=ue("row",o,r),s=ue("column",o,r),l=("column"===e?a:"row"===e&&s)?1:0,c="column"==e?{left:0,top:l,right:1,bottom:o.map.height}:"row"==e?{left:l,top:0,right:o.map.width,bottom:1}:o,u="column"==e?s?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach(e=>{const t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)}),n(i)}return!0}}var fe=de("row",{useDeprecatedLogic:!0}),pe=de("column",{useDeprecatedLogic:!0}),he=de("cell",{useDeprecatedLogic:!0});function me(e){return function(t,n){if(!C(t))return!1;const r=function(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){const r=e.node(-1).child(t),o=r.lastChild;if(o)return n-1-o.nodeSize;n-=r.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(M(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(q.TextSelection.between(e,E(e))).scrollIntoView())}return!0}}function ge(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function ve(e,t){const n=e.selection;if(!(n instanceof R))return!1;if(t){const r=e.tr,o=k(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new W.Slice(o,0,0))}),r.docChanged&&t(r)}return!0}var ye=n(77712),be=n(36553);function we(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(let e=0;e<t.childCount;e++){let o=t.child(e).content;const i=e?0:Math.max(0,n-1),l=e<t.childCount-1?0:Math.max(0,r-1);(i||l)&&(o=ke(k(a).row,new ye.Slice(o,i,l)).content),s.push(o)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?ke(k(a).row,new ye.Slice(t,n,r)).content:t)}return function(e,t){const n=[];for(let e=0;e<t.length;e++){const r=t[e];for(let t=r.childCount-1;t>=0;t--){const{rowspan:o,colspan:i}=r.child(t).attrs;for(let t=e;t<e+o;t++)n[t]=(n[t]||0)+i}}let r=0;for(let e=0;e<n.length;e++)r=Math.max(r,n[e]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(ye.Fragment.empty),n[o]<r){const i=k(e).cell.createAndFill(),a=[];for(let e=n[o];e<r;e++)a.push(i);t[o]=t[o].append(ye.Fragment.from(a))}return{height:t.length,width:r,rows:t}}(a,s)}function ke(e,t){const n=e.createAndFill();return new be.Transform(n).replace(0,n.content.size,t).doc}function xe({width:e,height:t,rows:n},r,o){if(e!=r){const t=[],o=[];for(let e=0;e<n.length;e++){const i=n[e],a=[];for(let n=t[e]||0,o=0;n<r;o++){let s=i.child(o%i.childCount);n+s.attrs.colspan>r&&(s=s.type.createChecked(P(s.attrs,s.attrs.colspan,n+s.attrs.colspan-r),s.content)),a.push(s),n+=s.attrs.colspan;for(let n=1;n<s.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+s.attrs.colspan}o.push(ye.Fragment.from(a))}n=o,e=r}if(t!=o){const e=[];for(let r=0,i=0;r<o;r++,i++){const a=[],s=n[i%t];for(let e=0;e<s.childCount;e++){let t=s.child(e);r+t.attrs.rowspan>o&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,o-t.attrs.rowspan)},t.content)),a.push(t)}e.push(ye.Fragment.from(a))}n=e,t=o}return{width:e,height:t,rows:n}}function Se(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const o=a*t.width+c,i=t.map[o];if(t.map[o-t.width]==i){l=!0;const o=n.nodeAt(i),{top:u,left:d}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(s).map(i+r),null,{...o.attrs,rowspan:a-u}),e.insert(e.mapping.slice(s).map(t.positionAt(a,d,n)),o.type.createAndFill({...o.attrs,rowspan:u+o.attrs.rowspan-a})),c+=o.attrs.colspan-1}}return l}function Ce(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const o=c*t.width+a,i=t.map[o];if(t.map[o-1]==i){l=!0;const o=n.nodeAt(i),u=t.colCount(i),d=e.mapping.slice(s).map(i+r);e.setNodeMarkup(d,null,P(o.attrs,a-u,o.attrs.colspan-(a-u))),e.insert(d+o.nodeSize,o.type.createAndFill(P(o.attrs,0,a-u))),c+=o.attrs.rowspan-1}}return l}function Me(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let a=m.get(i);const{top:s,left:l}=r,c=l+o.width,u=s+o.height,d=e.tr;let f=0;function p(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");a=m.get(i),f=d.mapping.maps.length}(function(e,t,n,r,o,i,a){const s=k(e.doc.type.schema);let l,c;if(o>t.width)for(let i=0,u=0;i<t.height;i++){const d=n.child(i);u+=d.nodeSize;const f=[];let p;p=null==d.lastChild||d.lastChild.type==s.cell?l||(l=s.cell.createAndFill()):c||(c=s.header_cell.createAndFill());for(let e=t.width;e<o;e++)f.push(p);e.insert(e.mapping.slice(a).map(u-1+r),f)}if(i>t.height){const u=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,o);e++){const o=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==s.header_cell;u.push(o?c||(c=s.header_cell.createAndFill()):l||(l=s.cell.createAndFill()))}const d=s.row.create(null,ye.Fragment.from(u)),f=[];for(let e=t.height;e<i;e++)f.push(d);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),f)}return!(!l&&!c)})(d,a,i,n,c,u,f)&&p(),Se(d,a,i,n,l,c,s,f)&&p(),Se(d,a,i,n,l,c,u,f)&&p(),Ce(d,a,i,n,s,u,l,f)&&p(),Ce(d,a,i,n,s,u,c,f)&&p();for(let e=s;e<u;e++){const t=a.positionAt(e,l,i),r=a.positionAt(e,c,i);d.replace(d.mapping.slice(f).map(t+n),d.mapping.slice(f).map(r+n),new ye.Slice(o.rows[e-s],0,0))}p(),d.setSelection(new R(d.doc.resolve(n+a.positionAt(s,l,i)),d.doc.resolve(n+a.positionAt(u-1,c-1,i)))),t(d)}var Oe=(0,$.keydownHandler)({ArrowLeft:Ee("horiz",-1),ArrowRight:Ee("horiz",1),ArrowUp:Ee("vert",-1),ArrowDown:Ee("vert",1),"Shift-ArrowLeft":Te("horiz",-1),"Shift-ArrowRight":Te("horiz",1),"Shift-ArrowUp":Te("vert",-1),"Shift-ArrowDown":Te("vert",1),Backspace:ve,"Mod-Backspace":ve,Delete:ve,"Mod-Delete":ve});function Ae(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ee(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof R)return Ae(n,r,U.Selection.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;const a=Pe(o,e,t);if(null==a)return!1;if("horiz"==e)return Ae(n,r,U.Selection.near(n.doc.resolve(i.head+t),t));{const o=n.doc.resolve(a),i=j(o,e,t);let s;return s=i?U.Selection.near(i,1):t<0?U.Selection.near(n.doc.resolve(o.before(-1)),-1):U.Selection.near(n.doc.resolve(o.after(-1)),1),Ae(n,r,s)}}}function Te(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let a;if(i instanceof R)a=i;else{const r=Pe(o,e,t);if(null==r)return!1;a=new R(n.doc.resolve(r))}const s=j(a.$headCell,e,t);return!!s&&Ae(n,r,new R(a.$anchorCell,s))}}function _e(e,t){const n=S(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new R(n))),!0)}function Ne(e,t,n){if(!C(e.state))return!1;let r=we(n);const o=e.state.selection;if(o instanceof R){r||(r={width:1,height:1,rows:[V.Fragment.from(ke(k(e.state.schema).cell,n))]});const t=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=m.get(t).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=xe(r,a.right-a.left,a.bottom-a.top),Me(e.state,e.dispatch,i,a,r),!0}if(r){const t=M(e.state),n=t.start(-1);return Me(e.state,e.dispatch,n,m.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function je(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=Ie(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof R)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=S(e.state.selection.$anchor))&&(null==(n=De(e,t))?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(t,n){let r=De(e,n);const o=null==x.getState(e.state);if(!r||!T(t,r)){if(!o)return;r=t}const i=new R(t,r);if(o||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);o&&n.setMeta(x,t.pos),e.dispatch(n)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",s),null!=x.getState(e.state)&&e.dispatch(e.state.tr.setMeta(x,-1))}function s(n){const o=n,s=x.getState(e.state);let l;if(null!=s)l=e.state.doc.resolve(s);else if(Ie(e,o.target)!=r&&(l=De(e,t),!l))return a();l&&i(l,o)}e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",s)}function Pe(e,t,n){if(!(e.state.selection instanceof U.TextSelection))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){const i=r.before(o),a="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?i:null}}return null}function Ie(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function De(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?S(e.state.doc.resolve(n.pos)):null}var Re=n(37820),Le=n(49454),Fe=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Be(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,Be(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function Be(e,t,n,r,o,i){var a;let s=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:a,colwidth:d}=u.child(e).attrs;for(let e=0;e<a;e++,n++){const a=o==n?i:d&&d[e],u=a?a+"px":"";if(s+=a||r,a||(l=!1),c)c.style.width!=u&&(c.style.width=u),c=c.nextSibling;else{const e=document.createElement("col");e.style.width=u,t.appendChild(e)}}}for(;c;){const e=c.nextSibling;null==(a=c.parentNode)||a.removeChild(c),c=e}l?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var He=new Re.PluginKey("tableColumnResizing");function ze({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=Fe,lastColumnResizable:o=!0}={}){const i=new Re.Plugin({key:He,state:{init(e,t){var o,a;const s=null==(a=null==(o=i.spec)?void 0:o.props)?void 0:a.nodeViews,l=k(t.schema).table.name;return r&&s&&(s[l]=(e,t)=>new r(e,n,t)),new $e(-1,!1)},apply(e,t){return t.apply(e)}},props:{attributes:e=>{const t=He.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r){if(!e.editable)return;const o=He.getState(e.state);if(o&&!o.dragging){const i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target);let a=-1;if(i){const{left:r,right:o}=i.getBoundingClientRect();t.clientX-r<=n?a=Ve(e,t,"left",n):o-t.clientX<=n&&(a=Ve(e,t,"right",n))}if(a!=o.activeHandle){if(!r&&-1!==a){const t=e.state.doc.resolve(a),n=t.node(-1),r=m.get(n),o=t.start(-1);if(r.colCount(t.pos-o)+t.nodeAfter.attrs.colspan-1==r.width-1)return}We(e,a)}}}(t,n,e,o)},mouseleave:e=>{!function(e){if(!e.editable)return;const t=He.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&We(e,-1)}(e)},mousedown:(e,r)=>{!function(e,t,n,r){var o;if(!e.editable)return!1;const i=null!=(o=e.dom.ownerDocument.defaultView)?o:window,a=He.getState(e.state);if(!a||-1==a.activeHandle||a.dragging)return!1;const s=e.state.doc.nodeAt(a.activeHandle),l=function(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t);let a=i.node.childNodes[i.offset].offsetWidth,s=n;if(r)for(let e=0;e<n;e++)r[e]&&(a-=r[e],s--);return a/s}(e,a.activeHandle,s.attrs);function c(t){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);const r=He.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=m.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let e=0;e<i.height;e++){const t=e*i.width+s;if(e&&i.map[t]==i.map[t-i.width])continue;const r=i.map[t],u=o.nodeAt(r).attrs,d=1==u.colspan?0:s-i.colCount(r);if(u.colwidth&&u.colwidth[d]==n)continue;const f=u.colwidth?u.colwidth.slice():(c=u.colspan,Array(c).fill(0));f[d]=n,l.setNodeMarkup(a+r,null,{...u,colwidth:f})}var c;l.docChanged&&e.dispatch(l)}(e,r.activeHandle,Ue(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(He,{setDragging:null})))}function u(t){if(!t.which)return c(t);const o=He.getState(e.state);if(o&&o.dragging){const i=Ue(o.dragging,t,n);qe(e,o.activeHandle,i,r)}}e.dispatch(e.state.tr.setMeta(He,{setDragging:{startX:t.clientX,startWidth:l}})),qe(e,a.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),t.preventDefault()}(e,r,t,n)}},decorations:e=>{const t=He.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;const r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return Le.DecorationSet.empty;const a=m.get(i),s=o.start(-1),l=a.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;for(let t=0;t<a.height;t++){const o=l+t*a.width;if(!(l!=a.width-1&&a.map[o]==a.map[o+1]||0!=t&&a.map[o]==a.map[o-a.width])){const t=a.map[o],l=s+t+i.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(n=He.getState(e))?void 0:n.dragging)&&r.push(Le.Decoration.node(s+t,s+t+i.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),r.push(Le.Decoration.widget(l,c))}}return Le.DecorationSet.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return i}var $e=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){const n=this,r=t.getMeta(He);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let r=t.mapping.map(n.activeHandle,-1);return A(t.doc.resolve(r))||(r=-1),new e(r,n.dragging)}return n}};function Ve(e,t,n,r){const o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:a}=i,s=S(e.state.doc.resolve(a));if(!s)return-1;if("right"==n)return s.pos;const l=m.get(s.node(-1)),c=s.start(-1),u=l.map.indexOf(s.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Ue(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function We(e,t){e.dispatch(e.state.tr.setMeta(He,{setHandle:t}))}function qe(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=m.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&Be(i,l.firstChild,l,r,s,n)}function Ke({allowTableNodeSelection:e=!1}={}){return new d.Plugin({key:x,state:{init(){return null},apply(e,t){const n=e.getMeta(x);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:o}=e.mapping.mapResult(t);return r?null:o}},props:{decorations:F,handleDOMEvents:{mousedown:je},createSelectionBetween(e){return null!=x.getState(e.state)?e.state.selection:null},handleTripleClick:_e,handleKeyDown:Oe,handlePaste:Ne},appendTransaction(t,n,r){return function(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,a;if(r instanceof p.NodeSelection&&(a=r.node.type.spec.tableRole)){if("cell"==a||"header_cell"==a)i=R.create(o,r.from);else if("row"==a){const e=o.resolve(r.from+1);i=R.rowSelection(e,e)}else if(!n){const e=m.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];i=R.create(o,t+1,n)}}else r instanceof p.TextSelection&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}(r)?i=p.TextSelection.create(o,r.from):r instanceof p.TextSelection&&function({$from:e,$to:t}){let n,r;for(let t=e.depth;t>0;t--){const r=e.node(t);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}for(let e=t.depth;e>0;e--){const n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}return n!==r&&0===t.parentOffset}(r)&&(i=p.TextSelection.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}(r,z(r,n),e)}})}},36553:function(e,t,n){"use strict";function r(e){var t="function"==typeof Map?new Map:void 0;return r=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},r(e)}function o(e,t,n){return o=l()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o},o.apply(null,arguments)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=l();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e){if("object"!==u(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=n(77712),m=Math.pow(2,16);function g(e){return 65535&e}var v=function(){function e(t,n,r){d(this,e),this.pos=t,this.delInfo=n,this.recover=r}return p(e,[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}]),e}(),y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d(this,e),this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}return p(e,[{key:"recover",value:function(e){var t=0,n=g(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/m}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;var l=this.ranges[a+o],c=this.ranges[a+i],u=s+l;if(e<=u){var d=s+r+((l?e==s?-1:e==u?1:t:t)<0?0:c);if(n)return d;var f=e==s?2:e==u?1:4;return(t<0?e!=s:e!=u)&&(f|=8),new v(d,f,e==(t<0?s:u)?null:a/3+(e-s)*m)}r+=c-l}return n?e+r:new v(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=g(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>e)break;var l=this.ranges[a+o];if(e<=s+l&&a==3*r)return!0;n+=this.ranges[a+i]-l}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),o+=c-l}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}]),e}();y.empty=new y([]);var b=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.length:0;d(this,e),this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}return p(e,[{key:"maps",get:function(){return this._maps}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this._maps,this.mirror,t,n)}},{key:"appendMap",value:function(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this._maps.length;t<e._maps.length;t++){var r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this._maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this._maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new v(e,r,null)}}]),e}(),w=Object.create(null),k=function(){function e(){d(this,e)}return p(e,[{key:"getMap",value:function(){return y.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=w[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in w)throw new RangeError("Duplicate use of step JSON ID "+e);return w[e]=t,t.prototype.jsonID=e,t}}]),e}(),x=function(){function e(t,n){d(this,e),this.doc=t,this.failed=n}return p(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,o){try{return e.ok(t.replace(n,r,o))}catch(t){if(t instanceof h.ReplaceError)return e.fail(t.message);throw t}}}]),e}();function S(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(S(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return h.Fragment.fromArray(r)}var C=function(e){i(n,e);var t=s(n);function n(e,r,o){var i;return d(this,n),(i=t.call(this)).from=e,i.to=r,i.mark=o,i}return p(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new h.Slice(S(n.content,function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e},o),n.openStart,n.openEnd);return x.fromReplace(e,this.from,this.to,i)}},{key:"invert",value:function(){return new M(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(k);k.jsonID("addMark",C);var M=function(e){i(n,e);var t=s(n);function n(e,r,o){var i;return d(this,n),(i=t.call(this)).from=e,i.to=r,i.mark=o,i}return p(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new h.Slice(S(n.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))},e),n.openStart,n.openEnd);return x.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new C(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(k);k.jsonID("removeMark",M);var O=function(e){i(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this)).pos=e,o.mark=r,o}return p(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return x.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return x.fromReplace(e,this.pos,this.pos+1,new h.Slice(h.Fragment.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);if(t){var r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(var o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new n(this.pos,t.marks[o]);return new n(this.pos,this.mark)}}return new A(this.pos,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}}]),n}(k);k.jsonID("addNodeMark",O);var A=function(e){i(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this)).pos=e,o.mark=r,o}return p(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return x.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return x.fromReplace(e,this.pos,this.pos+1,new h.Slice(h.Fragment.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new O(this.pos,this.mark):this}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}}]),n}(k);k.jsonID("removeNodeMark",A);var E=function(e){i(n,e);var t=s(n);function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return d(this,n),(i=t.call(this)).from=e,i.to=r,i.slice=o,i.structure=a,i}return p(n,[{key:"apply",value:function(e){return this.structure&&_(e,this.from,this.to)?x.fail("Structure replace would overwrite content"):x.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new y([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}},{key:"merge",value:function(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?h.Slice.empty:new h.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}var r=this.slice.size+e.slice.size==0?h.Slice.empty:new h.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,h.Slice.fromJSON(e,t.slice),!!t.structure)}}]),n}(k);k.jsonID("replace",E);var T=function(e){i(n,e);var t=s(n);function n(e,r,o,i,a,s){var l,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return d(this,n),(l=t.call(this)).from=e,l.to=r,l.gapFrom=o,l.gapTo=i,l.slice=a,l.insert=s,l.structure=c,l}return p(n,[{key:"apply",value:function(e){if(this.structure&&(_(e,this.from,this.gapFrom)||_(e,this.gapTo,this.to)))return x.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return x.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?x.fromReplace(e,this.from,this.to,n):x.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new y([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||i>r.pos?null:new n(t.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,h.Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),n}(k);function _(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function N(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),a=[],s=t+1,l=0;l<i.childCount;l++){var c=i.child(l),u=s+c.nodeSize,d=r.matchType(c.type);if(d){r=d;for(var f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||e.step(new M(s,u,c.marks[f]));if(o&&c.isText&&"pre"!=n.whitespace)for(var p=void 0,m=/\r?\n|\r/g,g=void 0;p=m.exec(c.text);)g||(g=new h.Slice(h.Fragment.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),a.push(new E(s+p.index,s+p.index+p[0].length,g))}else a.push(new E(s,u,h.Slice.empty));s=u}if(!r.validEnd){var v=r.fillBefore(h.Fragment.empty,!0);e.replace(s,s,new h.Slice(v,0,0))}for(var y=a.length-1;y>=0;y--)e.step(a[y])}function j(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function P(e){return{type:e,attrs:null}}function I(e,t,n,r){t.forEach(function(o,i){if(o.isText)for(var a,s=/\r?\n|\r/g;a=s.exec(o.text);){var l=e.mapping.slice(r).map(n+1+i+a.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}})}function D(e,t,n,r){t.forEach(function(o,i){if(o.type==o.type.schema.linebreakReplacement){var a=e.mapping.slice(r).map(n+1+i);e.replaceWith(a,a+1,t.type.schema.text("\n"))}})}function R(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);for(var n=e.contentMatchAt(e.childCount),r=e.type.schema.linebreakReplacement,o=0;o<t.childCount;o++){var i=t.child(o),a=i.type==r?e.type.schema.nodes.text:i.type;if(!(n=n.matchType(a)))return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function L(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.Slice.empty;if(t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return B(o,i,r)?new E(t,n,r):new H(o,i,r).fit()}function B(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}k.jsonID("replaceAround",T);var H=function(){function e(t,n,r){d(this,e),this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=h.Fragment.empty;for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(var a=t.depth;a>0;a--)this.placed=h.Fragment.from(t.node(a).copy(this.placed))}return p(e,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var l=new h.Slice(i,a,s);return t>-1?new T(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new E(r.pos,o.pos,l):null}},{key:"findFittable",value:function(){for(var e=this.unplaced.openStart,t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){var o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(var i=1;i<=2;i++)for(var a=1==i?e:this.unplaced.openStart;a>=0;a--)for(var s=null,l=(a?(s=V(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild,c=this.depth;c>=0;c--){var u=this.frontier[c],d=u.type,f=u.match,p=void 0,m=null;if(1==i&&(l?f.matchType(l.type)||(m=f.fillBefore(h.Fragment.from(l),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:a,frontierDepth:c,parent:s,inject:m};if(2==i&&l&&(p=f.findWrapping(l.type)))return{sliceDepth:a,frontierDepth:c,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=V(t,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new h.Slice(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=V(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new h.Slice(z(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new h.Slice(z(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,l=r?r.content:s.content,c=s.openStart-t,u=0,d=[],f=this.frontier[n],p=f.match,m=f.type;if(o){for(var g=0;g<o.childCount;g++)d.push(o.child(g));p=p.matchFragment(o)}for(var v=l.size+t-(s.content.size-s.openEnd);u<l.childCount;){var y=l.child(u),b=p.matchType(y.type);if(!b)break;(++u>1||0==c||y.content.size)&&(p=b,d.push(U(y.mark(m.allowedMarks(y.marks)),1==u?c:0,u==l.childCount?v:-1)))}var w=u==l.childCount;w||(v=-1),this.placed=$(this.placed,n,h.Fragment.from(d)),this.frontier[n].match=p,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,x=l;k<v;k++){var S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=w?0==t?h.Slice.empty:new h.Slice(z(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new h.Slice(z(s.content,t,u),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!W(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=W(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var l=this.frontier[s],c=l.match,u=W(e,s,l.type,c,!0);if(!u||u.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=$(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=$(this.placed,this.depth,h.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(h.Fragment.empty,!0);e.childCount&&(this.placed=$(this.placed,this.frontier.length,e))}}]),e}();function z(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(z(e.firstChild.content,t-1,n)))}function $(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy($(e.lastChild.content,t-1,n)))}function V(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function U(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,U(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(h.Fragment.empty,!0)))),e.copy(r)}function W(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function q(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(q(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(h.Fragment.empty,!0))}return e}function K(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var G=function(e){i(n,e);var t=s(n);function n(e,r,o){var i;return d(this,n),(i=t.call(this)).pos=e,i.attr=r,i.value=o,i}return p(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return x.fail("No node at attribute step's position");var n=Object.create(null);for(var r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;var o=t.type.create(n,null,t.marks);return x.fromReplace(e,this.pos,this.pos+1,new h.Slice(h.Fragment.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return y.empty}},{key:"invert",value:function(e){return new n(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(t.pos,t.attr,t.value)}}]),n}(k);k.jsonID("attr",G);var Y=function(e){i(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this)).attr=e,o.value=r,o}return p(n,[{key:"apply",value:function(e){var t=Object.create(null);for(var n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;var r=e.type.create(t,e.content,e.marks);return x.ok(r)}},{key:"getMap",value:function(){return y.empty}},{key:"invert",value:function(e){return new n(this.attr,e.attrs[this.attr])}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(t.attr,t.value)}}]),n}(k);k.jsonID("docAttr",Y),t.TransformError=function(e){i(n,e);var t=s(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(r(Error)),t.TransformError=function e(t){var n=Error.call(this,t);return n.__proto__=e.prototype,n},t.TransformError.prototype=Object.create(Error.prototype),t.TransformError.prototype.constructor=t.TransformError,t.TransformError.prototype.name="TransformError";var J=function(){function e(t){d(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new b}return p(e,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){var n=this.maybeStep(e);if(n.failed)throw new t.TransformError(n.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Slice.empty,r=F(this.doc,e,t,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new h.Slice(h.Fragment.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,h.Slice.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(B(o,i,r))return e.step(new E(t,n,r));var a=K(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var u=o.node(l).type.spec;if(u.defining||u.definingAsContext||u.isolating)break;a.indexOf(l)>-1?s=l:o.before(l)==c&&a.splice(1,0,-l)}for(var d,f=a.indexOf(s),p=[],m=r.openStart,g=r.content,v=0;;v++){var y=g.firstChild;if(p.push(y),v==r.openStart)break;g=y.content}for(var b=m-1;b>=0;b--){var w=p[b],k=(d=w.type).spec.defining||d.spec.definingForContent;if(k&&!w.sameMarkup(o.node(Math.abs(s)-1)))m=b;else if(k||!w.type.isTextblock)break}for(var x=r.openStart;x>=0;x--){var S=(x+m+1)%(r.openStart+1),C=p[S];if(C)for(var M=0;M<a.length;M++){var O=a[(M+f)%a.length],A=!0;O<0&&(A=!1,O=-O);var T=o.node(O-1),_=o.index(O-1);if(T.canReplaceWith(_,_,C.type,C.marks))return e.replace(o.before(O),A?i.after(O):n,new h.Slice(q(r.content,0,r.openStart,S),S,r.openEnd))}}for(var N=e.steps.length,j=a.length-1;j>=0&&(e.replace(t,n,r),!(e.steps.length>N));j--){var P=a[j];P<0||(t=o.before(P),n=i.after(P))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){var o=L(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new h.Slice(h.Fragment.from(r),0,0))}(this,e,t,n),this}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=K(r,o),a=0;a<i.length;a++){var s=i[a],l=a==i.length-1;if(l&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(s>0&&(l||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var c=1;c<=r.depth&&c<=o.depth;c++)if(t-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c&&r.start(c-1)==o.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),o.index(c-1)))return e.delete(r.before(c),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(e,t){return function(e,t,n){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),l=a,c=s,u=h.Fragment.empty,d=0,f=i,p=!1;f>n;f--)p||r.index(f)>0?(p=!0,u=h.Fragment.from(r.node(f).copy(u)),d++):l--;for(var m=h.Fragment.empty,g=0,v=i,y=!1;v>n;v--)y||o.after(v+1)<o.end(v)?(y=!0,m=h.Fragment.from(o.node(v).copy(m)),g++):c++;e.step(new T(l,c,a,s,new h.Slice(u.append(m),d,g),u.size-d,!0))}(this,e,t),this}},{key:"join",value:function(e){return function(e,t,n){var r=null,o=e.doc.type.schema.linebreakReplacement,i=e.doc.resolve(t-n),a=i.node().type;if(o&&a.inlineContent){var s="pre"==a.whitespace,l=!!a.contentMatch.matchType(o);s&&!l?r=!1:!s&&l&&(r=!0)}var c=e.steps.length;if(!1===r){var u=e.doc.resolve(t+n);D(e,u.node(),u.before(),c)}a.inlineContent&&N(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==r);var d=e.mapping.slice(c),f=d.map(t-n);if(e.step(new E(f,d.map(t+n,-1),h.Slice.empty,!0)),!0===r){var p=e.doc.resolve(f);I(e,p.node(),p.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=h.Fragment.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=h.Fragment.from(n[o].type.create(n[o].attrs,r))}var a=t.start,s=t.end;e.step(new T(a,s,a,s,new h.Slice(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=e.steps.length;e.doc.nodesBetween(t,n,function(t,n){var a="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){var s=null;if(r.schema.linebreakReplacement){var l="pre"==r.whitespace,c=!!r.contentMatch.matchType(r.schema.linebreakReplacement);l&&!c?s=!1:!l&&c&&(s=!0)}!1===s&&D(e,t,n,i),N(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);var u=e.mapping.slice(i),d=u.map(n,1),f=u.map(n+t.nodeSize,1);return e.step(new T(d,f,d+1,f-1,new h.Slice(h.Fragment.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===s&&I(e,t,n,i),!1}})}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var a=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new T(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new h.Slice(h.Fragment.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new G(e,t,n)),this}},{key:"setDocAttribute",value:function(e,t){return this.step(new Y(e,t)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new O(e,t)),this}},{key:"removeNodeMark",value:function(e,t){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof h.Mark)t.isInSet(n.marks)&&this.step(new A(e,t));else{for(var r,o=n.marks,i=[];r=t.isInSet(o);)i.push(new A(e,r)),o=r.removeFromSet(o);for(var a=i.length-1;a>=0;a--)this.step(i[a])}return this}},{key:"split",value:function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=h.Fragment.empty,a=h.Fragment.empty,s=o.depth,l=o.depth-n,c=n-1;s>l;s--,c--){i=h.Fragment.from(o.node(s).copy(i));var u=r&&r[c];a=h.Fragment.from(u?u.type.create(u.attrs,a):o.node(s).copy(a))}e.step(new E(t,t,new h.Slice(i.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return function(e,t,n,r){var o,i,a=[],s=[];e.doc.nodesBetween(t,n,function(e,l,c){if(e.isInline){var u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){for(var d=Math.max(l,t),f=Math.min(l+e.nodeSize,n),p=r.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(p)||(o&&o.to==d&&o.mark.eq(u[h])?o.to=f:a.push(o=new M(d,f,u[h])));i&&i.to==d?i.to=f:s.push(i=new C(d,f,r))}}}),a.forEach(function(t){return e.step(t)}),s.forEach(function(t){return e.step(t)})}(this,e,t,n),this}},{key:"removeMark",value:function(e,t,n){return function(e,t,n,r){var o=[],i=0;e.doc.nodesBetween(t,n,function(e,a){if(e.isInline){i++;var s=null;if(r instanceof h.MarkType)for(var l,c=e.marks;l=r.isInSet(c);)(s||(s=[])).push(l),c=l.removeFromSet(c);else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length)for(var u=Math.min(a+e.nodeSize,n),d=0;d<s.length;d++){for(var f=s[d],p=void 0,m=0;m<o.length;m++){var g=o[m];g.step==i-1&&f.eq(o[m].style)&&(p=g)}p?(p.to=u,p.step=i):o.push({style:f,from:Math.max(a,t),to:u,step:i})}}}),o.forEach(function(t){return e.step(new M(t.from,t.to,t.style))})}(this,e,t,n),this}},{key:"clearIncompatible",value:function(e,t,n){return N(this,e,t,n),this}}]),e}();t.AddMarkStep=C,t.AddNodeMarkStep=O,t.AttrStep=G,t.DocAttrStep=Y,t.MapResult=v,t.Mapping=b,t.RemoveMarkStep=M,t.RemoveNodeMarkStep=A,t.ReplaceAroundStep=T,t.ReplaceStep=E,t.Step=k,t.StepMap=y,t.StepResult=x,t.Transform=J,t.canJoin=function(e,t){var n=e.resolve(t),r=n.index();return R(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},t.canSplit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;s>i;s--,l--){var c=o.node(s),u=o.index(s);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(u,c.childCount),f=r&&r[l+1];f&&(d=d.replaceChild(0,f.type.create(f.attrs)));var p=r&&r[l]||c;if(!c.canReplace(u+1,c.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(h,h,m?m.type:o.node(i+1).type)},t.dropPoint=function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(l>0?1:0),u=r.node(s),d=!1;if(1==a)d=u.canReplace(c,c,o);else{var f=u.contentMatchAt(c).findWrapping(o.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null},t.findWrapping=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(P).concat({type:t,attrs:n}).concat(i.map(P)):null},t.insertPoint=L,t.joinPoint=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&R(i,a)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}},t.liftTarget=function(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!j(r,o,i))break}return null},t.replaceStep=F},49454:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(this,arguments)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var v=n(37820),y=n(77712),b=n(36553),w=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},k=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},x=null,S=function(e,t,n){var r=x||(x=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},C=function(e,t,n,r){return n&&(O(e,t,n,r,-1)||O(e,t,n,r,1))},M=/^(img|br|input|textarea|hr)$/i;function O(e,t,n,r,o){for(var i;;){if(e==n&&t==r)return!0;if(t==(o<0?0:A(e))){var a=e.parentNode;if(!a||1!=a.nodeType||E(e)||M.test(e.nodeName)||"false"==e.contentEditable)return!1;t=w(e)+(o<0?0:1),e=a}else{if(1!=e.nodeType)return!1;var s=e.childNodes[t+(o<0?-1:0)];if(1==s.nodeType&&"false"==s.contentEditable){if(!(null===(i=s.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=o}else e=s,t=o<0?A(e):0}}}function A(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function E(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var T=function(e){return e.focusNode&&C(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function _(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}var N="undefined"!=typeof navigator?navigator:null,j="undefined"!=typeof document?document:null,P=N&&N.userAgent||"",I=/Edge\/(\d+)/.exec(P),D=/MSIE \d/.exec(P),R=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(P),L=!!(D||R||I),F=D?document.documentMode:R?+R[1]:I?+I[1]:0,B=!L&&/gecko\/(\d+)/i.test(P);B&&(/Firefox\/(\d+)/.exec(P)||[0,0])[1];var H=!L&&/Chrome\/(\d+)/.exec(P),z=!!H,$=H?+H[1]:0,V=!L&&!!N&&/Apple Computer/.test(N.vendor),U=V&&(/Mobile\/\w+/.test(P)||!!N&&N.maxTouchPoints>2),W=U||!!N&&/Mac/.test(N.platform),q=!!N&&/Win/.test(N.platform),K=/Android \d/.test(P),G=!!j&&"webkitFontSmoothing"in j.documentElement.style,Y=G?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(e){var t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function X(e,t){return"number"==typeof e?e:e[t]}function Q(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Z(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;)if(1==a.nodeType){var s=a,l=s==i.body,c=l?J(i):Q(s),u=0,d=0;if(t.top<c.top+X(r,"top")?d=-(c.top-t.top+X(o,"top")):t.bottom>c.bottom-X(r,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+X(o,"top")-c.top:t.bottom-c.bottom+X(o,"bottom")),t.left<c.left+X(r,"left")?u=-(c.left-t.left+X(o,"left")):t.right>c.right-X(r,"right")&&(u=t.right-c.right+X(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{var f=s.scrollLeft,p=s.scrollTop;d&&(s.scrollTop+=d),u&&(s.scrollLeft+=u);var h=s.scrollLeft-f,m=s.scrollTop-p;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}var g=l?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(g))break;a="absolute"==g?a.offsetParent:k(a)}else a=k(a)}function ee(e){for(var t=[],n=e.ownerDocument,r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=k(r));return t}function te(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var ne=null;function re(e,t){for(var n,r,o,i,a=2e8,s=0,l=t.top,c=t.top,u=e.firstChild,d=0;u;u=u.nextSibling,d++){var f=void 0;if(1==u.nodeType)f=u.getClientRects();else{if(3!=u.nodeType)continue;f=S(u).getClientRects()}for(var p=0;p<f.length;p++){var h=f[p];if(h.top<=l&&h.bottom>=c){l=Math.max(h.bottom,l),c=Math.min(h.top,c);var m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<a){n=u,a=m,r=m&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&m&&(s=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!o&&h.left<=t.left&&h.right>=t.left&&(o=u,i={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return!n&&o&&(n=o,r=i,a=0),n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=le(r,1);if(i.top!=i.bottom&&oe(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:s}:re(n,r)}function oe(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function ie(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),l=0;l<s.length;l++){var c=s[l];if(oe(t,c))return ie(a,t,c)}if((i=(i+1)%r)==o)break}return e}function ae(e,t){var n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{var r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(A(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(A(o.startContainer),o.startOffset)}}}(r,t.left,t.top);i&&(n=i.node,o=i.offset);var a,s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){var l=e.dom.getBoundingClientRect();if(!oe(t,l))return null;if(!(s=ie(e.dom,t,l)))return null}if(V)for(var c=s;n&&c;c=k(c))c.draggable&&(n=void 0);if(s=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(B&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var u,d=n.childNodes[o];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&o++}var f;G&&o&&1==n.nodeType&&1==(f=n.childNodes[o-1]).nodeType&&"false"==f.contentEditable&&f.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(e,t,n,r){for(var o=-1,i=t,a=!1;i!=e.dom;){var s=e.docView.nearestDesc(i,!0),l=void 0;if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((l=s.dom.getBoundingClientRect()).width||l.height)&&(s.node.isBlock&&s.parent&&(!a&&l.left>r.left||l.top>r.top?o=s.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(o=s.posAfter),a=!0),!s.contentDOM&&o<0&&!s.node.isText))return(s.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?s.posBefore:s.posAfter;i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==a&&(a=function(e,t,n){var r=re(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,s,t));var p=e.docView.nearestDesc(s,!0);return{pos:a,inside:p?p.posAtStart-p.border:-1}}function se(e){return e.top<e.bottom||e.left<e.right}function le(e,t){var n=e.getClientRects();if(n.length){var r=n[t<0?0:n.length-1];if(se(r))return r}return Array.prototype.find.call(n,se)||e.getBoundingClientRect()}var ce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ue(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=r.atom,s=G||B;if(3==o.nodeType){if(!s||!ce.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==o.nodeValue.length?(l--,u=1):n<0?l--:c++,de(le(S(o,l,c),u),u<0)}var d=le(S(o,i,i),n);if(B&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=le(S(o,i-1,i-1),-1);if(f.top==d.top){var p=le(S(o,i,i+1),-1);if(p.top!=d.top)return de(p,p.left<f.left)}}return d}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==A(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return fe(h.getBoundingClientRect(),!1)}if(null==a&&i<A(o)){var m=o.childNodes[i];if(1==m.nodeType)return fe(m.getBoundingClientRect(),!0)}return fe(o.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==A(o))){var g=o.childNodes[i-1],v=3==g.nodeType?S(g,A(g)-(s?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(v)return de(le(v,1),!1)}if(null==a&&i<A(o)){for(var y=o.childNodes[i];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var b=y?3==y.nodeType?S(y,0,s?0:1):1==y.nodeType?y:null:null;if(b)return de(le(b,-1),!0)}return de(le(3==o.nodeType?S(o):o,-n),n>=0)}function de(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function fe(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function pe(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var he=/[\u0590-\u08ac]/,me=null,ge=null,ve=!1;var ye=function(){function e(t,n,r,o){h(this,e),this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}return g(e,[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>w(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(null==s&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(var i=0;i<r.children.length;i++){var a=r.children[i];if(a.size){r=a;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(s>e||a instanceof Me){o=e-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof be&&n.side>=0;r--);if(t<=0){for(var l,c=!0;(l=r?this.children[r-1]:null)&&l.dom.parentNode!=this.contentDOM;r--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?w(l.dom)+1:0}}for(var u,d=!0;(u=r<this.children.length?this.children[r]:null)&&u.dom.parentNode!=this.contentDOM;r++,d=!1);return u&&d&&!u.border&&!u.domAtom?u.domFromPos(0,t):{node:this.contentDOM,offset:u?w(u.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],l=i+s.size;if(-1==r&&e<=l){var c=i+s.border;if(e>=c&&t<=l-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=i;for(var u=a;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=w(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(l>t||a==this.children.length-1)){t=l;for(var f=a+1;f<this.children.length;f++){var p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=w(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var l=this.children[a],c=s+l.size;if(o>s&&i<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}var u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),f=n.root.getSelection(),p=n.domSelectionRange(),h=!1;if((B||V)&&e==t){var m=u,g=m.node,v=m.offset;if(3==g.nodeType){if((h=!(!v||"\n"!=g.nodeValue[v-1]))&&v==g.nodeValue.length)for(var y,b=g;b;b=b.parentNode){if(y=b.nextSibling){"BR"==y.nodeName&&(u=d={node:y.parentNode,offset:w(y)+1});break}var k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var x=g.childNodes[v-1];h=x&&("BR"==x.nodeName||"false"==x.contentEditable)}}if(B&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var S=p.focusNode.childNodes[p.focusOffset];S&&"false"==S.contentEditable&&(r=!0)}if(r||h&&V||!C(u.node,u.offset,p.anchorNode,p.anchorOffset)||!C(d.node,d.offset,p.focusNode,p.focusOffset)){var M=!1;if((f.extend||e==t)&&!h){f.collapse(u.node,u.offset);try{e!=t&&f.extend(d.node,d.offset),M=!0}catch(e){}}if(!M){if(e>t){var O=u;u=d,d=O}var A=document.createRange();A.setEnd(d.node,d.offset),A.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(A)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"ignoreForSelection",get:function(){return!1}},{key:"isText",value:function(e){return!1}}]),e}(),be=function(e){l(n,e);var t=u(n);function n(e,r,o,i){var a;h(this,n);var s,l=r.type.toDOM;if("function"==typeof l&&(l=l(o,function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:i})),!r.type.spec.raw){if(1!=l.nodeType){var c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}return(a=t.call(this,e,[],l,null)).widget=r,a.widget=r,s=d(a),a}return g(n,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),s(f(n.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForSelection",get:function(){return!!this.widget.type.spec.relaxedSide}},{key:"side",get:function(){return this.widget.type.side}}]),n}(ye),we=function(e){l(n,e);var t=u(n);function n(e,r,o,i){var a;return h(this,n),(a=t.call(this,e,[],r,null)).textDOM=o,a.text=i,a}return g(n,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}]),n}(ye),ke=function(e){l(n,e);var t=u(n);function n(e,r,o,i,a){var s;return h(this,n),(s=t.call(this,e,[],o,i)).mark=r,s.spec=a,s}return g(n,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,t){if(s(f(n.prototype),"markDirty",this).call(this,e,t),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,t,r){var o=n.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;t<a&&(i=Fe(i,t,a,r)),e>0&&(i=Fe(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):s(f(n.prototype),"ignoreMutation",this).call(this,e)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),s(f(n.prototype),"destroy",this).call(this)}}],[{key:"create",value:function(e,t,r,o){var i=o.nodeViews[t.type.name],a=i&&i(t,o,r);return a&&a.dom||(a=y.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new n(e,t,a.dom,a.contentDOM||a.dom,a)}}]),n}(ye),xe=function(e){l(n,e);var t=u(n);function n(e,r,o,i,a,s,l,c,u){var d;return h(this,n),(d=t.call(this,e,[],a,s)).node=r,d.outerDeco=o,d.innerDeco=i,d.nodeDOM=l,d}return g(n,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return y.Fragment.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Ie(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,s=i&&i.pos<0,l=new Re(this,a&&a.node,e);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],l=null,c=0;;){for(var u=void 0,d=void 0;a<o.length&&o[a].to==i;){var f=o[a++];f.widget&&(u?(d||(d=[u])).push(f):u=f)}if(u)if(d){d.sort(Le);for(var p=0;p<d.length;p++)n(d[p],c,!!l)}else n(u,c,!!l);var h=void 0,m=void 0;if(l)m=-1,h=l,l=null;else{if(!(c<e.childCount))break;m=c,h=e.child(c++)}for(var g=0;g<s.length;g++)s[g].to<=i&&s.splice(g--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)s.push(o[a++]);var v=i+h.nodeSize;if(h.isText){var y=v;a<o.length&&o[a].from<y&&(y=o[a].from);for(var b=0;b<s.length;b++)s[b].to<y&&(y=s[b].to);y<v&&(l=h.cut(y-i),h=h.cut(0,y-i),v=y,m=-1)}else for(;a<o.length&&o[a].to<v;)a++;r(h,h.isInline&&!h.isLeaf?s.filter(function(e){return!e.inline}):s.slice(),t.forChild(i,h),m),i=v}else for(var w=0;w<e.childCount;w++){var k=e.child(w);r(k,o,t.forChild(i,k),w),i+=k.nodeSize}}(this.node,this.innerDeco,function(t,i,a){t.spec.marks?l.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&l.syncToMarks(i==n.node.childCount?y.Mark.none:n.node.child(i).marks,r,e),l.placeWidget(t,e,o)},function(t,n,a,c){var u;l.syncToMarks(t.marks,r,e),l.findNodeMatch(t,n,a,c)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(u=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(t,n,a,u,e)||l.updateNextNode(t,n,a,e,c,o)||l.addNode(t,n,a,e,o),o+=t.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),Ae(this.contentDOM,this.children,e),U&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof v.TextSelection)||r<t||o>t+this.node.content.size)return null;var i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){var a=i.nodeValue,s=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var l=a.text;o<e.childCount;){var c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;var u=s<r?l.lastIndexOf(t,r-s-1):-1;if(u>=0&&u+t.length+s>=n)return s+u;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}}return-1}(this.node.content,a,r-t,o-t);return s<0?null:{node:i,pos:s,text:a}}return{node:i,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var a=new we(this,i,n,o);e.input.compositionNodes.push(a),this.children=Fe(this.children,r,r+o.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!Ie(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ne(this.dom,this.nodeDOM,_e(this.outerDeco,this.node,t),_e(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,t,r,o,i,a){var s,l=i.nodeViews[t.type.name],c=l&&l(t,i,function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else if(!u){var f=y.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);u=f.dom,d=f.contentDOM}d||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));var p=u;return u=Pe(u,r,t),c?s=new Oe(e,t,r,o,u,d||null,p,c,i,a+1):t.isText?new Ce(e,t,r,o,u,p,i):new n(e,t,r,o,u,d||null,p,i,a+1)}}]),n}(ye);function Se(e,t,n,r,o){Pe(r,t,e);var i=new xe(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var Ce=function(e){l(n,e);var t=u(n);function n(e,r,o,i,a,s,l){return h(this,n),t.call(this,e,r,o,i,a,null,s,l,0)}return g(n,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):s(f(n.prototype),"localPosFromDOM",this).call(this,e,t,r)}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,t,r){var o=this.node.cut(e,t),i=document.createTextNode(o.text);return new n(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(e,t){s(f(n.prototype),"markDirty",this).call(this,e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(e){return this.node.text==e}}]),n}(xe),Me=function(e){l(n,e);var t=u(n);function n(){return h(this,n),t.apply(this,arguments)}return g(n,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return 0==this.dirty&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}]),n}(ye),Oe=function(e){l(n,e);var t=u(n);function n(e,r,o,i,a,s,l,c,u,d){var f;return h(this,n),(f=t.call(this,e,r,o,i,a,s,l,u,d)).spec=c,f}return g(n,[{key:"update",value:function(e,t,r,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){var i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&s(f(n.prototype),"update",this).call(this,e,t,r,o)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():s(f(n.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():s(f(n.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):s(f(n.prototype),"setSelection",this).call(this,e,t,r,o)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),s(f(n.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):s(f(n.prototype),"ignoreMutation",this).call(this,e)}}]),n}(xe);function Ae(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=De(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(s,r);if(a instanceof ke){var l=r?r.previousSibling:e.lastChild;Ae(a.contentDOM,a.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=De(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}var Ee=function(e){e&&(this.nodeName=e)};Ee.prototype=Object.create(null);var Te=[new Ee];function _e(e,t,n){if(0==e.length)return Te;for(var r=n?Te[0]:new Ee,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new Ee(a.nodeName)),a){var l=a[s];null!=l&&(n&&1==o.length&&o.push(r=new Ee(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+l:"style"==s?r.style=(r.style?r.style+";":"")+l:"nodeName"!=s&&(r[s]=l))}}return o}function Ne(e,t,n,r){if(n==Te&&r==Te)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||((l=document.createElement(a.nodeName)).pmIsDeco=!0,l.appendChild(o),s=Te[0]),o=l}je(o,s||Te[0],a)}return o}function je(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function Pe(e,t,n){return Ne(e,e,Te,_e(t,n,1!=e.nodeType))}function Ie(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function De(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Re=function(){function e(t,n,r){h(this,e),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,a=[];e:for(;o>0;){for(var s=void 0;;)if(r){var l=n.children[r-1];if(!(l instanceof ke)){s=l,r--;break}n=l,r=l.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var c=s.node;if(c){if(c!=e.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(t.node.content,t)}return g(e,[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){var l=this.top.children[s];if(l.matchesMark(e[o])&&!this.isLocked(l.dom)){a=s;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=ke.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var l=this.top.children[a];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o,i){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof xe){var l=this.preMatch.matched.get(s);if(null!=l&&l!=o)return!1;var c=s.dom,u=void 0,d=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&Ie(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(s,e,t,n,r,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=2,u.updateChildren(r,i+1),u.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(e,t,n,r,i,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Ie(n,e.outerDeco)||!r.eq(e.innerDeco))return null;var s=xe.create(this.top,t,n,r,i,a);if(s.contentDOM){s.children=e.children,e.children=[];var l,c=o(s.children);try{for(c.s();!(l=c.n()).done;)l.value.parent=s}catch(e){c.e(e)}finally{c.f()}}return e.destroy(),s}},{key:"addNode",value:function(e,t,n,r,o){var i=xe.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new be(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],t=this.top;e instanceof ke;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof Ce)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((V||z)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{var n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");var r=new Me(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}]),e}();function Le(e,t){return e.type.side-t.type.side}function Fe(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var l=e[a],c=s,u=s+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),o=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),a=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;var l,c,u=o.resolve(s);if(T(n)){for(l=s;i&&!i.node;)i=i.parent;var d=i.node;if(i&&d.isAtom&&v.NodeSelection.isSelectable(d)&&i.parent&&(!d.isInline||!function(e,t,n){for(var r=0==t,o=t==A(e);r||o;){if(e==n)return!0;var i=w(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==A(e)}}(n.focusNode,n.focusOffset,i.dom))){var f=i.posBefore;c=new v.NodeSelection(s==f?u:o.resolve(f))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){for(var p=s,h=s,m=0;m<n.rangeCount;m++){var g=n.getRangeAt(m);p=Math.min(p,e.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(p<0)return null;var y=r(h==e.state.selection.anchor?[h,p]:[p,h],2);l=y[0],s=y[1],u=o.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}var b=o.resolve(l);return c||(c=Ge(e,b,u,"pointer"==t||e.state.selection.head<u.pos&&!a?1:-1)),c}function He(e){return e.editable?e.hasFocus():Je(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(qe(e,n),He(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&z){var r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&C(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.domSelection(),n=document.createRange();if(t){var r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,w(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&L&&F<=11&&(r.disabled=!0,r.disabled=!1)}}(e);else{var i,a,s=n.anchor,l=n.head;!$e||n instanceof v.TextSelection||(n.$from.parent.inlineContent||(i=Ve(e,n.from)),n.empty||n.$from.parent.inlineContent||(a=Ve(e,n.to))),e.docView.setSelection(s,l,e,t),$e&&(i&&We(i),a&&We(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(function(){He(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var $e=V||z&&$<63;function Ve(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(V&&i&&"false"==i.contentEditable)return Ue(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return Ue(i);if(a)return Ue(a)}}function Ue(e){return e.contentEditable="true",V&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function We(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function qe(e,t){if(t instanceof v.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ke(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ke(e)}function Ke(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Ge(e,t,n,r){return e.someProp("createSelectionBetween",function(r){return r(e,t,n)})||v.TextSelection.between(t,n,r)}function Ye(e){return!(e.editable&&!e.hasFocus())&&Je(e)}function Je(e){var t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Xe(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&v.Selection.findFrom(a,t)}function Qe(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ze(e,t,n){var r=e.state.selection;if(!(r instanceof v.TextSelection)){if(r instanceof v.NodeSelection&&r.node.isInline)return Qe(e,new v.TextSelection(t>0?r.$to:r.$from));var o=Xe(e.state,t);return!!o&&Qe(e,o)}if(n.indexOf("s")>-1){var i=r.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;var s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Qe(e,new v.TextSelection(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){var l=Xe(e.state,t);return!!(l&&l instanceof v.NodeSelection)&&Qe(e,l)}if(!(W&&n.indexOf("m")>-1)){var c,u=r.$head,d=u.textOffset?null:t<0?u.nodeBefore:u.nodeAfter;if(!d||d.isText)return!1;var f=t<0?u.pos-d.nodeSize:u.pos;return!!(d.isAtom||(c=e.docView.descAt(f))&&!c.contentDOM)&&(v.NodeSelection.isSelectable(d)?Qe(e,new v.NodeSelection(t<0?e.state.doc.resolve(u.pos-d.nodeSize):u)):!!G&&Qe(e,new v.TextSelection(e.state.doc.resolve(t<0?f:f+d.nodeSize))))}}function et(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function tt(e,t){var n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function nt(e,t){return t<0?function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(B&&1==n.nodeType&&r<et(n)&&tt(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(tt(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(rt(n))break;for(var l=n.previousSibling;l&&tt(l,-1);)o=n.parentNode,i=w(l),l=l.previousSibling;if(l)r=et(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?ot(e,n,r):o&&ot(e,o,i)}}(e):function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=et(n);;)if(r<a){if(1!=n.nodeType)break;if(!tt(n.childNodes[r],1))break;o=n,i=++r}else{if(rt(n))break;for(var s=n.nextSibling;s&&tt(s,1);)o=s.parentNode,i=w(s)+1,s=s.nextSibling;if(s)r=0,a=et(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&ot(e,o,i)}}(e)}function rt(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ot(e,t,n){var r,o;3!=t.nodeType&&((o=function(e,t){for(;e&&t==e.childNodes.length&&!E(e);)t=w(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){var n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(r=function(e,t){for(;e&&!t&&!E(e);)t=w(e),e=e.parentNode;for(;e&&t;){var n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=r,n=r.nodeValue.length));var i=e.domSelection();if(i){if(T(i)){var a=document.createRange();a.setEnd(t,n),a.setStart(t,n),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();var s=e.state;setTimeout(function(){e.state==s&&ze(e)},50)}}function it(e,t){var n=e.state.doc.resolve(t);if(!z&&!q&&n.parent.inlineContent){var r=e.coordsAtPos(t);if(t>n.start()){var o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){var a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(a.left-r.left)>1)return a.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function at(e,t,n){var r=e.state.selection;if(r instanceof v.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;if(W&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Xe(e.state,t);if(a&&a instanceof v.NodeSelection)return Qe(e,a)}if(!o.parent.inlineContent){var s=t<0?o:i,l=r instanceof v.AllSelection?v.Selection.near(s,t):v.Selection.findFrom(s,t);return!!l&&Qe(e,l)}return!1}function st(e,t){if(!(e.state.selection instanceof v.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function lt(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ct(e,t){e.someProp("transformCopied",function(n){t=n(t,e)});for(var n=[],r=t,o=r.content,i=r.openStart,a=r.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var l=e.someProp("clipboardSerializer")||y.DOMSerializer.fromSchema(e.state.schema),c=bt(),u=c.createElement("div");u.appendChild(l.serializeFragment(o,{document:c}));for(var d,f=u.firstChild,p=0;f&&1==f.nodeType&&(d=vt[f.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var m=c.createElement(d[h]);u.firstChild;)m.appendChild(u.firstChild);u.appendChild(m),p++}f=u.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n))),{dom:u,text:e.someProp("clipboardTextSerializer",function(n){return n(t,e)})||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function ut(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",function(n){t=n(t,s||r,e)}),s)return t?new y.Slice(y.Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):y.Slice.empty;var c=e.someProp("clipboardTextParser",function(n){return n(t,o,r,e)});if(c)a=c;else{var u=o.marks(),d=e.state.schema,f=y.DOMSerializer.fromSchema(d);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(e){var t=i.appendChild(document.createElement("p"));e&&t.appendChild(f.serializeNode(d.text(e,u)))})}}else e.someProp("transformPastedHTML",function(t){n=t(n,e)}),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=bt().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&vt[o[1].toLowerCase()])&&(e=n.map(function(e){return"<"+e+">"}).join("")+e+n.map(function(e){return"</"+e+">"}).reverse().join("")),r.innerHTML=function(e){var t=window.trustedTypes;return t?(wt||(wt=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:function(e){return e}})),wt.createHTML(e)):e}(e),n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),G&&function(e){for(var t=e.querySelectorAll(z?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);var p=i&&i.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(h&&h[3])for(var m=+h[3];m>0;m--){for(var g=i.firstChild;g&&1!=g.nodeType;)g=g.nextSibling;if(!g)break;i=g}if(!a){var v=e.someProp("clipboardParser")||e.someProp("domParser")||y.DOMParser.fromSchema(e.state.schema);a=v.parseSlice(i,{preserveWhitespace:!(!l&&!h),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||dt.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=y.Fragment.from(l.create(n[s+1],o)),i++,a++}return new y.Slice(o,i,a)}(gt(a,+h[1],+h[2]),h[4]);else if(a=y.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n,r=function(){var n,r=t.node(o).contentMatchAt(t.index(o)),i=[];if(e.forEach(function(e){if(i){var t,o=r.findWrapping(e.type);if(!o)return i=null;if(t=i.length&&n.length&&pt(o,n,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=ht(i[i.length-1],n.length));var a=ft(e,o);i.push(a),r=r.matchType(a.type),n=o}}}),i)return{v:y.Fragment.from(i)}},o=t.depth;o>=0;o--)if(n=r())return n.v;return e}(a.content,o),!0),a.openStart||a.openEnd){for(var b=0,w=0,k=a.content.firstChild;b<a.openStart&&!k.type.spec.isolating;b++,k=k.firstChild);for(var x=a.content.lastChild;w<a.openEnd&&!x.type.spec.isolating;w++,x=x.lastChild);a=gt(a,b,w)}return e.someProp("transformPasted",function(t){a=t(a,e)}),a}var dt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ft(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,y.Fragment.from(e));return e}function pt(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=pt(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(y.Fragment.from(ft(n,e,o+1))))}}function ht(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,ht(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(y.Fragment.empty,!0);return e.copy(n.append(r))}function mt(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(i=0),o<r-1&&(s=mt(s,t,n,r,o+1,i)),o>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(y.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function gt(e,t,n){return t<e.openStart&&(e=new y.Slice(mt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new y.Slice(mt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var vt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},yt=null;function bt(){return yt||(yt=document.implementation.createHTMLDocument("title"))}var wt=null,kt={},xt={},St={touchstart:!0,touchmove:!0},Ct=g(function e(){h(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null});function Mt(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Ot(e){e.someProp("handleDOMEvents",function(t){for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=function(t){return At(e,t)})})}function At(e,t){return e.someProp("handleDOMEvents",function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function Et(e){return{left:e.clientX,top:e.clientY}}function Tt(e,t,n,r,o){if(-1==r)return!1;for(var i,a=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,function(t){return r>a.depth?t(e,n,a.nodeAfter,a.before(r),o,!0):t(e,n,a.node(r),a.before(r),o,!1)}))return{v:!0}},l=a.depth+1;l>0;l--)if(i=s(l))return i.v;return!1}function _t(e,t,n){if(e.focused||e.focus(),!e.state.selection.eq(t)){var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}}function Nt(e,t,n,r){return Tt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",function(n){return n(e,t,r)})}function jt(e,t,n,r){return Tt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",function(n){return n(e,t,r)})||function(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(_t(e,v.TextSelection.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)_t(e,v.TextSelection.create(r,s+1,s+1+a.content.size),"pointer");else{if(!v.NodeSelection.isSelectable(a))continue;_t(e,v.NodeSelection.create(r,s),"pointer")}return!0}}(e,n,r)}function Pt(e){return Ht(e)}xt.keydown=function(e,t){var n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Rt(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!K||!z||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!U||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",function(t){return t(e,n)})||function(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||W&&72==n&&"c"==r)return st(e,-1)||nt(e,-1);if(46==n&&!t.shiftKey||W&&68==n&&"c"==r)return st(e,1)||nt(e,1);if(13==n||27==n)return!0;if(37==n||W&&66==n&&"c"==r){var o=37==n?"ltr"==it(e,e.state.selection.from)?-1:1:-1;return Ze(e,o,r)||nt(e,o)}if(39==n||W&&70==n&&"c"==r){var i=39==n?"ltr"==it(e,e.state.selection.from)?1:-1:1;return Ze(e,i,r)||nt(e,i)}return 38==n||W&&80==n&&"c"==r?at(e,-1,r)||nt(e,-1):40==n||W&&78==n&&"c"==r?function(e){if(!V||e.state.selection.$head.parentOffset>0)return!1;var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;lt(e,o,"true"),setTimeout(function(){return lt(e,o,"false")},20)}return!1}(e)||at(e,1,r)||nt(e,1):r==(W?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():Mt(e,"key");else{var r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(function(){e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",function(t){return t(e,_(13,"Enter"))}),e.input.lastIOSEnter=0)},200)}},xt.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},xt.keypress=function(e,t){var n=t;if(!(Rt(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||W&&n.metaKey))if(e.someProp("handleKeyPress",function(t){return t(e,n)}))n.preventDefault();else{var r=e.state.selection;if(!(r instanceof v.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode),i=function(){return e.state.tr.insertText(o).scrollIntoView()};/[\r\n]/.test(o)||e.someProp("handleTextInput",function(t){return t(e,r.$from.pos,r.$to.pos,o,i)})||e.dispatch(i()),n.preventDefault()}}};var It=W?"metaKey":"ctrlKey";kt.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r=Pt(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[It]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};var a=e.posAtCoords(Et(n));a&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Dt(e,a,n,!!r)):("doubleClick"==i?Nt:jt)(e,a.pos,a.inside,n)?n.preventDefault():Mt(e,"pointer"))};var Dt=function(){function e(t,n,r,o){var i,a,s=this;if(h(this,e),this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[It],this.allowDefault=r.shiftKey,n.inside>-1)i=t.state.doc.nodeAt(n.inside),a=n.inside;else{var l=t.state.doc.resolve(n.pos);i=l.parent,a=l.depth?l.before():0}var c=o?null:r.target,u=c?t.docView.nearestDesc(c,!0):null;this.target=u&&1==u.dom.nodeType?u.dom:null;var d=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||d instanceof v.NodeSelection&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!B||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){s.view.input.mouseDown==s&&s.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Mt(t,"pointer")}return g(e,[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return ze(e.view)}),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Et(e))),this.updateAllowDefault(e),this.allowDefault||!t?Mt(this.view,"pointer"):function(e,t,n,r,o){return Tt(e,"handleClickOn",t,n,r)||e.someProp("handleClick",function(n){return n(e,t,r)})||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof v.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(v.NodeSelection.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(_t(e,v.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&v.NodeSelection.isSelectable(r))&&(_t(e,new v.NodeSelection(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||V&&this.mightDrag&&!this.mightDrag.node.isAtom||z&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(_t(this.view,v.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Mt(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),Mt(this.view,"pointer"),0==e.buttons&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}]),e}();function Rt(e,t){return!!e.composing||!!(V&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}kt.touchstart=function(e){e.input.lastTouch=Date.now(),Pt(e),Mt(e,"pointer")},kt.touchmove=function(e){e.input.lastTouch=Date.now(),Mt(e,"pointer")},kt.contextmenu=function(e){return Pt(e)};var Lt=K?5e3:-1;function Ft(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(function(){return Ht(e)},t))}function Bt(e){var t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(K&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Bt(e),t||e.docView&&e.docView.dirty){var n=Be(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}xt.compositionstart=xt.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$to;if(t.selection instanceof v.TextSelection&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||n.marks(),Ht(e,!0),e.markCursor=null;else if(Ht(e,!t.selection.empty),B&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){var s=e.domSelection();s&&s.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.input.composing=!0}Ft(e,Lt)},xt.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(function(){return e.domObserver.flush()}),e.input.compositionID++,Ft(e,20))};var zt=L&&F<15||U&&Y<604;function $t(e,t,n,r,o){var i=ut(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",function(t){return t(e,o,i||y.Slice.empty)}))return!0;if(!i)return!1;var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Vt(e){var t=e.getData("text/plain")||e.getData("Text");if(t)return t;var n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}kt.copy=xt.cut=function(e,t){var n=t,r=e.state.selection,o="cut"==n.type;if(!r.empty){var i=zt?null:n.clipboardData,a=ct(e,r.content()),s=a.dom,l=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",l)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},xt.paste=function(e,t){var n=t;if(!e.composing||K){var r=zt?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&$t(e,Vt(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?$t(e,r.value,null,o,t):$t(e,r.textContent,r.innerHTML,o,t)},50)}}(e,n)}};var Ut=g(function e(t,n,r){h(this,e),this.slice=t,this.move=n,this.node=r}),Wt=W?"altKey":"ctrlKey";function qt(e,t){var n=e.someProp("dragCopies",function(e){return!e(t)});return null!=n?n:!t[Wt]}for(var Kt in kt.dragstart=function(e,t){var n=t,r=e.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=e.state.selection,a=i.empty?null:e.posAtCoords(Et(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof v.NodeSelection?i.to-1:i.to));else if(r&&r.mightDrag)o=v.NodeSelection.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&(o=v.NodeSelection.create(e.state.doc,s.posBefore))}var l=ct(e,(o||e.state.selection).content()),c=l.dom,u=l.text,d=l.slice;(!n.dataTransfer.files.length||!z||$>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(zt?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",zt||n.dataTransfer.setData("text/plain",u),e.dragging=new Ut(d,qt(e,n),o)}},kt.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)},xt.dragover=xt.dragenter=function(e,t){return t.preventDefault()},xt.drop=function(e,t){var n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){var o=e.posAtCoords(Et(n));if(o){var i=e.state.doc.resolve(o.pos),a=r&&r.slice;a?e.someProp("transformPasted",function(t){a=t(a,e)}):a=ut(e,Vt(n.dataTransfer),zt?null:n.dataTransfer.getData("text/html"),!1,i);var s=!(!r||!qt(e,n));if(e.someProp("handleDrop",function(t){return t(e,n,a||y.Slice.empty,s)}))n.preventDefault();else if(a){n.preventDefault();var l=a?b.dropPoint(e.state.doc,i.pos,a):i.pos;null==l&&(l=i.pos);var c=e.state.tr;if(s){var u=r.node;u?u.replace(c):c.deleteSelection()}var d=c.mapping.map(l),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=c.doc;if(f?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),!c.doc.eq(p)){var h=c.doc.resolve(d);if(f&&v.NodeSelection.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new v.NodeSelection(h));else{var m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(function(e,t,n,r){return m=r}),c.setSelection(Ge(e,h,c.doc.resolve(m)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}},kt.focus=function(e){e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ze(e)},20))},kt.blur=function(e,t){var n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},kt.beforeinput=function(e,t){if(z&&K&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.input.domChangeCount;setTimeout(function(){if(e.input.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,_(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},xt)kt[Kt]=xt[Kt];function Gt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Yt=function(){function e(t,n){h(this,e),this.toDOM=t,this.spec=n||en,this.side=this.spec.side||0}return g(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Qt(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Gt(this.spec,t.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}]),e}(),Jt=function(){function e(t,n){h(this,e),this.attrs=t,this.spec=n||en}return g(e,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Qt(o,i,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Gt(this.attrs,t.attrs)&&Gt(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof e}}]),e}(),Xt=function(){function e(t,n){h(this,e),this.attrs=t,this.spec=n||en}return g(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Qt(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Gt(this.attrs,t.attrs)&&Gt(this.spec,t.spec)}},{key:"destroy",value:function(){}}]),e}(),Qt=function(){function e(t,n,r){h(this,e),this.from=t,this.to=n,this.type=r}return g(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Jt}},{key:"widget",get:function(){return this.type instanceof Yt}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Yt(n,r))}},{key:"inline",value:function(t,n,r,o){return new e(t,n,new Jt(r,o))}},{key:"node",value:function(t,n,r,o){return new e(t,n,new Xt(r,o))}}]),e}(),Zt=[],en={},tn=function(){function e(t,n){h(this,e),this.local=t.length?t:Zt,this.children=n.length?n:Zt}return g(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}}},{key:"map",value:function(e,t,n){return this==nn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||en)}},{key:"mapInner",value:function(t,n,r,o,i){for(var a,s=0;s<this.local.length;s++){var l=this.local[s].map(t,r,o);l&&l.type.valid(n,l)?(a||(a=[])).push(l):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?on(this.children,a||[],t,n,r,o,i):a?new e(a.sort(un),Zt):nn}},{key:"add",value:function(t,n){return n.length?this==nn?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var o,i=this,a=0;t.forEach(function(e,t){var s,l=t+r;if(s=sn(n,e,l)){for(o||(o=i.children.slice());a<o.length&&o[a]<t;)a+=3;o[a]==t?o[a+2]=o[a+2].addInner(e,s,l+1):o.splice(a,0,t,t+e.nodeSize,cn(s,e,l+1,en)),a+=3}});for(var s=an(a?ln(n):n,-r),l=0;l<s.length;l++)s[l].type.valid(t,s[l])||s.splice(l--,1);return new e(s.length?this.local.concat(s).sort(un):this.local,o||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==nn?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var a,s=void 0,l=r[i]+n,c=r[i+1]+n,u=0;u<t.length;u++)(a=t[u])&&a.from>l&&a.to<c&&(t[u]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var d=r[i+2].removeInner(s,l+1);d!=nn?r[i+2]=d:(r.splice(i,3),i-=3)}}if(o.length)for(var f,p=0;p<t.length;p++)if(f=t[p])for(var h=0;h<o.length;h++)o[h].eq(f,n)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1));return r==this.children&&o==this.local?this:o.length||r.length?new e(o,r):nn}},{key:"forChild",value:function(t,n){if(this==nn)return this;if(n.isLeaf)return e.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var a=t+1,s=a+n.content.size,l=0;l<this.local.length;l++){var c=this.local[l];if(c.from<s&&c.to>a&&c.type instanceof Jt){var u=Math.max(a,c.from)-a,d=Math.min(s,c.to)-a;u<d&&(o||(o=[])).push(c.copy(u,d))}}if(o){var f=new e(o.sort(un),Zt);return r?new rn([f,r]):f}return r||nn}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return dn(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==nn)return Zt;if(e.inlineContent||!this.local.some(Jt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Jt||t.push(this.local[n]);return t}},{key:"forEachSet",value:function(e){e(this)}}],[{key:"create",value:function(e,t){return t.length?cn(t,e,0,en):nn}}]),e}();tn.empty=new tn([],[]),tn.removeOverlap=dn;var nn=tn.empty,rn=function(){function e(t){h(this,e),this.members=t}return g(e,[{key:"map",value:function(t,n){var r=this.members.map(function(e){return e.map(t,n,en)});return e.from(r)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return tn.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=nn&&(i instanceof e?r=r.concat(i.members):r.push(i))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?dn(n?t:t.sort(un)):Zt}},{key:"forEachSet",value:function(e){for(var t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}],[{key:"from",value:function(t){switch(t.length){case 0:return nn;case 1:return t[0];default:return new e(t.every(function(e){return e instanceof tn})?t:t.reduce(function(e,t){return e.concat(t instanceof tn?t:t.members)},[]))}}}]),e}();function on(e,t,n,r,o,i,a){for(var s=e.slice(),l=function(e){var t=0;n.maps[c].forEach(function(n,r,o,i){for(var a=i-o-(r-n),l=0;l<s.length;l+=3){var c=s[l+1];if(!(c<0||n>c+e-t)){var u=s[l]+e-t;r>=u?s[l+1]=n<=u?-2:-1:n>=e&&a&&(s[l]+=a,s[l+1]+=a)}}t+=a}),e=n.maps[c].map(e,-1),u=e},c=0,u=i;c<n.maps.length;c++)l(u);for(var d=!1,f=0;f<s.length;f+=3)if(s[f+1]<0){if(-2==s[f+1]){d=!0,s[f+1]=-1;continue}var p=n.map(e[f]+i),h=p-o;if(h<0||h>=r.content.size){d=!0;continue}var m=n.map(e[f+1]+i,-1)-o,g=r.content.findIndex(h),v=g.index,y=g.offset,b=r.maybeChild(v);if(b&&y==h&&y+b.nodeSize==m){var w=s[f+2].mapInner(n,b,p+1,e[f]+i+1,a);w!=nn?(s[f]=h,s[f+1]=m,s[f+2]=w):(s[f+1]=-2,d=!0)}else d=!0}if(d){var k=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):a.onRemove&&a.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&s(e[l+2],t[l]+i+1);return n}(s,e,t,n,o,i,a),x=cn(k,r,0,a);t=x.local;for(var S=0;S<s.length;S+=3)s[S+1]<0&&(s.splice(S,3),S-=3);for(var C=0,M=0;C<x.children.length;C+=3){for(var O=x.children[C];M<s.length&&s[M]<O;)M+=3;s.splice(M,0,x.children[C],x.children[C+1],x.children[C+2])}}return new tn(t.sort(un),s)}function an(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Qt(o.from+t,o.to+t,o.type))}return n}function sn(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),e[a]=null);return i}function ln(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function cn(e,t,n,r){var o=[],i=!1;t.forEach(function(t,a){var s=sn(e,t,a+n);if(s){i=!0;var l=cn(s,t,n+a+1,r);l!=nn&&o.push(a,a+t.nodeSize,l)}});for(var a=an(i?ln(e):e,-n).sort(un),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new tn(a,o):nn}function un(e,t){return e.from-t.from||e.to-t.to}function dn(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),fn(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),fn(t,o+1,i.copy(r.to,i.to)))}}return t}function fn(e,t,n){for(;t<e.length&&un(n,e[t])>0;)t++;e.splice(t,0,n)}function pn(e){var t=[];return e.someProp("decorations",function(n){var r=n(e.state);r&&r!=nn&&t.push(r)}),e.cursorWrapper&&t.push(tn.create(e.state.doc,[e.cursorWrapper.deco])),rn.from(t)}var hn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mn=L&&F<=11,gn=function(){function e(){h(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return g(e,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),e}(),vn=function(){function e(t,n){var r=this;h(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);L&&F<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?r.flushSoon():r.flush()}),mn&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return g(e,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)}},{key:"onSelectionChange",value:function(){if(Ye(this.view)){if(this.suppressingSelectionUpdates)return ze(this.view);if(L&&F<=11&&!this.view.state.selection.empty){var e=this.view.domSelectionRange();if(e.focusNode&&C(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(e){if(!e.focusNode)return!0;for(var t,n=new Set,r=e.focusNode;r;r=k(r))n.add(r);for(var o=e.anchorNode;o;o=k(o))if(n.has(o)){t=o;break}var i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var e,t=o(this.observer.takeRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.queue.push(n)}}catch(e){t.e(e)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var e=this.view;if(e.docView&&!(this.flushingSoon>-1)){var t=this.pendingRecords();t.length&&(this.queue=[]);var n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Ye(e)&&!this.ignoreSelectionChange(n),a=-1,s=-1,l=!1,c=[];if(e.editable)for(var u=0;u<t.length;u++){var d=this.registerMutation(t[u],c);d&&(a=a<0?d.from:Math.min(d.from,a),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(B&&c.length){var f=c.filter(function(e){return"BR"==e.nodeName});if(2==f.length){var p=r(f,2),h=p[0],m=p[1];h.parentNode&&h.parentNode.parentNode==m.parentNode?m.remove():h.remove()}else{var g,y=this.currentSelection.focusNode,b=o(f);try{for(b.s();!(g=b.n()).done;){var w=g.value,k=w.parentNode;!k||"LI"!=k.nodeName||y&&kn(e,y)==k||w.remove()}}catch(e){b.e(e)}finally{b.f()}}}var x=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&T(n)&&(x=Be(e))&&x.eq(v.Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ze(e),this.currentSelection.set(n),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,s),function(e){if(!yn.has(e)&&(yn.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=B,bn)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bn=!0}}(e)),this.handleDOMChange(a,s,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||ze(e),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var i=e.previousSibling,a=e.nextSibling;if(L&&F<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var l=e.addedNodes[s],c=l.previousSibling,u=l.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c),(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(a=u)}var d=i&&i.parentNode==e.target?w(i)+1:0,f=n.localPosFromDOM(e.target,d,-1),p=a&&a.parentNode==e.target?w(a):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}]),e}(),yn=new WeakMap,bn=!1;function wn(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=e.domAtPos(e.state.selection.anchor);if(C(a.node,a.offset,o,i)){var s=[o,i,n,r];n=s[0],r=s[1],o=s[2],i=s[3]}return{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function kn(e,t){for(var n=t.parentNode;n&&n!=e.dom;n=n.parentNode){var r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xn(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(V&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||V&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Sn=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cn(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ge(e,t.resolve(n.anchor),t.resolve(n.head))}function Mn(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function On(e){if(2!=e.length)return!1;var t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}var An=ut,En=Ht,Tn=function(){function e(t,n){var r=this;h(this,e),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ct,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(In),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=jn(this),Nn(this),this.nodeViews=Pn(this),this.docView=Se(this.state.doc,_n(this),pn(this),this.dom,this),this.domObserver=new vn(this,function(e,t,n,o){return function(e,t,n,r,o){var i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){var a=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,s=Be(e,a);if(s&&!e.state.selection.eq(s)){if(z&&K&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",function(t){return t(e,_(13,"Enter"))}))return;var l=e.state.tr.setSelection(s);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),i&&l.setMeta("composition",i),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),u=c.sharedDepth(n);t=c.before(u+1),n=e.state.doc.resolve(n).after(u+1);var d,f,p=e.state.selection,h=function(e,t,n){var r,o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,s=o.toOffset,l=o.from,c=o.to,u=e.domSelectionRange(),d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:u.anchorOffset}],T(u)||r.push({node:u.focusNode,offset:u.focusOffset})),z&&8===e.input.lastKeyCode)for(var f=s;f>a;f--){var p=i.childNodes[f-1],h=p.pmViewDesc;if("BR"==p.nodeName&&!h){s=f;break}if(!h||h.size)break}var m=e.state.doc,g=e.someProp("domParser")||y.DOMParser.fromSchema(e.state.schema),v=m.resolve(l),b=null,w=g.parse(i,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:a,to:s,preserveWhitespace:"pre"!=v.parent.type.whitespace||"full",findPositions:r,ruleFromNode:xn,context:v});if(r&&null!=r[0].pos){var k=r[0].pos,x=r[1]&&r[1].pos;null==x&&(x=k),b={anchor:k+l,head:x+l}}return{doc:w,sel:b,from:l,to:c}}(e,t,n),m=e.state.doc,g=m.slice(h.from,h.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;var b=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;if("end"==o&&(r-=s+Math.max(0,i-Math.min(s,l))-i),s<i&&e.size<t.size){var c=r<=i&&r>=s?i-r:0;(i-=c)&&i<t.size&&On(t.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-s),s=i}else if(l<i){var u=r<=i&&r>=l?i-r:0;(i-=u)&&i<e.size&&On(e.textBetween(i-1,i+1))&&(i+=u?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}(g.content,h.doc.content,h.from,d,f);if(b&&e.input.domChangeCount++,(U&&e.input.lastIOSEnter>Date.now()-225||K)&&o.some(function(e){return 1==e.nodeType&&!Sn.test(e.nodeName)})&&(!b||b.endA>=b.endB)&&e.someProp("handleKeyDown",function(t){return t(e,_(13,"Enter"))}))e.input.lastIOSEnter=0;else{if(!b){if(!(r&&p instanceof v.TextSelection&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var w=Cn(e,e.state.doc,h.sel);if(w&&!w.eq(e.state.selection)){var k=e.state.tr.setSelection(w);i&&k.setMeta("composition",i),e.dispatch(k)}}return}b={start:p.from,endA:p.to,endB:p.to}}e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof v.TextSelection&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),L&&F<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&" "==h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)&&(b.start--,b.endA--,b.endB--);var x,S=h.doc.resolveNoCache(b.start-h.from),C=h.doc.resolveNoCache(b.endB-h.from),M=m.resolve(b.start),O=S.sameParent(C)&&S.parent.inlineContent&&M.end()>=b.endA;if((U&&e.input.lastIOSEnter>Date.now()-225&&(!O||o.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))||!O&&S.pos<h.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(S.pos,C.pos,"",""))&&(x=v.Selection.findFrom(h.doc.resolve(S.pos+1),1,!0))&&x.head>S.pos)&&e.someProp("handleKeyDown",function(t){return t(e,_(13,"Enter"))}))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||Mn(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(!r.parent.isTextblock){var a=i.nodeAfter;return null!=a&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Mn(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Mn(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,b.start,b.endA,S,C)&&e.someProp("handleKeyDown",function(t){return t(e,_(8,"Backspace"))}))K&&z&&e.domObserver.suppressSelectionUpdates();else{z&&b.endB==b.start&&(e.input.lastChromeDelete=Date.now()),K&&!O&&S.start()!=C.start()&&0==C.parentOffset&&S.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,C=h.doc.resolveNoCache(b.endB-h.from),setTimeout(function(){e.someProp("handleKeyDown",function(t){return t(e,_(13,"Enter"))})},20));var A,E=b.start,N=b.endA,j=function(t){var n=t||e.state.tr.replace(E,N,h.doc.slice(b.start-h.from,b.endB-h.from));if(h.sel){var r=Cn(e,n.doc,h.sel);r&&!(z&&e.composing&&r.empty&&(b.start!=b.endB||e.input.lastChromeDelete<Date.now()-100)&&(r.head==E||r.head==n.mapping.map(N)-1)||L&&r.empty&&r.head==E)&&n.setSelection(r)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(O){if(S.pos==C.pos){L&&F<=11&&0==S.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return ze(e)},20));var P=j(e.state.tr.delete(E,N)),I=m.resolve(b.start).marksAcross(m.resolve(b.endA));I&&P.ensureMarks(I),e.dispatch(P)}else if(b.endA==b.endB&&(A=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],f=0;f<t.childCount;f++)d.push(o(t.child(f)));if(y.Fragment.from(d).eq(e))return{mark:r,type:n}}(S.parent.content.cut(S.parentOffset,C.parentOffset),M.parent.content.cut(M.parentOffset,b.endA-M.start())))){var D=j(e.state.tr);"add"==A.type?D.addMark(E,N,A.mark):D.removeMark(E,N,A.mark),e.dispatch(D)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){var R=S.parent.textBetween(S.parentOffset,C.parentOffset),B=function(){return j(e.state.tr.insertText(R,E,N))};e.someProp("handleTextInput",function(t){return t(e,E,N,R,B)})||e.dispatch(B())}}else e.dispatch(j())}}}}(r,e,t,n,o)}),this.domObserver.start(),function(e){var t=function(){var t=kt[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=function(n){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,n)||At(e,n)||!e.editable&&n.type in xt||t(e,n)},St[n]?{passive:!0}:void 0)};for(var n in kt)t();V&&e.dom.addEventListener("input",function(){return null}),Ot(e)}(this),this.updatePluginViews()}return g(e,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ot(this);var t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(In),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this._props)}},{key:"updateStateInner",value:function(e,t){var n,r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(Bt(this),i=!0),this.state=e;var a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){var s=Pn(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ot(this),this.editable=jn(this),Nn(this);var l=pn(this),c=_n(this),u=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=o||!this.docView.matchesNode(e.doc,c,l);!d&&e.selection.eq(r.selection)||(i=!0);var f,p,h,m,g,v,y,b,k,x,S="preserve"==u&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s&&s!=e.dom&&e.dom.contains(s)){var l=s.getBoundingClientRect();if(l.top>=o-20){t=s,n=l.top;break}}}return{refDOM:t,refTop:n,stack:ee(e.dom)}}(this);if(i){this.domObserver.stop();var M=d&&(L||z)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(m=r.selection,g=e.selection,v=Math.min(m.$anchor.sharedDepth(m.head),g.$anchor.sharedDepth(g.head)),m.$anchor.start(v)!=g.$anchor.start(v));if(d){var O=z?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){var t=e.domSelectionRange();if(!t.focusNode)return null;var n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=A(e=e.childNodes[t-1])}else{if(!e.parentNode||E(e))return null;t=w(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||E(e))return null;t=w(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){var o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){var a=n.pmViewDesc;if(a&&a.isText(n.nodeValue))return r}}return n||r}(this)),!o&&this.docView.update(e.doc,c,l,this)||(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Se(e.doc,c,l,this.dom,this)),O&&!this.trackWrites&&(M=!0)}M||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(f=this,p=f.docView.domFromPos(f.state.selection.anchor,0),h=f.domSelectionRange(),C(p.node,p.offset,h.anchorNode,h.anchorOffset)))?ze(this,M):(qe(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==u?this.dom.scrollTop=0:"to selection"==u?this.scrollToSelection():S&&(b=(y=S).refDOM,k=y.refTop,te(y.stack,0==(x=b?b.getBoundingClientRect().top:0)?0:x-k))}},{key:"scrollToSelection",value:function(){var e=this,t=this.domSelectionRange().focusNode;if(t&&this.dom.contains(1==t.nodeType?t:t.parentNode))if(this.someProp("handleScrollToSelection",function(t){return t(e)}));else if(this.state.selection instanceof v.NodeSelection){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Z(this,n.getBoundingClientRect(),t)}else Z(this,this.coordsAtPos(this.state.selection.head,1),t)}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"updateDraggedNode",value:function(e,t){var n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new Ut(e.slice,e.move,r<0?void 0:v.NodeSelection.create(this.state.doc,r))}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var l=a[s].props[e];if(null!=l&&(n=t?t(l):l))return n}}},{key:"hasFocus",value:function(){if(L){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(ne)return e.focus(ne);var t=ee(e);e.focus(null==ne?{get preventScroll(){return ne={preventScroll:!0},!0}}:void 0),ne||(ne=!1,te(t,0))}(this.dom),ze(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,t=this._root;if(null==t)for(var n,r=function(t){if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return t.ownerDocument.getSelection()}),{v:e._root=t}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return t||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(e){return ae(this,e)}},{key:"coordsAtPos",value:function(e){return ue(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return function(e,t,n){return me==t&&ge==n?ve:(me=t,ge=n,ve="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return pe(e,t,function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}for(var i=ue(e,o.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=S(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<s.length;l++){var c=s[l];if(c.bottom>c.top+1&&("up"==n?i.top-c.top>2*(c.bottom-i.top):c.bottom-i.bottom>2*(i.bottom-c.top)))return!1}}return!0})}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=e.domSelection();return s?he.test(r.parent.textContent)&&s.modify?pe(e,t,function(){var t=e.domSelectionRange(),o=t.focusNode,i=t.focusOffset,a=t.anchorNode,l=t.anchorOffset,c=s.caretBidiLevel;s.modify("move",n,"character");var u=r.depth?e.docView.domAfterPos(r.before()):e.dom,d=e.domSelectionRange(),f=d.focusNode,p=d.focusOffset,h=f&&!u.contains(1==f.nodeType?f:f.parentNode)||o==f&&i==p;try{s.collapse(a,l),o&&(o!=a||i!=l)&&s.extend&&s.extend(o,i)}catch(e){}return null!=c&&(s.caretBidiLevel=c),h}):"left"==n||"backward"==n?i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}},{key:"pasteHTML",value:function(e,t){return $t(this,"",e,!1,t||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(e,t){return $t(this,e,null,!0,t||new ClipboardEvent("paste"))}},{key:"serializeForClipboard",value:function(e){return ct(this,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],pn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,x=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){return function(e,t){At(e,t)||!kt[t.type]||!e.editable&&t.type in xt||kt[t.type](e,t)}(this,e)}},{key:"domSelectionRange",value:function(){var e=this.domSelection();return e?V&&11===this.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){var n=t.getComposedRanges(e.root)[0];if(n)return wn(e,n)}var r;function o(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),r?wn(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),e}();function _n(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Qt.node(0,e.state.doc.content.size,t)]}function Nn(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Qt.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function jn(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function Pn(e){var t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function In(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Tn.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},t.Decoration=Qt,t.DecorationSet=tn,t.EditorView=Tn,t.__endComposition=En,t.__parseFromClipboard=An},37372:function(e,t,n){"use strict";var r,o=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))!c.call(e,o)&&o!==n&&i(e,o,{get:()=>t[o],enumerable:!(r=a(t,o))||r.enumerable});return e},d=(e,t,n)=>(n=null!=e?o(l(e)):{},u(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(f,{Provider:()=>be,ReactReduxContext:()=>b,batch:()=>Ce,connect:()=>ye,createDispatchHook:()=>xe,createSelectorHook:()=>M,createStoreHook:()=>we,shallowEqual:()=>te,useDispatch:()=>Se,useSelector:()=>O,useStore:()=>ke}),e.exports=(r=f,u(i({},"__esModule",{value:!0}),r));var p=d(n(96540)),h=n(78418),m=d(n(96540)),g="default"in m?m.default:m,v=Symbol.for("react-redux-context"),y=typeof globalThis<"u"?globalThis:{},b=function(){if(!g.createContext)return{};let e=y[v]??(y[v]=new Map),t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}(),w=()=>{throw new Error("uSES not initialized!")};function k(e=b){return function(){return g.useContext(e)}}var x=k(),S=w,C=(e,t)=>e===t;function M(e=b){let t=e===b?x:k(e),n=(e,n={})=>{let{equalityFn:r=C,devModeChecks:o={}}="function"==typeof n?{equalityFn:n}:n,{store:i,subscription:a,getServerState:s,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(g.useRef(!0),g.useCallback({[e.name](t){return e(t)}}[e.name],[e,l,o.stabilityCheck])),d=S(a.addNestedSub,i.getState,s||i.getState,u,r);return g.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var O=M(),A=Symbol.for("react.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.server_context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),H=(Symbol.for("react.offscreen"),Symbol.for("react.client.reference"),D),z=F;function $(e,t,n,r,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:a}){let s,l,c,u,d,f=!1;return function(p,h){return f?function(f,p){let h=!i(p,l),m=!o(f,s,p,l);return s=f,l=p,h&&m?(c=e(s,l),t.dependsOnOwnProps&&(u=t(r,l)),d=n(c,u,l),d):h?(e.dependsOnOwnProps&&(c=e(s,l)),t.dependsOnOwnProps&&(u=t(r,l)),d=n(c,u,l),d):m?function(){let t=e(s,l),r=!a(t,c);return c=t,r&&(d=n(c,u,l)),d}():d}(p,h):function(o,i){return s=o,l=i,c=e(s,l),u=t(r,l),d=n(c,u,l),f=!0,d}(p,h)}}function V(e){return function(t){let n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function U(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function W(e,t){return function(t,{displayName:n}){let r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=U(e);let o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=U(o),o=r(t,n)),o},r}}function q(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function K(e,t,n){return{...n,...e,...t}}function G(e){e()}var Y={notify(){},get:()=>[]};function J(e,t){let n,r=Y,o=0,i=!1;function a(){c.onStateChange&&c.onStateChange()}function s(){o++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){G(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!r||null===e||(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}())}function l(){o--,n&&0===o&&(n(),n=void 0,r.clear(),r=Y)}let c={addNestedSub:function(e){s();let t=r.subscribe(e),n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return c}var X=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q=typeof navigator<"u"&&"ReactNative"===navigator.product,Z=X||Q?g.useLayoutEffect:g.useEffect;function ee(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function te(e,t){if(ee(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!ee(e[n[r]],t[n[r]]))return!1;return!0}var ne={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},re={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ie={[H]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[z]:oe};function ae(e){return function(e){return function(e){if("object"==typeof e&&null!==e){let t=e.$$typeof;switch(t){case A:{let n=e.type;switch(n){case T:case N:case _:case R:case L:return n;default:{let e=n&&n.$$typeof;switch(e){case I:case P:case D:case B:case F:case j:return e;default:return t}}}}case E:return t}}}(e)===F}(e)?oe:ie[e.$$typeof]||ne}var se=Object.defineProperty,le=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,ue=Object.getOwnPropertyDescriptor,de=Object.getPrototypeOf,fe=Object.prototype;function pe(e,t){if("string"!=typeof t){if(fe){let n=de(t);n&&n!==fe&&pe(e,n)}let n=le(t);ce&&(n=n.concat(ce(t)));let r=ae(e),o=ae(t);for(let i=0;i<n.length;++i){let a=n[i];if(!(re[a]||o&&o[a]||r&&r[a])){let n=ue(t,a);try{se(e,a,n)}catch{}}}}return e}var he=w,me=[null,null];function ge(e,t,n,r,o,i){e.current=r,n.current=!1,o.current&&(o.current=null,i())}function ve(e,t){return e===t}var ye=function(e,t,n,{pure:r,areStatesEqual:o=ve,areOwnPropsEqual:i=te,areStatePropsEqual:a=te,areMergedPropsEqual:s=te,forwardRef:l=!1,context:c=b}={}){let u=c,d=function(e){return e?"function"==typeof e?W(e):q(e,"mapStateToProps"):V(()=>({}))}(e),f=function(e){return e&&"object"==typeof e?V(t=>function(e,t){let n={};for(let r in e){let o=e[r];"function"==typeof o&&(n[r]=(...e)=>t(o(...e)))}return n}(e,t)):e?"function"==typeof e?W(e):q(e,"mapDispatchToProps"):V(e=>({dispatch:e}))}(t),p=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:n,areMergedPropsEqual:r}){let o,i=!1;return function(t,n,a){let s=e(t,n,a);return i?r(s,o)||(o=s):(i=!0,o=s),o}}}(e):q(e,"mergeProps"):()=>K}(n),h=!!e;return e=>{let t=e.displayName||e.name||"Component",n=`Connect(${t})`,r={shouldHandleStateChanges:h,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:d,initMapDispatchToProps:f,initMergeProps:p,areStatesEqual:o,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:s};function c(t){let[n,o,i]=g.useMemo(()=>{let{reactReduxForwardedRef:e,...n}=t;return[t.context,e,n]},[t]),a=g.useMemo(()=>u,[n,u]),s=g.useContext(a),l=!!t.store&&!!t.store.getState&&!!t.store.dispatch,c=!!s&&!!s.store,d=l?t.store:s.store,f=c?s.getServerState:d.getState,p=g.useMemo(()=>function(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...o}){return $(t(e,o),n(e,o),r(e,o),e,o)}(d.dispatch,r),[d]),[m,v]=g.useMemo(()=>{if(!h)return me;let e=J(d,l?void 0:s.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[d,l,s]),y=g.useMemo(()=>l?s:{...s,subscription:m},[l,s,m]),b=g.useRef(void 0),w=g.useRef(i),k=g.useRef(void 0),x=g.useRef(!1),S=g.useRef(!1),C=g.useRef(void 0);Z(()=>(S.current=!0,()=>{S.current=!1}),[]);let M,O=g.useMemo(()=>()=>k.current&&i===w.current?k.current:p(d.getState(),i),[d,i]),A=g.useMemo(()=>e=>m?function(e,t,n,r,o,i,a,s,l,c,u){if(!e)return()=>{};let d=!1,f=null,p=()=>{if(d||!s.current)return;let e,n,p=t.getState();try{e=r(p,o.current)}catch(e){n=e,f=e}n||(f=null),e===i.current?a.current||c():(i.current=e,l.current=e,a.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}(h,d,m,p,w,b,x,S,k,v,e):()=>{},[m]);!function(e,t){Z(()=>e(...t),void 0)}(ge,[w,b,x,i,k,v]);try{M=he(A,O,f?()=>p(f(),i):O)}catch(e){throw C.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${C.current.stack}\n\n`),e}Z(()=>{C.current=void 0,k.current=void 0,b.current=M});let E=g.useMemo(()=>g.createElement(e,{...M,ref:o}),[o,e,M]);return g.useMemo(()=>h?g.createElement(a.Provider,{value:y},E):E,[a,E,y])}let m=g.memo(c);if(m.WrappedComponent=e,m.displayName=c.displayName=n,l){let t=g.forwardRef(function(e,t){return g.createElement(m,{...e,reactReduxForwardedRef:t})});return t.displayName=n,t.WrappedComponent=e,pe(t,e)}return pe(m,e)}},be=function({store:e,context:t,children:n,serverState:r,stabilityCheck:o="once",identityFunctionCheck:i="once"}){let a=g.useMemo(()=>{let t=J(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:o,identityFunctionCheck:i}},[e,r,o,i]),s=g.useMemo(()=>e.getState(),[e]);return Z(()=>{let{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[a,s]),g.createElement((t||b).Provider,{value:a},n)};function we(e=b){let t=e===b?x:k(e),n=()=>{let{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var ke=we();function xe(e=b){let t=e===b?ke:we(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Se=xe(),Ce=G;(e=>{S=e})(h.useSyncExternalStoreWithSelector),(e=>{he=e})(p.useSyncExternalStore)},57580:function(e,t,n){"use strict";var r=n(65606);Object.defineProperty(t,"__esModule",{value:!0});var o=n(96540),i=n(25534),a=n(46942);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=s(o),c=s(a);const u="react-tooltip-core-styles",d="react-tooltip-base-styles",f={core:!1,base:!1};function p({css:e,id:t=d,type:n="base",ref:o}){var i,a;if(!e||"undefined"==typeof document||f[n])return;if("core"===n&&void 0!==r&&(null===(i=null==r?void 0:r.env)||void 0===i?void 0:i.REACT_TOOLTIP_DISABLE_CORE_STYLES))return;if("base"!==n&&void 0!==r&&(null===(a=null==r?void 0:r.env)||void 0===a?void 0:a.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;"core"===n&&(t=u),o||(o={});const{insertAt:s}=o;if(document.getElementById(t))return;const l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.id=t,c.type="text/css","top"===s&&l.firstChild?l.insertBefore(c,l.firstChild):l.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e)),f[n]=!0}const h=async({elementReference:e=null,tooltipReference:t=null,tooltipArrowReference:n=null,place:r="top",offset:o=10,strategy:a="absolute",middlewares:s=[i.offset(Number(o)),i.flip({fallbackAxisSideDirection:"start"}),i.shift({padding:5})],border:l})=>{if(!e)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};if(null===t)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};const c=s;return n?(c.push(i.arrow({element:n,padding:5})),i.computePosition(e,t,{placement:r,strategy:a,middleware:c}).then(({x:e,y:t,placement:n,middlewareData:r})=>{var o,i;const a={left:`${e}px`,top:`${t}px`,border:l},{x:s,y:c}=null!==(o=r.arrow)&&void 0!==o?o:{x:0,y:0},u=null!==(i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]])&&void 0!==i?i:"bottom",d=l&&{borderBottom:l,borderRight:l};let f=0;if(l){const e=`${l}`.match(/(\d+)px/);f=(null==e?void 0:e[1])?Number(e[1]):1}return{tooltipStyles:a,tooltipArrowStyles:{left:null!=s?`${s}px`:"",top:null!=c?`${c}px`:"",right:"",bottom:"",...d,[u]:`-${4+f}px`},place:n}})):i.computePosition(e,t,{placement:"bottom",strategy:a,middleware:c}).then(({x:e,y:t,placement:n})=>({tooltipStyles:{left:`${e}px`,top:`${t}px`},tooltipArrowStyles:{},place:n}))},m=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),g=(e,t,n)=>{let r=null;const o=function(...o){const i=()=>{r=null,n||e.apply(this,o)};n&&!r&&(e.apply(this,o),r=setTimeout(i,t)),n||(r&&clearTimeout(r),r=setTimeout(i,t))};return o.cancel=()=>{r&&(clearTimeout(r),r=null)},o},v=e=>null!==e&&!Array.isArray(e)&&"object"==typeof e,y=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>y(e,t[n]));if(Array.isArray(e)!==Array.isArray(t))return!1;if(!v(e)||!v(t))return e===t;const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>y(e[n],t[n]))},b=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some(e=>{const n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},w=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(b(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},k="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,x=e=>{e.current&&(clearTimeout(e.current),e.current=null)},S="DEFAULT_TOOLTIP_ID",C={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},M={getTooltipData:()=>C},O=o.createContext(M);function A(e=S){return o.useContext(O).getTooltipData(e)}var E={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},T={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const _=({forwardRef:e,id:t,className:n,classNameArrow:r,variant:a="dark",anchorId:s,anchorSelect:u,place:d="top",offset:f=10,events:p=["hover"],openOnClick:m=!1,positionStrategy:v="absolute",middlewares:b,wrapper:S,delayShow:C=0,delayHide:M=0,float:O=!1,hidden:_=!1,noArrow:N=!1,clickable:j=!1,closeOnEsc:P=!1,closeOnScroll:I=!1,closeOnResize:D=!1,openEvents:R,closeEvents:L,globalCloseEvents:F,imperativeModeOnly:B,style:H,position:z,afterShow:$,afterHide:V,disableTooltip:U,content:W,contentWrapperRef:q,isOpen:K,defaultIsOpen:G=!1,setIsOpen:Y,activeAnchor:J,setActiveAnchor:X,border:Q,opacity:Z,arrowColor:ee,role:te="tooltip"})=>{var ne;const re=o.useRef(null),oe=o.useRef(null),ie=o.useRef(null),ae=o.useRef(null),se=o.useRef(null),[le,ce]=o.useState({tooltipStyles:{},tooltipArrowStyles:{},place:d}),[ue,de]=o.useState(!1),[fe,pe]=o.useState(!1),[he,me]=o.useState(null),ge=o.useRef(!1),ve=o.useRef(null),{anchorRefs:ye,setActiveAnchor:be}=A(t),we=o.useRef(!1),[ke,xe]=o.useState([]),Se=o.useRef(!1),Ce=m||p.includes("click"),Me=Ce||(null==R?void 0:R.click)||(null==R?void 0:R.dblclick)||(null==R?void 0:R.mousedown),Oe=R?{...R}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!R&&Ce&&Object.assign(Oe,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const Ae=L?{...L}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!L&&Ce&&Object.assign(Ae,{mouseleave:!1,blur:!1,mouseout:!1});const Ee=F?{...F}:{escape:P||!1,scroll:I||!1,resize:D||!1,clickOutsideAnchor:Me||!1};B&&(Object.assign(Oe,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(Ae,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(Ee,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),k(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const Te=e=>{Se.current&&(e&&pe(!0),setTimeout(()=>{Se.current&&(null==Y||Y(e),void 0===K&&de(e))},10))};o.useEffect(()=>{if(void 0===K)return()=>null;K&&pe(!0);const e=setTimeout(()=>{de(K)},10);return()=>{clearTimeout(e)}},[K]),o.useEffect(()=>{if(ue!==ge.current)if(x(se),ge.current=ue,ue)null==$||$();else{const e=(()=>{const e=getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay").match(/^([\d.]+)(ms|s)$/);if(!e)return 0;const[,t,n]=e;return Number(t)*("ms"===n?1:1e3)})();se.current=setTimeout(()=>{pe(!1),me(null),null==V||V()},e+25)}},[ue]);const _e=e=>{ce(t=>y(t,e)?t:e)},Ne=(e=C)=>{x(ie),fe?Te(!0):ie.current=setTimeout(()=>{Te(!0)},e)},je=(e=M)=>{x(ae),ae.current=setTimeout(()=>{we.current||Te(!1)},e)},Pe=e=>{var t;if(!e)return;const n=null!==(t=e.currentTarget)&&void 0!==t?t:e.target;if(!(null==n?void 0:n.isConnected))return X(null),void be({current:null});C?Ne():Te(!0),X(n),be({current:n}),x(ae)},Ie=()=>{j?je(M||100):M?je():Te(!1),x(ie)},De=({x:e,y:t})=>{var n;const r={getBoundingClientRect:()=>({x:e,y:t,width:0,height:0,top:t,left:e,right:e,bottom:t})};h({place:null!==(n=null==he?void 0:he.place)&&void 0!==n?n:d,offset:f,elementReference:r,tooltipReference:re.current,tooltipArrowReference:oe.current,strategy:v,middlewares:b,border:Q}).then(e=>{_e(e)})},Re=e=>{if(!e)return;const t=e,n={x:t.clientX,y:t.clientY};De(n),ve.current=n},Le=e=>{var t;if(!ue)return;const n=e.target;n.isConnected&&((null===(t=re.current)||void 0===t?void 0:t.contains(n))||[document.querySelector(`[id='${s}']`),...ke].some(e=>null==e?void 0:e.contains(n))||(Te(!1),x(ie)))},Fe=g(Pe,50,!0),Be=g(Ie,50,!0),He=e=>{Be.cancel(),Fe(e)},ze=()=>{Fe.cancel(),Be()},$e=o.useCallback(()=>{var e,t;const n=null!==(e=null==he?void 0:he.position)&&void 0!==e?e:z;n?De(n):O?ve.current&&De(ve.current):(null==J?void 0:J.isConnected)&&h({place:null!==(t=null==he?void 0:he.place)&&void 0!==t?t:d,offset:f,elementReference:J,tooltipReference:re.current,tooltipArrowReference:oe.current,strategy:v,middlewares:b,border:Q}).then(e=>{Se.current&&_e(e)})},[ue,J,W,H,d,null==he?void 0:he.place,f,v,z,null==he?void 0:he.position,O]);o.useEffect(()=>{var e,t;const n=new Set(ye);ke.forEach(e=>{(null==U?void 0:U(e))||n.add({current:e})});const r=document.querySelector(`[id='${s}']`);r&&!(null==U?void 0:U(r))&&n.add({current:r});const o=()=>{Te(!1)},a=w(J),l=w(re.current);Ee.scroll&&(window.addEventListener("scroll",o),null==a||a.addEventListener("scroll",o),null==l||l.addEventListener("scroll",o));let c=null;Ee.resize?window.addEventListener("resize",o):J&&re.current&&(c=i.autoUpdate(J,re.current,$e,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const u=e=>{"Escape"===e.key&&Te(!1)};Ee.escape&&window.addEventListener("keydown",u),Ee.clickOutsideAnchor&&window.addEventListener("click",Le);const d=[],f=e=>{ue&&(null==e?void 0:e.target)===J||Pe(e)},p=e=>{ue&&(null==e?void 0:e.target)===J&&Ie()},h=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],m=["click","dblclick","mousedown","mouseup"];Object.entries(Oe).forEach(([e,t])=>{t&&(h.includes(e)?d.push({event:e,listener:He}):m.includes(e)&&d.push({event:e,listener:f}))}),Object.entries(Ae).forEach(([e,t])=>{t&&(h.includes(e)?d.push({event:e,listener:ze}):m.includes(e)&&d.push({event:e,listener:p}))}),O&&d.push({event:"pointermove",listener:Re});const g=()=>{we.current=!0},v=()=>{we.current=!1,Ie()};return j&&!Me&&(null===(e=re.current)||void 0===e||e.addEventListener("mouseenter",g),null===(t=re.current)||void 0===t||t.addEventListener("mouseleave",v)),d.forEach(({event:e,listener:t})=>{n.forEach(n=>{var r;null===(r=n.current)||void 0===r||r.addEventListener(e,t)})}),()=>{var e,t;Ee.scroll&&(window.removeEventListener("scroll",o),null==a||a.removeEventListener("scroll",o),null==l||l.removeEventListener("scroll",o)),Ee.resize?window.removeEventListener("resize",o):null==c||c(),Ee.clickOutsideAnchor&&window.removeEventListener("click",Le),Ee.escape&&window.removeEventListener("keydown",u),j&&!Me&&(null===(e=re.current)||void 0===e||e.removeEventListener("mouseenter",g),null===(t=re.current)||void 0===t||t.removeEventListener("mouseleave",v)),d.forEach(({event:e,listener:t})=>{n.forEach(n=>{var r;null===(r=n.current)||void 0===r||r.removeEventListener(e,t)})})}},[J,$e,fe,ye,ke,R,L,F,Ce,C,M]),o.useEffect(()=>{var e,n;let r=null!==(n=null!==(e=null==he?void 0:he.anchorSelect)&&void 0!==e?e:u)&&void 0!==n?n:"";!r&&t&&(r=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`);const o=new MutationObserver(e=>{const n=[],o=[];e.forEach(e=>{if("attributes"===e.type&&"data-tooltip-id"===e.attributeName&&(e.target.getAttribute("data-tooltip-id")===t?n.push(e.target):e.oldValue===t&&o.push(e.target)),"childList"===e.type){if(J){const t=[...e.removedNodes].filter(e=>1===e.nodeType);if(r)try{o.push(...t.filter(e=>e.matches(r))),o.push(...t.flatMap(e=>[...e.querySelectorAll(r)]))}catch(e){}t.some(e=>{var t;return!!(null===(t=null==e?void 0:e.contains)||void 0===t?void 0:t.call(e,J))&&(pe(!1),Te(!1),X(null),x(ie),x(ae),!0)})}if(r)try{const t=[...e.addedNodes].filter(e=>1===e.nodeType);n.push(...t.filter(e=>e.matches(r))),n.push(...t.flatMap(e=>[...e.querySelectorAll(r)]))}catch(e){}}}),(n.length||o.length)&&xe(e=>[...e.filter(e=>!o.includes(e)),...n])});return o.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{o.disconnect()}},[t,u,null==he?void 0:he.anchorSelect,J]),o.useEffect(()=>{$e()},[$e]),o.useEffect(()=>{if(!(null==q?void 0:q.current))return()=>null;const e=new ResizeObserver(()=>{setTimeout(()=>$e())});return e.observe(q.current),()=>{e.disconnect()}},[W,null==q?void 0:q.current]),o.useEffect(()=>{var e;const t=document.querySelector(`[id='${s}']`),n=[...ke,t];J&&n.includes(J)||X(null!==(e=ke[0])&&void 0!==e?e:t)},[s,ke,J]),o.useEffect(()=>(G&&Te(!0),()=>{x(ie),x(ae)}),[]),o.useEffect(()=>{var e;let n=null!==(e=null==he?void 0:he.anchorSelect)&&void 0!==e?e:u;if(!n&&t&&(n=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`),n)try{const e=Array.from(document.querySelectorAll(n));xe(e)}catch(e){xe([])}},[t,u,null==he?void 0:he.anchorSelect]),o.useEffect(()=>{ie.current&&(x(ie),Ne(C))},[C]);const Ve=null!==(ne=null==he?void 0:he.content)&&void 0!==ne?ne:W,Ue=ue&&Object.keys(le.tooltipStyles).length>0;return o.useImperativeHandle(e,()=>({open:e=>{if(null==e?void 0:e.anchorSelect)try{document.querySelector(e.anchorSelect)}catch(t){return void console.warn(`[react-tooltip] "${e.anchorSelect}" is not a valid CSS selector`)}me(null!=e?e:null),(null==e?void 0:e.delay)?Ne(e.delay):Te(!0)},close:e=>{(null==e?void 0:e.delay)?je(e.delay):Te(!1)},activeAnchor:J,place:le.place,isOpen:Boolean(fe&&!_&&Ve&&Ue)})),fe&&!_&&Ve?l.default.createElement(S,{id:t,role:te,className:c.default("react-tooltip",E.tooltip,T.tooltip,T[a],n,`react-tooltip__place-${le.place}`,E[Ue?"show":"closing"],Ue?"react-tooltip__show":"react-tooltip__closing","fixed"===v&&E.fixed,j&&E.clickable),onTransitionEnd:e=>{x(se),ue||"opacity"!==e.propertyName||(pe(!1),me(null),null==V||V())},style:{...H,...le.tooltipStyles,opacity:void 0!==Z&&Ue?Z:void 0},ref:re},Ve,l.default.createElement(S,{className:c.default("react-tooltip-arrow",E.arrow,T.arrow,r,N&&E.noArrow),style:{...le.tooltipArrowStyles,background:ee?`linear-gradient(to right bottom, transparent 50%, ${ee} 50%)`:void 0},ref:oe})):null},N=({content:e})=>l.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),j=l.default.forwardRef(({id:e,anchorId:t,anchorSelect:n,content:r,html:i,render:a,className:s,classNameArrow:u,variant:d="dark",place:f="top",offset:p=10,wrapper:h="div",children:g=null,events:v=["hover"],openOnClick:y=!1,positionStrategy:b="absolute",middlewares:w,delayShow:k=0,delayHide:x=0,float:S=!1,hidden:C=!1,noArrow:M=!1,clickable:O=!1,closeOnEsc:E=!1,closeOnScroll:T=!1,closeOnResize:j=!1,openEvents:P,closeEvents:I,globalCloseEvents:D,imperativeModeOnly:R=!1,style:L,position:F,isOpen:B,defaultIsOpen:H=!1,disableStyleInjection:z=!1,border:$,opacity:V,arrowColor:U,setIsOpen:W,afterShow:q,afterHide:K,disableTooltip:G,role:Y="tooltip"},J)=>{const[X,Q]=o.useState(r),[Z,ee]=o.useState(i),[te,ne]=o.useState(f),[re,oe]=o.useState(d),[ie,ae]=o.useState(p),[se,le]=o.useState(k),[ce,ue]=o.useState(x),[de,fe]=o.useState(S),[pe,he]=o.useState(C),[me,ge]=o.useState(h),[ve,ye]=o.useState(v),[be,we]=o.useState(b),[ke,xe]=o.useState(null),[Se,Ce]=o.useState(null),Me=o.useRef(z),{anchorRefs:Oe,activeAnchor:Ae}=A(e),Ee=e=>null==e?void 0:e.getAttributeNames().reduce((t,n)=>{var r;return n.startsWith("data-tooltip-")&&(t[n.replace(/^data-tooltip-/,"")]=null!==(r=null==e?void 0:e.getAttribute(n))&&void 0!==r?r:null),t},{}),Te=e=>{const t={place:e=>{var t;ne(null!==(t=e)&&void 0!==t?t:f)},content:e=>{Q(null!=e?e:r)},html:e=>{ee(null!=e?e:i)},variant:e=>{var t;oe(null!==(t=e)&&void 0!==t?t:d)},offset:e=>{ae(null===e?p:Number(e))},wrapper:e=>{var t;ge(null!==(t=e)&&void 0!==t?t:h)},events:e=>{const t=null==e?void 0:e.split(" ");ye(null!=t?t:v)},"position-strategy":e=>{var t;we(null!==(t=e)&&void 0!==t?t:b)},"delay-show":e=>{le(null===e?k:Number(e))},"delay-hide":e=>{ue(null===e?x:Number(e))},float:e=>{fe(null===e?S:"true"===e)},hidden:e=>{he(null===e?C:"true"===e)},"class-name":e=>{xe(e)}};Object.values(t).forEach(e=>e(null)),Object.entries(e).forEach(([e,n])=>{var r;null===(r=t[e])||void 0===r||r.call(t,n)})};o.useEffect(()=>{Q(r)},[r]),o.useEffect(()=>{ee(i)},[i]),o.useEffect(()=>{ne(f)},[f]),o.useEffect(()=>{oe(d)},[d]),o.useEffect(()=>{ae(p)},[p]),o.useEffect(()=>{le(k)},[k]),o.useEffect(()=>{ue(x)},[x]),o.useEffect(()=>{fe(S)},[S]),o.useEffect(()=>{he(C)},[C]),o.useEffect(()=>{we(b)},[b]),o.useEffect(()=>{Me.current!==z&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[z]),o.useEffect(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:"core"===z,disableBase:z}}))},[]),o.useEffect(()=>{var r;const o=new Set(Oe);let i=n;if(!i&&e&&(i=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`),i)try{document.querySelectorAll(i).forEach(e=>{o.add({current:e})})}catch(r){console.warn(`[react-tooltip] "${i}" is not a valid CSS selector`)}const a=document.querySelector(`[id='${t}']`);if(a&&o.add({current:a}),!o.size)return()=>null;const s=null!==(r=null!=Se?Se:a)&&void 0!==r?r:Ae.current,l=new MutationObserver(e=>{e.forEach(e=>{var t;if(!s||"attributes"!==e.type||!(null===(t=e.attributeName)||void 0===t?void 0:t.startsWith("data-tooltip-")))return;const n=Ee(s);Te(n)})}),c={attributes:!0,childList:!1,subtree:!1};if(s){const e=Ee(s);Te(e),l.observe(s,c)}return()=>{l.disconnect()}},[Oe,Ae,Se,t,n]),o.useEffect(()=>{(null==L?void 0:L.border)&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),$&&!m("border",`${$}`)&&console.warn(`[react-tooltip] "${$}" is not a valid \`border\`.`),(null==L?void 0:L.opacity)&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),V&&!m("opacity",`${V}`)&&console.warn(`[react-tooltip] "${V}" is not a valid \`opacity\`.`)},[]);let _e=g;const Ne=o.useRef(null);if(a){const e=a({content:(null==Se?void 0:Se.getAttribute("data-tooltip-content"))||X||null,activeAnchor:Se});_e=e?l.default.createElement("div",{ref:Ne,className:"react-tooltip-content-wrapper"},e):null}else X&&(_e=X);Z&&(_e=l.default.createElement(N,{content:Z}));const je={forwardRef:J,id:e,anchorId:t,anchorSelect:n,className:c.default(s,ke),classNameArrow:u,content:_e,contentWrapperRef:Ne,place:te,variant:re,offset:ie,wrapper:me,events:ve,openOnClick:y,positionStrategy:be,middlewares:w,delayShow:se,delayHide:ce,float:de,hidden:pe,noArrow:M,clickable:O,closeOnEsc:E,closeOnScroll:T,closeOnResize:j,openEvents:P,closeEvents:I,globalCloseEvents:D,imperativeModeOnly:R,style:L,position:F,isOpen:B,defaultIsOpen:H,border:$,opacity:V,arrowColor:U,setIsOpen:W,afterShow:q,afterHide:K,disableTooltip:G,activeAnchor:Se,setActiveAnchor:e=>Ce(e),role:Y};return l.default.createElement(_,{...je})});"undefined"!=typeof window&&window.addEventListener("react-tooltip-inject-styles",e=>{e.detail.disableCore||p({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||p({css:"\n.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}",type:"base"})}),t.Tooltip=j,t.TooltipProvider=({children:e})=>{const[t,n]=o.useState({[S]:new Set}),[r,i]=o.useState({[S]:{current:null}}),a=(e,...t)=>{n(n=>{var r;const o=null!==(r=n[e])&&void 0!==r?r:new Set;return t.forEach(e=>o.add(e)),{...n,[e]:new Set(o)}})},s=(e,...t)=>{n(n=>{const r=n[e];return r?(t.forEach(e=>r.delete(e)),{...n}):n})},c=o.useCallback((e=S)=>{var n,o;return{anchorRefs:null!==(n=t[e])&&void 0!==n?n:new Set,activeAnchor:null!==(o=r[e])&&void 0!==o?o:{current:null},attach:(...t)=>a(e,...t),detach:(...t)=>s(e,...t),setActiveAnchor:t=>((e,t)=>{i(n=>{var r;return(null===(r=n[e])||void 0===r?void 0:r.current)===t.current?n:{...n,[e]:t}})})(e,t)}},[t,r,a,s]),u=o.useMemo(()=>({getTooltipData:c}),[c]);return l.default.createElement(O.Provider,{value:u},e)},t.TooltipWrapper=({tooltipId:e,children:t,className:n,place:r,content:i,html:a,variant:s,offset:u,wrapper:d,events:f,positionStrategy:p,delayShow:h,delayHide:m})=>{const{attach:g,detach:v}=A(e),y=o.useRef(null);return o.useEffect(()=>(g(y),()=>{v(y)}),[]),l.default.createElement("span",{ref:y,className:c.default("react-tooltip-wrapper",n),"data-tooltip-place":r,"data-tooltip-content":i,"data-tooltip-html":a,"data-tooltip-variant":s,"data-tooltip-offset":u,"data-tooltip-wrapper":d,"data-tooltip-events":f,"data-tooltip-position-strategy":p,"data-tooltip-delay-show":h,"data-tooltip-delay-hide":m},t)},t.removeStyle=function({type:e="base",id:t=d}={}){if(!f[e])return;"core"===e&&(t=u);const n=document.getElementById(t);"style"===(null==n?void 0:n.tagName)?null==n||n.remove():console.warn(`[react-tooltip] Failed to remove 'style' element with id '${t}'. Call \`injectStyle()\` first`),f[e]=!1}},28895:function(e){"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};function s(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{__DO_NOT_USE__ActionTypes:()=>u,applyMiddleware:()=>y,bindActionCreators:()=>g,combineReducers:()=>h,compose:()=>v,createStore:()=>f,isAction:()=>b,isPlainObject:()=>d,legacy_createStore:()=>p}),e.exports=(t=a,((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))i.call(e,a)||undefined===a||n(e,a,{get:()=>t[a],enumerable:!(s=r(t,a))||s.enumerable});return e})(n({},"__esModule",{value:!0}),t));var l=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),c=()=>Math.random().toString(36).substring(7).split("").join("."),u={INIT:`@@redux/INIT${c()}`,REPLACE:`@@redux/REPLACE${c()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${c()}`};function d(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function f(e,t,n){if("function"!=typeof e)throw new Error(s(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(f)(e,t)}let r=e,o=t,i=new Map,a=i,c=0,p=!1;function h(){a===i&&(a=new Map,i.forEach((e,t)=>{a.set(t,e)}))}function m(){if(p)throw new Error(s(3));return o}function g(e){if("function"!=typeof e)throw new Error(s(4));if(p)throw new Error(s(5));let t=!0;h();const n=c++;return a.set(n,e),function(){if(t){if(p)throw new Error(s(6));t=!1,h(),a.delete(n),i=null}}}function v(e){if(!d(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if("string"!=typeof e.type)throw new Error(s(17));if(p)throw new Error(s(9));try{p=!0,o=r(o,e)}finally{p=!1}return(i=a).forEach(e=>{e()}),e}return v({type:u.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error(s(10));r=e,v({type:u.REPLACE})},[l]:function(){const e=g;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(s(11));function n(){const e=t;e.next&&e.next(m())}return n(),{unsubscribe:e(n)}},[l](){return this}}}}}function p(e,t,n){return f(e,t,n)}function h(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}const r=Object.keys(n);let o;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:u.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))})}(n)}catch(e){o=e}return function(e={},t){if(o)throw o;let i=!1;const a={};for(let o=0;o<r.length;o++){const l=r[o],c=n[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(s(14));a[l]=d,i=i||d!==u}return i=i||r.length!==Object.keys(e).length,i?a:e}}function m(e,t){return function(...n){return t(e.apply(this,n))}}function g(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));const n={};for(const r in e){const o=e[r];"function"==typeof o&&(n[r]=m(o,t))}return n}function v(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function y(...e){return t=>(n,r)=>{const o=t(n,r);let i=()=>{throw new Error(s(15))};const a={getState:o.getState,dispatch:(e,...t)=>i(e,...t)},l=e.map(e=>e(a));return i=v(...l)(o.dispatch),{...o,dispatch:i}}}function b(e){return d(e)&&"type"in e&&"string"==typeof e.type}},20614:function(e){"use strict";var t=200,n=function(){};n.prototype.append=function(e){return e.length?(e=n.from(e),!this.length&&e||e.length<t&&this.leafAppend(e)||this.length<t&&e.leafPrepend(this)||this.appendInner(e)):this},n.prototype.prepend=function(e){return e.length?n.from(e).append(this):this},n.prototype.appendInner=function(e){return new o(this,e)},n.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?n.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},n.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},n.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},n.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},n.from=function(e){return e instanceof n?e:e&&e.length?new r(e):n.empty};var r=function(e){function n(t){e.call(this),this.values=t}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(e,t){return 0==e&&t==this.length?this:new n(this.values.slice(e,t))},n.prototype.getInner=function(e){return this.values[e]},n.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},n.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},n.prototype.leafAppend=function(e){if(this.length+e.length<=t)return new n(this.values.concat(e.flatten()))},n.prototype.leafPrepend=function(e){if(this.length+e.length<=t)return new n(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(n.prototype,r),n}(n);n.empty=new r([]);var o=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(n);e.exports=n},76237:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),i="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),c=o&&(s||+o[1]<57)||a&&s,u=0;u<10;u++)n[48+u]=n[96+u]=String(u);for(u=1;u<=24;u++)n[u+111]="F"+u;for(u=65;u<=90;u++)n[u]=String.fromCharCode(u+32),r[u]=String.fromCharCode(u);for(var d in n)r.hasOwnProperty(d)||(r[d]=n[d]);t.base=n,t.keyName=function(e){var t=!(c&&(e.ctrlKey||e.altKey||e.metaKey)||(i||l)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:n)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},t.shift=r},17896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23107),o=n(49454),i=n(37820);n(42946);var a=n(52550),s=n(77712),l=n(63043),c=n(37294),u=n(99089),d=n(90766),f=n(6663),p=n(678),h=n(7113),m=n(52581),g=n(94311),v=n(81711);function y(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var b=y(r),w=y(s),k=y(l),x=y(c),S=y(u),C=y(f),M=y(p),O=y(h),A=y(m),E=y(g),T=y(v);const _=new i.PluginKey("y-sync"),N=new i.PluginKey("y-undo"),j=new i.PluginKey("yjs-cursor"),P=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!b.isDeleted(t.ds,e.id),I=[{light:"#ecd44433",dark:"#ecd444"}],D=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=S.create();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,M.oneOf(t))}return e.get(n)},R=(e,t)=>({anchor:ne(t.selection.anchor,e.type,e.mapping),head:ne(t.selection.head,e.type,e.mapping)});class L{constructor(e,t=new Map){this.type=e,this.prosemirrorView=null,this.mux=a.createMutex(),this.mapping=t,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&null!=this.prosemirrorView&&(this.beforeTransactionSelection=R(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(O.isBrowser&&null===this._domSelectionInView&&(E.timeout(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const n=t.getBoundingClientRect(),r=A.doc.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}renderSnapshot(e,t){t||(t=b.createSnapshot(b.createDeleteSet(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(_,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(e=>B(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new w.Slice(w.Fragment.from(e),0,0));t.setMeta(_,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=null!==this.beforeTransactionSelection?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(e=>B(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new w.Slice(w.Fragment.from(t),0,0));e&&n.setSelection(i.TextSelection.create(n.doc,e.anchor,e.head)),this.prosemirrorView.dispatch(n.setMeta(_,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,t,n){let r=this.doc;e||(e=b.snapshot(this.doc)),(e instanceof Uint8Array||t instanceof Uint8Array)&&(e instanceof Uint8Array&&t instanceof Uint8Array||C.unexpectedCase(),r=new b.Doc({gc:!1}),b.applyUpdateV2(r,t),t=b.snapshot(r),b.applyUpdateV2(r,e),e=b.snapshot(r)),this.mapping.clear(),this.mux(()=>{r.transact(r=>{const o=n.permanentUserData;o&&o.dss.forEach(e=>{b.iterateDeletedStructs(r,e,e=>{})});const i=(e,t)=>{const r="added"===e?o.getUserByClientId(t.client):o.getUserByDeletedId(t);return{user:r,type:e,color:D(n.colorMapping,n.colors,r)}},a=b.typeListToArraySnapshot(this.type,new b.Snapshot(t.ds,e.sv)).map(n=>!n._item.deleted||P(n._item,e)||P(n._item,t)?B(n,this.prosemirrorView.state.schema,new Map,e,t,i):null).filter(e=>null!==e),s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new w.Slice(w.Fragment.from(a),0,0));this.prosemirrorView.dispatch(s.setMeta(_,{isChangeOrigin:!0}))},_)})}_typeChanged(e,t){if(null==this.prosemirrorView)return;const n=_.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const e=(e,t)=>this.mapping.delete(t);b.iterateDeletedStructs(t,t.deleteSet,e=>{if(e.constructor===b.Item){const t=e.content.type;t&&this.mapping.delete(t)}}),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map(e=>F(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e);let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new w.Slice(w.Fragment.from(n),0,0));((e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const r=oe(n.doc,n.type,t.anchor,n.mapping),o=oe(n.doc,n.type,t.head,n.mapping);null!==r&&null!==o&&(e=e.setSelection(i.TextSelection.create(e.doc,r,o)))}})(r,this.beforeTransactionSelection,this),r=r.setMeta(_,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof b.UndoManager}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.doc.transact(()=>{X(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=R(this,this.prosemirrorView.state)},_)}initView(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const F=(e,t,n,r,o,i)=>{const a=n.get(e);if(void 0===a){if(e instanceof b.XmlElement)return B(e,t,n,r,o,i);throw C.methodUnimplemented()}return a},B=(e,t,n,r,o,i)=>{const a=[],s=e=>{if(e.constructor===b.XmlElement){const s=F(e,t,n,r,o,i);null!==s&&a.push(s)}else{const s=e._item.right?.content.type;s instanceof b.Text&&!s._item.deleted&&s._item.id.client===s.doc.clientID&&(e.applyDelta([{retain:e.length},...s.toDelta()]),s.doc.transact(e=>{s._item.delete(e)}));const l=H(e,t,n,r,o,i);null!==l&&l.forEach(e=>{null!==e&&a.push(e)})}};void 0===r||void 0===o?e.toArray().forEach(s):b.typeListToArraySnapshot(e,new b.Snapshot(o.ds,r.sv)).forEach(s);try{const s=e.getAttributes(r);void 0!==r&&(P(e._item,r)?P(e._item,o)||(s.ychange=i?i("added",e._item.id):{type:"added"}):s.ychange=i?i("removed",e._item.id):{type:"removed"});const l=t.node(e.nodeName,s,a);return n.set(e,l),l}catch(t){return e.doc.transact(t=>{e._item.delete(t)},_),n.delete(e),null}},H=(e,t,n,r,o,i)=>{const a=[],s=e.toDelta(r,o,i);try{for(let e=0;e<s.length;e++){const n=s[e],r=[];for(const e in n.attributes)r.push(t.mark(e,n.attributes[e]));a.push(t.text(n.insert,r))}}catch(t){return e.doc.transact(t=>{e._item.delete(t)},_),null}return a},z=(e,t)=>e instanceof Array?((e,t)=>{const n=new b.XmlText,r=e.map(e=>({insert:e.text,attributes:J(e.marks)}));return n.applyDelta(r),t.set(n,e),n})(e,t):((e,t)=>{const n=new b.XmlElement(e.type.name);for(const t in e.attrs){const r=e.attrs[t];null!==r&&"ychange"!==t&&n.setAttribute(t,r)}return n.insert(0,U(e).map(e=>z(e,t))),t.set(n,e),n})(e,t),$=e=>"object"==typeof e&&null!==e,V=(e,t)=>{const n=Object.keys(e).filter(t=>null!==e[t]);let r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let o=0;o<n.length&&r;o++){const i=n[o],a=e[i],s=t[i];r="ychange"===i||a===s||$(a)&&$(s)&&V(a,s)}return r},U=e=>{const t=e.content.content,n=[];for(let e=0;e<t.length;e++){const r=t[e];if(r.isText){const r=[];for(let n=t[e];e<t.length&&n.isText;n=t[++e])r.push(n);e--,n.push(r)}else n.push(r)}return n},W=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&x.keys(e.attributes||{}).length===t[n].marks.length&&t[n].marks.every(t=>V(e.attributes[t.type.name]||{},t.attrs)))},q=(e,t)=>{if(e instanceof b.XmlElement&&!(t instanceof Array)&&Q(e,t)){const n=U(t);return e._length===n.length&&V(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>q(e,n[t]))}return e instanceof b.XmlText&&t instanceof Array&&W(e,t)},K=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),G=(e,t,n)=>{const r=e.toArray(),o=U(t),i=o.length,a=r.length,s=k.min(a,i);let l=0,c=0,u=!1;for(;l<s;l++){const e=r[l],t=o[l];if(K(n.get(e),t))u=!0;else if(!q(e,t))break}for(;l+c<s;c++){const e=r[a-c-1],t=o[i-c-1];if(K(n.get(e),t))u=!0;else if(!q(e,t))break}return{equalityFactor:l+c,foundMappedChild:u}},Y=(e,t,n)=>{n.set(e,t);const{nAttrs:r,str:o}=(e=>{let t="",n=e._start;const r={};for(;null!==n;)n.deleted||(n.countable&&n.content instanceof b.ContentString?t+=n.content.str:n.content instanceof b.ContentFormat&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}})(e),i=t.map(e=>({insert:e.text,attributes:Object.assign({},r,J(e.marks))})),{insert:a,remove:s,index:l}=d.simpleDiff(o,i.map(e=>e.insert).join(""));e.delete(l,s),e.insert(l,a),e.applyDelta(i.map(e=>({retain:e.insert.length,attributes:e.attributes})))},J=e=>{const t={};return e.forEach(e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)}),t},X=(e,t,n,r)=>{if(t instanceof b.XmlElement&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(t,n),t instanceof b.XmlElement){const e=t.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?e[n]!==r[n]&&"ychange"!==n&&t.setAttribute(n,r[n]):t.removeAttribute(n);for(const n in e)void 0===r[n]&&t.removeAttribute(n)}const o=U(n),i=o.length,a=t.toArray(),s=a.length,l=k.min(i,s);let c=0,u=0;for(;c<l;c++){const e=a[c],t=o[c];if(!K(r.get(e),t)){if(!q(e,t))break;r.set(e,t)}}for(;u+c+1<l;u++){const e=a[s-u-1],t=o[i-u-1];if(!K(r.get(e),t)){if(!q(e,t))break;r.set(e,t)}}e.transact(()=>{for(;s-c-u>0&&i-c-u>0;){const n=a[c],l=o[c],d=a[s-u-1],f=o[i-u-1];if(n instanceof b.XmlText&&l instanceof Array)W(n,l)||Y(n,l,r),c+=1;else{let o=n instanceof b.XmlElement&&Q(n,l),i=d instanceof b.XmlElement&&Q(d,f);if(o&&i){const e=G(n,l,r),t=G(d,f,r);e.foundMappedChild&&!t.foundMappedChild?i=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?o=!1:i=!1}o?(X(e,n,l,r),c+=1):i?(X(e,d,f,r),u+=1):(r.delete(t.get(c)),t.delete(c,1),t.insert(c,[z(l,r)]),c+=1)}}const n=s-c-u;if(1===s&&0===i&&a[0]instanceof b.XmlText?(r.delete(a[0]),a[0].delete(0,a[0].length)):n>0&&(t.slice(c,c+n).forEach(e=>r.delete(e)),t.delete(c,n)),c+u<i){const e=[];for(let t=c;t<i-u;t++)e.push(z(o[t],r));t.insert(c,e)}},_)},Q=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let Z=null;const ee=()=>{const e=Z;Z=null,e.forEach((e,t)=>{const n=t.state.tr,r=_.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((e,t)=>{n.setMeta(t,e)}),t.dispatch(n))})},te=(e,t,n)=>{Z||(Z=new Map,E.timeout(0,ee)),T.setIfUndefined(Z,e,T.create).set(t,n)},ne=(e,t,n)=>{if(0===e)return b.createRelativePositionFromTypeIndex(t,0,-1);let r=null===t._first?null:t._first.content.type;for(;null!==r&&t!==r;){if(r instanceof b.XmlText){if(r._length>=e)return b.createRelativePositionFromTypeIndex(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new b.RelativePosition(null===r._item?null:r._item.id,null===r._item?b.findRootTypeKey(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new b.RelativePosition(null===r._item?null:r._item.id,null===r._item?b.findRootTypeKey(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw C.unexpectedCase();if(0===e&&r.constructor!==b.XmlText&&r!==t)return re(r._item.parent,r._item)}return b.createRelativePositionFromTypeIndex(t,t._length,-1)},re=(e,t)=>{let n=null,r=null;return null===e._item?r=b.findRootTypeKey(e):n=b.createID(e._item.id.client,e._item.id.clock),new b.RelativePosition(n,r,t.id)},oe=(e,t,n,r)=>{const o=b.createAbsolutePositionFromRelativePosition(n,e);if(null===o||o.type!==t&&!b.isParentOf(t,o.type._item))return null;let i=o.type,a=0;if(i.constructor===b.XmlText)a=o.index;else if(null===i._item||!i._item.deleted){let e=i._first,t=0;for(;t<i._length&&t<o.index&&null!==e;){if(!e.deleted){const n=e.content.type;t++,n instanceof b.XmlText?a+=n._length:a+=r.get(n).nodeSize}e=e.right}a+=1}for(;i!==t&&null!==i._item;){const e=i._item.parent;if(null===e._item||!e._item.deleted){a+=1;let t=e._first;for(;null!==t;){const e=t.content.type;if(e===i)break;t.deleted||(e instanceof b.XmlText?a+=e._length:a+=r.get(e).nodeSize),t=t.right}}i=e}return a-1},ie=(e,t)=>{const n=e.toArray().map(e=>B(e,t,new Map)).filter(e=>null!==e);return s.Fragment.fromArray(n)};function ae(e,t="prosemirror"){const n=new b.Doc,r=n.get(t,b.XmlFragment);return r.doc?(se(e,r),r.doc):n}function se(e,t){const n=t||new b.XmlFragment,r=n.doc?n.doc:{transact:e=>e(void 0)};return X(r,n,e,new Map),n}function le(e,t="prosemirror"){return ce(e.getXmlFragment(t))}function ce(e){return{type:"doc",content:e.toArray().map(function e(t){let n;if(t.nodeName){n={type:t.nodeName};const r=t.getAttributes();Object.keys(r).length&&(n.attrs=r);const o=t.toArray();o.length&&(n.content=o.map(e).flat())}else n=t.toDelta().map(e=>{const t={type:"text",text:e.insert};return e.attributes&&(t.marks=Object.keys(e.attributes).map(t=>{const n=e.attributes[t],r={type:t};return Object.keys(n)&&(r.attrs=n),r})),t});return n})}}const ue=(e,t,n)=>e!==t,de=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode(""),o=document.createTextNode("");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},fe=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),pe=/^#[0-9a-fA-F]{6}$/,he=(e,t,n,r,i)=>{const a=_.getState(e),s=a.doc,l=[];return null!=a.snapshot||null!=a.prevSnapshot||0===a.binding.mapping.size?o.DecorationSet.create(e.doc,[]):(t.getStates().forEach((t,c)=>{if(n(s.clientID,c,t)&&null!=t.cursor){const n=t.user||{};null==n.color?n.color="#ffa500":pe.test(n.color)||console.warn("A user uses an unsupported color format",n),null==n.name&&(n.name=`User: ${c}`);let u=oe(s,a.type,b.createRelativePositionFromJSON(t.cursor.anchor),a.binding.mapping),d=oe(s,a.type,b.createRelativePositionFromJSON(t.cursor.head),a.binding.mapping);if(null!==u&&null!==d){const t=k.max(e.doc.content.size-1,0);u=k.min(u,t),d=k.min(d,t),l.push(o.Decoration.widget(d,()=>r(n),{key:c+"",side:10}));const a=k.min(u,d),s=k.max(u,d);l.push(o.Decoration.inline(a,s,i(n),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),o.DecorationSet.create(e.doc,l))},me=new Set(["paragraph"]),ge=(e,t)=>!(e instanceof r.Item&&e.content instanceof r.ContentType&&(e.content.type instanceof r.Text||e.content.type instanceof r.XmlElement&&t.has(e.content.type.nodeName))&&0!==e.content.type._length);t.ProsemirrorBinding=L,t.absolutePositionToRelativePosition=ne,t.createDecorations=he,t.defaultAwarenessStateFilter=ue,t.defaultCursorBuilder=de,t.defaultDeleteFilter=ge,t.defaultProtectedNodes=me,t.defaultSelectionBuilder=fe,t.getRelativeSelection=R,t.initProseMirrorDoc=(e,t)=>{const n=new Map,r=e.toArray().map(e=>B(e,t,n)).filter(e=>null!==e);return{doc:t.topNodeType.create(null,s.Fragment.fromArray(r)),mapping:n}},t.isVisible=P,t.prosemirrorJSONToYDoc=function(e,t,n="prosemirror"){return ae(s.Node.fromJSON(e,t),n)},t.prosemirrorJSONToYXmlFragment=function(e,t,n){return se(s.Node.fromJSON(e,t),n)},t.prosemirrorToYDoc=ae,t.prosemirrorToYXmlFragment=se,t.redo=e=>{const t=N.getState(e).undoManager;if(null!=t)return t.redo(),!0},t.relativePositionToAbsolutePosition=oe,t.setMeta=te,t.undo=e=>{const t=N.getState(e).undoManager;if(null!=t)return t.undo(),!0},t.updateYFragment=X,t.yCursorPlugin=(e,{awarenessStateFilter:t=ue,cursorBuilder:n=de,selectionBuilder:r=fe,getSelection:o=e=>e.selection}={},a="cursor")=>new i.Plugin({key:j,state:{init(o,i){return he(i,e,t,n,r)},apply(o,i,a,s){const l=_.getState(s),c=o.getMeta(j);return l&&l.isChangeOrigin||c&&c.awarenessUpdated?he(s,e,t,n,r):i.map(o.mapping,o.doc)}},props:{decorations:e=>j.getState(e)},view:t=>{const n=()=>{t.docView&&te(t,j,{awarenessUpdated:!0})},r=()=>{const n=_.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){const i=o(t.state),s=ne(i.anchor,n.type,n.binding.mapping),l=ne(i.head,n.type,n.binding.mapping);null!=r.cursor&&b.compareRelativePositions(b.createRelativePositionFromJSON(r.cursor.anchor),s)&&b.compareRelativePositions(b.createRelativePositionFromJSON(r.cursor.head),l)||e.setLocalStateField(a,{anchor:s,head:l})}else null!=r.cursor&&null!==oe(n.doc,n.type,b.createRelativePositionFromJSON(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(a,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy:()=>{t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(a,null)}}}}),t.yCursorPluginKey=j,t.yDocToProsemirror=function(e,t){const n=le(t);return s.Node.fromJSON(e,n)},t.yDocToProsemirrorJSON=le,t.ySyncPlugin=(e,{colors:t=I,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:a}={})=>{let s=!1;const l=new L(e,a),c=new i.Plugin({props:{editable:e=>{const t=_.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:_,state:{init:(o,i)=>({type:e,doc:e.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(e,t)=>{const n=e.getMeta(_);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==l.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||E.timeout(0,()=>{null!=l.prosemirrorView&&(null==n.restore?l._renderSnapshot(n.snapshot,n.prevSnapshot,t):(l._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))})),t}},view:e=>(l.initView(e),null==a&&l._forceRerender(),o(),{update:()=>{const t=c.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(s||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(s=!0,!1===t.addToHistory&&!t.isChangeOrigin){const t=N.getState(e.state),n=t&&t.undoManager;n&&n.stopCapturing()}l.mux(()=>{t.doc.transact(n=>{n.meta.set("addToHistory",t.addToHistory),l._prosemirrorChanged(e.state.doc)},_)})}},destroy:()=>{l.destroy()}})});return c},t.ySyncPluginKey=_,t.yUndoPlugin=({protectedNodes:e=me,trackedOrigins:t=[],undoManager:n=null}={})=>new i.Plugin({key:N,state:{init:(o,i)=>{const a=_.getState(i),s=n||new r.UndoManager(a.type,{trackedOrigins:new Set([_].concat(t)),deleteFilter:t=>ge(t,e),captureTransaction:e=>!1!==e.meta.get("addToHistory")});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(e,t,n,r)=>{const o=_.getState(r).binding,i=t.undoManager,a=i.undoStack.length>0,s=i.redoStack.length>0;return o?{undoManager:i,prevSel:R(o,n),hasUndoOps:a,hasRedoOps:s}:a!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view:e=>{const t=_.getState(e.state),n=N.getState(e.state).undoManager;return n.on("stack-item-added",({stackItem:n})=>{const r=t.binding;r&&n.meta.set(r,N.getState(e.state).prevSel)}),n.on("stack-item-popped",({stackItem:e})=>{const n=t.binding;n&&(n.beforeTransactionSelection=e.meta.get(n)||n.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}}),t.yUndoPluginKey=N,t.yXmlFragmentToProseMirrorFragment=ie,t.yXmlFragmentToProseMirrorRootNode=(e,t)=>t.topNodeType.create(null,ie(e,t)),t.yXmlFragmentToProsemirror=function(e,t){const n=ce(t);return s.Node.fromJSON(e,n)},t.yXmlFragmentToProsemirrorJSON=ce},43145:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{A:function(){return r}})},64467:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(20816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},58168:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:function(){return r}})},89379:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(64467);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},80045:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(98587);function o(e,t){if(null==e)return{};var n,o,i=(0,r.A)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},98587:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:function(){return r}})},80296:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(27800);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||(0,r.A)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},45458:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(43145),o=n(27800);function i(e){return function(e){if(Array.isArray(e))return(0,r.A)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},20816:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(82284);function o(e){var t=function(e){if("object"!=(0,r.A)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=(0,r.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},82284:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:function(){return r}})},27800:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(43145);function o(e,t){if(e){if("string"==typeof e)return(0,r.A)(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(e,t):void 0}}},95361:function(e,t,n){"use strict";n.d(t,{BN:function(){return g},ER:function(){return v},Ej:function(){return y},RK:function(){return l},UE:function(){return s},UU:function(){return c},__:function(){return a},cY:function(){return m},jD:function(){return f},mG:function(){return h},rD:function(){return i}});var r=n(97193);function o(e,t,n){let{reference:o,floating:i}=e;const a=(0,r.TV)(t),s=(0,r.Dz)(t),l=(0,r.sq)(s),c=(0,r.C0)(t),u="y"===a,d=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,p=o[l]/2-i[l]/2;let h;switch(c){case"top":h={x:d,y:o.y-i.height};break;case"bottom":h={x:d,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:f};break;case"left":h={x:o.x-i.width,y:f};break;default:h={x:o.x,y:o.y}}switch((0,r.Sg)(t)){case"start":h[s]-=p*(n&&u?-1:1);break;case"end":h[s]+=p*(n&&u?-1:1)}return h}const i=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,l=a.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=o(u,r,c),p=r,h={},m=0;for(let n=0;n<l.length;n++){const{name:a,fn:g}=l[n],{x:v,y,data:b,reset:w}=await g({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});d=null!=v?v:d,f=null!=y?y:f,h={...h,[a]:{...h[a],...b}},w&&m<=50&&(m++,"object"==typeof w&&(w.placement&&(p=w.placement),w.rects&&(u=!0===w.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:d,y:f}=o(u,p,c)),n=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:h}};async function a(e,t){var n;void 0===t&&(t={});const{x:o,y:i,platform:a,rects:s,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=(0,r._3)(t,e),m=(0,r.nI)(h),g=l[p?"floating"===f?"reference":"floating":f],v=(0,r.B1)(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(g)))||n?g:g.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y="floating"===f?{x:o,y:i,width:s.floating.width,height:s.floating.height}:s.reference,b=await(null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating)),w=await(null==a.isElement?void 0:a.isElement(b))&&await(null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},k=(0,r.B1)(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-k.top+m.top)/w.y,bottom:(k.bottom-v.bottom+m.bottom)/w.y,left:(v.left-k.left+m.left)/w.x,right:(k.right-v.right+m.right)/w.x}}const s=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:a,platform:s,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=(0,r._3)(e,t)||{};if(null==u)return{};const f=(0,r.nI)(d),p={x:n,y:o},h=(0,r.Dz)(i),m=(0,r.sq)(h),g=await s.getDimensions(u),v="y"===h,y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",k=a.reference[m]+a.reference[h]-p[h]-a.floating[m],x=p[h]-a.reference[h],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let C=S?S[w]:0;C&&await(null==s.isElement?void 0:s.isElement(S))||(C=l.floating[w]||a.floating[m]);const M=k/2-x/2,O=C/2-g[m]/2-1,A=(0,r.jk)(f[y],O),E=(0,r.jk)(f[b],O),T=A,_=C-g[m]-E,N=C/2-g[m]/2+M,j=(0,r.qE)(T,N,_),P=!c.arrow&&null!=(0,r.Sg)(i)&&N!==j&&a.reference[m]/2-(N<T?A:E)-g[m]/2<0,I=P?N<T?N-T:N-_:0;return{[h]:p[h]+I,data:{[h]:j,centerOffset:N-j-I,...P&&{alignmentOffset:I}},reset:P}}}),l=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,i;const{rects:s,middlewareData:l,placement:c,platform:u,elements:d}=t,{crossAxis:f=!1,alignment:p,allowedPlacements:h=r.DD,autoAlignment:m=!0,...g}=(0,r._3)(e,t),v=void 0!==p||h===r.DD?function(e,t,n){return(e?[...n.filter(t=>(0,r.Sg)(t)===e),...n.filter(t=>(0,r.Sg)(t)!==e)]:n.filter(e=>(0,r.C0)(e)===e)).filter(n=>!e||(0,r.Sg)(n)===e||!!t&&(0,r.aD)(n)!==n)}(p||null,m,h):h,y=await a(t,g),b=(null==(n=l.autoPlacement)?void 0:n.index)||0,w=v[b];if(null==w)return{};const k=(0,r.w7)(w,s,await(null==u.isRTL?void 0:u.isRTL(d.floating)));if(c!==w)return{reset:{placement:v[0]}};const x=[y[(0,r.C0)(w)],y[k[0]],y[k[1]]],S=[...(null==(o=l.autoPlacement)?void 0:o.overflows)||[],{placement:w,overflows:x}],C=v[b+1];if(C)return{data:{index:b+1,overflows:S},reset:{placement:C}};const M=S.map(e=>{const t=(0,r.Sg)(e.placement);return[e.placement,t&&f?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),O=(null==(i=M.filter(e=>e[2].slice(0,(0,r.Sg)(e[0])?2:3).every(e=>e<=0))[0])?void 0:i[0])||M[0][0];return O!==c?{data:{index:b+1,overflows:S},reset:{placement:O}}:{}}}},c=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:s,rects:l,initialPlacement:c,platform:u,elements:d}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=(0,r._3)(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const b=(0,r.C0)(i),w=(0,r.TV)(c),k=(0,r.C0)(c)===c,x=await(null==u.isRTL?void 0:u.isRTL(d.floating)),S=h||(k||!v?[(0,r.bV)(c)]:(0,r.WJ)(c)),C="none"!==g;!h&&C&&S.push(...(0,r.lP)(c,v,g,x));const M=[c,...S],O=await a(t,y),A=[];let E=(null==(o=s.flip)?void 0:o.overflows)||[];if(f&&A.push(O[b]),p){const e=(0,r.w7)(i,l,x);A.push(O[e[0]],O[e[1]])}if(E=[...E,{placement:i,overflows:A}],!A.every(e=>e<=0)){var T,_;const e=((null==(T=s.flip)?void 0:T.index)||0)+1,t=M[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let n=null==(_=E.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:_.placement;if(!n)switch(m){case"bestFit":{var N;const e=null==(N=E.filter(e=>{if(C){const t=(0,r.TV)(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:N[0];e&&(n=e);break}case"initialPlacement":n=c}if(i!==n)return{reset:{placement:n}}}return{}}}};function u(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function d(e){return r.r_.some(t=>e[t]>=0)}const f=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...i}=(0,r._3)(e,t);switch(o){case"referenceHidden":{const e=u(await a(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:d(e)}}}case"escaped":{const e=u(await a(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:d(e)}}}default:return{}}}}};function p(e){const t=(0,r.jk)(...e.map(e=>e.left)),n=(0,r.jk)(...e.map(e=>e.top));return{x:t,y:n,width:(0,r.T9)(...e.map(e=>e.right))-t,height:(0,r.T9)(...e.map(e=>e.bottom))-n}}const h=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:o,rects:i,platform:a,strategy:s}=t,{padding:l=2,x:c,y:u}=(0,r._3)(e,t),d=Array.from(await(null==a.getClientRects?void 0:a.getClientRects(o.reference))||[]),f=function(e){const t=e.slice().sort((e,t)=>e.y-t.y),n=[];let o=null;for(let e=0;e<t.length;e++){const r=t[e];!o||r.y-o.y>o.height/2?n.push([r]):n[n.length-1].push(r),o=r}return n.map(e=>(0,r.B1)(p(e)))}(d),h=(0,r.B1)(p(d)),m=(0,r.nI)(l),g=await a.getElementRects({reference:{getBoundingClientRect:function(){if(2===f.length&&f[0].left>f[1].right&&null!=c&&null!=u)return f.find(e=>c>e.left-m.left&&c<e.right+m.right&&u>e.top-m.top&&u<e.bottom+m.bottom)||h;if(f.length>=2){if("y"===(0,r.TV)(n)){const e=f[0],t=f[f.length-1],o="top"===(0,r.C0)(n),i=e.top,a=t.bottom,s=o?e.left:t.left,l=o?e.right:t.right;return{top:i,bottom:a,left:s,right:l,width:l-s,height:a-i,x:s,y:i}}const e="left"===(0,r.C0)(n),t=(0,r.T9)(...f.map(e=>e.right)),o=(0,r.jk)(...f.map(e=>e.left)),i=f.filter(n=>e?n.left===o:n.right===t),a=i[0].top,s=i[i.length-1].bottom;return{top:a,bottom:s,left:o,right:t,width:t-o,height:s-a,x:o,y:a}}return h}},floating:o.floating,strategy:s});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},m=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:a,placement:s,middlewareData:l}=t,c=await async function(e,t){const{placement:n,platform:o,elements:i}=e,a=await(null==o.isRTL?void 0:o.isRTL(i.floating)),s=(0,r.C0)(n),l=(0,r.Sg)(n),c="y"===(0,r.TV)(n),u=["left","top"].includes(s)?-1:1,d=a&&c?-1:1,f=(0,r._3)(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:m}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&"number"==typeof m&&(h="end"===l?-1*m:m),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}(t,e);return s===(null==(n=l.offset)?void 0:n.placement)&&null!=(o=l.arrow)&&o.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:s}}}}},g=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:s=!0,crossAxis:l=!1,limiter:c={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...u}=(0,r._3)(e,t),d={x:n,y:o},f=await a(t,u),p=(0,r.TV)((0,r.C0)(i)),h=(0,r.PG)(p);let m=d[h],g=d[p];if(s){const e="y"===h?"bottom":"right",t=m+f["y"===h?"top":"left"],n=m-f[e];m=(0,r.qE)(t,m,n)}if(l){const e="y"===p?"bottom":"right",t=g+f["y"===p?"top":"left"],n=g-f[e];g=(0,r.qE)(t,g,n)}const v=c.fn({...t,[h]:m,[p]:g});return{...v,data:{x:v.x-n,y:v.y-o}}}}},v=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:i,rects:a,middlewareData:s}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=(0,r._3)(e,t),d={x:n,y:o},f=(0,r.TV)(i),p=(0,r.PG)(f);let h=d[p],m=d[f];const g=(0,r._3)(l,t),v="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const e="y"===p?"height":"width",t=a.reference[p]-a.floating[e]+v.mainAxis,n=a.reference[p]+a.reference[e]-v.mainAxis;h<t?h=t:h>n&&(h=n)}if(u){var y,b;const e="y"===p?"width":"height",t=["top","left"].includes((0,r.C0)(i)),n=a.reference[f]-a.floating[e]+(t&&(null==(y=s.offset)?void 0:y[f])||0)+(t?0:v.crossAxis),o=a.reference[f]+a.reference[e]+(t?0:(null==(b=s.offset)?void 0:b[f])||0)-(t?v.crossAxis:0);m<n?m=n:m>o&&(m=o)}return{[p]:h,[f]:m}}}},y=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:s}=t,{apply:l=()=>{},...c}=(0,r._3)(e,t),u=await a(t,c),d=(0,r.C0)(n),f=(0,r.Sg)(n),p="y"===(0,r.TV)(n),{width:h,height:m}=o.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=f===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(v=d,g="end"===f?"top":"bottom");const y=m-u.top-u.bottom,b=h-u.left-u.right,w=(0,r.jk)(m-u[g],y),k=(0,r.jk)(h-u[v],b),x=!t.middlewareData.shift;let S=w,C=k;if(p?C=f||x?(0,r.jk)(k,b):b:S=f||x?(0,r.jk)(w,y):y,x&&!f){const e=(0,r.T9)(u.left,0),t=(0,r.T9)(u.right,0),n=(0,r.T9)(u.top,0),o=(0,r.T9)(u.bottom,0);p?C=h-2*(0!==e||0!==t?e+t:(0,r.T9)(u.left,u.right)):S=m-2*(0!==n||0!==o?n+o:(0,r.T9)(u.top,u.bottom))}await l({...t,availableWidth:C,availableHeight:S});const M=await i.getDimensions(s.floating);return h!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}}},18491:function(e,t,n){"use strict";n.d(t,{BN:function(){return C},ER:function(){return _},Ej:function(){return O},RK:function(){return S},UE:function(){return E},UU:function(){return M},__:function(){return k},cY:function(){return x},iD:function(){return b},jD:function(){return A},ll:function(){return w},mG:function(){return T},rD:function(){return N}});var r=n(97193),o=n(95361),i=n(86635);function a(e){const t=(0,i.L9)(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const a=(0,i.sb)(e),s=a?e.offsetWidth:n,l=a?e.offsetHeight:o,c=(0,r.LI)(n)!==s||(0,r.LI)(o)!==l;return c&&(n=s,o=l),{width:n,height:o,$:c}}function s(e){return(0,i.vq)(e)?e:e.contextElement}function l(e){const t=s(e);if(!(0,i.sb)(t))return(0,r.Jx)(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:c}=a(t);let u=(c?(0,r.LI)(n.width):n.width)/o,d=(c?(0,r.LI)(n.height):n.height)/l;return u&&Number.isFinite(u)||(u=1),d&&Number.isFinite(d)||(d=1),{x:u,y:d}}const c=(0,r.Jx)(0);function u(e){const t=(0,i.zk)(e);return(0,i.Tc)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:c}function d(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),c=s(e);let d=(0,r.Jx)(1);t&&(o?(0,i.vq)(o)&&(d=l(o)):d=l(e));const f=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==(0,i.zk)(e))&&t}(c,n,o)?u(c):(0,r.Jx)(0);let p=(a.left+f.x)/d.x,h=(a.top+f.y)/d.y,m=a.width/d.x,g=a.height/d.y;if(c){const e=(0,i.zk)(c),t=o&&(0,i.vq)(o)?(0,i.zk)(o):o;let n=e,r=(0,i._m)(n);for(;r&&o&&t!==n;){const e=l(r),t=r.getBoundingClientRect(),o=(0,i.L9)(r),a=t.left+(r.clientLeft+parseFloat(o.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(o.paddingTop))*e.y;p*=e.x,h*=e.y,m*=e.x,g*=e.y,p+=a,h+=s,n=(0,i.zk)(r),r=(0,i._m)(n)}}return(0,r.B1)({width:m,height:g,x:p,y:h})}function f(e,t){const n=(0,i.CP)(e).scrollLeft;return t?t.left+n:d((0,i.ep)(e)).left+n}function p(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=(0,i.zk)(e),r=(0,i.ep)(e),o=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,l=0,c=0;if(o){a=o.width,s=o.height;const e=(0,i.Tc)();(!e||e&&"fixed"===t)&&(l=o.offsetLeft,c=o.offsetTop)}return{width:a,height:s,x:l,y:c}}(e,n);else if("document"===t)o=function(e){const t=(0,i.ep)(e),n=(0,i.CP)(e),o=e.ownerDocument.body,a=(0,r.T9)(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=(0,r.T9)(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let l=-n.scrollLeft+f(e);const c=-n.scrollTop;return"rtl"===(0,i.L9)(o).direction&&(l+=(0,r.T9)(t.clientWidth,o.clientWidth)-a),{width:a,height:s,x:l,y:c}}((0,i.ep)(e));else if((0,i.vq)(t))o=function(e,t){const n=d(e,!0,"fixed"===t),o=n.top+e.clientTop,a=n.left+e.clientLeft,s=(0,i.sb)(e)?l(e):(0,r.Jx)(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:o*s.y}}(t,n);else{const n=u(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return(0,r.B1)(o)}function h(e,t){const n=(0,i.$4)(e);return!(n===t||!(0,i.vq)(n)||(0,i.eu)(n))&&("fixed"===(0,i.L9)(n).position||h(n,t))}function m(e,t,n){const o=(0,i.sb)(t),a=(0,i.ep)(t),s="fixed"===n,l=d(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const u=(0,r.Jx)(0);if(o||!o&&!s)if(("body"!==(0,i.mq)(t)||(0,i.ZU)(a))&&(c=(0,i.CP)(t)),o){const e=d(t,!0,s,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else a&&(u.x=f(a));let p=0,h=0;if(a&&!o&&!s){const e=a.getBoundingClientRect();h=e.top+c.scrollTop,p=e.left+c.scrollLeft-f(a,e)}return{x:l.left+c.scrollLeft-u.x-p,y:l.top+c.scrollTop-u.y-h,width:l.width,height:l.height}}function g(e){return"static"===(0,i.L9)(e).position}function v(e,t){if(!(0,i.sb)(e)||"fixed"===(0,i.L9)(e).position)return null;if(t)return t(e);let n=e.offsetParent;return(0,i.ep)(e)===n&&(n=n.ownerDocument.body),n}function y(e,t){const n=(0,i.zk)(e);if((0,i.Tf)(e))return n;if(!(0,i.sb)(e)){let t=(0,i.$4)(e);for(;t&&!(0,i.eu)(t);){if((0,i.vq)(t)&&!g(t))return t;t=(0,i.$4)(t)}return n}let r=v(e,t);for(;r&&(0,i.Lv)(r)&&g(r);)r=v(r,t);return r&&(0,i.eu)(r)&&g(r)&&!(0,i.sQ)(r)?n:r||(0,i.gJ)(e)||n}const b={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:a}=e;const s="fixed"===a,c=(0,i.ep)(o),u=!!t&&(0,i.Tf)(t.floating);if(o===c||u&&s)return n;let f={scrollLeft:0,scrollTop:0},p=(0,r.Jx)(1);const h=(0,r.Jx)(0),m=(0,i.sb)(o);if((m||!m&&!s)&&(("body"!==(0,i.mq)(o)||(0,i.ZU)(c))&&(f=(0,i.CP)(o)),(0,i.sb)(o))){const e=d(o);p=l(o),h.x=e.x+o.clientLeft,h.y=e.y+o.clientTop}return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+h.x,y:n.y*p.y-f.scrollTop*p.y+h.y}},getDocumentElement:i.ep,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:a}=e;const s=[..."clippingAncestors"===n?(0,i.Tf)(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=(0,i.v9)(e,[],!1).filter(e=>(0,i.vq)(e)&&"body"!==(0,i.mq)(e)),o=null;const a="fixed"===(0,i.L9)(e).position;let s=a?(0,i.$4)(e):e;for(;(0,i.vq)(s)&&!(0,i.eu)(s);){const t=(0,i.L9)(s),n=(0,i.sQ)(s);n||"fixed"!==t.position||(o=null),(a?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||(0,i.ZU)(s)&&!n&&h(e,s))?r=r.filter(e=>e!==s):o=t,s=(0,i.$4)(s)}return t.set(e,r),r}(t,this._c):[].concat(n),o],l=s[0],c=s.reduce((e,n)=>{const o=p(t,n,a);return e.top=(0,r.T9)(o.top,e.top),e.right=(0,r.jk)(o.right,e.right),e.bottom=(0,r.jk)(o.bottom,e.bottom),e.left=(0,r.T9)(o.left,e.left),e},p(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:y,getElementRects:async function(e){const t=this.getOffsetParent||y,n=this.getDimensions,r=await n(e.floating);return{reference:m(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=a(e);return{width:t,height:n}},getScale:l,isElement:i.vq,isRTL:function(e){return"rtl"===(0,i.L9)(e).direction}};function w(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:f=!1}=o,p=s(e),h=a||l?[...p?(0,i.v9)(p):[],...(0,i.v9)(t)]:[];h.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)});const m=p&&u?function(e,t){let n,o=null;const a=(0,i.ep)(e);function s(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function i(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),s();const{left:u,top:d,width:f,height:p}=e.getBoundingClientRect();if(l||t(),!f||!p)return;const h={rootMargin:-(0,r.RI)(d)+"px "+-(0,r.RI)(a.clientWidth-(u+f))+"px "+-(0,r.RI)(a.clientHeight-(d+p))+"px "+-(0,r.RI)(u)+"px",threshold:(0,r.T9)(0,(0,r.jk)(1,c))||1};let m=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!m)return i();t?i(!1,t):n=setTimeout(()=>{i(!1,1e-7)},1e3)}m=!1}try{o=new IntersectionObserver(g,{...h,root:a.ownerDocument})}catch(e){o=new IntersectionObserver(g,h)}o.observe(e)}(!0),s}(p,n):null;let g,v=-1,y=null;c&&(y=new ResizeObserver(e=>{let[r]=e;r&&r.target===p&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var e;null==(e=y)||e.observe(t)})),n()}),p&&!f&&y.observe(p),y.observe(t));let b=f?d(e):null;return f&&function t(){const r=d(e);!b||r.x===b.x&&r.y===b.y&&r.width===b.width&&r.height===b.height||n(),b=r,g=requestAnimationFrame(t)}(),n(),()=>{var e;h.forEach(e=>{a&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)}),null==m||m(),null==(e=y)||e.disconnect(),y=null,f&&cancelAnimationFrame(g)}}const k=o.__,x=o.cY,S=o.RK,C=o.BN,M=o.UU,O=o.Ej,A=o.jD,E=o.UE,T=o.mG,_=o.ER,N=(e,t,n)=>{const r=new Map,i={platform:b,...n},a={...i.platform,_c:r};return(0,o.rD)(e,t,{...i,platform:a})}},86635:function(e,t,n){"use strict";function r(){return"undefined"!=typeof window}function o(e){return s(e)?(e.nodeName||"").toLowerCase():"#document"}function i(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function a(e){var t;return null==(t=(s(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function s(e){return!!r()&&(e instanceof Node||e instanceof i(e).Node)}function l(e){return!!r()&&(e instanceof Element||e instanceof i(e).Element)}function c(e){return!!r()&&(e instanceof HTMLElement||e instanceof i(e).HTMLElement)}function u(e){return!(!r()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof i(e).ShadowRoot)}function d(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=y(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function f(e){return["table","td","th"].includes(o(e))}function p(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function h(e){const t=g(),n=l(e)?y(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function m(e){let t=w(e);for(;c(t)&&!v(t);){if(h(t))return t;if(p(t))return null;t=w(t)}return null}function g(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function v(e){return["html","body","#document"].includes(o(e))}function y(e){return i(e).getComputedStyle(e)}function b(e){return l(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function w(e){if("html"===o(e))return e;const t=e.assignedSlot||e.parentNode||u(e)&&e.host||a(e);return u(t)?t.host:t}function k(e){const t=w(e);return v(t)?e.ownerDocument?e.ownerDocument.body:e.body:c(t)&&d(t)?t:k(t)}function x(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=k(e),a=o===(null==(r=e.ownerDocument)?void 0:r.body),s=i(o);if(a){const e=S(s);return t.concat(s,s.visualViewport||[],d(o)?o:[],e&&n?x(e):[])}return t.concat(o,x(o,[],n))}function S(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}n.d(t,{$4:function(){return w},CP:function(){return b},L9:function(){return y},Lv:function(){return f},Ng:function(){return u},Tc:function(){return g},Tf:function(){return p},ZU:function(){return d},_m:function(){return S},ep:function(){return a},eu:function(){return v},gJ:function(){return m},mq:function(){return o},sQ:function(){return h},sb:function(){return c},v9:function(){return x},vq:function(){return l},zk:function(){return i}})},97193:function(e,t,n){"use strict";n.d(t,{B1:function(){return A},C0:function(){return m},DD:function(){return i},Dz:function(){return w},Jx:function(){return u},LI:function(){return l},PG:function(){return v},RI:function(){return c},Sg:function(){return g},T9:function(){return s},TV:function(){return b},WJ:function(){return x},_3:function(){return h},aD:function(){return S},bV:function(){return M},jk:function(){return a},lP:function(){return C},nI:function(){return O},qE:function(){return p},r_:function(){return r},sq:function(){return y},w7:function(){return k}});const r=["top","right","bottom","left"],o=["start","end"],i=r.reduce((e,t)=>e.concat(t,t+"-"+o[0],t+"-"+o[1]),[]),a=Math.min,s=Math.max,l=Math.round,c=Math.floor,u=e=>({x:e,y:e}),d={left:"right",right:"left",bottom:"top",top:"bottom"},f={start:"end",end:"start"};function p(e,t,n){return s(e,a(t,n))}function h(e,t){return"function"==typeof e?e(t):e}function m(e){return e.split("-")[0]}function g(e){return e.split("-")[1]}function v(e){return"x"===e?"y":"x"}function y(e){return"y"===e?"height":"width"}function b(e){return["top","bottom"].includes(m(e))?"y":"x"}function w(e){return v(b(e))}function k(e,t,n){void 0===n&&(n=!1);const r=g(e),o=w(e),i=y(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=M(a)),[a,M(a)]}function x(e){const t=M(e);return[S(e),t,S(t)]}function S(e){return e.replace(/start|end/g,e=>f[e])}function C(e,t,n,r){const o=g(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(m(e),"start"===n,r);return o&&(i=i.map(e=>e+"-"+o),t&&(i=i.concat(i.map(S)))),i}function M(e){return e.replace(/left|right|bottom|top/g,e=>d[e])}function O(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function A(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}},50260:function(e,t,n){"use strict";n.d(t,{HT:function(){return i},HV:function(){return r},S2:function(){return o},cy:function(){return l},t8:function(){return s},zN:function(){return a}});const r=e=>e[e.length-1],o=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},i=Array.from,a=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},s=(e,t)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},l=Array.isArray},17316:function(e,t,n){"use strict";n.d(t,{CW:function(){return m},D1:function(){return i},D7:function(){return l},Dk:function(){return r},KD:function(){return o},KJ:function(){return s},P1:function(){return d},WD:function(){return f},WY:function(){return u},vZ:function(){return h},wn:function(){return a},wt:function(){return c},yK:function(){return p}});const r=1,o=2,i=4,a=8,s=32,l=64,c=128,u=31,d=63,f=127,p=2097151,h=2147483647,m=4294967295},25968:function(e,t,n){"use strict";n.d(t,{$C:function(){return d},Ib:function(){return C},Jg:function(){return w},VQ:function(){return x},bo:function(){return p},cQ:function(){return k},cw:function(){return m},ov:function(){return f},pT:function(){return g},t3:function(){return v},xK:function(){return S},xh:function(){return h}});var r=n(17316),o=n(63043),i=n(69704),a=n(32140),s=n(6663);const l=s.create("Unexpected end of array"),c=s.create("Integer out of Range");class u{constructor(e){this.arr=e,this.pos=0}}const d=e=>new u(e),f=e=>e.pos!==e.arr.length,p=e=>((e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,m(e)),h=e=>e.arr[e.pos++],m=e=>{let t=0,n=1;const o=e.arr.length;for(;e.pos<o;){const o=e.arr[e.pos++];if(t+=(o&r.WD)*n,n*=128,o<r.wt)return t;if(t>i.Is)throw c}throw l},g=e=>{let t=e.arr[e.pos++],n=t&r.P1,o=64;const a=(t&r.D7)>0?-1:1;if(!(t&r.wt))return a*n;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],n+=(t&r.WD)*o,o*=128,t<r.wt)return a*n;if(n>i.Is)throw c}throw l},v=a.tv?e=>a.tv.decode(p(e)):e=>{let t=m(e);if(0===t)return"";{let n=String.fromCodePoint(h(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(h(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},y=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},b=[e=>{},e=>null,g,e=>y(e,4).getFloat32(0,!1),e=>y(e,8).getFloat64(0,!1),e=>y(e,8).getBigInt64(0,!1),e=>!1,e=>!0,v,e=>{const t=m(e),n={};for(let r=0;r<t;r++)n[v(e)]=w(e);return n},e=>{const t=m(e),n=[];for(let r=0;r<t;r++)n.push(w(e));return n},p],w=e=>b[127-h(e)](e);class k extends u{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),f(this)?this.count=m(this)+1:this.count=-1),this.count--,this.s}}class x extends u{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=g(this);const e=o.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=m(this)+2)}return this.count--,this.s}}class S extends u{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=g(this),t=1&e;this.diff=o.floor(e/2),this.count=1,t&&(this.count=m(this)+2)}return this.s+=this.diff,this.count--,this.s}}class C{constructor(e){this.decoder=new x(e),this.str=v(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},90766:function(e,t,n){"use strict";n.r(t),n.d(t,{simpleDiff:function(){return s},simpleDiffArray:function(){return l},simpleDiffString:function(){return a},simpleDiffStringWithCursor:function(){return c}});var r=n(48957);const o=/[\uD800-\uDBFF]/,i=/[\uDC00-\uDFFF]/,a=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&o.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&i.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},s=a,l=(e,t,n=r.wh)=>{let o=0,i=0;for(;o<e.length&&o<t.length&&n(e[o],t[o]);)o++;for(;i+o<e.length&&i+o<t.length&&n(e[e.length-i-1],t[t.length-i-1]);)i++;return{index:o,remove:e.length-o-i,insert:t.slice(o,t.length-i)}},c=(e,t,n)=>{let r=0,a=0;for(;r<e.length&&r<t.length&&e[r]===t[r]&&r<n;)r++;for(r>0&&o.test(e[r-1])&&r--;a+r<e.length&&a+r<t.length&&e[e.length-a-1]===t[t.length-a-1];)a++;for(a>0&&i.test(e[e.length-a])&&a--;a+r<e.length&&a+r<t.length&&e[r]===t[r];)r++;return r>0&&o.test(e[r-1])&&r--,{index:r,remove:e.length-r-a,insert:t.slice(r,t.length-a)}}},52581:function(e,t,n){"use strict";n.r(t),n.d(t,{CDATA_SECTION_NODE:function(){return L},COMMENT_NODE:function(){return F},DOCUMENT_FRAGMENT_NODE:function(){return z},DOCUMENT_NODE:function(){return B},DOCUMENT_TYPE_NODE:function(){return H},ELEMENT_NODE:function(){return D},TEXT_NODE:function(){return R},addEventListener:function(){return g},addEventListeners:function(){return y},append:function(){return h},appendChild:function(){return I},canvas:function(){return k},checkNodeType:function(){return $},createDocumentFragment:function(){return s},createElement:function(){return a},createTextNode:function(){return l},doc:function(){return i},domParser:function(){return c},element:function(){return w},emitCustomEvent:function(){return u},fragment:function(){return p},getElementById:function(){return E},insertBefore:function(){return P},isParentOf:function(){return V},mapToStyleString:function(){return M},pairToStyleString:function(){return S},pairsToStyleString:function(){return C},parseElement:function(){return N},parseFragment:function(){return _},querySelector:function(){return O},querySelectorAll:function(){return A},remove:function(){return m},removeEventListener:function(){return v},removeEventListeners:function(){return b},replaceWith:function(){return j},setAttributes:function(){return d},setAttributesMap:function(){return f},text:function(){return x}});var r=n(82321),o=n(81711);const i="undefined"!=typeof document?document:{},a=e=>i.createElement(e),s=()=>i.createDocumentFragment(),l=e=>i.createTextNode(e),c="undefined"!=typeof DOMParser?new DOMParser:null,u=(e,t,n)=>e.dispatchEvent(new CustomEvent(t,n)),d=(e,t)=>(r.jJ(t,(t,n)=>{!1===n?e.removeAttribute(t):!0===n?e.setAttribute(t,""):e.setAttribute(t,n)}),e),f=(e,t)=>(t.forEach((t,n)=>{e.setAttribute(n,t)}),e),p=e=>{const t=s();for(let n=0;n<e.length;n++)I(t,e[n]);return t},h=(e,t)=>(I(e,p(t)),e),m=e=>e.remove(),g=(e,t,n)=>e.addEventListener(t,n),v=(e,t,n)=>e.removeEventListener(t,n),y=(e,t)=>(r.jJ(t,(t,n)=>g(e,t,n)),e),b=(e,t)=>(r.jJ(t,(t,n)=>v(e,t,n)),e),w=(e,t=[],n=[])=>h(d(a(e),t),n),k=(e,t)=>{const n=a("canvas");return n.height=t,n.width=e,n},x=l,S=e=>`${e.left}:${e.right};`,C=e=>e.map(S).join(""),M=e=>o.map(e,(e,t)=>`${t}:${e};`).join(""),O=(e,t)=>e.querySelector(t),A=(e,t)=>e.querySelectorAll(t),E=e=>i.getElementById(e),T=e=>c.parseFromString(`<html><body>${e}</body></html>`,"text/html").body,_=e=>p(T(e).childNodes),N=e=>T(e).firstElementChild,j=(e,t)=>e.replaceWith(t),P=(e,t,n)=>e.insertBefore(t,n),I=(e,t)=>e.appendChild(t),D=i.ELEMENT_NODE,R=i.TEXT_NODE,L=i.CDATA_SECTION_NODE,F=i.COMMENT_NODE,B=i.DOCUMENT_NODE,H=i.DOCUMENT_TYPE_NODE,z=i.DOCUMENT_FRAGMENT_NODE,$=(e,t)=>e.nodeType===t,V=(e,t)=>{let n=t.parentNode;for(;n&&n!==e;)n=n.parentNode;return n===e}},81156:function(e,t,n){"use strict";n.d(t,{D$:function(){return O},FA:function(){return E},Fo:function(){return u},Gu:function(){return w},IO:function(){return S},LH:function(){return b},QJ:function(){return f},Qj:function(){return v},Sj:function(){return h},Sw:function(){return T},Vp:function(){return y},cq:function(){return C},xv:function(){return c},zd:function(){return p}});var r=n(63043),o=n(69704),i=n(17316),a=n(32140),s=n(50260);class l{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const c=()=>new l,u=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},d=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},f=d,p=(e,t)=>{for(;t>i.WD;)d(e,i.wt|i.WD&t),t=r.floor(t/128);d(e,i.WD&t)},h=(e,t)=>{const n=r.isNegativeZero(t);for(n&&(t=-t),d(e,(t>i.P1?i.wt:0)|(n?i.D7:0)|i.P1&t),t=r.floor(t/64);t>0;)d(e,(t>i.WD?i.wt:0)|i.WD&t),t=r.floor(t/128)},m=new Uint8Array(3e4),g=m.length/3,v=a.db&&a.db.encodeInto?(e,t)=>{if(t.length<g){const n=a.db.encodeInto(t,m).written||0;p(e,n);for(let t=0;t<n;t++)d(e,m[t])}else w(e,a.Af(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;p(e,r);for(let t=0;t<r;t++)d(e,n.codePointAt(t))},y=(e,t)=>b(e,u(t)),b=(e,t)=>{const n=e.cbuf.length,o=e.cpos,i=r.min(n-o,t.length),a=t.length-i;e.cbuf.set(t.subarray(0,i),o),e.cpos+=i,a>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(r.max(2*n,a)),e.cbuf.set(t.subarray(i)),e.cpos=a)},w=(e,t)=>{p(e,t.byteLength),b(e,t)},k=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*r.max(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},x=new DataView(new ArrayBuffer(4)),S=(e,t)=>{switch(typeof t){case"string":d(e,119),v(e,t);break;case"number":o.Fq(t)&&r.abs(t)<=i.vZ?(d(e,125),h(e,t)):(n=t,x.setFloat32(0,n),x.getFloat32(0)===n?(d(e,124),((e,t)=>{k(e,4).setFloat32(0,t,!1)})(e,t)):(d(e,123),((e,t)=>{k(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":d(e,122),((e,t)=>{k(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)d(e,126);else if(s.cy(t)){d(e,117),p(e,t.length);for(let n=0;n<t.length;n++)S(e,t[n])}else if(t instanceof Uint8Array)d(e,116),w(e,t);else{d(e,118);const n=Object.keys(t);p(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];v(e,o),S(e,t[o])}}break;case"boolean":d(e,t?120:121);break;default:d(e,127)}var n};class C extends l{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&p(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const M=e=>{e.count>0&&(h(e.encoder,1===e.count?e.s:-e.s),e.count>1&&p(e.encoder,e.count-2))};class O{constructor(){this.encoder=new l,this.s=0,this.count=0}write(e){this.s===e?this.count++:(M(this),this.count=1,this.s=e)}toUint8Array(){return M(this),u(this.encoder)}}const A=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);h(e.encoder,t),e.count>1&&p(e.encoder,e.count-2)}};class E{constructor(){this.encoder=new l,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(A(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return A(this),u(this.encoder)}}class T{constructor(){this.sarr=[],this.s="",this.lensE=new O}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new l;return this.sarr.push(this.s),this.s="",v(e,this.sarr.join("")),b(e,this.lensE.toUint8Array()),u(e)}}},7113:function(e,t,n){"use strict";n.r(t),n.d(t,{ensureConf:function(){return w},getConf:function(){return b},getParam:function(){return v},getVariable:function(){return y},hasConf:function(){return k},hasParam:function(){return g},isBrowser:function(){return d},isMac:function(){return f},isNode:function(){return u},production:function(){return x},supportsColor:function(){return S}});var r=n(81711),o=n(32140);let i=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},a=!0;try{"undefined"!=typeof localStorage&&localStorage&&(i=localStorage,a=!1)}catch(e){}const s=i;var l=n(48957),c=n(65606);const u=void 0!==c&&c.release&&/node|io\.js/.test(c.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==c?c:0),d="undefined"!=typeof window&&"undefined"!=typeof document&&!u,f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let p;const h=[],m=()=>{if(void 0===p)if(u){p=r.create();const e=c.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&p.set(t,""),t=r):null!==t?(p.set(t,r),t=null):h.push(r)}null!==t&&p.set(t,"")}else"object"==typeof location?(p=r.create(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");p.set(`--${o.jN(t,"-")}`,n),p.set(`-${o.jN(t,"-")}`,n)}})):p=r.create();return p},g=e=>m().has(e),v=(e,t)=>m().get(e)||t,y=e=>{return void 0===(t=u?c.env[e.toUpperCase().replaceAll("-","_")]:s.getItem(e))?null:t;var t},b=e=>m().get("--"+e)||y(e),w=e=>{const t=b(e);if(null==t)throw new Error(`Expected configuration "${e.toUpperCase().replaceAll("-","_")}"`);return t},k=e=>g("--"+e)||null!==y(e),x=k("production"),S=u&&l.EK(c.env.FORCE_COLOR,["true","1","2"])||!g("--no-colors")&&!k("no-color")&&(!u||c.stdout.isTTY)&&(!u||g("--color")||null!==y("COLORTERM")||(y("TERM")||"").includes("color"))},6663:function(e,t,n){"use strict";n.r(t),n.d(t,{create:function(){return r},methodUnimplemented:function(){return o},unexpectedCase:function(){return i}});const r=e=>new Error(e),o=()=>{throw r("Method unimplemented")},i=()=>{throw r("Unexpected case")}},94311:function(e,t,n){"use strict";n.r(t),n.d(t,{Animation:function(){return d},animationFrame:function(){return f},createDebouncer:function(){return m},enqueue:function(){return i},idleCallback:function(){return h},interval:function(){return u},timeout:function(){return l}});let r=[];const o=()=>{for(let e=0;e<r.length;e++)r[e]();r=[]},i=e=>{r.push(e),1===r.length&&setTimeout(o,0)},a=e=>class{constructor(e){this._=e}destroy(){e(this._)}},s=a(clearTimeout),l=(e,t)=>new s(setTimeout(t,e)),c=a(clearInterval),u=(e,t)=>new c(setInterval(t,e)),d=a(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),f=e=>"undefined"==typeof requestAnimationFrame?l(0,e):new d(requestAnimationFrame(e)),p=a(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)),h=e=>"undefined"!=typeof requestIdleCallback?new p(requestIdleCallback(e)):l(1e3,e),m=e=>{let t=-1;return n=>{clearTimeout(t),n&&(t=setTimeout(n,e))}}},48957:function(e,t,n){"use strict";n.d(t,{EK:function(){return c},OK:function(){return i},id:function(){return a},vo:function(){return l},wh:function(){return s}});var r=n(50260),o=n(37294);const i=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&i(e,t,n+1)}},a=e=>e,s=(e,t)=>e===t,l=(e,t)=>{if(null==e||null==t)return s(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!l(e.get(n),t.get(n)))return!1;break;case Object:if(o.length(e)!==o.length(t))return!1;for(const n in e)if(!o.hasProperty(e,n)||!l(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;break;default:return!1}return!0},c=(e,t)=>t.includes(e);r.cy},81711:function(e,t,n){"use strict";n.r(t),n.d(t,{all:function(){return l},any:function(){return s},copy:function(){return o},create:function(){return r},map:function(){return a},setIfUndefined:function(){return i}});const r=()=>new Map,o=e=>{const t=r();return e.forEach((e,n)=>{t.set(n,e)}),t},i=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},a=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},s=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},l=(e,t)=>{for(const[n,r]of e)if(!t(r,n))return!1;return!0}},63043:function(e,t,n){"use strict";n.r(t),n.d(t,{abs:function(){return i},add:function(){return f},ceil:function(){return o},exp10:function(){return v},floor:function(){return r},imul:function(){return a},isNaN:function(){return m},isNegativeZero:function(){return b},log:function(){return u},log10:function(){return l},log2:function(){return c},max:function(){return h},min:function(){return p},pow:function(){return g},round:function(){return s},sign:function(){return y},sqrt:function(){return d}});const r=Math.floor,o=Math.ceil,i=Math.abs,a=Math.imul,s=Math.round,l=Math.log10,c=Math.log2,u=Math.log,d=Math.sqrt,f=(e,t)=>e+t,p=(e,t)=>e<t?e:t,h=(e,t)=>e>t?e:t,m=Number.isNaN,g=Math.pow,v=e=>Math.pow(10,e),y=Math.sign,b=e=>0!==e?e<0:1/e<0},52550:function(e,t,n){"use strict";n.r(t),n.d(t,{createMutex:function(){return r}});const r=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}}},69704:function(e,t,n){"use strict";n.d(t,{Fq:function(){return a},Is:function(){return i}});var r=n(63043),o=n(17316);const i=Number.MAX_SAFE_INTEGER,a=(Number.MIN_SAFE_INTEGER,o.vZ,o.CW,Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&r.floor(e)===e));Number.isNaN,Number.parseInt},37294:function(e,t,n){"use strict";n.r(t),n.d(t,{assign:function(){return o},create:function(){return r},deepFreeze:function(){return g},equalFlat:function(){return h},every:function(){return f},forEach:function(){return a},freeze:function(){return m},hasProperty:function(){return p},isEmpty:function(){return d},keys:function(){return i},length:function(){return l},map:function(){return s},size:function(){return c},some:function(){return u}});const r=()=>Object.create(null),o=Object.assign,i=Object.keys,a=(e,t)=>{for(const n in e)t(e[n],n)},s=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},l=e=>i(e).length,c=e=>i(e).length,u=(e,t)=>{for(const n in e)if(t(e[n],n))return!0;return!1},d=e=>{for(const t in e)return!1;return!0},f=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},p=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h=(e,t)=>e===t||c(e)===c(t)&&f(e,(e,n)=>(void 0!==e||p(t,n))&&t[n]===e),m=Object.freeze,g=e=>{for(const t in e){const n=e[t];"object"!=typeof n&&"function"!=typeof n||g(e[t])}return m(e)}},31116:function(e,t,n){"use strict";n.d(t,{W:function(){return a},c:function(){return s}});var r=n(81711),o=n(99089),i=n(50260);class a{constructor(){this._observers=r.create()}on(e,t){return r.setIfUndefined(this._observers,e,o.create).add(t),t}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return i.HT((this._observers.get(e)||r.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=r.create()}}class s{constructor(){this._observers=r.create()}on(e,t){r.setIfUndefined(this._observers,e,o.create).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return i.HT((this._observers.get(e)||r.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=r.create()}}},82321:function(e,t,n){"use strict";n.d(t,{jJ:function(){return i},vt:function(){return o}});class r{constructor(e,t){this.left=e,this.right=t}}const o=(e,t)=>new r(e,t),i=(e,t)=>e.forEach(e=>t(e.left,e.right))},678:function(e,t,n){"use strict";n.r(t),n.d(t,{oneOf:function(){return c},rand:function(){return a},uint32:function(){return s},uint53:function(){return l},uuidv4:function(){return d}});var r=n(63043),o=n(17316);crypto.subtle;const i=crypto.getRandomValues.bind(crypto),a=Math.random,s=()=>i(new Uint32Array(1))[0],l=()=>{const e=i(new Uint32Array(8));return(e[0]&o.yK)*(o.CW+1)+(e[1]>>>0)},c=e=>e[r.floor(a()*e.length)],u=[1e7]+-1e3+-4e3+-8e3+-1e11,d=()=>u.replace(/[018]/g,e=>(e^s()&15>>e/4).toString(16))},99089:function(e,t,n){"use strict";n.r(t),n.d(t,{create:function(){return r},first:function(){return i},from:function(){return a},toArray:function(){return o}});const r=()=>new Set,o=e=>Array.from(e),i=e=>e.values().next().value??void 0,a=e=>new Set(e)},32140:function(e,t,n){"use strict";n.d(t,{Af:function(){return c},QV:function(){return o},db:function(){return l},jN:function(){return s},tv:function(){return u},ux:function(){return d}});var r=n(50260);const o=String.fromCharCode,i=(String.fromCodePoint,o(65535),/^\s*/g),a=/([A-Z])/g,s=(e,t)=>(e=>e.replace(i,""))(e.replace(a,e=>`${t}${(e=>e.toLowerCase())(e)}`)),l="undefined"!=typeof TextEncoder?new TextEncoder:null,c=l?e=>l.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let u="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});u&&1===u.decode(new Uint8Array).length&&(u=null);const d=(e,t)=>r.t8(t,()=>e).join("")},62132:function(e,t,n){"use strict";n.d(t,{_g:function(){return r}});const r=Date.now},54631:function(e,t,n){"use strict";n.r(t),n.d(t,{MultiToken:function(){return We},Options:function(){return $e},State:function(){return v},createTokenClass:function(){return qe},find:function(){return ct},init:function(){return st},multi:function(){return Xe},options:function(){return Ue},regexp:function(){return Te},registerCustomProtocol:function(){return at},registerPlugin:function(){return it},registerTokenPlugin:function(){return ot},reset:function(){return rt},stringToArray:function(){return Fe},test:function(){return ut},text:function(){return Xe},tokenize:function(){return lt}});const r="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",o="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",i="numeric",a="ascii",s="alpha",l="asciinumeric",c="alphanumeric",u="domain",d="emoji",f="scheme",p="slashscheme",h="whitespace";function m(e,t){return e in t||(t[e]=[]),t[e]}function g(e,t,n){t[i]&&(t[l]=!0,t[c]=!0),t[a]&&(t[l]=!0,t[s]=!0),t[l]&&(t[c]=!0),t[s]&&(t[c]=!0),t[c]&&(t[u]=!0),t[d]&&(t[u]=!0);for(const r in t){const t=m(r,n);t.indexOf(e)<0&&t.push(e)}}function v(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}v.groups={},v.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let n=0;n<t.jr.length;n++){const r=t.jr[n][0],o=t.jr[n][1];if(o&&r.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){let o;return r=r||v.groups,t&&t.j?o=t:(o=new v(t),n&&r&&g(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let t=0;t<i-1;t++)o=o.tt(e[t]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||v.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let a,s=o.go(e);if(s?(a=new v,Object.assign(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new v,i){if(r)if(a.t&&"string"==typeof a.t){const e=Object.assign(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(a.t,r),n);g(i,e,r)}else n&&g(i,n,r);a.t=i}return o.j[e]=a,a}};const y=(e,t,n,r,o)=>e.ta(t,n,r,o),b=(e,t,n,r,o)=>e.tr(t,n,r,o),w=(e,t,n,r,o)=>e.ts(t,n,r,o),k=(e,t,n,r,o)=>e.tt(t,n,r,o),x="WORD",S="UWORD",C="ASCIINUMERICAL",M="ALPHANUMERICAL",O="LOCALHOST",A="TLD",E="UTLD",T="SCHEME",_="SLASH_SCHEME",N="NUM",j="WS",P="NL",I="OPENBRACE",D="CLOSEBRACE",R="OPENBRACKET",L="CLOSEBRACKET",F="OPENPAREN",B="CLOSEPAREN",H="OPENANGLEBRACKET",z="CLOSEANGLEBRACKET",$="FULLWIDTHLEFTPAREN",V="FULLWIDTHRIGHTPAREN",U="LEFTCORNERBRACKET",W="RIGHTCORNERBRACKET",q="LEFTWHITECORNERBRACKET",K="RIGHTWHITECORNERBRACKET",G="FULLWIDTHLESSTHAN",Y="FULLWIDTHGREATERTHAN",J="AMPERSAND",X="APOSTROPHE",Q="ASTERISK",Z="AT",ee="BACKSLASH",te="BACKTICK",ne="CARET",re="COLON",oe="COMMA",ie="DOLLAR",ae="DOT",se="EQUALS",le="EXCLAMATION",ce="HYPHEN",ue="PERCENT",de="PIPE",fe="PLUS",pe="POUND",he="QUERY",me="QUOTE",ge="FULLWIDTHMIDDLEDOT",ve="SEMI",ye="SLASH",be="TILDE",we="UNDERSCORE",ke="EMOJI",xe="SYM";var Se=Object.freeze({__proto__:null,ALPHANUMERICAL:M,AMPERSAND:J,APOSTROPHE:X,ASCIINUMERICAL:C,ASTERISK:Q,AT:Z,BACKSLASH:ee,BACKTICK:te,CARET:ne,CLOSEANGLEBRACKET:z,CLOSEBRACE:D,CLOSEBRACKET:L,CLOSEPAREN:B,COLON:re,COMMA:oe,DOLLAR:ie,DOT:ae,EMOJI:ke,EQUALS:se,EXCLAMATION:le,FULLWIDTHGREATERTHAN:Y,FULLWIDTHLEFTPAREN:$,FULLWIDTHLESSTHAN:G,FULLWIDTHMIDDLEDOT:ge,FULLWIDTHRIGHTPAREN:V,HYPHEN:ce,LEFTCORNERBRACKET:U,LEFTWHITECORNERBRACKET:q,LOCALHOST:O,NL:P,NUM:N,OPENANGLEBRACKET:H,OPENBRACE:I,OPENBRACKET:R,OPENPAREN:F,PERCENT:ue,PIPE:de,PLUS:fe,POUND:pe,QUERY:he,QUOTE:me,RIGHTCORNERBRACKET:W,RIGHTWHITECORNERBRACKET:K,SCHEME:T,SEMI:ve,SLASH:ye,SLASH_SCHEME:_,SYM:xe,TILDE:be,TLD:A,UNDERSCORE:we,UTLD:E,UWORD:S,WORD:x,WS:j});const Ce=/[a-z]/,Me=/\p{L}/u,Oe=/\p{Emoji}/u,Ae=/\d/,Ee=/\s/;var Te=Object.freeze({__proto__:null,ASCII_LETTER:Ce,DIGIT:Ae,EMOJI:Oe,EMOJI_VARIATION:/\ufe0f/,LETTER:Me,SPACE:Ee});const _e="\r",Ne="\n",je="",Pe="",Ie="";let De=null,Re=null;function Le(e,t){const n=Fe(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,o=[];let i=0,a=0;for(;a<r;){let s=e,l=null,c=0,u=null,d=-1,f=-1;for(;a<r&&(l=s.go(n[a]));)s=l,s.accepts()?(d=0,f=0,u=s):d>=0&&(d+=n[a].length,f++),c+=n[a].length,i+=n[a].length,a++;i-=d,a-=f,c-=d,o.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}function Fe(e){const t=[],n=e.length;let r=0;for(;r<n;){let o,i=e.charCodeAt(r),a=i<55296||i>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}function Be(e,t,n,r,o){let i;const a=t.length;for(let n=0;n<a-1;n++){const a=t[n];e.j[a]?i=e.j[a]:(i=new v(r),i.jr=o.slice(),e.j[a]=i),e=i}return i=new v(n),i.jr=o.slice(),e.j[t[a-1]]=i,i}function He(e){const t=[],n=[];let r=0;for(;r<e.length;){let o=0;for(;"0123456789".indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+o),10);t>0;t--)n.pop();r+=o}else n.push(e[r]),r++}return t}const ze={defaultProtocol:"http",events:null,format:Ve,formatHref:Ve,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $e(e,t=null){let n=Object.assign({},ze);e&&(n=Object.assign(n,e instanceof $e?e.o:e));const r=n.ignoreTags,o=[];for(let e=0;e<r.length;e++)o.push(r[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function Ve(e){return e}$e.prototype={o:ze,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let o=this.o[e];return o?("object"==typeof o?(o=n.t in o?o[n.t]:ze[e],"function"==typeof o&&r&&(o=o(t,n))):"function"==typeof o&&r&&(o=o(t,n.t,n)),o):o},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};var Ue=Object.freeze({__proto__:null,Options:$e,defaults:ze});function We(e,t){this.t="token",this.v=e,this.tk=t}function qe(e,t){class n extends We{constructor(t,n){super(t,n),this.t=e}}for(const e in t)n.prototype[e]=t[e];return n.t=e,n}We.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=ze.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),a={},s=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,s&&(a.class=s),l&&(a.target=l),c&&(a.rel=c),u&&Object.assign(a,u),{tagName:o,attributes:a,content:i,eventListeners:d}}};const Ke=qe("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ge=qe("text"),Ye=qe("nl"),Je=qe("url",{isLink:!0,toHref(e=ze.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==O&&e[1].t===re}});var Xe=Object.freeze({__proto__:null,Base:We,Email:Ke,MultiToken:We,Nl:Ye,Text:Ge,Url:Je,createTokenClass:qe});const Qe=e=>new v(e);function Ze(e,t,n){const r=n[0].s,o=n[n.length-1].e;return new e(t.slice(r,o),n)}const et="undefined"!=typeof console&&console&&console.warn||(()=>{}),tt="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",nt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function rt(){return v.groups={},nt.scanner=null,nt.parser=null,nt.tokenQueue=[],nt.pluginQueue=[],nt.customSchemes=[],nt.initialized=!1,nt}function ot(e,t){if("function"!=typeof t)throw new Error(`linkifyjs: Invalid token plugin ${t} (expects function)`);for(let n=0;n<nt.tokenQueue.length;n++)if(e===nt.tokenQueue[n][0])return et(`linkifyjs: token plugin "${e}" already registered - will be overwritten`),void(nt.tokenQueue[n]=[e,t]);nt.tokenQueue.push([e,t]),nt.initialized&&et(`linkifyjs: already initialized - will not register token plugin "${e}" ${tt}`)}function it(e,t){if("function"!=typeof t)throw new Error(`linkifyjs: Invalid plugin ${t} (expects function)`);for(let n=0;n<nt.pluginQueue.length;n++)if(e===nt.pluginQueue[n][0])return et(`linkifyjs: plugin "${e}" already registered - will be overwritten`),void(nt.pluginQueue[n]=[e,t]);nt.pluginQueue.push([e,t]),nt.initialized&&et(`linkifyjs: already initialized - will not register plugin "${e}" ${tt}`)}function at(e,t=!1){if(nt.initialized&&et(`linkifyjs: already initialized - will not register custom scheme "${e}" ${tt}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');nt.customSchemes.push([e,t])}function st(){nt.scanner=function(e=[]){const t={};v.groups=t;const n=new v;null==De&&(De=He(r)),null==Re&&(Re=He(o)),k(n,"'",X),k(n,"{",I),k(n,"}",D),k(n,"[",R),k(n,"]",L),k(n,"(",F),k(n,")",B),k(n,"<",H),k(n,">",z),k(n,"",$),k(n,"",V),k(n,"",U),k(n,"",W),k(n,"",q),k(n,"",K),k(n,"",G),k(n,"",Y),k(n,"&",J),k(n,"*",Q),k(n,"@",Z),k(n,"`",te),k(n,"^",ne),k(n,":",re),k(n,",",oe),k(n,"$",ie),k(n,".",ae),k(n,"=",se),k(n,"!",le),k(n,"-",ce),k(n,"%",ue),k(n,"|",de),k(n,"+",fe),k(n,"#",pe),k(n,"?",he),k(n,'"',me),k(n,"/",ye),k(n,";",ve),k(n,"~",be),k(n,"_",we),k(n,"\\",ee),k(n,"",ge);const m=b(n,Ae,N,{[i]:!0});b(m,Ae,m);const y=b(m,Ce,C,{[l]:!0}),Te=b(m,Me,M,{[c]:!0}),Le=b(n,Ce,x,{[a]:!0});b(Le,Ae,y),b(Le,Ce,Le),b(y,Ae,y),b(y,Ce,y);const Fe=b(n,Me,S,{[s]:!0});b(Fe,Ce),b(Fe,Ae,Te),b(Fe,Me,Fe),b(Te,Ae,Te),b(Te,Ce),b(Te,Me,Te);const ze=k(n,Ne,P,{[h]:!0}),$e=k(n,_e,j,{[h]:!0}),Ve=b(n,Ee,j,{[h]:!0});k(n,Ie,Ve),k($e,Ne,ze),k($e,Ie,Ve),b($e,Ee,Ve),k(Ve,_e),k(Ve,Ne),b(Ve,Ee,Ve),k(Ve,Ie,Ve);const Ue=b(n,Oe,ke,{[d]:!0});k(Ue,"#"),b(Ue,Oe,Ue),k(Ue,je,Ue);const We=k(Ue,Pe);k(We,"#"),b(We,Oe,Ue);const qe=[[Ce,Le],[Ae,y]],Ke=[[Ce,null],[Me,Fe],[Ae,Te]];for(let e=0;e<De.length;e++)Be(n,De[e],A,x,qe);for(let e=0;e<Re.length;e++)Be(n,Re[e],E,S,Ke);g(A,{tld:!0,ascii:!0},t),g(E,{utld:!0,alpha:!0},t),Be(n,"file",T,x,qe),Be(n,"mailto",T,x,qe),Be(n,"http",_,x,qe),Be(n,"https",_,x,qe),Be(n,"ftp",_,x,qe),Be(n,"ftps",_,x,qe),g(T,{scheme:!0,ascii:!0},t),g(_,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let t=0;t<e.length;t++){const r=e[t][0],o=e[t][1]?{[f]:!0}:{[p]:!0};r.indexOf("-")>=0?o[u]=!0:Ce.test(r)?Ae.test(r)?o[l]=!0:o[a]=!0:o[i]=!0,w(n,r,r,o)}return w(n,"localhost",O,{ascii:!0}),n.jd=new v(xe),{start:n,tokens:Object.assign({groups:t},Se)}}(nt.customSchemes);for(let e=0;e<nt.tokenQueue.length;e++)nt.tokenQueue[e][1]({scanner:nt.scanner});nt.parser=function({groups:e}){const t=e.domain.concat([J,Q,Z,ee,te,ne,ie,se,ce,N,ue,de,fe,pe,ye,xe,be,we]),n=[X,re,oe,ae,le,ue,he,me,ve,H,z,I,D,L,R,F,B,$,V,U,W,q,K,G,Y],r=[J,X,Q,ee,te,ne,ie,se,ce,I,D,ue,de,fe,pe,he,ye,xe,be,we],o=Qe(),i=k(o,be);y(i,r,i),y(i,e.domain,i);const a=Qe(),s=Qe(),l=Qe();y(o,e.domain,a),y(o,e.scheme,s),y(o,e.slashscheme,l),y(a,r,i),y(a,e.domain,a);const c=k(a,Z);k(i,Z,c),k(s,Z,c),k(l,Z,c);const u=k(i,ae);y(u,r,i),y(u,e.domain,i);const d=Qe();y(c,e.domain,d),y(d,e.domain,d);const f=k(d,ae);y(f,e.domain,d);const p=Qe(Ke);y(f,e.tld,p),y(f,e.utld,p),k(c,O,p);const h=k(d,ce);k(h,ce,h),y(h,e.domain,d),y(p,e.domain,d),k(p,ae,f),k(p,ce,h);const m=k(p,re);y(m,e.numeric,Ke);const g=k(a,ce),v=k(a,ae);k(g,ce,g),y(g,e.domain,a),y(v,r,i),y(v,e.domain,a);const b=Qe(Je);y(v,e.tld,b),y(v,e.utld,b),y(b,e.domain,a),y(b,r,i),k(b,ae,v),k(b,ce,g),k(b,Z,c);const w=k(b,re),x=Qe(Je);y(w,e.numeric,x);const S=Qe(Je),C=Qe();y(S,t,S),y(S,n,C),y(C,t,S),y(C,n,C),k(b,ye,S),k(x,ye,S);const M=k(s,re),A=k(l,re),E=k(A,ye),T=k(E,ye);y(s,e.domain,a),k(s,ae,v),k(s,ce,g),y(l,e.domain,a),k(l,ae,v),k(l,ce,g),y(M,e.domain,S),k(M,ye,S),k(M,he,S),y(T,e.domain,S),y(T,t,S),k(T,ye,S);const _=[[I,D],[R,L],[F,B],[H,z],[$,V],[U,W],[q,K],[G,Y]];for(let e=0;e<_.length;e++){const[r,o]=_[e],i=k(S,r);k(C,r,i),k(i,o,S);const a=Qe(Je);y(i,t,a);const s=Qe();y(i,n),y(a,t,a),y(a,n,s),y(s,t,a),y(s,n,s),k(a,o,S),k(s,o,S)}return k(o,O,b),k(o,P,Ye),{start:o,tokens:Se}}(nt.scanner.tokens);for(let e=0;e<nt.pluginQueue.length;e++)nt.pluginQueue[e][1]({scanner:nt.scanner,parser:nt.parser});return nt.initialized=!0,nt}function lt(e){return nt.initialized||st(),function(e,t,n){let r=n.length,o=0,i=[],a=[];for(;o<r;){let s=e,l=null,c=null,u=0,d=null,f=-1;for(;o<r&&!(l=s.go(n[o].t));)a.push(n[o++]);for(;o<r&&(c=l||s.go(n[o].t));)l=null,s=c,s.accepts()?(f=0,d=s):f>=0&&f++,o++,u++;if(f<0)o-=u,o<r&&(a.push(n[o]),o++);else{a.length>0&&(i.push(Ze(Ge,t,a)),a=[]),o-=f,u-=f;const e=d.t,r=n.slice(o-u,o);i.push(Ze(e,t,r))}}return a.length>0&&i.push(Ze(Ge,t,a)),i}(nt.parser.start,e,Le(nt.scanner.start,e))}function ct(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new $e(n),o=lt(e),i=[];for(let e=0;e<o.length;e++){const n=o[e];!n.isLink||t&&n.t!==t||!r.check(n)||i.push(n.toFormattedObject(r))}return i}function ut(e,t=null){const n=lt(e);return 1===n.length&&n[0].isLink&&(!t||n[0].t===t)}lt.scan=Le},14993:function(e,t,n){"use strict";n.d(t,{BE:function(){return W},Es:function(){return T},Ht:function(){return ee},Tk:function(){return z},Tn:function(){return l},X3:function(){return A},ZH:function(){return i},aw:function(){return Z},b0:function(){return s},bZ:function(){return h},bu:function(){return R},dO:function(){return O},iX:function(){return Y},lK:function(){return j},lg:function(){return I},mF:function(){return L},mf:function(){return E},qm:function(){return Q},qv:function(){return a},r9:function(){return w},rL:function(){return c},sb:function(){return $},uv:function(){return J}});var r=n(96540);const o=()=>{},i=o(),a=Object,s=e=>e===i,l=e=>"function"==typeof e,c=(e,t)=>({...e,...t}),u=e=>l(e.then),d=new WeakMap;let f=0;const p=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(a(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=d.get(e),o)return o;if(o=++f+"~",d.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=p(e[i])+",";d.set(e,o)}if(n==a){o="#";const t=a.keys(e).sort();for(;!s(i=t.pop());)s(e[i])||(o+=i+":"+p(e[i])+",");d.set(e,o)}}return o},h=new WeakMap,m={},g={},v="undefined",y=typeof window!=v,b=typeof document!=v,w=(e,t)=>{const n=h.get(e);return[()=>!s(t)&&e.get(t)||m,r=>{if(!s(t)){const o=e.get(t);t in g||(g[t]=o),n[5](t,c(o,r),o||m)}},n[6],()=>!s(t)&&t in g?g[t]:!s(t)&&e.get(t)||m]};let k=!0;const[x,S]=y&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[o,o],C={isOnline:()=>k,isVisible:()=>{const e=b&&document.visibilityState;return s(e)||"hidden"!==e}},M={initFocus:e=>(b&&document.addEventListener("visibilitychange",e),x("focus",e),()=>{b&&document.removeEventListener("visibilitychange",e),S("focus",e)}),initReconnect:e=>{const t=()=>{k=!0,e()},n=()=>{k=!1};return x("online",t),x("offline",n),()=>{S("online",t),S("offline",n)}}},O=!r.useId,A=!y||"Deno"in window,E=e=>y&&typeof window.requestAnimationFrame!=v?window.requestAnimationFrame(e):setTimeout(e,1),T=A?r.useEffect:r.useLayoutEffect,_="undefined"!=typeof navigator&&navigator.connection,N=!A&&_&&(["slow-2g","2g"].includes(_.effectiveType)||_.saveData),j=e=>{if(l(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?p(e):"",t]};let P=0;const I=()=>++P,D=2;var R={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:D,RECONNECT_EVENT:1};async function L(...e){const[t,n,r,o]=e,a=c({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let d=a.populateCache;const f=a.rollbackOnError;let p=a.optimisticData;const m=a.throwOnError;if(l(n)){const e=n,r=[],o=t.keys();for(const n of o)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(g))}return g(n);async function g(n){const[o]=j(n);if(!o)return;const[c,g]=w(t,o),[v,y,b,k]=h.get(t),x=()=>{const e=v[o];return(l(a.revalidate)?a.revalidate(c().data,n):!1!==a.revalidate)&&(delete b[o],delete k[o],e&&e[0])?e[0](D).then(()=>c().data):c().data};if(e.length<3)return x();let S,C=r;const M=I();y[o]=[M,0];const O=!s(p),A=c(),E=A.data,T=A._c,_=s(T)?E:T;if(O&&(p=l(p)?p(_,E):p,g({data:p,_c:_})),l(C))try{C=C(_)}catch(e){S=e}if(C&&u(C)){if(C=await C.catch(e=>{S=e}),M!==y[o][0]){if(S)throw S;return C}S&&O&&(e=>"function"==typeof f?f(e):!1!==f)(S)&&(d=!0,g({data:_,_c:i}))}if(d&&!S)if(l(d)){const e=d(C,_);g({data:e,error:i,_c:i})}else g({data:C,error:i,_c:i});if(y[o][1]=I(),Promise.resolve(x()).then(()=>{g({_c:i})}),!S)return C;if(m)throw S}}const F=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},B=(e,t)=>{if(!h.has(e)){const n=c(M,t),r={},a=L.bind(i,e);let s=o;const l={},u=(e,t)=>{const n=l[e]||[];return l[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},d=(t,n,r)=>{e.set(t,n);const o=l[t];if(o)for(const e of o)e(n,r)},f=()=>{if(!h.has(e)&&(h.set(e,[r,{},{},{},a,d,u]),!A)){const t=n.initFocus(setTimeout.bind(i,F.bind(i,r,0))),o=n.initReconnect(setTimeout.bind(i,F.bind(i,r,1)));s=()=>{t&&t(),o&&o(),h.delete(e)}}};return f(),[e,a,f,s]}return[e,h.get(e)[4]]},[H,z]=B(new Map),$=c({onLoadingSlow:o,onSuccess:o,onError:o,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,l=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!s(i)&&a>i||setTimeout(r,l,o)},onDiscarded:o,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:N?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:N?5e3:3e3,compare:(e,t)=>p(e)==p(t),isPaused:()=>!1,cache:H,mutate:z,fallback:{}},C),V=(e,t)=>{const n=c(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=c(o,a))}return n},U=(0,r.createContext)({}),W=e=>{const{value:t}=e,n=(0,r.useContext)(U),o=l(t),a=(0,r.useMemo)(()=>o?t(n):t,[o,n,t]),s=(0,r.useMemo)(()=>o?a:V(n,a),[o,n,a]),u=a&&a.provider,d=(0,r.useRef)(i);u&&!d.current&&(d.current=B(u(s.cache||H),a));const f=d.current;return f&&(s.cache=f[0],s.mutate=f[1]),T(()=>{if(f)return f[2]&&f[2](),f[3]},[]),(0,r.createElement)(U.Provider,c(e,{value:s}))},q=y&&window.__SWR_DEVTOOLS_USE__,K=q?window.__SWR_DEVTOOLS_USE__:[],G=e=>l(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],Y=()=>c($,(0,r.useContext)(U)),J=(e,t)=>{const[n,r]=j(e),[,,,o]=h.get(H);if(o[n])return o[n];const i=t(r);return o[n]=i,i},X=K.concat(e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=j(t),[,,,o]=h.get(H);if(r.startsWith("$inf$"))return n(...e);const i=o[r];return s(i)?n(...e):(delete o[r],i)}),r)),Q=e=>function(...t){const n=Y(),[r,o,i]=G(t),a=V(n,i);let s=e;const{use:l}=a,c=(l||[]).concat(X);for(let e=c.length;e--;)s=c[e](s);return s(r,o||a.fetcher||null,a)},Z=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}},ee=(e,t)=>(...n)=>{const[r,o,i]=G(n),a=(i.use||[]).concat(t);return e(r,o,{...i,use:a})};q&&(window.__SWR_DEVTOOLS_REACT__=r)},42946:function(e,t,n){"use strict";n.r(t),n.d(t,{Awareness:function(){return u},applyAwarenessUpdate:function(){return h},encodeAwarenessUpdate:function(){return f},modifyAwarenessUpdate:function(){return p},outdatedTimeout:function(){return c},removeAwarenessStates:function(){return d}});var r=n(81156),o=n(25968),i=n(62132),a=n(63043),s=n(31116),l=n(48957);const c=3e4;class u extends s.c{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=i._g();null!==this.getLocalState()&&c/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&c<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&d(this,t,"timeout")},a.floor(c/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:i._g()});const a=[],s=[],c=[],u=[];null===e?u.push(t):null==o?null!=e&&a.push(t):(s.push(t),l.vo(o,e)||c.push(t)),(a.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:a,updated:c,removed:u},"local"]),this.emit("update",[{added:a,updated:s,removed:u},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const d=(e,t,n)=>{const r=[];for(let n=0;n<t.length;n++){const o=t[n];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:i._g()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},f=(e,t,n=e.states)=>{const o=t.length,i=r.xv();r.zd(i,o);for(let a=0;a<o;a++){const o=t[a],s=n.get(o)||null,l=e.meta.get(o).clock;r.zd(i,o),r.zd(i,l),r.Qj(i,JSON.stringify(s))}return r.Fo(i)},p=(e,t)=>{const n=o.$C(e),i=r.xv(),a=o.cw(n);r.zd(i,a);for(let e=0;e<a;e++){const e=o.cw(n),a=o.cw(n),s=t(JSON.parse(o.t3(n)));r.zd(i,e),r.zd(i,a),r.Qj(i,JSON.stringify(s))}return r.Fo(i)},h=(e,t,n)=>{const r=o.$C(t),a=i._g(),s=[],c=[],u=[],d=[],f=o.cw(r);for(let t=0;t<f;t++){const t=o.cw(r);let n=o.cw(r);const i=JSON.parse(o.t3(r)),f=e.meta.get(t),p=e.states.get(t),h=void 0===f?0:f.clock;(h<n||h===n&&null===i&&e.states.has(t))&&(null===i?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,i),e.meta.set(t,{clock:n,lastUpdated:a}),void 0===f&&null!==i?s.push(t):void 0!==f&&null===i?d.push(t):null!==i&&(l.vo(i,p)||u.push(t),c.push(t)))}(s.length>0||u.length>0||d.length>0)&&e.emit("change",[{added:s,updated:u,removed:d},n]),(s.length>0||c.length>0||d.length>0)&&e.emit("update",[{added:s,updated:c,removed:d},n])}},23107:function(e,t,n){"use strict";n.r(t),n.d(t,{AbsolutePosition:function(){return Re},AbstractConnector:function(){return F},AbstractStruct:function(){return Zn},AbstractType:function(){return sn},Array:function(){return En},ContentAny:function(){return cr},ContentBinary:function(){return tr},ContentDeleted:function(){return nr},ContentDoc:function(){return or},ContentEmbed:function(){return ir},ContentFormat:function(){return ar},ContentJSON:function(){return sr},ContentString:function(){return ur},ContentType:function(){return br},Doc:function(){return Z},GC:function(){return er},ID:function(){return Ce},Item:function(){return Mr},Map:function(){return _n},PermanentUserData:function(){return je},RelativePosition:function(){return Pe},Skip:function(){return Er},Snapshot:function(){return Ve},Text:function(){return qn},Transaction:function(){return ft},UndoManager:function(){return Ct},UpdateDecoderV1:function(){return te},UpdateDecoderV2:function(){return re},UpdateEncoderV1:function(){return ie},UpdateEncoderV2:function(){return se},XmlElement:function(){return Yn},XmlFragment:function(){return Gn},XmlHook:function(){return Xn},XmlText:function(){return Qn},YArrayEvent:function(){return An},YEvent:function(){return Jt},YMapEvent:function(){return Tn},YTextEvent:function(){return Wn},YXmlEvent:function(){return Jn},applyUpdate:function(){return fe},applyUpdateV2:function(){return de},cleanupYTextFormatting:function(){return $n},compareIDs:function(){return Me},compareRelativePositions:function(){return $e},convertUpdateFormatV1ToV2:function(){return Kt},convertUpdateFormatV2ToV1:function(){return Gt},createAbsolutePositionFromRelativePosition:function(){return ze},createDeleteSet:function(){return q},createDeleteSetFromStructStore:function(){return K},createDocFromSnapshot:function(){return et},createID:function(){return Oe},createRelativePositionFromJSON:function(){return De},createRelativePositionFromTypeIndex:function(){return Fe},createSnapshot:function(){return Ye},decodeRelativePosition:function(){return He},decodeSnapshot:function(){return Ge},decodeSnapshotV2:function(){return Ke},decodeStateVector:function(){return ge},decodeUpdate:function(){return Et},decodeUpdateV2:function(){return Tt},diffUpdate:function(){return Bt},diffUpdateV2:function(){return Ft},emptySnapshot:function(){return Je},encodeRelativePosition:function(){return Be},encodeSnapshot:function(){return qe},encodeSnapshotV2:function(){return We},encodeStateAsUpdate:function(){return he},encodeStateAsUpdateV2:function(){return pe},encodeStateVector:function(){return ye},encodeStateVectorFromUpdate:function(){return Pt},encodeStateVectorFromUpdateV2:function(){return jt},equalDeleteSets:function(){return X},equalSnapshots:function(){return Ue},findIndexSS:function(){return at},findRootTypeKey:function(){return Te},getItem:function(){return st},getState:function(){return ot},getTypeChildren:function(){return on},isDeleted:function(){return $},isParentOf:function(){return _e},iterateDeletedStructs:function(){return z},logType:function(){return Ne},logUpdate:function(){return Ot},logUpdateV2:function(){return At},mergeDeleteSets:function(){return U},mergeUpdates:function(){return Nt},mergeUpdatesV2:function(){return Lt},obfuscateUpdate:function(){return Wt},obfuscateUpdateV2:function(){return qt},parseUpdateMeta:function(){return Dt},parseUpdateMetaV2:function(){return It},readUpdate:function(){return ue},readUpdateV2:function(){return ce},relativePositionToJSON:function(){return Ie},snapshot:function(){return Xe},snapshotContainsUpdate:function(){return tt},transact:function(){return wt},tryGc:function(){return yt},typeListToArraySnapshot:function(){return un},typeMapGetAllSnapshot:function(){return Mn},typeMapGetSnapshot:function(){return Cn}});var r=n(31116),o=n(50260),i=n(63043),a=n(81711),s=n(81156),l=n(25968),c=n(678);const u=e=>new Promise(e);Promise.all.bind(Promise);var d=n(32140),f=n(7113);n(48287).hp;f.isBrowser,f.isBrowser;var p=n(6663),h=n(17316),m=n(48957),g=n(99089),v=n(82321),y=n(52581);const b=Symbol;var w=n(62132);const k=b(),x=b(),S=b(),C=b(),M=b(),O=b(),A=b(),E=b(),T=b();w._g();const _={[k]:v.vt("font-weight","bold"),[x]:v.vt("font-weight","normal"),[S]:v.vt("color","blue"),[M]:v.vt("color","green"),[C]:v.vt("color","grey"),[O]:v.vt("color","red"),[A]:v.vt("color","purple"),[E]:v.vt("color","orange"),[T]:v.vt("color","black")},N=f.supportsColor?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=a.create();let o=[],i=0;for(;i<e.length;i++){const o=e[i],a=_[o];if(void 0!==a)r.set(a.left,a.right);else{if(void 0===o)break;if(o.constructor!==String&&o.constructor!==Number)break;{const e=y.mapToStyleString(r);i>0||e.length>0?(t.push("%c"+o),n.push(e)):t.push(o)}}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const t=e[i];t instanceof Symbol||o.push(t)}return o}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const n=e[r];if(void 0===n)break;if(n.constructor===String||n.constructor===Number)t.push(n);else if(n.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const t=e[r];t instanceof Symbol||n.push(t)}return n},j=(...e)=>{console.log(...N(e)),I.forEach(t=>t.print(e))},P=(...e)=>{console.warn(...N(e)),e.unshift(E),I.forEach(t=>t.print(e))},I=g.create(),D=e=>({[Symbol.iterator](){return this},next:e}),R=(e,t)=>D(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});var L=n(37294);class F extends r.W{constructor(e,t){super(),this.doc=e,this.awareness=t}}class B{constructor(e,t){this.clock=e,this.len=t}}class H{constructor(){this.clients=new Map}}const z=(e,t,n)=>t.clients.forEach((t,r)=>{const o=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const i=t[r];dt(e,o,i.clock,i.len,n)}}),$=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=i.floor((n+r)/2),a=e[o],s=a.clock;if(s<=t){if(t<s+a.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},V=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=i.max(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n})},U=e=>{const t=new H;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const a=r.slice();for(let t=n+1;t<e.length;t++)o.S2(a,e[t].clients.get(i)||[]);t.clients.set(i,a)}});return V(t),t},W=(e,t,n,r)=>{a.setIfUndefined(e.clients,t,()=>[]).push(new B(n,r))},q=()=>new H,K=e=>{const t=q();return e.clients.forEach((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])i+=n.length;r.push(new B(o,i))}}r.length>0&&t.clients.set(n,r)}),t},G=(e,t)=>{s.zd(e.restEncoder,t.clients.size),o.HT(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,n])=>{e.resetDsCurVal(),s.zd(e.restEncoder,t);const r=n.length;s.zd(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}})},Y=e=>{const t=new H,n=l.cw(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=l.cw(e.restDecoder),r=l.cw(e.restDecoder);if(r>0){const o=a.setIfUndefined(t.clients,n,()=>[]);for(let t=0;t<r;t++)o.push(new B(e.readDsClock(),e.readDsLen()))}}return t},J=(e,t,n)=>{const r=new H,o=l.cw(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const o=l.cw(e.restDecoder),i=l.cw(e.restDecoder),a=n.clients.get(o)||[],s=ot(n,o);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<s){s<i&&W(r,o,s,i-s);let e=at(a,n),l=a[e];for(!l.deleted&&l.id.clock<n&&(a.splice(e+1,0,xr(t,l,n-l.id.clock)),e++);e<a.length&&(l=a[e++],l.id.clock<i);)l.deleted||(i<l.id.clock+l.length&&a.splice(e,0,xr(t,l,i-l.id.clock)),l.delete(t))}else W(r,o,n,i-n)}}if(r.clients.size>0){const e=new se;return s.zd(e.restEncoder,0),G(e,r),e.toUint8Array()}return null},X=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(const[n,r]of e.clients.entries()){const e=t.clients.get(n);if(void 0===e||r.length!==e.length)return!1;for(let t=0;t<r.length;t++){const n=r[t],o=e[t];if(n.clock!==o.clock||n.len!==o.len)return!1}}return!0},Q=c.uint32;class Z extends r.W{constructor({guid:e=c.uuidv4(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Q(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new nt,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=u(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const s=()=>u(e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=s()}load(){const e=this._item;null===e||this.shouldLoad||wt(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(o.HT(this.subdocs).map(e=>e.guid))}transact(e,t=null){return wt(this,e,t)}get(e,t=sn){const n=a.setIfUndefined(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==sn&&r!==t){if(r===sn){const r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,En)}getText(e=""){return this.get(e,qn)}getMap(e=""){return this.get(e,_n)}getXmlElement(e=""){return this.get(e,Yn)}getXmlFragment(e=""){return this.get(e,Gn)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,o.HT(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Z({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,wt(e.parent.doc,n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class ee{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return l.cw(this.restDecoder)}readDsLen(){return l.cw(this.restDecoder)}}class te extends ee{readLeftID(){return Oe(l.cw(this.restDecoder),l.cw(this.restDecoder))}readRightID(){return Oe(l.cw(this.restDecoder),l.cw(this.restDecoder))}readClient(){return l.cw(this.restDecoder)}readInfo(){return l.xh(this.restDecoder)}readString(){return l.t3(this.restDecoder)}readParentInfo(){return 1===l.cw(this.restDecoder)}readTypeRef(){return l.cw(this.restDecoder)}readLen(){return l.cw(this.restDecoder)}readAny(){return l.Jg(this.restDecoder)}readBuf(){return(e=>{const t=(n=e.byteLength,new Uint8Array(n));var n;return t.set(e),t})(l.bo(this.restDecoder))}readJSON(){return JSON.parse(l.t3(this.restDecoder))}readKey(){return l.t3(this.restDecoder)}}class ne{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=l.cw(this.restDecoder),this.dsCurrVal}readDsLen(){const e=l.cw(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class re extends ne{constructor(e){super(e),this.keys=[],l.cw(e),this.keyClockDecoder=new l.xK(l.bo(e)),this.clientDecoder=new l.VQ(l.bo(e)),this.leftClockDecoder=new l.xK(l.bo(e)),this.rightClockDecoder=new l.xK(l.bo(e)),this.infoDecoder=new l.cQ(l.bo(e),l.xh),this.stringDecoder=new l.Ib(l.bo(e)),this.parentInfoDecoder=new l.cQ(l.bo(e),l.xh),this.typeRefDecoder=new l.VQ(l.bo(e)),this.lenDecoder=new l.VQ(l.bo(e))}readLeftID(){return new Ce(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ce(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return l.Jg(this.restDecoder)}readBuf(){return l.bo(this.restDecoder)}readJSON(){return l.Jg(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class oe{constructor(){this.restEncoder=s.xv()}toUint8Array(){return s.Fo(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){s.zd(this.restEncoder,e)}writeDsLen(e){s.zd(this.restEncoder,e)}}class ie extends oe{writeLeftID(e){s.zd(this.restEncoder,e.client),s.zd(this.restEncoder,e.clock)}writeRightID(e){s.zd(this.restEncoder,e.client),s.zd(this.restEncoder,e.clock)}writeClient(e){s.zd(this.restEncoder,e)}writeInfo(e){s.QJ(this.restEncoder,e)}writeString(e){s.Qj(this.restEncoder,e)}writeParentInfo(e){s.zd(this.restEncoder,e?1:0)}writeTypeRef(e){s.zd(this.restEncoder,e)}writeLen(e){s.zd(this.restEncoder,e)}writeAny(e){s.IO(this.restEncoder,e)}writeBuf(e){s.Gu(this.restEncoder,e)}writeJSON(e){s.Qj(this.restEncoder,JSON.stringify(e))}writeKey(e){s.Qj(this.restEncoder,e)}}class ae{constructor(){this.restEncoder=s.xv(),this.dsCurrVal=0}toUint8Array(){return s.Fo(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,s.zd(this.restEncoder,t)}writeDsLen(e){0===e&&p.unexpectedCase(),s.zd(this.restEncoder,e-1),this.dsCurrVal+=e}}class se extends ae{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new s.FA,this.clientEncoder=new s.D$,this.leftClockEncoder=new s.FA,this.rightClockEncoder=new s.FA,this.infoEncoder=new s.cq(s.QJ),this.stringEncoder=new s.Sw,this.parentInfoEncoder=new s.cq(s.QJ),this.typeRefEncoder=new s.D$,this.lenEncoder=new s.D$}toUint8Array(){const e=s.xv();return s.zd(e,0),s.Gu(e,this.keyClockEncoder.toUint8Array()),s.Gu(e,this.clientEncoder.toUint8Array()),s.Gu(e,this.leftClockEncoder.toUint8Array()),s.Gu(e,this.rightClockEncoder.toUint8Array()),s.Gu(e,s.Fo(this.infoEncoder)),s.Gu(e,this.stringEncoder.toUint8Array()),s.Gu(e,s.Fo(this.parentInfoEncoder)),s.Gu(e,this.typeRefEncoder.toUint8Array()),s.Gu(e,this.lenEncoder.toUint8Array()),s.LH(e,s.Fo(this.restEncoder)),s.Fo(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){s.IO(this.restEncoder,e)}writeBuf(e){s.Gu(this.restEncoder,e)}writeJSON(e){s.IO(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const le=(e,t,n)=>{const r=new Map;n.forEach((e,n)=>{ot(t,n)>e&&r.set(n,e)}),rt(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),s.zd(e.restEncoder,r.size),o.HT(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([n,r])=>{((e,t,n,r)=>{r=i.max(r,t[0].id.clock);const o=at(t,r);s.zd(e.restEncoder,t.length-o),e.writeClient(n),s.zd(e.restEncoder,r);const a=t[o];a.write(e,r-a.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)})},ce=(e,t,n,r=new re(e))=>wt(t,e=>{e.local=!1;let t=!1;const n=e.doc,i=n.store,c=((e,t)=>{const n=a.create(),r=l.cw(e.restDecoder);for(let o=0;o<r;o++){const r=l.cw(e.restDecoder),o=new Array(r),i=e.readClient();let a=l.cw(e.restDecoder);n.set(i,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(h.WY&r){case 0:{const t=e.readLen();o[n]=new er(Oe(i,a),t),a+=t;break}case 10:{const t=l.cw(e.restDecoder);o[n]=new Er(Oe(i,a),t),a+=t;break}default:{const s=!(r&(h.D7|h.wt)),l=new Mr(Oe(i,a),null,(r&h.wt)===h.wt?e.readLeftID():null,null,(r&h.D7)===h.D7?e.readRightID():null,s?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,s&&(r&h.KJ)===h.KJ?e.readString():null,Or(e,r));o[n]=l,a+=l.length}}}}return n})(r,n),u=((e,t,n)=>{const r=[];let i=o.HT(n.keys()).sort((e,t)=>e-t);if(0===i.length)return null;const l=()=>{if(0===i.length)return null;let e=n.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e};let c=l();if(null===c)return null;const u=new nt,d=new Map,f=(e,t)=>{const n=d.get(e);(null==n||n>t)&&d.set(e,t)};let p=c.refs[c.i++];const h=new Map,m=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,u.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):u.clients.set(t,[e]),i=i.filter(e=>e!==t)}r.length=0};for(;;){if(p.constructor!==Er){const o=a.setIfUndefined(h,p.id.client,()=>ot(t,p.id.client))-p.id.clock;if(o<0)r.push(p),f(p.id.client,p.id.clock-1),m();else{const i=p.getMissing(e,t);if(null!==i){r.push(p);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){p=e.refs[e.i++];continue}f(i,ot(t,i)),m()}else(0===o||o<p.length)&&(p.integrate(e,o),h.set(p.id.client,p.id.clock+p.length))}}if(r.length>0)p=r.pop();else if(null!==c&&c.i<c.refs.length)p=c.refs[c.i++];else{if(c=l(),null===c)break;p=c.refs[c.i++]}}if(u.clients.size>0){const e=new se;return le(e,u,new Map),s.zd(e.restEncoder,0),{missing:d,update:e.toUint8Array()}}return null})(e,i,c),d=i.pendingStructs;if(d){for(const[e,n]of d.missing)if(n<ot(i,e)){t=!0;break}if(u){for(const[e,t]of u.missing){const n=d.missing.get(e);(null==n||n>t)&&d.missing.set(e,t)}d.update=Lt([d.update,u.update])}}else i.pendingStructs=u;const f=J(r,e,i);if(i.pendingDs){const t=new re(l.$C(i.pendingDs));l.cw(t.restDecoder);const n=J(t,e,i);i.pendingDs=f&&n?Lt([f,n]):f||n}else i.pendingDs=f;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,de(e.doc,t)}},n,!1),ue=(e,t,n)=>ce(e,t,n,new te(e)),de=(e,t,n,r=re)=>{const o=l.$C(t);ce(o,e,n,new r(o))},fe=(e,t,n)=>de(e,t,n,te),pe=(e,t=new Uint8Array([0]),n=new se)=>{((e,t,n=new Map)=>{le(e,t.store,n),G(e,K(t.store))})(n,e,ge(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Ft(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===ie)return Nt(r.map((e,t)=>0===t?e:Gt(e)));if(n.constructor===se)return Lt(r)}return r[0]},he=(e,t)=>pe(e,t,new ie),me=e=>{const t=new Map,n=l.cw(e.restDecoder);for(let r=0;r<n;r++){const n=l.cw(e.restDecoder),r=l.cw(e.restDecoder);t.set(n,r)}return t},ge=e=>me(new ee(l.$C(e))),ve=(e,t)=>(s.zd(e.restEncoder,t.size),o.HT(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,n])=>{s.zd(e.restEncoder,t),s.zd(e.restEncoder,n)}),e),ye=e=>((e,t=new ae)=>(e instanceof Map?ve(t,e):((e,t)=>{ve(e,rt(t.store))})(t,e),t.toUint8Array()))(e,new oe);class be{constructor(){this.l=[]}}const we=()=>new be,ke=(e,t)=>e.l.push(t),xe=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Se=(e,t,n)=>m.OK(e.l,[t,n]);class Ce{constructor(e,t){this.client=e,this.clock=t}}const Me=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Oe=(e,t)=>new Ce(e,t),Ae=(e,t)=>{s.zd(e,t.client),s.zd(e,t.clock)},Ee=e=>Oe(l.cw(e),l.cw(e)),Te=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw p.unexpectedCase()},_e=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},Ne=e=>{const t=[];let n=e._start;for(;n;)t.push(n),n=n.right;console.log("Children: ",t),console.log("Children content: ",t.filter(e=>!e.deleted).map(e=>e.content))};class je{constructor(e,t=e.getMap("users")){const n=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=n;const r=(e,t)=>{const n=e.get("ds"),r=e.get("ids"),o=e=>this.clients.set(e,t);n.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,U([this.dss.get(t)||q(),Y(new ee(l.$C(e)))]))})})}),this.dss.set(t,U(n.map(e=>Y(new ee(l.$C(e)))))),r.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(o))),r.forEach(o)};t.observe(e=>{e.keysChanged.forEach(e=>r(t.get(e),e))}),t.forEach(r)}setUserMapping(e,t,n,{filter:r=()=>!0}={}){const o=this.yusers;let i=o.get(n);i||(i=new _n,i.set("ids",new En),i.set("ds",new En),o.set(n,i)),i.get("ids").push([t]),o.observe(e=>{setTimeout(()=>{const e=o.get(n);if(e!==i){i=e,this.clients.forEach((e,t)=>{n===e&&i.get("ids").push([t])});const t=new oe,r=this.dss.get(n);r&&(G(t,r),i.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{const t=i.get("ds"),n=e.deleteSet;if(e.local&&n.clients.size>0&&r(e,n)){const e=new oe;G(e,n),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(const[t,n]of this.dss.entries())if($(n,e))return t;return null}}class Pe{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const Ie=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},De=e=>new Pe(null==e.type?null:Oe(e.type.client,e.type.clock),e.tname??null,null==e.item?null:Oe(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class Re{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const Le=(e,t,n)=>{let r=null,o=null;return null===e._item?o=Te(e):r=Oe(e._item.id.client,e._item.id.clock),new Pe(r,o,t,n)},Fe=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return Le(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return Le(e,Oe(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return Le(e,r.lastId,n);r=r.right}return Le(e,null,n)},Be=e=>{const t=s.xv();return((e,t)=>{const{type:n,tname:r,item:o,assoc:i}=t;if(null!==o)s.zd(e,0),Ae(e,o);else if(null!==r)s.QJ(e,1),s.Qj(e,r);else{if(null===n)throw p.unexpectedCase();s.QJ(e,2),Ae(e,n)}s.Sj(e,i)})(t,e),s.Fo(t)},He=e=>(e=>{let t=null,n=null,r=null;switch(l.cw(e)){case 0:r=Ee(e);break;case 1:n=l.t3(e);break;case 2:t=Ee(e)}const o=l.ov(e)?l.pT(e):0;return new Pe(t,n,r,o)})(l.$C(e)),ze=(e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,a=e.tname,s=e.assoc;let l=null,c=0;if(null!==o){if(ot(r,o.client)<=o.clock)return null;const e=n?wr(r,o):{item:st(r,o),diff:0},t=e.item;if(!(t instanceof Mr))return null;if(l=t.parent,null===l._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==a)l=t.get(a);else{if(null===i)throw p.unexpectedCase();{if(ot(r,i.client)<=i.clock)return null;const{item:e}=n?wr(r,i):{item:st(r,i)};if(!(e instanceof Mr&&e.content instanceof br))return null;l=e.content.type}}c=s>=0?l._length:0}return((e,t,n=0)=>new Re(e,t,n))(l,c,e.assoc)},$e=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&Me(e.item,t.item)&&Me(e.type,t.type)&&e.assoc===t.assoc;class Ve{constructor(e,t){this.ds=e,this.sv=t}}const Ue=(e,t)=>{const n=e.ds.clients,r=t.ds.clients,o=e.sv,i=t.sv;if(o.size!==i.size||n.size!==r.size)return!1;for(const[e,t]of o.entries())if(i.get(e)!==t)return!1;for(const[e,t]of n.entries()){const n=r.get(e)||[];if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++){const r=t[e],o=n[e];if(r.clock!==o.clock||r.len!==o.len)return!1}}return!0},We=(e,t=new ae)=>(G(t,e.ds),ve(t,e.sv),t.toUint8Array()),qe=e=>We(e,new oe),Ke=(e,t=new ne(l.$C(e)))=>new Ve(Y(t),me(t)),Ge=e=>Ke(e,new ee(l.$C(e))),Ye=(e,t)=>new Ve(e,t),Je=Ye(q(),new Map),Xe=e=>Ye(K(e.store),rt(e.store)),Qe=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!$(t.ds,e.id),Ze=(e,t)=>{const n=a.setIfUndefined(e.meta,Ze,g.create),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<ot(r,n)&&ct(e,Oe(n,t))}),z(e,t.ds,e=>{}),n.add(t))},et=(e,t,n=new Z)=>{if(e.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");const{sv:r,ds:o}=t,i=new se;return e.transact(t=>{let n=0;r.forEach(e=>{e>0&&n++}),s.zd(i.restEncoder,n);for(const[n,o]of r){if(0===o)continue;o<ot(e.store,n)&&ct(t,Oe(n,o));const r=e.store.clients.get(n)||[],a=at(r,o-1);s.zd(i.restEncoder,a+1),i.writeClient(n),s.zd(i.restEncoder,0);for(let e=0;e<=a;e++)r[e].write(i,0)}G(i,o)}),de(n,i.toUint8Array(),"snapshot"),n},tt=(e,t)=>((e,t,n=re)=>{const r=new n(l.$C(t)),o=new Mt(r,!1);for(let t=o.curr;null!==t;t=o.next())if((e.sv.get(t.id.client)||0)<t.id.clock+t.length)return!1;const i=U([e.ds,Y(r)]);return X(e.ds,i)})(e,t,te);class nt{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const rt=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},ot=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},it=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw p.unexpectedCase()}n.push(t)},at=(e,t)=>{let n=0,r=e.length-1,o=e[r],a=o.id.clock;if(a===t)return r;let s=i.floor(t/(a+o.length-1)*r);for(;n<=r;){if(o=e[s],a=o.id.clock,a<=t){if(t<a+o.length)return s;n=s+1}else r=s-1;s=i.floor((n+r)/2)}throw p.unexpectedCase()},st=(e,t)=>{const n=e.clients.get(t.client);return n[at(n,t.clock)]},lt=(e,t,n)=>{const r=at(t,n),o=t[r];return o.id.clock<n&&o instanceof Mr?(t.splice(r+1,0,xr(e,o,n-o.id.clock)),r+1):r},ct=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[lt(e,n,t.clock)]},ut=(e,t,n)=>{const r=t.clients.get(n.client),o=at(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==er&&r.splice(o+1,0,xr(e,i,n.clock-i.id.clock+1)),i},dt=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,s=lt(e,t,n);do{a=t[s++],i<a.id.clock+a.length&&lt(e,t,i),o(a)}while(s<t.length&&t[s].id.clock<i)};class ft{constructor(e,t,n){this.doc=e,this.deleteSet=new H,this.beforeState=rt(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const pt=(e,t)=>!(0===t.deleteSet.clients.size&&!a.any(t.afterState,(e,n)=>t.beforeState.get(n)!==e)||(V(t.deleteSet),((e,t)=>{le(e,t.doc.store,t.beforeState)})(e,t),G(e,t.deleteSet),0)),ht=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&a.setIfUndefined(e.changed,t,g.create).add(n)},mt=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--o-1])n instanceof Mr&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},gt=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=at(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof Mr&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}},vt=(e,t)=>{e.clients.forEach((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=i.min(r.length-1,1+at(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+mt(r,e)}})},yt=(e,t,n)=>{gt(e,t,n),vt(e,t)},bt=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,a=n.deleteSet,s=n._mergeStructs;try{V(a),n.afterState=rt(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach((t,r)=>e.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})),e.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),Se(t._dEH,e,n))})}),e.push(()=>r.emit("afterTransaction",[n,r])),(0,m.OK)(e,[]),n._needFormattingCleanup&&Vn(n)}finally{r.gc&&gt(a,o,r.gcFilter),vt(a,o),n.afterState.forEach((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=i.max(at(e,r),1);for(let t=e.length-1;t>=n;)t-=1+mt(e,t)}});for(let e=s.length-1;e>=0;e--){const{client:t,clock:n}=s[e].id,r=o.clients.get(t),i=at(r,n);i+1<r.length&&mt(r,i+1)>1||i>0&&mt(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(j(E,k,"[yjs] ",x,O,"Changed the client-id because another client seems to be using it."),r.clientID=Q()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new ie;pt(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new se;pt(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:u}=n;(l.size>0||u.size>0||c.size>0)&&(l.forEach(e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)}),u.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:c,added:l,removed:u},r,n]),u.forEach(e=>e.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):bt(e,t+1)}}},wt=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new ft(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&bt(o,0)}}return a};class kt{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const xt=(e,t,n)=>{z(e,n.deletions,e=>{e instanceof Mr&&t.scope.some(t=>_e(t,e))&&kr(e,!1)})},St=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;wt(o,n=>{for(;t.length>0&&null===e.currStackItem;){const r=o.store,a=t.pop(),s=new Set,l=[];let c=!1;z(n,a.insertions,e=>{if(e instanceof Mr){if(null!==e.redone){let{item:t,diff:o}=wr(r,e.id);o>0&&(t=ct(n,Oe(t.id.client,t.id.clock+o))),e=t}!e.deleted&&i.some(t=>_e(t,e))&&l.push(e)}}),z(n,a.deletions,e=>{e instanceof Mr&&i.some(t=>_e(t,e))&&!$(a.insertions,e.id)&&s.add(e)}),s.forEach(t=>{c=null!==Cr(n,t,s,a.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=l.length-1;t>=0;t--){const r=l[t];e.deleteFilter(r)&&(r.delete(n),c=!0)}e.currStackItem=c?a:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),r=n},e);const a=e.currStackItem;if(null!=a){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return a};class Ct extends r.W{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:a=!1,doc:s=o.cy(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.doc=s,this.addToScope(e),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=a,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some(t=>e.changedParentTypes.has(t))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new H;e.afterState.forEach((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&W(o,n,r,i)});const i=w._g();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=U([t.deletions,e.deleteSet]),t.insertions=U([t.insertions,o])}else r.push(new kt(e.deleteSet,o)),a=!0;t||n||(this.lastChange=i),z(e,e.deleteSet,e=>{e instanceof Mr&&this.scope.some(t=>_e(t,e))&&kr(e,!0)});const s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){(e=o.cy(e)?e:[e]).forEach(e=>{this.scope.every(t=>t!==e)&&(e.doc!==this.doc&&P("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>xt(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>xt(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=St(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=St(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class Mt{constructor(e,t){this.gen=function*(e){const t=l.cw(e.restDecoder);for(let n=0;n<t;n++){const t=l.cw(e.restDecoder),n=e.readClient();let r=l.cw(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=l.cw(e.restDecoder);yield new Er(Oe(n,r),t),r+=t}else if(h.WY&t){const o=!(t&(h.D7|h.wt)),i=new Mr(Oe(n,r),null,(t&h.wt)===h.wt?e.readLeftID():null,null,(t&h.D7)===h.D7?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,o&&(t&h.KJ)===h.KJ?e.readString():null,Or(e,t));yield i,r+=i.length}else{const t=e.readLen();yield new er(Oe(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Er);return this.curr}}const Ot=e=>At(e,te),At=(e,t=re)=>{const n=[],r=new t(l.$C(e)),o=new Mt(r,!1);for(let e=o.curr;null!==e;e=o.next())n.push(e);j("Structs: ",n);const i=Y(r);j("DeleteSet: ",i)},Et=e=>Tt(e,te),Tt=(e,t=re)=>{const n=[],r=new t(l.$C(e)),o=new Mt(r,!1);for(let e=o.curr;null!==e;e=o.next())n.push(e);return{structs:n,ds:Y(r)}};class _t{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Nt=e=>Lt(e,te,ie),jt=(e,t=ae,n=re)=>{const r=new t,o=new Mt(new n(l.$C(e)),!1);let i=o.curr;if(null!==i){let e=0,t=i.id.client,n=0!==i.id.clock,a=n?0:i.id.clock+i.length;for(;null!==i;i=o.next())t!==i.id.client&&(0!==a&&(e++,s.zd(r.restEncoder,t),s.zd(r.restEncoder,a)),t=i.id.client,a=0,n=0!==i.id.clock),i.constructor===Er&&(n=!0),n||(a=i.id.clock+i.length);0!==a&&(e++,s.zd(r.restEncoder,t),s.zd(r.restEncoder,a));const l=s.xv();return s.zd(l,e),s.Vp(l,r.restEncoder),r.restEncoder=l,r.toUint8Array()}return s.zd(r.restEncoder,0),r.toUint8Array()},Pt=e=>jt(e,oe,te),It=(e,t=re)=>{const n=new Map,r=new Map,o=new Mt(new t(l.$C(e)),!1);let i=o.curr;if(null!==i){let e=i.id.client,t=i.id.clock;for(n.set(e,t);null!==i;i=o.next())e!==i.id.client&&(r.set(e,t),n.set(i.id.client,i.id.clock),e=i.id.client),t=i.id.clock+i.length;r.set(e,t)}return{from:n,to:r}},Dt=e=>It(e,te),Rt=(e,t)=>{if(e.constructor===er){const{client:n,clock:r}=e.id;return new er(Oe(n,r+t),e.length-t)}if(e.constructor===Er){const{client:n,clock:r}=e.id;return new Er(Oe(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new Mr(Oe(r,o+t),null,Oe(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Lt=(e,t=re,n=se)=>{if(1===e.length)return e[0];const r=e.map(e=>new t(l.$C(e)));let o=r.map(e=>new Mt(e,!0)),i=null;const a=new n,s=new _t(a);for(;o=o.filter(e=>null!==e.curr),o.sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Er?1:-1:n}return t.curr.id.client-e.curr.id.client}),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==i){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>i.struct.id.clock+i.struct.length)continue;if(t!==i.struct.id.client)zt(s,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===Er)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{zt(s,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Er(Oe(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===Er?i.struct.length-=t:n=Rt(n,t)),i.struct.mergeWith(n)||(zt(s,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==Er;n=e.next())zt(s,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(zt(s,i.struct,i.offset),i=null),$t(s);const c=r.map(e=>Y(e)),u=U(c);return G(a,u),a.toUint8Array()},Ft=(e,t,n=re,r=se)=>{const o=ge(t),a=new r,s=new _t(a),c=new n(l.$C(e)),u=new Mt(c,!1);for(;u.curr;){const e=u.curr,t=e.id.client,n=o.get(t)||0;if(u.curr.constructor!==Er)if(e.id.clock+e.length>n)for(zt(s,e,i.max(n-e.id.clock,0)),u.next();u.curr&&u.curr.id.client===t;)zt(s,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===t&&u.curr.id.clock+u.curr.length<=n;)u.next();else u.next()}$t(s);const d=Y(c);return G(a,d),a.toUint8Array()},Bt=(e,t)=>Ft(e,t,te,ie),Ht=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:s.Fo(e.encoder.restEncoder)}),e.encoder.restEncoder=s.xv(),e.written=0)},zt=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Ht(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),s.zd(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},$t=e=>{Ht(e);const t=e.encoder.restEncoder;s.zd(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];s.zd(t,r.written),s.LH(t,r.restEncoder)}},Vt=(e,t,n,r)=>{const o=new n(l.$C(e)),i=new Mt(o,!1),a=new r,s=new _t(a);for(let e=i.curr;null!==e;e=i.next())zt(s,t(e),0);$t(s);const c=Y(o);return G(a,c),a.toUint8Array()},Ut=({formatting:e=!0,subdocs:t=!0,yxml:n=!0}={})=>{let r=0;const o=a.create(),i=a.create(),s=a.create(),l=a.create();return l.set(null,null),c=>{switch(c.constructor){case er:case Er:return c;case Mr:{const u=c,f=u.content;switch(f.constructor){case nr:break;case br:if(n){const e=f.type;e instanceof Yn&&(e.nodeName=a.setIfUndefined(i,e.nodeName,()=>"node-"+r)),e instanceof Xn&&(e.hookName=a.setIfUndefined(i,e.hookName,()=>"hook-"+r))}break;case cr:{const e=f;e.arr=e.arr.map(()=>r);break}case tr:f.content=new Uint8Array([r]);break;case or:{const e=f;t&&(e.opts={},e.doc.guid=r+"");break}case ir:f.embed={};break;case ar:{const t=f;e&&(t.key=a.setIfUndefined(s,t.key,()=>r+""),t.value=a.setIfUndefined(l,t.value,()=>({i:r})));break}case sr:{const e=f;e.arr=e.arr.map(()=>r);break}case ur:{const e=f;e.str=d.ux(r%10+"",e.str.length);break}default:p.unexpectedCase()}return u.parentSub&&(u.parentSub=a.setIfUndefined(o,u.parentSub,()=>r+"")),r++,c}default:p.unexpectedCase()}}},Wt=(e,t)=>Vt(e,Ut(t),te,ie),qt=(e,t)=>Vt(e,Ut(t),re,se),Kt=e=>Vt(e,m.id,te,se),Gt=e=>Vt(e,m.id,re,ie),Yt="You must not compute changes after the event-handler fired.";class Jt{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Xt(this.currentTarget,this.target))}deletes(e){return $(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw p.create(Yt);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){const r=t._map.get(n);let i,a;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",a=o.HV(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",a=o.HV(e.content.getContent())):(i="add",a=void 0)}else{if(!this.deletes(r))return;i="delete",a=o.HV(r.content.getContent())}e.set(n,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw p.create(Yt);const t=this.target,n=g.create(),r=g.create(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const Xt=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},Qt=()=>{P("Invalid access: Add Yjs type to a document before reading data.")};let Zt=0;class en{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Zt++}}const tn=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Zt++},nn=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>i.abs(t-e.index)<i.abs(t-n.index)?e:n);let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=Zt++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&i.abs(n.index-o)<r.parent.length/80?(tn(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return tn(r,t,n),r}{const r=new en(t,n);return e.push(r),r}})(e._searchMarker,r,o)},rn=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=i.max(t,o.index+n))}},on=e=>{e.doc??Qt();let t=e._start;const n=[];for(;t;)n.push(t),t=t.right;return n},an=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;a.setIfUndefined(o,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;Se(r._eH,n,t)};class sn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=we(),this._dEH=we(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw p.methodUnimplemented()}clone(){throw p.methodUnimplemented()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ke(this._eH,e)}observeDeep(e){ke(this._dEH,e)}unobserve(e){xe(this._eH,e)}unobserveDeep(e){xe(this._dEH,e)}toJSON(){}}const ln=(e,t,n)=>{e.doc??Qt(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},cn=e=>{e.doc??Qt();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},un=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&Qe(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},dn=(e,t)=>{let n=0,r=e._start;for(e.doc??Qt();null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},fn=(e,t)=>{const n=[];return dn(e,(r,o)=>{n.push(t(r,o,e))}),n},pn=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},hn=(e,t)=>{e.doc??Qt();const n=nn(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},mn=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,s=i.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new Mr(Oe(a,ot(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new cr(c)),o.integrate(e,0),c=[])};r.forEach(n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:o=new Mr(Oe(a,ot(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new tr(new Uint8Array(n))),o.integrate(e,0);break;case Z:o=new Mr(Oe(a,ot(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new or(n)),o.integrate(e,0);break;default:if(!(n instanceof sn))throw new Error("Unexpected content type in insert operation");o=new Mr(Oe(a,ot(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new br(n)),o.integrate(e,0)}}}),u()},gn=()=>p.create("Length exceeded!"),vn=(e,t,n,r)=>{if(n>t._length)throw gn();if(0===n)return t._searchMarker&&rn(t._searchMarker,n,r.length),mn(e,t,null,r);const o=n,i=nn(t,n);let a=t._start;for(null!==i&&(a=i.p,0==(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&ct(e,Oe(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&rn(t._searchMarker,o,r.length),mn(e,t,a,r)},yn=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=nn(t,n);let s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&ct(e,Oe(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&ct(e,Oe(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw gn();t._searchMarker&&rn(t._searchMarker,o,-i+r)},bn=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},wn=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let s;if(null==r)s=new cr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:s=new cr([r]);break;case Uint8Array:s=new tr(r);break;case Z:s=new or(r);break;default:if(!(r instanceof sn))throw new Error("Unexpected content type");s=new br(r)}new Mr(Oe(a,ot(i.store,a)),o,o&&o.lastId,null,null,t,n,s).integrate(e,0)},kn=(e,t)=>{e.doc??Qt();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},xn=e=>{const t={};return e.doc??Qt(),e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},Sn=(e,t)=>{e.doc??Qt();const n=e._map.get(t);return void 0!==n&&!n.deleted},Cn=(e,t,n)=>{let r=e._map.get(t)||null;for(;null!==r&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return null!==r&&Qe(r,n)?r.content.getContent()[r.length-1]:void 0},Mn=(e,t)=>{const n={};return e._map.forEach((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&Qe(o,t)&&(n[r]=o.content.getContent()[o.length-1])}),n},On=e=>{return e.doc??Qt(),t=e._map.entries(),n=e=>!e[1].deleted,D(()=>{let e;do{e=t.next()}while(!e.done&&!n(e.value));return e});var t,n};class An extends Jt{}class En extends sn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new En;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new En}clone(){const e=new En;return e.insert(0,this.toArray().map(e=>e instanceof sn?e.clone():e)),e}get length(){return this.doc??Qt(),this._length}_callObserver(e,t){super._callObserver(e,t),an(this,e,new An(this,e))}insert(e,t){null!==this.doc?wt(this.doc,n=>{vn(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?wt(this.doc,t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;mn(e,t,r,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?wt(this.doc,n=>{yn(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return hn(this,e)}toArray(){return cn(this)}slice(e=0,t=this.length){return ln(this,e,t)}toJSON(){return this.map(e=>e instanceof sn?e.toJSON():e)}map(e){return fn(this,e)}forEach(e){dn(this,e)}[Symbol.iterator](){return pn(this)}_write(e){e.writeTypeRef(fr)}}class Tn extends Jt{constructor(e,t,n){super(e,t),this.keysChanged=n}}class _n extends sn{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new _n}clone(){const e=new _n;return this.forEach((t,n)=>{e.set(n,t instanceof sn?t.clone():t)}),e}_callObserver(e,t){an(this,e,new Tn(this,e,t))}toJSON(){this.doc??Qt();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof sn?r.toJSON():r}}),e}get size(){return[...On(this)].length}keys(){return R(On(this),e=>e[0])}values(){return R(On(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return R(On(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Qt(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?wt(this.doc,t=>{bn(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?wt(this.doc,n=>{wn(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return kn(this,e)}has(e){return Sn(this,e)}clear(){null!==this.doc?wt(this.doc,e=>{this.forEach(function(t,n,r){bn(e,r,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(pr)}}const Nn=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&L.equalFlat(e,t);class jn{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){null===this.right&&p.unexpectedCase(),this.right.content.constructor===ar?this.right.deleted||Rn(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const Pn=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===ar?t.right.deleted||Rn(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&ct(e,Oe(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},In=(e,t,n,r)=>{const o=new Map,i=r?nn(t,n):null;if(i){const t=new jn(i.p.left,i.p,i.index,o);return Pn(e,t,n-i.index)}{const r=new jn(null,t._start,0,o);return Pn(e,r,n)}},Dn=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===ar&&Nn(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((r,a)=>{const s=n.left,l=n.right,c=new Mr(Oe(i,ot(o.store,i)),s,s&&s.lastId,l,l&&l.id,t,null,new ar(a,r));c.integrate(e,0),n.right=c,n.forward()})},Rn=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Ln=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===ar&&Nn(t[e.right.content.key]??null,e.right.content.value));)e.forward()},Fn=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const s in r){const l=r[s],c=n.currentAttributes.get(s)??null;if(!Nn(c,l)){a.set(s,c);const{left:r,right:u}=n;n.right=new Mr(Oe(i,ot(o.store,i)),r,r&&r.lastId,u,u&&u.id,t,null,new ar(s,l)),n.right.integrate(e,0),n.forward()}}return a},Bn=(e,t,n,r,o)=>{n.currentAttributes.forEach((e,t)=>{void 0===o[t]&&(o[t]=null)});const i=e.doc,a=i.clientID;Ln(n,o);const s=Fn(e,t,n,o),l=r.constructor===String?new ur(r):r instanceof sn?new br(r):new ir(r);let{left:c,right:u,index:d}=n;t._searchMarker&&rn(t._searchMarker,n.index,l.getLength()),u=new Mr(Oe(a,ot(i.store,a)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),Dn(e,t,n,s)},Hn=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;Ln(n,o);const s=Fn(e,t,n,o);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===ar));){if(!n.right.deleted)switch(n.right.content.constructor){case ar:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(Nn(a,i))s.delete(t);else{if(0===r)break e;s.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&ct(e,Oe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new Mr(Oe(a,ot(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new ur(o)),n.right.integrate(e,0),n.forward()}Dn(e,t,n,s)},zn=(e,t,n,r,o)=>{let i=t;const s=a.create();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===ar){const e=i.content;s.set(e.key,e)}i=i.right}let l=0,c=!1;for(;t!==i;){if(n===t&&(c=!0),!t.deleted){const n=t.content;switch(n.constructor){case ar:{const{key:i,value:a}=n,u=r.get(i)??null;s.get(i)===n&&u!==a||(t.delete(e),l++,c||(o.get(i)??null)!==a||u===a||(null===u?o.delete(i):o.set(i,u))),c||t.deleted||Rn(o,n);break}}}t=t.right}return l},$n=e=>{let t=0;return wt(e.doc,n=>{let r=e._start,o=e._start,i=a.create();const s=a.copy(i);for(;o;)!1===o.deleted&&(o.content.constructor===ar?Rn(s,o.content):(t+=zn(n,r,o,i,s),i=a.copy(s),r=o)),o=o.right}),t},Vn=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&dt(e,n.store.clients.get(r),i,o,e=>{e.deleted||e.content.constructor!==ar||e.constructor===er||t.add(e.parent)})}wt(n,n=>{z(e,e.deleteSet,e=>{if(e instanceof er||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===ar?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ar){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)});for(const e of t)$n(e)})},Un=(e,t,n)=>{const r=n,o=a.copy(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case br:case ir:case ur:n<t.right.length&&ct(e,Oe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&zn(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&rn(s._searchMarker,t.index,-r+n),t};class Wn extends Jt{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];wt(e,e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let s="",l=0,c=0;const u=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),s="";break;case"retain":l>0&&(e={retain:l},L.isEmpty(a)||(e.attributes=L.assign({},a))),l=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case br:case ir:this.adds(o)?this.deletes(o)||(u(),i="insert",s=o.content.getContent()[0],u()):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=1):o.deleted||("retain"!==i&&(u(),i="retain"),l+=1);break;case ur:this.adds(o)?this.deletes(o)||("insert"!==i&&(u(),i="insert"),s+=o.content.str):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(u(),i="retain"),l+=o.length);break;case ar:{const{key:t,value:s}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=n.get(t)??null;Nn(l,s)?null!==s&&o.delete(e):("retain"===i&&u(),Nn(s,r.get(t)??null)?delete a[t]:a[t]=s)}}else if(this.deletes(o)){r.set(t,s);const e=n.get(t)??null;Nn(e,s)||("retain"===i&&u(),a[t]=e)}else if(!o.deleted){r.set(t,s);const n=a[t];void 0!==n&&(Nn(n,s)?null!==n&&o.delete(e):("retain"===i&&u(),null===s?delete a[t]:a[t]=s))}o.deleted||("insert"===i&&u(),Rn(n,o.content));break}}o=o.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class qn extends sn{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Qt(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new qn}clone(){const e=new qn;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Wn(this,e,t);an(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Qt();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===ur&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?wt(this.doc,n=>{const r=new jn(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&Bn(n,this,r,a,i.attributes||{})}else void 0!==i.retain?Hn(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Un(n,r,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??Qt();const r=[],o=new Map,i=this.doc;let a="",s=this._start;function l(){if(a.length>0){const e={};let t=!1;o.forEach((n,r)=>{t=!0,e[r]=n});const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==s;){if(Qe(s,e)||void 0!==t&&Qe(s,t))switch(s.content.constructor){case ur:{const r=o.get("ychange");void 0===e||Qe(s,e)?void 0===t||Qe(s,t)?void 0!==r&&(l(),o.delete("ychange")):void 0!==r&&r.user===s.id.client&&"added"===r.type||(l(),o.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==r&&r.user===s.id.client&&"removed"===r.type||(l(),o.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break}case br:case ir:{l();const e={insert:s.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach((e,n)=>{t[n]=e})}r.push(e);break}case ar:Qe(s,e)&&(l(),Rn(o,s.content))}s=s.right}l()};return e||t?wt(i,n=>{e&&Ze(n,e),t&&Ze(n,t),c()},"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?wt(r,r=>{const o=In(r,this,e,!n);n||(n={},o.currentAttributes.forEach((e,t)=>{n[t]=e})),Bn(r,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const r=this.doc;null!==r?wt(r,r=>{const o=In(r,this,e,!n);Bn(r,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?wt(n,n=>{Un(n,In(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?wt(r,r=>{const o=In(r,this,e,!1);null!==o.right&&Hn(r,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?wt(this.doc,t=>{bn(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?wt(this.doc,n=>{wn(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return kn(this,e)}getAttributes(){return xn(this)}_write(e){e.writeTypeRef(hr)}}class Kn{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Qt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Yn&&t.constructor!==Gn||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Gn extends sn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gn}clone(){const e=new Gn;return e.insert(0,this.toArray().map(e=>e instanceof sn?e.clone():e)),e}get length(){return this.doc??Qt(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Kn(this,e)}querySelector(e){e=e.toUpperCase();const t=new Kn(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),o.HT(new Kn(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){an(this,e,new Jn(this,t,e))}toString(){return fn(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),dn(this,o=>{r.insertBefore(o.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?wt(this.doc,n=>{vn(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)wt(this.doc,n=>{const r=e&&e instanceof sn?e._item:e;mn(n,this,r,t)});else{const n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw p.create("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?wt(this.doc,n=>{yn(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return cn(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return hn(this,e)}slice(e=0,t=this.length){return ln(this,e,t)}forEach(e){dn(this,e)}_write(e){e.writeTypeRef(gr)}}class Yn extends Gn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new Yn(this.nodeName)}clone(){const e=new Yn(this.nodeName),t=this.getAttributes();return L.forEach(t,(t,n)=>{"string"==typeof t&&e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof sn?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?wt(this.doc,t=>{bn(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?wt(this.doc,n=>{wn(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return kn(this,e)}hasAttribute(e){return Sn(this,e)}getAttributes(e){return e?Mn(this,e):xn(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return dn(this,o=>{r.appendChild(o.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(mr),e.writeKey(this.nodeName)}}class Jn extends Jt{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class Xn extends _n{constructor(e){super(),this.hookName=e}_copy(){return new Xn(this.hookName)}clone(){const e=new Xn(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(vr),e.writeKey(this.hookName)}}class Qn extends qn{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Qn}clone(){const e=new Qn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:n,attrs:r})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let e=0;e<t.length;e++){const r=t[e];n+=`<${r.nodeName}`;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(yr)}}class Zn{constructor(e,t){this.id=e,this.length=t}get deleted(){throw p.methodUnimplemented()}mergeWith(e){return!1}write(e,t,n){throw p.methodUnimplemented()}integrate(e,t){throw p.methodUnimplemented()}}class er extends Zn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),it(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class tr{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new tr(this.content)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class nr{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new nr(this.len)}splice(e){const t=new nr(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){W(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const rr=(e,t)=>new Z({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class or{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new or(rr(this.doc.guid,this.opts))}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ir{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ir(this.embed)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class ar{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ar(this.key,this.value)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class sr{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new sr(this.arr)}splice(e){const t=new sr(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const lr="development"===f.getVariable("node_env");class cr{constructor(e){this.arr=e,lr&&L.deepFreeze(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new cr(this.arr)}splice(e){const t=new cr(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class ur{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ur(this.str)}splice(e){const t=new ur(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const dr=[e=>new En,e=>new _n,e=>new qn,e=>new Yn(e.readKey()),e=>new Gn,e=>new Xn(e.readKey()),e=>new Qn],fr=0,pr=1,hr=2,mr=3,gr=4,vr=5,yr=6;class br{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new br(this.type._copy())}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const wr=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=Oe(r.client,r.clock+o)),n=st(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Mr);return{item:n,diff:o}},kr=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},xr=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Mr(Oe(r,o+n),t,Oe(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Oe(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},Sr=(e,t)=>o.zN(e,e=>$(e.deletions,t)),Cr=(e,t,n,r,o,i)=>{const a=e.doc,s=a.store,l=a.clientID,c=t.redone;if(null!==c)return ct(e,c);let u,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===Cr(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=ct(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,u=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:ct(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==u;){let t=u;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:ct(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||$(r,f.right.id)||Sr(i.undoStack,f.right.id)||Sr(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=ct(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const h=ot(s,l),m=Oe(l,h),g=new Mr(m,f,f&&f.lastId,u,u&&u.id,p,t.parentSub,t.content.copy());return t.redone=m,kr(g,!0),g.integrate(e,0),g};class Mr extends Zn{constructor(e,t,n,r,o,i,a,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=s,this.info=this.content.isCountable()?h.KD:0}set marker(e){(this.info&h.wn)>0!==e&&(this.info^=h.wn)}get marker(){return(this.info&h.wn)>0}get keep(){return(this.info&h.Dk)>0}set keep(e){this.keep!==e&&(this.info^=h.Dk)}get countable(){return(this.info&h.KD)>0}get deleted(){return(this.info&h.D1)>0}set deleted(e){this.deleted!==e&&(this.info^=h.D1)}markDeleted(){this.info|=h.D1}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ot(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ot(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ce&&this.id.client!==this.parent.client&&this.parent.clock>=ot(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ut(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ct(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===er||this.right&&this.right.constructor===er)this.parent=null;else if(this.parent){if(this.parent.constructor===Ce){const e=st(t,this.parent);e.constructor===er?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Mr&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Mr&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=ut(e,e.doc.store,Oe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),Me(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Me(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(st(e.doc.store,t.origin)))break;r.has(st(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),it(e.doc.store,this),this.content.integrate(e,this),ht(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new er(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Oe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Me(e.origin,this.lastId)&&this.right===e&&Me(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),W(e.deleteSet,this.id.client,this.id.clock,this.length),ht(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw p.unexpectedCase();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[at(r,t.id.clock)]=n})(e,this,new er(this.id,this.length)):this.content=new nr(this.length)}write(e,t){const n=t>0?Oe(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=this.content.getRef()&h.WY|(null===n?0:h.wt)|(null===r?0:h.D7)|(null===o?0:h.KJ);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=Te(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Ce?(e.writeParentInfo(!1),e.writeLeftID(t)):p.unexpectedCase();null!==o&&e.writeString(o)}this.content.write(e,t)}}const Or=(e,t)=>Ar[t&h.WY](e),Ar=[()=>{p.unexpectedCase()},e=>new nr(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new sr(n)},e=>new tr(e.readBuf()),e=>new ur(e.readString()),e=>new ir(e.readJSON()),e=>new ar(e.readKey(),e.readJSON()),e=>new br(dr[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new cr(n)},e=>new or(rr(e.readString(),e.readAny())),()=>{p.unexpectedCase()}];class Er extends Zn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){p.unexpectedCase()}write(e,t){e.writeInfo(10),s.zd(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Tr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},_r="__ $YJS$ __";!0===Tr[_r]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Tr[_r]=!0}}]);