(self.webpackChunkacmsWebpackJsonp=self.webpackChunkacmsWebpackJsonp||[]).push([[9475],{86430:function(e,n,a){var i=a(24994);Object.defineProperty(n,"__esModule",{value:!0}),n.lockEntry=n.checkEntryLock=void 0;var t=i(a(1506));n.lockEntry=async()=>{const e=new URLSearchParams;e.append("ACMS_POST_Entry_Lock_Exec","true"),e.append("rvid",ACMS.Config.rvid||"0"),e.append("eid",ACMS.Config.eid||"0"),e.append("formToken",window.csrfToken),await(0,t.default)({method:"POST",url:window.location.href,data:e})},n.checkEntryLock=async()=>{const e=new URLSearchParams;e.append("ACMS_POST_Entry_Lock_Check","true"),e.append("rvid",ACMS.Config.rvid||"0"),e.append("eid",ACMS.Config.eid||"0"),e.append("formToken",window.csrfToken);const n=await(0,t.default)({method:"POST",url:window.location.href,responseType:"json",data:e}),a=n.data;return 200===n.status?a:{locked:!1}}},27613:function(e,n,a){var i=a(24994);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(96540),d=a(81431),l=i(a(78716)),c=i(a(83934)),o=a(86430),r=i(a(7019)),s=a(74848);n.default=()=>{const[e,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[m,h]=(0,t.useState)({name:"",icon:"",datetime:"",expire:"",viewLink:"",alertOnly:!1});(0,t.useEffect)(()=>{(async()=>{const e=await(0,o.checkEntryLock)();e.locked&&(n(!0),h({name:e.name,icon:e.icon,datetime:e.datetime,expire:e.expire,viewLink:e.viewLink,alertOnly:e.alertOnly}))})()},[n]),(0,c.default)(()=>{const e=(0,d.throttle)(1e4,async()=>{await(0,o.lockEntry)()}),n=["change","input","acmsAdminCategoryChange","acmsAdminSubCategoryChange","acmsAdminTagChange","acmsAdminMediaUnitChange","acmsAdminMediaFieldChange","acmsAdminRelatedEntryChange"],a=document.querySelector("#entryForm");return a&&n.forEach(n=>{a.addEventListener(n,e)}),()=>{a&&n.forEach(n=>{a.removeEventListener(n,e)})}});const y=m.alertOnly?(0,s.jsxs)(r.default,{display:"inline-flex",children:[(0,s.jsx)("a",{href:m.viewLink,className:"acms-admin-btn",children:ACMS.i18n("entry_lock.modal.viewLink")}),(0,s.jsx)("button",{onClick:()=>{n(!1)},type:"button",className:"acms-admin-btn acms-admin-btn-admin-primary acms-admin-btn-admin-search",children:ACMS.i18n("entry_lock.modal.editLink")})]}):(0,s.jsx)("div",{children:(0,s.jsx)("a",{href:m.viewLink,className:"acms-admin-btn acms-admin-btn-admin-info acms-admin-btn-admin-search",children:ACMS.i18n("entry_lock.modal.viewLink")})});return(0,s.jsxs)(l.default,{isOpen:e,onClose:()=>{n(!1)},size:"small",dialogStyle:{marginTop:"100px"},role:"alertdialog","aria-labelledby":"acms-admin-entry-lock-modal-title","aria-describedby":"acms-admin-entry-lock-modal-description",children:[(0,s.jsx)(l.default.Header,{children:ACMS.i18n("entry_lock.modal.title")}),(0,s.jsx)(l.default.Body,{children:(0,s.jsxs)("div",{className:"acms-admin-entry-lock-modal",children:[(0,s.jsxs)("p",{id:"acms-admin-entry-lock-modal-description",className:"acms-admin-entry-lock-modal-lead",children:[m.alertOnly&&ACMS.i18n("entry_lock.modal.lead1"),!m.alertOnly&&ACMS.i18n("entry_lock.modal.lead2")]}),(0,s.jsx)("table",{className:"acms-admin-entry-lock-modal-table acms-admin-table-admin-edit",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:ACMS.i18n("entry_lock.modal.nameLabel")}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"acms-admin-entry-lock-modal-user",children:[(0,s.jsx)("img",{src:`${ACMS.Config.root}archives/${m.icon}`,width:"24",height:"24",className:"acms-admin-user",alt:m.name}),(0,s.jsx)("span",{children:m.name})]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:ACMS.i18n("entry_lock.modal.editDateLabel")}),(0,s.jsx)("td",{children:m.datetime})]}),!m.alertOnly&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:ACMS.i18n("entry_lock.modal.lockExpireLabel")}),(0,s.jsx)("td",{children:m.expire})]})]})}),m.alertOnly&&(0,s.jsx)("p",{className:"acms-admin-entry-lock-modal-lead",children:ACMS.i18n("entry_lock.modal.lead3")}),m.alertOnly&&(0,s.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),i(!a)},className:"acms-admin-entry-lock-modal-note-label",children:[(0,s.jsx)("i",{className:"acms-admin-icon-tooltip"}),(0,s.jsx)("span",{children:ACMS.i18n("entry_lock.modal.noteLabel")})]}),m.alertOnly&&a&&(0,s.jsx)("p",{className:"acms-admin-entry-lock-modal-note",children:ACMS.i18n("entry_lock.modal.note")})]})}),(0,s.jsx)(l.default.Footer,{children:y})]})}},81431:function(e,n){"use strict";function a(e,n,a){var i,t=a||{},d=t.noTrailing,l=void 0!==d&&d,c=t.noLeading,o=void 0!==c&&c,r=t.debounceMode,s=void 0===r?void 0:r,m=!1,h=0;function y(){i&&clearTimeout(i)}function u(){for(var a=arguments.length,t=new Array(a),d=0;d<a;d++)t[d]=arguments[d];var c=this,r=Date.now()-h;function u(){h=Date.now(),n.apply(c,t)}function k(){i=void 0}m||(o||!s||i||u(),y(),void 0===s&&r>e?o?(h=Date.now(),l||(i=setTimeout(s?k:u,e))):u():!0!==l&&(i=setTimeout(s?k:u,void 0===s?e-r:e)))}return u.cancel=function(e){var n=(e||{}).upcomingOnly,a=void 0!==n&&n;y(),m=!a},u}Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=function(e,n,i){var t=(i||{}).atBegin;return a(e,n,{debounceMode:!1!==(void 0!==t&&t)})},n.throttle=a}}]);