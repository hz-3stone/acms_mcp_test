(self.webpackChunkacmsWebpackJsonp=self.webpackChunkacmsWebpackJsonp||[]).push([[7731],{73363:function(e,t,n){var i=n(24994);t.default=void 0;var a=i(n(58653));t.default=a.default},11453:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.allJustChecked=void 0,t.allJustChecked=(e,t,n)=>!Array.isArray(n)||!n.every(e=>e instanceof HTMLInputElement)||parseInt(t,10)===n.filter(e=>{let{checked:t}=e;return t}).length},8359:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.allMaxChecked=void 0,t.allMaxChecked=(e,t,n)=>!Array.isArray(n)||!n.every(e=>e instanceof HTMLInputElement)||parseInt(t,10)>=n.filter(e=>{let{checked:t}=e;return t}).length},14765:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.allMinChecked=void 0,t.allMinChecked=(e,t,n)=>!Array.isArray(n)||!n.every(e=>e instanceof HTMLInputElement)||parseInt(t,10)<=n.filter(e=>{let{checked:t}=e;return t}).length},22550:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.dates=void 0,t.dates=e=>!e||/^[sS]{1,2}(\d{2})\W{1}\d{1,2}\W{1}\d{0,2}$|^[hH]{1}(\d{1,2})\W{1}\d{1,2}\W{1}\d{0,2}$|^\d{1,2}$|^\d{1,2}\W{1}\d{1,2}$|^\d{2,4}\W{1}\d{1,2}\W{1}\d{0,2}$|^\d{4}\d{2}\d{2}/.test(e)},26741:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.digits=void 0,t.digits=e=>!e||e===String(parseInt(e,10))},77783:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.email=void 0,t.email=e=>!e||/^(?:(?:(?:(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+)(?:\.(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+))*)|(?:"(?:\\[^\r\n]|[^\\"])*")))\@(?:(?:(?:(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+)(?:\.(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+))*)|(?:\[(?:\\\S|[\x21-\x5a\x5e-\x7e])*\])))$/.test(e)},31938:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.equalTo=void 0;var i=n(88362);t.equalTo=(e,t,n)=>{if(Array.isArray(n))return!0;if(null===n.form)return!0;const a=(0,i.getFormElements)(n.form).find(e=>e.name===t);return void 0===a||!(a instanceof HTMLInputElement||a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement||a instanceof HTMLButtonElement)||e===a.value}},91172:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.filesize=void 0,t.filesize=(e,t,n)=>!(n instanceof HTMLInputElement&&n.files&&!(n.files.length<1)&&n.files[0].size>1024*parseInt(t,10))},28936:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hiragana=void 0,t.hiragana=e=>!e||!!e.match(/^[ぁ-ゞー]+$/)},5231:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"all_justChecked",{enumerable:!0,get:function(){return m.allJustChecked}}),Object.defineProperty(t,"all_maxChecked",{enumerable:!0,get:function(){return F.allMaxChecked}}),Object.defineProperty(t,"all_minChecked",{enumerable:!0,get:function(){return g.allMinChecked}}),Object.defineProperty(t,"dates",{enumerable:!0,get:function(){return v.dates}}),Object.defineProperty(t,"digits",{enumerable:!0,get:function(){return o.digits}}),Object.defineProperty(t,"email",{enumerable:!0,get:function(){return y.email}}),Object.defineProperty(t,"equalTo",{enumerable:!0,get:function(){return c.equalTo}}),Object.defineProperty(t,"filesize",{enumerable:!0,get:function(){return _.filesize}}),Object.defineProperty(t,"hiragana",{enumerable:!0,get:function(){return h.hiragana}}),Object.defineProperty(t,"katakana",{enumerable:!0,get:function(){return f.katakana}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return s.max}}),Object.defineProperty(t,"maxlength",{enumerable:!0,get:function(){return r.maxlength}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return l.min}}),Object.defineProperty(t,"minlength",{enumerable:!0,get:function(){return a.minlength}}),Object.defineProperty(t,"regex",{enumerable:!0,get:function(){return u.regex}}),Object.defineProperty(t,"regexp",{enumerable:!0,get:function(){return d.regexp}}),Object.defineProperty(t,"required",{enumerable:!0,get:function(){return i.required}}),Object.defineProperty(t,"times",{enumerable:!0,get:function(){return b.times}}),Object.defineProperty(t,"url",{enumerable:!0,get:function(){return p.url}});var i=n(20786),a=n(83787),r=n(8473),l=n(39311),s=n(61317),u=n(22996),d=n(92126),o=n(26741),c=n(31938),f=n(85181),h=n(28936),m=n(11453),g=n(14765),F=n(8359),v=n(22550),b=n(50001),p=n(64866),y=n(77783),_=n(91172)},85181:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.katakana=void 0,t.katakana=e=>!e||!!e.match(/^[ァ-ヾー]+$/)},61317:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.max=void 0,t.max=(e,t)=>!e||parseInt(t,10)>=parseInt(e,10)},8473:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxlength=void 0,t.maxlength=(e,t)=>!e||parseInt(t,10)>=String(e).length},39311:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.min=void 0,t.min=(e,t)=>!e||parseInt(t,10)<=parseInt(e,10)},83787:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.minlength=void 0,t.minlength=(e,t)=>!e||parseInt(t,10)<=String(e).length},22996:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.regex=void 0,t.regex=(e,t)=>{if(!e)return!0;let n="",i=t;return t.match(/^@(.*)@([igm]*)$/)&&(i=RegExp.$1,n=RegExp.$2),new RegExp(i,n).test(e)}},92126:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.regexp=void 0;var i=n(22996);t.regexp=(e,t,n,a)=>(0,i.regex)(e,t,n,a)},20786:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.required=void 0;var i=n(88362);t.required=(e,t,n)=>!!Array.isArray(n)||("checkbox"===n.type||"radio"===n.type?null===n.form||(0,i.getFormElements)(n.form).filter(e=>e.name===n.name).filter(e=>!e.disabled).some(e=>!0===e.checked):!!e)},50001:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.times=void 0,t.times=e=>{if(!e)return!0;if(!/^\d{1,2}$|^\d{1,2}\W{1}\d{1,2}$|^\d{1,2}\W{1}\d{1,2}\W{1}\d{1,2}$|^\d{2}\d{2}\d{2}$|^\d{2}:\d{2}(:\d{2})?$/.test(e))return!1;let t,n,i=0;if(e.includes(":")){const a=e.split(":");t=Number(a[0]),n=Number(a[1]),3===a.length&&(i=Number(a[2]))}else 6===e.length?(t=Number(e.substring(0,2)),n=Number(e.substring(2,4)),i=Number(e.substring(4,6))):4===e.length?(t=Number(e.substring(0,2)),n=Number(e.substring(2,4))):(t=Number(e),n=0);return t>=0&&t<=23&&n>=0&&n<=59&&i>=0&&i<=59}},64866:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0,t.url=e=>!e||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},88362:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFormElements=function(e){return Array.from(e.elements).filter(e=>!(e instanceof HTMLFieldSetElement))},t.isFunction=function(e){return"function"==typeof e}},58653:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(43693)),r=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?n(a,t,i):a[t]=e[t]);return a}(e)}(n(5231)),l=n(88362);const s={resultClassName:"validator-result-",okClassName:"valid",ngClassName:"invalid",shouldScrollOnSubmitFailed:!0,shouldFocusOnSubmitFailed:!0,onInvalid:()=>{},onValid:()=>{},onValidated:()=>{},onSubmitFailed:()=>{},shouldValidate:"onBlur",shouldValidateOnSubmit:!0,shouldRevalidate:"onChange",formnovalidateAttr:"data-acms-formnovalidate",customRules:{}};t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,"form",void 0),(0,a.default)(this,"config",void 0),(0,a.default)(this,"rules",void 0),(0,a.default)(this,"eventRegistry",void 0),(0,a.default)(this,"invalidFields",void 0),(0,a.default)(this,"eventMap",{onBlur:["focusout"],onChange:["change","input"]}),this.form=e,this.config={...s,...t},this.rules={...r,...this.config.customRules},this.eventRegistry=new Map,this.invalidFields=new Set,this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleRevalidate=this.handleRevalidate.bind(this),this.register()}register(){!1!==this.config.shouldValidate&&this.eventMap[this.config.shouldValidate].forEach(e=>{document.addEventListener(e,this.handleChange),this.eventRegistry.set(document,[...this.eventRegistry.get(document)||[],{type:e,listener:this.handleChange}])}),!1!==this.config.shouldRevalidate&&this.eventMap[this.config.shouldRevalidate].forEach(e=>{document.addEventListener(e,this.handleRevalidate),this.eventRegistry.set(document,[...this.eventRegistry.get(document)||[],{type:e,listener:this.handleRevalidate}])}),this.config.shouldValidateOnSubmit&&(this.form.addEventListener("submit",this.handleSubmit),this.eventRegistry.set(this.form,[{type:"submit",listener:this.handleSubmit}]))}unregister(){for(const[e,t]of this.eventRegistry)t.forEach(t=>{let{type:n,listener:i,options:a}=t;e.removeEventListener(n,i,a)});this.eventRegistry.clear()}registerRule(e,t){this.rules[e]=t}unregisterRule(e){delete this.rules[e]}reset(){this.unregister(),this.register()}destroy(){this.unregister()}handleChange(e){(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement||e.target instanceof HTMLTextAreaElement)&&!1!==this.config.shouldValidate&&this.getFields().includes(e.target)&&this.checkValidity(e.target)}handleRevalidate(e){(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement||e.target instanceof HTMLTextAreaElement)&&!1!==this.config.shouldRevalidate&&this.getFields().includes(e.target)&&this.invalidFields.has(e.target.name)&&this.checkValidity(e.target)}handleSubmit(e){e?.submitter?.hasAttribute(this.config.formnovalidateAttr)||this.config.shouldValidateOnSubmit&&(this.checkFormValidity()||(e.preventDefault(),this.config.shouldScrollOnSubmitFailed&&this.scrollToInvalidElement().then(()=>{this.config.shouldFocusOnSubmitFailed&&this.focusInvalidElement()}),!this.config.shouldScrollOnSubmitFailed&&this.config.shouldFocusOnSubmitFailed&&this.focusInvalidElement()))}validateAll(){const e=this.getFields().filter(e=>!1===e.disabled),t=[...new Set(e.map(e=>e.name.replace(/\[[\d]*\]/,"")))].reduce((e,t)=>{const n=this.extractValidations(t);return 0===n.length?e:{...e,[t]:n}},{}),n=Object.values(t).flat().filter(e=>"all_"===e.rule.substring(0,4)),i=[];return n.forEach(e=>{const t=Array.from(this.getFields()).filter(t=>t.name===e.field||t.name===`${e.field}[]`),n=this.rules[e.rule]("",e.arg,t,e);this.label(e.id,-1,n),this.toggleClass(e.field,n),i.push({ok:n,element:t,validation:e})}),e.forEach(e=>{const n=t[e.name.replace(/\[[\d]*\]/,"")];if(void 0===n)return;const{ok:a,results:r}=this.validate(e,n);this.toggleClass(e.name,a),i.push(...r)}),{ok:i.every(e=>e.ok),validationResults:i}}validate(e,t){const n=e.name.match(/\[([\d]+)\]/),i=null!==n?parseInt(n[1],10):-1,a=[];return t.length>0&&t.forEach(t=>{if(!t||!t.rule)return;if(!(0,l.isFunction)(this.rules[t.rule]))return;if("all_"===t.rule.substring(0,4))return;if(e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type)&&"required"!==t.rule)return;const n=this.rules[t.rule](e.value,t.arg,e,t);a.push({ok:n,element:e,validation:t}),this.label(t.id,i,n)}),{ok:a.every(e=>e.ok),results:a}}checkFormValidity(){const{ok:e,validationResults:t}=this.validateAll();return t.forEach(e=>{Array.isArray(e.element)?e.element.forEach(t=>{this.toggleAriaInvalid(t,e.ok),e.ok?this.invalidFields.delete(t.name):this.invalidFields.add(t.name)}):(this.toggleAriaInvalid(e.element,e.ok),e.ok?this.invalidFields.delete(e.element.name):this.invalidFields.add(e.element.name))}),e||this.config.onSubmitFailed(t,this.form),this.config.onValidated(t,this.form),e}checkValidity(e){const t=this.extractValidations(e.name),{ok:n,results:i}=this.validate(e,t);return this.toggleClass(e.name,n),this.toggleAriaInvalid(e,n),n?(this.invalidFields.delete(e.name),this.config.onValid(i,e)):(this.invalidFields.add(e.name),this.config.onInvalid(i,e)),this.config.onValidated(i,e),n}extractValidations(e){const t=e.replace(/\[[\d]*\]/,"");return this.getFields().filter(e=>e.name.startsWith(`${t}:validator#`)||e.name.startsWith(`${t}:v#`)).filter(e=>!e.disabled).reduce((e,t)=>{const n=t,i=n.name.match(/^(.*):(validator|v)#(.*)$/);return null===i?e:[...e,{field:i[1],rule:i[3],arg:n.value,id:n.id,name:n.name}]},[])}getFields(){return(0,l.getFormElements)(this.form)}label(e,t,n){const{resultClassName:i}=this.config,a=document.querySelectorAll(`[data-validator-label="${e}"]`);let r=null;a.length<1&&(r=document.querySelector(`label[for="${e}"]`)),1===a.length&&(r=document.querySelector(`[data-validator-label="${e}"]`)),a.length>1&&t>-1&&(r=a[t]),r&&(r.classList.remove(i),r.classList.remove(`${i}0`),r.classList.remove(`${i}1`),r.classList.add(`${i}${n?"1":"0"}`))}toggleClass(e,t){const{okClassName:n,ngClassName:i}=this.config,a=this.getFields().filter(t=>t.name===e||t.name===`${e}[]`).concat(Array.from(document.querySelectorAll(`[data-validator="${e.replace(/\[[\d]*\]/,"")}"]`)));a.length>0&&a.forEach(e=>{t?(e.classList.remove(i),e.classList.add(n)):(e.classList.remove(n),e.classList.add(i))})}toggleAriaInvalid(e,t){(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&e.setAttribute("aria-invalid",t?"false":"true")}getInvalidElement(){const{ngClassName:e}=this.config;return this.getFields().find(t=>t.classList.contains(e))||null}scrollToInvalidElement(){return new Promise(e=>{const t=this.getInvalidElement();if(t){let n;t.scrollIntoView({behavior:"smooth"});const i=()=>{clearTimeout(n),n=setTimeout(()=>{window.removeEventListener("scroll",i),e()},100)};window.addEventListener("scroll",i)}})}focusInvalidElement(){const e=this.getInvalidElement();e&&e.focus()}}}}]);