<!-- BEGIN_MODULE Module_Field id="{{module_id}}" -->
<!-- BEGIN style:veil -->
<style>
  .main-visual {<!-- BEGIN main_visual_height_pc:veil -->
    --mv-height-pc: {main_visual_height_pc}px;<!-- END main_visual_height_pc:veil --><!-- BEGIN main_visual_height_sp:veil -->
    --mv-height-sp: {main_visual_height_sp}px;<!-- END main_visual_height_sp:veil -->
  }
</style>
<!-- END style:veil -->

<section class="main-visual">
  @include("/include/edit/module-custom.html", {"label":"メインビジュアルを編集する" ,"hash":"#acms_box3"})

  <!-- BEGIN_IF [<!-- BEGIN main_visual:loop -->{main_visual_display}<!-- END main_visual:loop -->/eq/1] -->

  <!-- 背景画像が1枚のみ設定されている場合 -->
  <!-- BEGIN main_visual:loop -->
  <!-- BEGIN_IF [{main_visual_display}/eq/1] -->
  <picture class="main-visual-bg">
    <!-- BEGIN main_visual_bg_image_sp:veil -->
    <source srcset="%{HTTP_MEDIA_ARCHIVES_DIR}{main_visual_bg_image_sp@path}" media="(max-width: 767px)" />
    <!-- END main_visual_bg_image_sp:veil -->
    <img src="%{HTTP_MEDIA_ARCHIVES_DIR}{main_visual_bg_image@path}" alt="{main_visual_bg_image@alt}" class="is-alone">
  </picture>
  <!-- BEGIN_IF [{main_visual_copy_main}[delnl]/nem/_or_/{main_visual_copy_sub}[delnl]/nem/_or_/{main_visual_link1_href}/nem/_or_/{main_visual_link2_href}/nem] -->
  <div class="main-visual-box<!-- BEGIN main_visual_content_position:veil --> is-{main_visual_content_position}<!-- END main_visual_content_position:veil --> js-contrast-color" data-black-color="var(--color-primary)" data-white-color="#fff"<!-- BEGIN bg_color:veil --> style="background: rgb({main_visual_bg_color_red} {main_visual_bg_color_green} {main_visual_bg_color_blue} / {main_visual_bg_color_alpha}%)"<!-- END bg_color:veil -->>
    <!-- BEGIN main-visual-copy:veil -->
    <div>
      <!-- BEGIN main_visual_copy_main:veil -->
      <h1 class="main-visual-catch">{main_visual_copy_main}[raw|nl2br]</h1><!-- END main_visual_copy_main:veil -->
      <!-- BEGIN main_visual_copy_sub:veil -->
      <p class="main-visual-catch-sub">{main_visual_copy_sub}[raw|nl2br]</p><!-- END main_visual_copy_sub:veil -->
    </div>
    <!-- END main-visual-copy:veil -->
    <!-- BEGIN main-visual-link:veil -->
    <div class="main-visual-links">
      <!-- BEGIN main-visual-link01:veil -->
      <a href="{main_visual_link1_href}" class="button"><span>{main_visual_link1_text}</span></a>
      <!-- END main-visual-link01:veil -->
      <!-- BEGIN main-visual-link02:veil -->
      <a href="{main_visual_link2_href}" class="button is-bg-white-bordered"><span>{main_visual_link2_text}</span></a>
      <!-- END main-visual-link02:veil -->
    </div>
    <!-- END main-visual-link:veil -->
  </div>
  <!-- END_IF -->
  <!-- END_IF -->
  <!-- END main_visual:loop -->

  <!-- ELSE -->

  <!-- 背景画像が複数枚設定されている場合 -->
  <div id="main-visual-slider" class="splide main-visual-slider" role="group">
    <div class="splide__track">
      <div class="splide__list">
        <!-- BEGIN main_visual:loop -->
        <!-- BEGIN_IF [{main_visual_display}/eq/1] -->
        <div class="splide__slide">
          <!-- BEGIN_IF [{main_visual_copy_main}[delnl]/nem/_or_/{main_visual_copy_sub}[delnl]/nem/_or_/{main_visual_link1_href}/nem/_or_/{main_visual_link2_href}/nem] -->
          <div class="main-visual-box<!-- BEGIN main_visual_content_position:veil --> is-{main_visual_content_position}<!-- END main_visual_content_position:veil --> js-contrast-color" data-black-color="var(--color-primary)" data-white-color="#fff"<!-- BEGIN bg_color:veil --> style="background: rgb({main_visual_bg_color_red} {main_visual_bg_color_green} {main_visual_bg_color_blue} / {main_visual_bg_color_alpha}%)"<!-- END bg_color:veil -->>
            <!-- BEGIN main-visual-copy:veil -->
            <div>
              <!-- BEGIN main_visual_copy_main:veil -->
              <h1 class="main-visual-catch">{main_visual_copy_main}[raw|nl2br]</h1><!-- END main_visual_copy_main:veil -->
              <!-- BEGIN main_visual_copy_sub:veil -->
              <p class="main-visual-catch-sub">{main_visual_copy_sub}[raw|nl2br]</p><!-- END main_visual_copy_sub:veil -->
            </div>
            <!-- END main-visual-copy:veil -->
            <!-- BEGIN main-visual-link:veil -->
            <div class="main-visual-links">
              <!-- BEGIN main-visual-link01:veil -->
              <a href="{main_visual_link1_href}" class="button">{main_visual_link1_text}</a>
              <!-- END main-visual-link01:veil -->
              <!-- BEGIN main-visual-link02:veil -->
              <a href="{main_visual_link2_href}" class="button is-bg-white-bordered">{main_visual_link2_text}</a>
              <!-- END main-visual-link02:veil -->
            </div>
            <!-- END main-visual-link:veil -->
          </div>
          <!-- END_IF -->
          <picture>
            <!-- BEGIN main_visual_bg_image_sp:veil -->
            <source srcset="%{HTTP_MEDIA_ARCHIVES_DIR}{main_visual_bg_image_sp@path}" media="(max-width: 767px)" />
            <!-- END main_visual_bg_image_sp:veil -->
            <img src="%{HTTP_MEDIA_ARCHIVES_DIR}{main_visual_bg_image@path}" alt="{main_visual_bg_image@alt}">
          </picture>
        </div>
        <!-- END_IF -->
        <!-- END main_visual:loop -->
      </div>
    </div>
    <div class="splide__controls">
      <div class="splide__pagination"></div>
      <button class="splide__toggle">
        <span class="splide__toggle__play"></span>
        <span class="splide__toggle__pause"></span>
      </button>
    </div>
  </div>

  <!-- END_IF -->
</section>
<!-- END_MODULE Module_Field -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const mainVisualSlider = document.querySelector('#main-visual-slider');
    if (!mainVisualSlider) return;

    <!-- BEGIN_MODULE Module_Field id="{{module_id}}" -->
    <!-- BEGIN_IF [<!-- BEGIN main_visual:loop -->{main_visual_display}<!-- END main_visual:loop -->/neq/1] -->
    new Splide(mainVisualSlider, {
      <!-- BEGIN main_visual_slider_type:veil -->
      type: '{main_visual_slider_type}',<!-- END main_visual_slider_type:veil -->
      autoplay: true,<!-- BEGIN main_visual_slider_interval:veil -->
      interval: {main_visual_slider_interval},<!-- END main_visual_slider_interval:veil --><!-- BEGIN main_visual_slider_speed:veil -->
      speed: {main_visual_slider_speed},<!-- END main_visual_slider_speed:veil -->
      arrows: false,
      pagination: true,
      perPage: 1,
      perMove: 1,
      focus: 0,
      rewind: true,
    }).mount();
    <!-- END_IF -->
    <!-- END_MODULE Module_Field -->
  });
</script>
